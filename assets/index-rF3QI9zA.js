var qB=Object.defineProperty;var $B=(i,t,e)=>t in i?qB(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var _=(i,t,e)=>$B(i,typeof t!="symbol"?t+"":t,e);function GB(i,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in i)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(i,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();function op(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var nw={exports:{}},Du={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bk;function jB(){if(bk)return Du;bk=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,s,o){var r=null;if(o!==void 0&&(r=""+o),s.key!==void 0&&(r=""+s.key),"key"in s){o={};for(var a in s)a!=="key"&&(o[a]=s[a])}else o=s;return s=o.ref,{$$typeof:i,type:n,key:r,ref:s!==void 0?s:null,props:o}}return Du.Fragment=t,Du.jsx=e,Du.jsxs=e,Du}var _k;function KB(){return _k||(_k=1,nw.exports=jB()),nw.exports}var A=KB(),iw={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wk;function ZB(){if(wk)return je;wk=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),r=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;function p(N){return N===null||typeof N!="object"?null:(N=m&&N[m]||N["@@iterator"],typeof N=="function"?N:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,x={};function k(N,se,be){this.props=N,this.context=se,this.refs=x,this.updater=be||v}k.prototype.isReactComponent={},k.prototype.setState=function(N,se){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,se,"setState")},k.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function S(){}S.prototype=k.prototype;function I(N,se,be){this.props=N,this.context=se,this.refs=x,this.updater=be||v}var P=I.prototype=new S;P.constructor=I,C(P,k.prototype),P.isPureReactComponent=!0;var O=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},Y=Object.prototype.hasOwnProperty;function F(N,se,be,ue,G,W){return be=W.ref,{$$typeof:i,type:N,key:se,ref:be!==void 0?be:null,props:W}}function j(N,se){return F(N.type,se,void 0,void 0,void 0,N.props)}function U(N){return typeof N=="object"&&N!==null&&N.$$typeof===i}function X(N){var se={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(be){return se[be]})}var ae=/\/+/g;function me(N,se){return typeof N=="object"&&N!==null&&N.key!=null?X(""+N.key):se.toString(36)}function Ae(){}function ze(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(Ae,Ae):(N.status="pending",N.then(function(se){N.status==="pending"&&(N.status="fulfilled",N.value=se)},function(se){N.status==="pending"&&(N.status="rejected",N.reason=se)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function we(N,se,be,ue,G){var W=typeof N;(W==="undefined"||W==="boolean")&&(N=null);var Q=!1;if(N===null)Q=!0;else switch(W){case"bigint":case"string":case"number":Q=!0;break;case"object":switch(N.$$typeof){case i:case t:Q=!0;break;case h:return Q=N._init,we(Q(N._payload),se,be,ue,G)}}if(Q)return G=G(N),Q=ue===""?"."+me(N,0):ue,O(G)?(be="",Q!=null&&(be=Q.replace(ae,"$&/")+"/"),we(G,se,be,"",function(Ce){return Ce})):G!=null&&(U(G)&&(G=j(G,be+(G.key==null||N&&N.key===G.key?"":(""+G.key).replace(ae,"$&/")+"/")+Q)),se.push(G)),1;Q=0;var ve=ue===""?".":ue+":";if(O(N))for(var pe=0;pe<N.length;pe++)ue=N[pe],W=ve+me(ue,pe),Q+=we(ue,se,be,W,G);else if(pe=p(N),typeof pe=="function")for(N=pe.call(N),pe=0;!(ue=N.next()).done;)ue=ue.value,W=ve+me(ue,pe++),Q+=we(ue,se,be,W,G);else if(W==="object"){if(typeof N.then=="function")return we(ze(N),se,be,ue,G);throw se=String(N),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Q}function B(N,se,be){if(N==null)return N;var ue=[],G=0;return we(N,ue,"","",function(W){return se.call(be,W,G++)}),ue}function le(N){if(N._status===-1){var se=N._result;se=se(),se.then(function(be){(N._status===0||N._status===-1)&&(N._status=1,N._result=be)},function(be){(N._status===0||N._status===-1)&&(N._status=2,N._result=be)}),N._status===-1&&(N._status=0,N._result=se)}if(N._status===1)return N._result.default;throw N._result}var he=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function De(){}return je.Children={map:B,forEach:function(N,se,be){B(N,function(){se.apply(this,arguments)},be)},count:function(N){var se=0;return B(N,function(){se++}),se},toArray:function(N){return B(N,function(se){return se})||[]},only:function(N){if(!U(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},je.Component=k,je.Fragment=e,je.Profiler=s,je.PureComponent=I,je.StrictMode=n,je.Suspense=l,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,je.__COMPILER_RUNTIME={__proto__:null,c:function(N){return D.H.useMemoCache(N)}},je.cache=function(N){return function(){return N.apply(null,arguments)}},je.cloneElement=function(N,se,be){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var ue=C({},N.props),G=N.key,W=void 0;if(se!=null)for(Q in se.ref!==void 0&&(W=void 0),se.key!==void 0&&(G=""+se.key),se)!Y.call(se,Q)||Q==="key"||Q==="__self"||Q==="__source"||Q==="ref"&&se.ref===void 0||(ue[Q]=se[Q]);var Q=arguments.length-2;if(Q===1)ue.children=be;else if(1<Q){for(var ve=Array(Q),pe=0;pe<Q;pe++)ve[pe]=arguments[pe+2];ue.children=ve}return F(N.type,G,void 0,void 0,W,ue)},je.createContext=function(N){return N={$$typeof:r,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:o,_context:N},N},je.createElement=function(N,se,be){var ue,G={},W=null;if(se!=null)for(ue in se.key!==void 0&&(W=""+se.key),se)Y.call(se,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(G[ue]=se[ue]);var Q=arguments.length-2;if(Q===1)G.children=be;else if(1<Q){for(var ve=Array(Q),pe=0;pe<Q;pe++)ve[pe]=arguments[pe+2];G.children=ve}if(N&&N.defaultProps)for(ue in Q=N.defaultProps,Q)G[ue]===void 0&&(G[ue]=Q[ue]);return F(N,W,void 0,void 0,null,G)},je.createRef=function(){return{current:null}},je.forwardRef=function(N){return{$$typeof:a,render:N}},je.isValidElement=U,je.lazy=function(N){return{$$typeof:h,_payload:{_status:-1,_result:N},_init:le}},je.memo=function(N,se){return{$$typeof:u,type:N,compare:se===void 0?null:se}},je.startTransition=function(N){var se=D.T,be={};D.T=be;try{var ue=N(),G=D.S;G!==null&&G(be,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(De,he)}catch(W){he(W)}finally{D.T=se}},je.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},je.use=function(N){return D.H.use(N)},je.useActionState=function(N,se,be){return D.H.useActionState(N,se,be)},je.useCallback=function(N,se){return D.H.useCallback(N,se)},je.useContext=function(N){return D.H.useContext(N)},je.useDebugValue=function(){},je.useDeferredValue=function(N,se){return D.H.useDeferredValue(N,se)},je.useEffect=function(N,se,be){var ue=D.H;if(typeof be=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ue.useEffect(N,se)},je.useId=function(){return D.H.useId()},je.useImperativeHandle=function(N,se,be){return D.H.useImperativeHandle(N,se,be)},je.useInsertionEffect=function(N,se){return D.H.useInsertionEffect(N,se)},je.useLayoutEffect=function(N,se){return D.H.useLayoutEffect(N,se)},je.useMemo=function(N,se){return D.H.useMemo(N,se)},je.useOptimistic=function(N,se){return D.H.useOptimistic(N,se)},je.useReducer=function(N,se,be){return D.H.useReducer(N,se,be)},je.useRef=function(N){return D.H.useRef(N)},je.useState=function(N){return D.H.useState(N)},je.useSyncExternalStore=function(N,se,be){return D.H.useSyncExternalStore(N,se,be)},je.useTransition=function(){return D.H.useTransition()},je.version="19.1.0",je}var yk;function zv(){return yk||(yk=1,iw.exports=ZB()),iw.exports}var H=zv();const So=op(H);var sw={exports:{}},Ou={},ow={exports:{}},rw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vk;function YB(){return vk||(vk=1,function(i){function t(B,le){var he=B.length;B.push(le);e:for(;0<he;){var De=he-1>>>1,N=B[De];if(0<s(N,le))B[De]=le,B[he]=N,he=De;else break e}}function e(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var le=B[0],he=B.pop();if(he!==le){B[0]=he;e:for(var De=0,N=B.length,se=N>>>1;De<se;){var be=2*(De+1)-1,ue=B[be],G=be+1,W=B[G];if(0>s(ue,he))G<N&&0>s(W,ue)?(B[De]=W,B[G]=he,De=G):(B[De]=ue,B[be]=he,De=be);else if(G<N&&0>s(W,he))B[De]=W,B[G]=he,De=G;else break e}}return le}function s(B,le){var he=B.sortIndex-le.sortIndex;return he!==0?he:B.id-le.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var r=Date,a=r.now();i.unstable_now=function(){return r.now()-a}}var l=[],u=[],h=1,m=null,p=3,v=!1,C=!1,x=!1,k=!1,S=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function O(B){for(var le=e(u);le!==null;){if(le.callback===null)n(u);else if(le.startTime<=B)n(u),le.sortIndex=le.expirationTime,t(l,le);else break;le=e(u)}}function D(B){if(x=!1,O(B),!C)if(e(l)!==null)C=!0,Y||(Y=!0,me());else{var le=e(u);le!==null&&we(D,le.startTime-B)}}var Y=!1,F=-1,j=5,U=-1;function X(){return k?!0:!(i.unstable_now()-U<j)}function ae(){if(k=!1,Y){var B=i.unstable_now();U=B;var le=!0;try{e:{C=!1,x&&(x=!1,I(F),F=-1),v=!0;var he=p;try{t:{for(O(B),m=e(l);m!==null&&!(m.expirationTime>B&&X());){var De=m.callback;if(typeof De=="function"){m.callback=null,p=m.priorityLevel;var N=De(m.expirationTime<=B);if(B=i.unstable_now(),typeof N=="function"){m.callback=N,O(B),le=!0;break t}m===e(l)&&n(l),O(B)}else n(l);m=e(l)}if(m!==null)le=!0;else{var se=e(u);se!==null&&we(D,se.startTime-B),le=!1}}break e}finally{m=null,p=he,v=!1}le=void 0}}finally{le?me():Y=!1}}}var me;if(typeof P=="function")me=function(){P(ae)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,ze=Ae.port2;Ae.port1.onmessage=ae,me=function(){ze.postMessage(null)}}else me=function(){S(ae,0)};function we(B,le){F=S(function(){B(i.unstable_now())},le)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(B){B.callback=null},i.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<B?Math.floor(1e3/B):5},i.unstable_getCurrentPriorityLevel=function(){return p},i.unstable_next=function(B){switch(p){case 1:case 2:case 3:var le=3;break;default:le=p}var he=p;p=le;try{return B()}finally{p=he}},i.unstable_requestPaint=function(){k=!0},i.unstable_runWithPriority=function(B,le){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var he=p;p=B;try{return le()}finally{p=he}},i.unstable_scheduleCallback=function(B,le,he){var De=i.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?De+he:De):he=De,B){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=he+N,B={id:h++,callback:le,priorityLevel:B,startTime:he,expirationTime:N,sortIndex:-1},he>De?(B.sortIndex=he,t(u,B),e(l)===null&&B===e(u)&&(x?(I(F),F=-1):x=!0,we(D,he-De))):(B.sortIndex=N,t(l,B),C||v||(C=!0,Y||(Y=!0,me()))),B},i.unstable_shouldYield=X,i.unstable_wrapCallback=function(B){var le=p;return function(){var he=p;p=le;try{return B.apply(this,arguments)}finally{p=he}}}}(rw)),rw}var Ck;function JB(){return Ck||(Ck=1,ow.exports=YB()),ow.exports}var aw={exports:{}},zn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tk;function XB(){if(Tk)return zn;Tk=1;var i=zv();function t(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(l,u,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:l,containerInfo:u,implementation:h}}var r=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return zn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,zn.createPortal=function(l,u){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return o(l,u,null,h)},zn.flushSync=function(l){var u=r.T,h=n.p;try{if(r.T=null,n.p=2,l)return l()}finally{r.T=u,n.p=h,n.d.f()}},zn.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(l,u))},zn.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},zn.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var h=u.as,m=a(h,u.crossOrigin),p=typeof u.integrity=="string"?u.integrity:void 0,v=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;h==="style"?n.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:m,integrity:p,fetchPriority:v}):h==="script"&&n.d.X(l,{crossOrigin:m,integrity:p,fetchPriority:v,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},zn.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var h=a(u.as,u.crossOrigin);n.d.M(l,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(l)},zn.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var h=u.as,m=a(h,u.crossOrigin);n.d.L(l,h,{crossOrigin:m,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},zn.preloadModule=function(l,u){if(typeof l=="string")if(u){var h=a(u.as,u.crossOrigin);n.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(l)},zn.requestFormReset=function(l){n.d.r(l)},zn.unstable_batchedUpdates=function(l,u){return l(u)},zn.useFormState=function(l,u,h){return r.H.useFormState(l,u,h)},zn.useFormStatus=function(){return r.H.useHostTransitionStatus()},zn.version="19.1.0",zn}var xk;function QB(){if(xk)return aw.exports;xk=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),aw.exports=XB(),aw.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kk;function e3(){if(kk)return Ou;kk=1;var i=JB(),t=zv(),e=QB();function n(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function o(c){var d=c,f=c;if(c.alternate)for(;d.return;)d=d.return;else{c=d;do d=c,(d.flags&4098)!==0&&(f=d.return),c=d.return;while(c)}return d.tag===3?f:null}function r(c){if(c.tag===13){var d=c.memoizedState;if(d===null&&(c=c.alternate,c!==null&&(d=c.memoizedState)),d!==null)return d.dehydrated}return null}function a(c){if(o(c)!==c)throw Error(n(188))}function l(c){var d=c.alternate;if(!d){if(d=o(c),d===null)throw Error(n(188));return d!==c?null:c}for(var f=c,g=d;;){var y=f.return;if(y===null)break;var T=y.alternate;if(T===null){if(g=y.return,g!==null){f=g;continue}break}if(y.child===T.child){for(T=y.child;T;){if(T===f)return a(y),c;if(T===g)return a(y),d;T=T.sibling}throw Error(n(188))}if(f.return!==g.return)f=y,g=T;else{for(var E=!1,R=y.child;R;){if(R===f){E=!0,f=y,g=T;break}if(R===g){E=!0,g=y,f=T;break}R=R.sibling}if(!E){for(R=T.child;R;){if(R===f){E=!0,f=T,g=y;break}if(R===g){E=!0,g=T,f=y;break}R=R.sibling}if(!E)throw Error(n(189))}}if(f.alternate!==g)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?c:d}function u(c){var d=c.tag;if(d===5||d===26||d===27||d===6)return c;for(c=c.child;c!==null;){if(d=u(c),d!==null)return d;c=c.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),I=Symbol.for("react.consumer"),P=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),X=Symbol.for("react.memo_cache_sentinel"),ae=Symbol.iterator;function me(c){return c===null||typeof c!="object"?null:(c=ae&&c[ae]||c["@@iterator"],typeof c=="function"?c:null)}var Ae=Symbol.for("react.client.reference");function ze(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===Ae?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case C:return"Fragment";case k:return"Profiler";case x:return"StrictMode";case D:return"Suspense";case Y:return"SuspenseList";case U:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case v:return"Portal";case P:return(c.displayName||"Context")+".Provider";case I:return(c._context.displayName||"Context")+".Consumer";case O:var d=c.render;return c=c.displayName,c||(c=d.displayName||d.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case F:return d=c.displayName||null,d!==null?d:ze(c.type)||"Memo";case j:d=c._payload,c=c._init;try{return ze(c(d))}catch{}}return null}var we=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},De=[],N=-1;function se(c){return{current:c}}function be(c){0>N||(c.current=De[N],De[N]=null,N--)}function ue(c,d){N++,De[N]=c.current,c.current=d}var G=se(null),W=se(null),Q=se(null),ve=se(null);function pe(c,d){switch(ue(Q,d),ue(W,c),ue(G,null),d.nodeType){case 9:case 11:c=(c=d.documentElement)&&(c=c.namespaceURI)?$x(c):0;break;default:if(c=d.tagName,d=d.namespaceURI)d=$x(d),c=Gx(d,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}be(G),ue(G,c)}function Ce(){be(G),be(W),be(Q)}function _e(c){c.memoizedState!==null&&ue(ve,c);var d=G.current,f=Gx(d,c.type);d!==f&&(ue(W,c),ue(G,f))}function Me(c){W.current===c&&(be(G),be(W)),ve.current===c&&(be(ve),Iu._currentValue=he)}var Re=Object.prototype.hasOwnProperty,it=i.unstable_scheduleCallback,nt=i.unstable_cancelCallback,Bn=i.unstable_shouldYield,_n=i.unstable_requestPaint,He=i.unstable_now,An=i.unstable_getCurrentPriorityLevel,ct=i.unstable_ImmediatePriority,gt=i.unstable_UserBlockingPriority,xi=i.unstable_NormalPriority,ri=i.unstable_LowPriority,un=i.unstable_IdlePriority,st=i.log,dn=i.unstable_setDisableYieldValue,Ge=null,Pt=null;function xt(c){if(typeof st=="function"&&dn(c),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(Ge,c)}catch{}}var jt=Math.clz32?Math.clz32:ft,Zs=Math.log,Qa=Math.LN2;function ft(c){return c>>>=0,c===0?32:31-(Zs(c)/Qa|0)|0}var ut=256,qr=4194304;function Rn(c){var d=c&42;if(d!==0)return d;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function el(c,d,f){var g=c.pendingLanes;if(g===0)return 0;var y=0,T=c.suspendedLanes,E=c.pingedLanes;c=c.warmLanes;var R=g&134217727;return R!==0?(g=R&~T,g!==0?y=Rn(g):(E&=R,E!==0?y=Rn(E):f||(f=R&~c,f!==0&&(y=Rn(f))))):(R=g&~T,R!==0?y=Rn(R):E!==0?y=Rn(E):f||(f=g&~c,f!==0&&(y=Rn(f)))),y===0?0:d!==0&&d!==y&&(d&T)===0&&(T=y&-y,f=d&-d,T>=f||T===32&&(f&4194048)!==0)?d:y}function Ys(c,d){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&d)===0}function PO(c,d){switch(c){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function A1(){var c=ut;return ut<<=1,(ut&4194048)===0&&(ut=256),c}function R1(){var c=qr;return qr<<=1,(qr&62914560)===0&&(qr=4194304),c}function $p(c){for(var d=[],f=0;31>f;f++)d.push(c);return d}function Uc(c,d){c.pendingLanes|=d,d!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function MO(c,d,f,g,y,T){var E=c.pendingLanes;c.pendingLanes=f,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=f,c.entangledLanes&=f,c.errorRecoveryDisabledLanes&=f,c.shellSuspendCounter=0;var R=c.entanglements,M=c.expirationTimes,$=c.hiddenUpdates;for(f=E&~f;0<f;){var ne=31-jt(f),oe=1<<ne;R[ne]=0,M[ne]=-1;var K=$[ne];if(K!==null)for($[ne]=null,ne=0;ne<K.length;ne++){var J=K[ne];J!==null&&(J.lane&=-536870913)}f&=~oe}g!==0&&I1(c,g,0),T!==0&&y===0&&c.tag!==0&&(c.suspendedLanes|=T&~(E&~d))}function I1(c,d,f){c.pendingLanes|=d,c.suspendedLanes&=~d;var g=31-jt(d);c.entangledLanes|=d,c.entanglements[g]=c.entanglements[g]|1073741824|f&4194090}function P1(c,d){var f=c.entangledLanes|=d;for(c=c.entanglements;f;){var g=31-jt(f),y=1<<g;y&d|c[g]&d&&(c[g]|=d),f&=~y}}function Gp(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function jp(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function M1(){var c=le.p;return c!==0?c:(c=window.event,c===void 0?32:dk(c.type))}function VO(c,d){var f=le.p;try{return le.p=c,d()}finally{le.p=f}}var Wo=Math.random().toString(36).slice(2),Fn="__reactFiber$"+Wo,ai="__reactProps$"+Wo,tl="__reactContainer$"+Wo,Kp="__reactEvents$"+Wo,NO="__reactListeners$"+Wo,DO="__reactHandles$"+Wo,V1="__reactResources$"+Wo,zc="__reactMarker$"+Wo;function Zp(c){delete c[Fn],delete c[ai],delete c[Kp],delete c[NO],delete c[DO]}function nl(c){var d=c[Fn];if(d)return d;for(var f=c.parentNode;f;){if(d=f[tl]||f[Fn]){if(f=d.alternate,d.child!==null||f!==null&&f.child!==null)for(c=Yx(c);c!==null;){if(f=c[Fn])return f;c=Yx(c)}return d}c=f,f=c.parentNode}return null}function il(c){if(c=c[Fn]||c[tl]){var d=c.tag;if(d===5||d===6||d===13||d===26||d===27||d===3)return c}return null}function Hc(c){var d=c.tag;if(d===5||d===26||d===27||d===6)return c.stateNode;throw Error(n(33))}function sl(c){var d=c[V1];return d||(d=c[V1]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function wn(c){c[zc]=!0}var N1=new Set,D1={};function $r(c,d){ol(c,d),ol(c+"Capture",d)}function ol(c,d){for(D1[c]=d,c=0;c<d.length;c++)N1.add(d[c])}var OO=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),O1={},L1={};function LO(c){return Re.call(L1,c)?!0:Re.call(O1,c)?!1:OO.test(c)?L1[c]=!0:(O1[c]=!0,!1)}function Oh(c,d,f){if(LO(d))if(f===null)c.removeAttribute(d);else{switch(typeof f){case"undefined":case"function":case"symbol":c.removeAttribute(d);return;case"boolean":var g=d.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){c.removeAttribute(d);return}}c.setAttribute(d,""+f)}}function Lh(c,d,f){if(f===null)c.removeAttribute(d);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(d);return}c.setAttribute(d,""+f)}}function Js(c,d,f,g){if(g===null)c.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(f);return}c.setAttributeNS(d,f,""+g)}}var Yp,B1;function rl(c){if(Yp===void 0)try{throw Error()}catch(f){var d=f.stack.trim().match(/\n( *(at )?)/);Yp=d&&d[1]||"",B1=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yp+c+B1}var Jp=!1;function Xp(c,d){if(!c||Jp)return"";Jp=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(d){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(J){var K=J}Reflect.construct(c,[],oe)}else{try{oe.call()}catch(J){K=J}c.call(oe.prototype)}}else{try{throw Error()}catch(J){K=J}(oe=c())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(J){if(J&&K&&typeof J.stack=="string")return[J.stack,K.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=g.DetermineComponentFrameRoot(),E=T[0],R=T[1];if(E&&R){var M=E.split(`
`),$=R.split(`
`);for(y=g=0;g<M.length&&!M[g].includes("DetermineComponentFrameRoot");)g++;for(;y<$.length&&!$[y].includes("DetermineComponentFrameRoot");)y++;if(g===M.length||y===$.length)for(g=M.length-1,y=$.length-1;1<=g&&0<=y&&M[g]!==$[y];)y--;for(;1<=g&&0<=y;g--,y--)if(M[g]!==$[y]){if(g!==1||y!==1)do if(g--,y--,0>y||M[g]!==$[y]){var ne=`
`+M[g].replace(" at new "," at ");return c.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",c.displayName)),ne}while(1<=g&&0<=y);break}}}finally{Jp=!1,Error.prepareStackTrace=f}return(f=c?c.displayName||c.name:"")?rl(f):""}function BO(c){switch(c.tag){case 26:case 27:case 5:return rl(c.type);case 16:return rl("Lazy");case 13:return rl("Suspense");case 19:return rl("SuspenseList");case 0:case 15:return Xp(c.type,!1);case 11:return Xp(c.type.render,!1);case 1:return Xp(c.type,!0);case 31:return rl("Activity");default:return""}}function F1(c){try{var d="";do d+=BO(c),c=c.return;while(c);return d}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function Fi(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function U1(c){var d=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function FO(c){var d=U1(c)?"checked":"value",f=Object.getOwnPropertyDescriptor(c.constructor.prototype,d),g=""+c[d];if(!c.hasOwnProperty(d)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var y=f.get,T=f.set;return Object.defineProperty(c,d,{configurable:!0,get:function(){return y.call(this)},set:function(E){g=""+E,T.call(this,E)}}),Object.defineProperty(c,d,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(E){g=""+E},stopTracking:function(){c._valueTracker=null,delete c[d]}}}}function Bh(c){c._valueTracker||(c._valueTracker=FO(c))}function z1(c){if(!c)return!1;var d=c._valueTracker;if(!d)return!0;var f=d.getValue(),g="";return c&&(g=U1(c)?c.checked?"true":"false":c.value),c=g,c!==f?(d.setValue(c),!0):!1}function Fh(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var UO=/[\n"\\]/g;function Ui(c){return c.replace(UO,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Qp(c,d,f,g,y,T,E,R){c.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?c.type=E:c.removeAttribute("type"),d!=null?E==="number"?(d===0&&c.value===""||c.value!=d)&&(c.value=""+Fi(d)):c.value!==""+Fi(d)&&(c.value=""+Fi(d)):E!=="submit"&&E!=="reset"||c.removeAttribute("value"),d!=null?eb(c,E,Fi(d)):f!=null?eb(c,E,Fi(f)):g!=null&&c.removeAttribute("value"),y==null&&T!=null&&(c.defaultChecked=!!T),y!=null&&(c.checked=y&&typeof y!="function"&&typeof y!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?c.name=""+Fi(R):c.removeAttribute("name")}function H1(c,d,f,g,y,T,E,R){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(c.type=T),d!=null||f!=null){if(!(T!=="submit"&&T!=="reset"||d!=null))return;f=f!=null?""+Fi(f):"",d=d!=null?""+Fi(d):f,R||d===c.value||(c.value=d),c.defaultValue=d}g=g??y,g=typeof g!="function"&&typeof g!="symbol"&&!!g,c.checked=R?c.checked:!!g,c.defaultChecked=!!g,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(c.name=E)}function eb(c,d,f){d==="number"&&Fh(c.ownerDocument)===c||c.defaultValue===""+f||(c.defaultValue=""+f)}function al(c,d,f,g){if(c=c.options,d){d={};for(var y=0;y<f.length;y++)d["$"+f[y]]=!0;for(f=0;f<c.length;f++)y=d.hasOwnProperty("$"+c[f].value),c[f].selected!==y&&(c[f].selected=y),y&&g&&(c[f].defaultSelected=!0)}else{for(f=""+Fi(f),d=null,y=0;y<c.length;y++){if(c[y].value===f){c[y].selected=!0,g&&(c[y].defaultSelected=!0);return}d!==null||c[y].disabled||(d=c[y])}d!==null&&(d.selected=!0)}}function W1(c,d,f){if(d!=null&&(d=""+Fi(d),d!==c.value&&(c.value=d),f==null)){c.defaultValue!==d&&(c.defaultValue=d);return}c.defaultValue=f!=null?""+Fi(f):""}function q1(c,d,f,g){if(d==null){if(g!=null){if(f!=null)throw Error(n(92));if(we(g)){if(1<g.length)throw Error(n(93));g=g[0]}f=g}f==null&&(f=""),d=f}f=Fi(d),c.defaultValue=f,g=c.textContent,g===f&&g!==""&&g!==null&&(c.value=g)}function ll(c,d){if(d){var f=c.firstChild;if(f&&f===c.lastChild&&f.nodeType===3){f.nodeValue=d;return}}c.textContent=d}var zO=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $1(c,d,f){var g=d.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?c.setProperty(d,""):d==="float"?c.cssFloat="":c[d]="":g?c.setProperty(d,f):typeof f!="number"||f===0||zO.has(d)?d==="float"?c.cssFloat=f:c[d]=(""+f).trim():c[d]=f+"px"}function G1(c,d,f){if(d!=null&&typeof d!="object")throw Error(n(62));if(c=c.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||d!=null&&d.hasOwnProperty(g)||(g.indexOf("--")===0?c.setProperty(g,""):g==="float"?c.cssFloat="":c[g]="");for(var y in d)g=d[y],d.hasOwnProperty(y)&&f[y]!==g&&$1(c,y,g)}else for(var T in d)d.hasOwnProperty(T)&&$1(c,T,d[T])}function tb(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var HO=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),WO=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Uh(c){return WO.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var nb=null;function ib(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var cl=null,ul=null;function j1(c){var d=il(c);if(d&&(c=d.stateNode)){var f=c[ai]||null;e:switch(c=d.stateNode,d.type){case"input":if(Qp(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),d=f.name,f.type==="radio"&&d!=null){for(f=c;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Ui(""+d)+'"][type="radio"]'),d=0;d<f.length;d++){var g=f[d];if(g!==c&&g.form===c.form){var y=g[ai]||null;if(!y)throw Error(n(90));Qp(g,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(d=0;d<f.length;d++)g=f[d],g.form===c.form&&z1(g)}break e;case"textarea":W1(c,f.value,f.defaultValue);break e;case"select":d=f.value,d!=null&&al(c,!!f.multiple,d,!1)}}}var sb=!1;function K1(c,d,f){if(sb)return c(d,f);sb=!0;try{var g=c(d);return g}finally{if(sb=!1,(cl!==null||ul!==null)&&(Ef(),cl&&(d=cl,c=ul,ul=cl=null,j1(d),c)))for(d=0;d<c.length;d++)j1(c[d])}}function Wc(c,d){var f=c.stateNode;if(f===null)return null;var g=f[ai]||null;if(g===null)return null;f=g[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(c=c.type,g=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!g;break e;default:c=!1}if(c)return null;if(f&&typeof f!="function")throw Error(n(231,d,typeof f));return f}var Xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ob=!1;if(Xs)try{var qc={};Object.defineProperty(qc,"passive",{get:function(){ob=!0}}),window.addEventListener("test",qc,qc),window.removeEventListener("test",qc,qc)}catch{ob=!1}var qo=null,rb=null,zh=null;function Z1(){if(zh)return zh;var c,d=rb,f=d.length,g,y="value"in qo?qo.value:qo.textContent,T=y.length;for(c=0;c<f&&d[c]===y[c];c++);var E=f-c;for(g=1;g<=E&&d[f-g]===y[T-g];g++);return zh=y.slice(c,1<g?1-g:void 0)}function Hh(c){var d=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&d===13&&(c=13)):c=d,c===10&&(c=13),32<=c||c===13?c:0}function Wh(){return!0}function Y1(){return!1}function li(c){function d(f,g,y,T,E){this._reactName=f,this._targetInst=y,this.type=g,this.nativeEvent=T,this.target=E,this.currentTarget=null;for(var R in c)c.hasOwnProperty(R)&&(f=c[R],this[R]=f?f(T):T[R]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Wh:Y1,this.isPropagationStopped=Y1,this}return h(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Wh)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Wh)},persist:function(){},isPersistent:Wh}),d}var Gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qh=li(Gr),$c=h({},Gr,{view:0,detail:0}),qO=li($c),ab,lb,Gc,$h=h({},$c,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ub,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Gc&&(Gc&&c.type==="mousemove"?(ab=c.screenX-Gc.screenX,lb=c.screenY-Gc.screenY):lb=ab=0,Gc=c),ab)},movementY:function(c){return"movementY"in c?c.movementY:lb}}),J1=li($h),$O=h({},$h,{dataTransfer:0}),GO=li($O),jO=h({},$c,{relatedTarget:0}),cb=li(jO),KO=h({},Gr,{animationName:0,elapsedTime:0,pseudoElement:0}),ZO=li(KO),YO=h({},Gr,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),JO=li(YO),XO=h({},Gr,{data:0}),X1=li(XO),QO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nL(c){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(c):(c=tL[c])?!!d[c]:!1}function ub(){return nL}var iL=h({},$c,{key:function(c){if(c.key){var d=QO[c.key]||c.key;if(d!=="Unidentified")return d}return c.type==="keypress"?(c=Hh(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?eL[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ub,charCode:function(c){return c.type==="keypress"?Hh(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Hh(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),sL=li(iL),oL=h({},$h,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Q1=li(oL),rL=h({},$c,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ub}),aL=li(rL),lL=h({},Gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),cL=li(lL),uL=h({},$h,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),dL=li(uL),hL=h({},Gr,{newState:0,oldState:0}),fL=li(hL),mL=[9,13,27,32],db=Xs&&"CompositionEvent"in window,jc=null;Xs&&"documentMode"in document&&(jc=document.documentMode);var gL=Xs&&"TextEvent"in window&&!jc,eC=Xs&&(!db||jc&&8<jc&&11>=jc),tC=" ",nC=!1;function iC(c,d){switch(c){case"keyup":return mL.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sC(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var dl=!1;function pL(c,d){switch(c){case"compositionend":return sC(d);case"keypress":return d.which!==32?null:(nC=!0,tC);case"textInput":return c=d.data,c===tC&&nC?null:c;default:return null}}function bL(c,d){if(dl)return c==="compositionend"||!db&&iC(c,d)?(c=Z1(),zh=rb=qo=null,dl=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return eC&&d.locale!=="ko"?null:d.data;default:return null}}var _L={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oC(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d==="input"?!!_L[c.type]:d==="textarea"}function rC(c,d,f,g){cl?ul?ul.push(g):ul=[g]:cl=g,d=Mf(d,"onChange"),0<d.length&&(f=new qh("onChange","change",null,f,g),c.push({event:f,listeners:d}))}var Kc=null,Zc=null;function wL(c){Ux(c,0)}function Gh(c){var d=Hc(c);if(z1(d))return c}function aC(c,d){if(c==="change")return d}var lC=!1;if(Xs){var hb;if(Xs){var fb="oninput"in document;if(!fb){var cC=document.createElement("div");cC.setAttribute("oninput","return;"),fb=typeof cC.oninput=="function"}hb=fb}else hb=!1;lC=hb&&(!document.documentMode||9<document.documentMode)}function uC(){Kc&&(Kc.detachEvent("onpropertychange",dC),Zc=Kc=null)}function dC(c){if(c.propertyName==="value"&&Gh(Zc)){var d=[];rC(d,Zc,c,ib(c)),K1(wL,d)}}function yL(c,d,f){c==="focusin"?(uC(),Kc=d,Zc=f,Kc.attachEvent("onpropertychange",dC)):c==="focusout"&&uC()}function vL(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Gh(Zc)}function CL(c,d){if(c==="click")return Gh(d)}function TL(c,d){if(c==="input"||c==="change")return Gh(d)}function xL(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var ki=typeof Object.is=="function"?Object.is:xL;function Yc(c,d){if(ki(c,d))return!0;if(typeof c!="object"||c===null||typeof d!="object"||d===null)return!1;var f=Object.keys(c),g=Object.keys(d);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var y=f[g];if(!Re.call(d,y)||!ki(c[y],d[y]))return!1}return!0}function hC(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function fC(c,d){var f=hC(c);c=0;for(var g;f;){if(f.nodeType===3){if(g=c+f.textContent.length,c<=d&&g>=d)return{node:f,offset:d-c};c=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=hC(f)}}function mC(c,d){return c&&d?c===d?!0:c&&c.nodeType===3?!1:d&&d.nodeType===3?mC(c,d.parentNode):"contains"in c?c.contains(d):c.compareDocumentPosition?!!(c.compareDocumentPosition(d)&16):!1:!1}function gC(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var d=Fh(c.document);d instanceof c.HTMLIFrameElement;){try{var f=typeof d.contentWindow.location.href=="string"}catch{f=!1}if(f)c=d.contentWindow;else break;d=Fh(c.document)}return d}function mb(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d&&(d==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||d==="textarea"||c.contentEditable==="true")}var kL=Xs&&"documentMode"in document&&11>=document.documentMode,hl=null,gb=null,Jc=null,pb=!1;function pC(c,d,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;pb||hl==null||hl!==Fh(g)||(g=hl,"selectionStart"in g&&mb(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Jc&&Yc(Jc,g)||(Jc=g,g=Mf(gb,"onSelect"),0<g.length&&(d=new qh("onSelect","select",null,d,f),c.push({event:d,listeners:g}),d.target=hl)))}function jr(c,d){var f={};return f[c.toLowerCase()]=d.toLowerCase(),f["Webkit"+c]="webkit"+d,f["Moz"+c]="moz"+d,f}var fl={animationend:jr("Animation","AnimationEnd"),animationiteration:jr("Animation","AnimationIteration"),animationstart:jr("Animation","AnimationStart"),transitionrun:jr("Transition","TransitionRun"),transitionstart:jr("Transition","TransitionStart"),transitioncancel:jr("Transition","TransitionCancel"),transitionend:jr("Transition","TransitionEnd")},bb={},bC={};Xs&&(bC=document.createElement("div").style,"AnimationEvent"in window||(delete fl.animationend.animation,delete fl.animationiteration.animation,delete fl.animationstart.animation),"TransitionEvent"in window||delete fl.transitionend.transition);function Kr(c){if(bb[c])return bb[c];if(!fl[c])return c;var d=fl[c],f;for(f in d)if(d.hasOwnProperty(f)&&f in bC)return bb[c]=d[f];return c}var _C=Kr("animationend"),wC=Kr("animationiteration"),yC=Kr("animationstart"),EL=Kr("transitionrun"),SL=Kr("transitionstart"),AL=Kr("transitioncancel"),vC=Kr("transitionend"),CC=new Map,_b="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_b.push("scrollEnd");function us(c,d){CC.set(c,d),$r(d,[c])}var TC=new WeakMap;function zi(c,d){if(typeof c=="object"&&c!==null){var f=TC.get(c);return f!==void 0?f:(d={value:c,source:d,stack:F1(d)},TC.set(c,d),d)}return{value:c,source:d,stack:F1(d)}}var Hi=[],ml=0,wb=0;function jh(){for(var c=ml,d=wb=ml=0;d<c;){var f=Hi[d];Hi[d++]=null;var g=Hi[d];Hi[d++]=null;var y=Hi[d];Hi[d++]=null;var T=Hi[d];if(Hi[d++]=null,g!==null&&y!==null){var E=g.pending;E===null?y.next=y:(y.next=E.next,E.next=y),g.pending=y}T!==0&&xC(f,y,T)}}function Kh(c,d,f,g){Hi[ml++]=c,Hi[ml++]=d,Hi[ml++]=f,Hi[ml++]=g,wb|=g,c.lanes|=g,c=c.alternate,c!==null&&(c.lanes|=g)}function yb(c,d,f,g){return Kh(c,d,f,g),Zh(c)}function gl(c,d){return Kh(c,null,null,d),Zh(c)}function xC(c,d,f){c.lanes|=f;var g=c.alternate;g!==null&&(g.lanes|=f);for(var y=!1,T=c.return;T!==null;)T.childLanes|=f,g=T.alternate,g!==null&&(g.childLanes|=f),T.tag===22&&(c=T.stateNode,c===null||c._visibility&1||(y=!0)),c=T,T=T.return;return c.tag===3?(T=c.stateNode,y&&d!==null&&(y=31-jt(f),c=T.hiddenUpdates,g=c[y],g===null?c[y]=[d]:g.push(d),d.lane=f|536870912),T):null}function Zh(c){if(50<Cu)throw Cu=0,E_=null,Error(n(185));for(var d=c.return;d!==null;)c=d,d=c.return;return c.tag===3?c.stateNode:null}var pl={};function RL(c,d,f,g){this.tag=c,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ei(c,d,f,g){return new RL(c,d,f,g)}function vb(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Qs(c,d){var f=c.alternate;return f===null?(f=Ei(c.tag,d,c.key,c.mode),f.elementType=c.elementType,f.type=c.type,f.stateNode=c.stateNode,f.alternate=c,c.alternate=f):(f.pendingProps=d,f.type=c.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=c.flags&65011712,f.childLanes=c.childLanes,f.lanes=c.lanes,f.child=c.child,f.memoizedProps=c.memoizedProps,f.memoizedState=c.memoizedState,f.updateQueue=c.updateQueue,d=c.dependencies,f.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},f.sibling=c.sibling,f.index=c.index,f.ref=c.ref,f.refCleanup=c.refCleanup,f}function kC(c,d){c.flags&=65011714;var f=c.alternate;return f===null?(c.childLanes=0,c.lanes=d,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=f.childLanes,c.lanes=f.lanes,c.child=f.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=f.memoizedProps,c.memoizedState=f.memoizedState,c.updateQueue=f.updateQueue,c.type=f.type,d=f.dependencies,c.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),c}function Yh(c,d,f,g,y,T){var E=0;if(g=c,typeof c=="function")vb(c)&&(E=1);else if(typeof c=="string")E=PB(c,f,G.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case U:return c=Ei(31,f,d,y),c.elementType=U,c.lanes=T,c;case C:return Zr(f.children,y,T,d);case x:E=8,y|=24;break;case k:return c=Ei(12,f,d,y|2),c.elementType=k,c.lanes=T,c;case D:return c=Ei(13,f,d,y),c.elementType=D,c.lanes=T,c;case Y:return c=Ei(19,f,d,y),c.elementType=Y,c.lanes=T,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case S:case P:E=10;break e;case I:E=9;break e;case O:E=11;break e;case F:E=14;break e;case j:E=16,g=null;break e}E=29,f=Error(n(130,c===null?"null":typeof c,"")),g=null}return d=Ei(E,f,d,y),d.elementType=c,d.type=g,d.lanes=T,d}function Zr(c,d,f,g){return c=Ei(7,c,g,d),c.lanes=f,c}function Cb(c,d,f){return c=Ei(6,c,null,d),c.lanes=f,c}function Tb(c,d,f){return d=Ei(4,c.children!==null?c.children:[],c.key,d),d.lanes=f,d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},d}var bl=[],_l=0,Jh=null,Xh=0,Wi=[],qi=0,Yr=null,eo=1,to="";function Jr(c,d){bl[_l++]=Xh,bl[_l++]=Jh,Jh=c,Xh=d}function EC(c,d,f){Wi[qi++]=eo,Wi[qi++]=to,Wi[qi++]=Yr,Yr=c;var g=eo;c=to;var y=32-jt(g)-1;g&=~(1<<y),f+=1;var T=32-jt(d)+y;if(30<T){var E=y-y%5;T=(g&(1<<E)-1).toString(32),g>>=E,y-=E,eo=1<<32-jt(d)+y|f<<y|g,to=T+c}else eo=1<<T|f<<y|g,to=c}function xb(c){c.return!==null&&(Jr(c,1),EC(c,1,0))}function kb(c){for(;c===Jh;)Jh=bl[--_l],bl[_l]=null,Xh=bl[--_l],bl[_l]=null;for(;c===Yr;)Yr=Wi[--qi],Wi[qi]=null,to=Wi[--qi],Wi[qi]=null,eo=Wi[--qi],Wi[qi]=null}var Xn=null,Kt=null,mt=!1,Xr=null,Ss=!1,Eb=Error(n(519));function Qr(c){var d=Error(n(418,""));throw eu(zi(d,c)),Eb}function SC(c){var d=c.stateNode,f=c.type,g=c.memoizedProps;switch(d[Fn]=c,d[ai]=g,f){case"dialog":et("cancel",d),et("close",d);break;case"iframe":case"object":case"embed":et("load",d);break;case"video":case"audio":for(f=0;f<xu.length;f++)et(xu[f],d);break;case"source":et("error",d);break;case"img":case"image":case"link":et("error",d),et("load",d);break;case"details":et("toggle",d);break;case"input":et("invalid",d),H1(d,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),Bh(d);break;case"select":et("invalid",d);break;case"textarea":et("invalid",d),q1(d,g.value,g.defaultValue,g.children),Bh(d)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||d.textContent===""+f||g.suppressHydrationWarning===!0||qx(d.textContent,f)?(g.popover!=null&&(et("beforetoggle",d),et("toggle",d)),g.onScroll!=null&&et("scroll",d),g.onScrollEnd!=null&&et("scrollend",d),g.onClick!=null&&(d.onclick=Vf),d=!0):d=!1,d||Qr(c)}function AC(c){for(Xn=c.return;Xn;)switch(Xn.tag){case 5:case 13:Ss=!1;return;case 27:case 3:Ss=!0;return;default:Xn=Xn.return}}function Xc(c){if(c!==Xn)return!1;if(!mt)return AC(c),mt=!0,!1;var d=c.tag,f;if((f=d!==3&&d!==27)&&((f=d===5)&&(f=c.type,f=!(f!=="form"&&f!=="button")||H_(c.type,c.memoizedProps)),f=!f),f&&Kt&&Qr(c),AC(c),d===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(n(317));e:{for(c=c.nextSibling,d=0;c;){if(c.nodeType===8)if(f=c.data,f==="/$"){if(d===0){Kt=hs(c.nextSibling);break e}d--}else f!=="$"&&f!=="$!"&&f!=="$?"||d++;c=c.nextSibling}Kt=null}}else d===27?(d=Kt,rr(c.type)?(c=G_,G_=null,Kt=c):Kt=d):Kt=Xn?hs(c.stateNode.nextSibling):null;return!0}function Qc(){Kt=Xn=null,mt=!1}function RC(){var c=Xr;return c!==null&&(di===null?di=c:di.push.apply(di,c),Xr=null),c}function eu(c){Xr===null?Xr=[c]:Xr.push(c)}var Sb=se(null),ea=null,no=null;function $o(c,d,f){ue(Sb,d._currentValue),d._currentValue=f}function io(c){c._currentValue=Sb.current,be(Sb)}function Ab(c,d,f){for(;c!==null;){var g=c.alternate;if((c.childLanes&d)!==d?(c.childLanes|=d,g!==null&&(g.childLanes|=d)):g!==null&&(g.childLanes&d)!==d&&(g.childLanes|=d),c===f)break;c=c.return}}function Rb(c,d,f,g){var y=c.child;for(y!==null&&(y.return=c);y!==null;){var T=y.dependencies;if(T!==null){var E=y.child;T=T.firstContext;e:for(;T!==null;){var R=T;T=y;for(var M=0;M<d.length;M++)if(R.context===d[M]){T.lanes|=f,R=T.alternate,R!==null&&(R.lanes|=f),Ab(T.return,f,c),g||(E=null);break e}T=R.next}}else if(y.tag===18){if(E=y.return,E===null)throw Error(n(341));E.lanes|=f,T=E.alternate,T!==null&&(T.lanes|=f),Ab(E,f,c),E=null}else E=y.child;if(E!==null)E.return=y;else for(E=y;E!==null;){if(E===c){E=null;break}if(y=E.sibling,y!==null){y.return=E.return,E=y;break}E=E.return}y=E}}function tu(c,d,f,g){c=null;for(var y=d,T=!1;y!==null;){if(!T){if((y.flags&524288)!==0)T=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var E=y.alternate;if(E===null)throw Error(n(387));if(E=E.memoizedProps,E!==null){var R=y.type;ki(y.pendingProps.value,E.value)||(c!==null?c.push(R):c=[R])}}else if(y===ve.current){if(E=y.alternate,E===null)throw Error(n(387));E.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(c!==null?c.push(Iu):c=[Iu])}y=y.return}c!==null&&Rb(d,c,f,g),d.flags|=262144}function Qh(c){for(c=c.firstContext;c!==null;){if(!ki(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function ta(c){ea=c,no=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function Un(c){return IC(ea,c)}function ef(c,d){return ea===null&&ta(c),IC(c,d)}function IC(c,d){var f=d._currentValue;if(d={context:d,memoizedValue:f,next:null},no===null){if(c===null)throw Error(n(308));no=d,c.dependencies={lanes:0,firstContext:d},c.flags|=524288}else no=no.next=d;return f}var IL=typeof AbortController<"u"?AbortController:function(){var c=[],d=this.signal={aborted:!1,addEventListener:function(f,g){c.push(g)}};this.abort=function(){d.aborted=!0,c.forEach(function(f){return f()})}},PL=i.unstable_scheduleCallback,ML=i.unstable_NormalPriority,hn={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ib(){return{controller:new IL,data:new Map,refCount:0}}function nu(c){c.refCount--,c.refCount===0&&PL(ML,function(){c.controller.abort()})}var iu=null,Pb=0,wl=0,yl=null;function VL(c,d){if(iu===null){var f=iu=[];Pb=0,wl=V_(),yl={status:"pending",value:void 0,then:function(g){f.push(g)}}}return Pb++,d.then(PC,PC),d}function PC(){if(--Pb===0&&iu!==null){yl!==null&&(yl.status="fulfilled");var c=iu;iu=null,wl=0,yl=null;for(var d=0;d<c.length;d++)(0,c[d])()}}function NL(c,d){var f=[],g={status:"pending",value:null,reason:null,then:function(y){f.push(y)}};return c.then(function(){g.status="fulfilled",g.value=d;for(var y=0;y<f.length;y++)(0,f[y])(d)},function(y){for(g.status="rejected",g.reason=y,y=0;y<f.length;y++)(0,f[y])(void 0)}),g}var MC=B.S;B.S=function(c,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&VL(c,d),MC!==null&&MC(c,d)};var na=se(null);function Mb(){var c=na.current;return c!==null?c:Ot.pooledCache}function tf(c,d){d===null?ue(na,na.current):ue(na,d.pool)}function VC(){var c=Mb();return c===null?null:{parent:hn._currentValue,pool:c}}var su=Error(n(460)),NC=Error(n(474)),nf=Error(n(542)),Vb={then:function(){}};function DC(c){return c=c.status,c==="fulfilled"||c==="rejected"}function sf(){}function OC(c,d,f){switch(f=c[f],f===void 0?c.push(d):f!==d&&(d.then(sf,sf),d=f),d.status){case"fulfilled":return d.value;case"rejected":throw c=d.reason,BC(c),c;default:if(typeof d.status=="string")d.then(sf,sf);else{if(c=Ot,c!==null&&100<c.shellSuspendCounter)throw Error(n(482));c=d,c.status="pending",c.then(function(g){if(d.status==="pending"){var y=d;y.status="fulfilled",y.value=g}},function(g){if(d.status==="pending"){var y=d;y.status="rejected",y.reason=g}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw c=d.reason,BC(c),c}throw ou=d,su}}var ou=null;function LC(){if(ou===null)throw Error(n(459));var c=ou;return ou=null,c}function BC(c){if(c===su||c===nf)throw Error(n(483))}var Go=!1;function Nb(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Db(c,d){c=c.updateQueue,d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function jo(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Ko(c,d,f){var g=c.updateQueue;if(g===null)return null;if(g=g.shared,(yt&2)!==0){var y=g.pending;return y===null?d.next=d:(d.next=y.next,y.next=d),g.pending=d,d=Zh(c),xC(c,null,f),d}return Kh(c,g,d,f),Zh(c)}function ru(c,d,f){if(d=d.updateQueue,d!==null&&(d=d.shared,(f&4194048)!==0)){var g=d.lanes;g&=c.pendingLanes,f|=g,d.lanes=f,P1(c,f)}}function Ob(c,d){var f=c.updateQueue,g=c.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var y=null,T=null;if(f=f.firstBaseUpdate,f!==null){do{var E={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};T===null?y=T=E:T=T.next=E,f=f.next}while(f!==null);T===null?y=T=d:T=T.next=d}else y=T=d;f={baseState:g.baseState,firstBaseUpdate:y,lastBaseUpdate:T,shared:g.shared,callbacks:g.callbacks},c.updateQueue=f;return}c=f.lastBaseUpdate,c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=d}var Lb=!1;function au(){if(Lb){var c=yl;if(c!==null)throw c}}function lu(c,d,f,g){Lb=!1;var y=c.updateQueue;Go=!1;var T=y.firstBaseUpdate,E=y.lastBaseUpdate,R=y.shared.pending;if(R!==null){y.shared.pending=null;var M=R,$=M.next;M.next=null,E===null?T=$:E.next=$,E=M;var ne=c.alternate;ne!==null&&(ne=ne.updateQueue,R=ne.lastBaseUpdate,R!==E&&(R===null?ne.firstBaseUpdate=$:R.next=$,ne.lastBaseUpdate=M))}if(T!==null){var oe=y.baseState;E=0,ne=$=M=null,R=T;do{var K=R.lane&-536870913,J=K!==R.lane;if(J?(ot&K)===K:(g&K)===K){K!==0&&K===wl&&(Lb=!0),ne!==null&&(ne=ne.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Le=c,Ve=R;K=d;var St=f;switch(Ve.tag){case 1:if(Le=Ve.payload,typeof Le=="function"){oe=Le.call(St,oe,K);break e}oe=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=Ve.payload,K=typeof Le=="function"?Le.call(St,oe,K):Le,K==null)break e;oe=h({},oe,K);break e;case 2:Go=!0}}K=R.callback,K!==null&&(c.flags|=64,J&&(c.flags|=8192),J=y.callbacks,J===null?y.callbacks=[K]:J.push(K))}else J={lane:K,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ne===null?($=ne=J,M=oe):ne=ne.next=J,E|=K;if(R=R.next,R===null){if(R=y.shared.pending,R===null)break;J=R,R=J.next,J.next=null,y.lastBaseUpdate=J,y.shared.pending=null}}while(!0);ne===null&&(M=oe),y.baseState=M,y.firstBaseUpdate=$,y.lastBaseUpdate=ne,T===null&&(y.shared.lanes=0),nr|=E,c.lanes=E,c.memoizedState=oe}}function FC(c,d){if(typeof c!="function")throw Error(n(191,c));c.call(d)}function UC(c,d){var f=c.callbacks;if(f!==null)for(c.callbacks=null,c=0;c<f.length;c++)FC(f[c],d)}var vl=se(null),of=se(0);function zC(c,d){c=uo,ue(of,c),ue(vl,d),uo=c|d.baseLanes}function Bb(){ue(of,uo),ue(vl,vl.current)}function Fb(){uo=of.current,be(vl),be(of)}var Zo=0,Je=null,kt=null,an=null,rf=!1,Cl=!1,ia=!1,af=0,cu=0,Tl=null,DL=0;function tn(){throw Error(n(321))}function Ub(c,d){if(d===null)return!1;for(var f=0;f<d.length&&f<c.length;f++)if(!ki(c[f],d[f]))return!1;return!0}function zb(c,d,f,g,y,T){return Zo=T,Je=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,B.H=c===null||c.memoizedState===null?xT:kT,ia=!1,T=f(g,y),ia=!1,Cl&&(T=WC(d,f,g,y)),HC(c),T}function HC(c){B.H=ff;var d=kt!==null&&kt.next!==null;if(Zo=0,an=kt=Je=null,rf=!1,cu=0,Tl=null,d)throw Error(n(300));c===null||yn||(c=c.dependencies,c!==null&&Qh(c)&&(yn=!0))}function WC(c,d,f,g){Je=c;var y=0;do{if(Cl&&(Tl=null),cu=0,Cl=!1,25<=y)throw Error(n(301));if(y+=1,an=kt=null,c.updateQueue!=null){var T=c.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}B.H=HL,T=d(f,g)}while(Cl);return T}function OL(){var c=B.H,d=c.useState()[0];return d=typeof d.then=="function"?uu(d):d,c=c.useState()[0],(kt!==null?kt.memoizedState:null)!==c&&(Je.flags|=1024),d}function Hb(){var c=af!==0;return af=0,c}function Wb(c,d,f){d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~f}function qb(c){if(rf){for(c=c.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}rf=!1}Zo=0,an=kt=Je=null,Cl=!1,cu=af=0,Tl=null}function ci(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?Je.memoizedState=an=c:an=an.next=c,an}function ln(){if(kt===null){var c=Je.alternate;c=c!==null?c.memoizedState:null}else c=kt.next;var d=an===null?Je.memoizedState:an.next;if(d!==null)an=d,kt=c;else{if(c===null)throw Je.alternate===null?Error(n(467)):Error(n(310));kt=c,c={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},an===null?Je.memoizedState=an=c:an=an.next=c}return an}function $b(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function uu(c){var d=cu;return cu+=1,Tl===null&&(Tl=[]),c=OC(Tl,c,d),d=Je,(an===null?d.memoizedState:an.next)===null&&(d=d.alternate,B.H=d===null||d.memoizedState===null?xT:kT),c}function lf(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return uu(c);if(c.$$typeof===P)return Un(c)}throw Error(n(438,String(c)))}function Gb(c){var d=null,f=Je.updateQueue;if(f!==null&&(d=f.memoCache),d==null){var g=Je.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(d={data:g.data.map(function(y){return y.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),f===null&&(f=$b(),Je.updateQueue=f),f.memoCache=d,f=d.data[d.index],f===void 0)for(f=d.data[d.index]=Array(c),g=0;g<c;g++)f[g]=X;return d.index++,f}function so(c,d){return typeof d=="function"?d(c):d}function cf(c){var d=ln();return jb(d,kt,c)}function jb(c,d,f){var g=c.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=f;var y=c.baseQueue,T=g.pending;if(T!==null){if(y!==null){var E=y.next;y.next=T.next,T.next=E}d.baseQueue=y=T,g.pending=null}if(T=c.baseState,y===null)c.memoizedState=T;else{d=y.next;var R=E=null,M=null,$=d,ne=!1;do{var oe=$.lane&-536870913;if(oe!==$.lane?(ot&oe)===oe:(Zo&oe)===oe){var K=$.revertLane;if(K===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),oe===wl&&(ne=!0);else if((Zo&K)===K){$=$.next,K===wl&&(ne=!0);continue}else oe={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},M===null?(R=M=oe,E=T):M=M.next=oe,Je.lanes|=K,nr|=K;oe=$.action,ia&&f(T,oe),T=$.hasEagerState?$.eagerState:f(T,oe)}else K={lane:oe,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},M===null?(R=M=K,E=T):M=M.next=K,Je.lanes|=oe,nr|=oe;$=$.next}while($!==null&&$!==d);if(M===null?E=T:M.next=R,!ki(T,c.memoizedState)&&(yn=!0,ne&&(f=yl,f!==null)))throw f;c.memoizedState=T,c.baseState=E,c.baseQueue=M,g.lastRenderedState=T}return y===null&&(g.lanes=0),[c.memoizedState,g.dispatch]}function Kb(c){var d=ln(),f=d.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=c;var g=f.dispatch,y=f.pending,T=d.memoizedState;if(y!==null){f.pending=null;var E=y=y.next;do T=c(T,E.action),E=E.next;while(E!==y);ki(T,d.memoizedState)||(yn=!0),d.memoizedState=T,d.baseQueue===null&&(d.baseState=T),f.lastRenderedState=T}return[T,g]}function qC(c,d,f){var g=Je,y=ln(),T=mt;if(T){if(f===void 0)throw Error(n(407));f=f()}else f=d();var E=!ki((kt||y).memoizedState,f);E&&(y.memoizedState=f,yn=!0),y=y.queue;var R=jC.bind(null,g,y,c);if(du(2048,8,R,[c]),y.getSnapshot!==d||E||an!==null&&an.memoizedState.tag&1){if(g.flags|=2048,xl(9,uf(),GC.bind(null,g,y,f,d),null),Ot===null)throw Error(n(349));T||(Zo&124)!==0||$C(g,d,f)}return f}function $C(c,d,f){c.flags|=16384,c={getSnapshot:d,value:f},d=Je.updateQueue,d===null?(d=$b(),Je.updateQueue=d,d.stores=[c]):(f=d.stores,f===null?d.stores=[c]:f.push(c))}function GC(c,d,f,g){d.value=f,d.getSnapshot=g,KC(d)&&ZC(c)}function jC(c,d,f){return f(function(){KC(d)&&ZC(c)})}function KC(c){var d=c.getSnapshot;c=c.value;try{var f=d();return!ki(c,f)}catch{return!0}}function ZC(c){var d=gl(c,2);d!==null&&Pi(d,c,2)}function Zb(c){var d=ci();if(typeof c=="function"){var f=c;if(c=f(),ia){xt(!0);try{f()}finally{xt(!1)}}}return d.memoizedState=d.baseState=c,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:c},d}function YC(c,d,f,g){return c.baseState=f,jb(c,kt,typeof g=="function"?g:so)}function LL(c,d,f,g,y){if(hf(c))throw Error(n(485));if(c=d.action,c!==null){var T={payload:y,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){T.listeners.push(E)}};B.T!==null?f(!0):T.isTransition=!1,g(T),f=d.pending,f===null?(T.next=d.pending=T,JC(d,T)):(T.next=f.next,d.pending=f.next=T)}}function JC(c,d){var f=d.action,g=d.payload,y=c.state;if(d.isTransition){var T=B.T,E={};B.T=E;try{var R=f(y,g),M=B.S;M!==null&&M(E,R),XC(c,d,R)}catch($){Yb(c,d,$)}finally{B.T=T}}else try{T=f(y,g),XC(c,d,T)}catch($){Yb(c,d,$)}}function XC(c,d,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){QC(c,d,g)},function(g){return Yb(c,d,g)}):QC(c,d,f)}function QC(c,d,f){d.status="fulfilled",d.value=f,eT(d),c.state=f,d=c.pending,d!==null&&(f=d.next,f===d?c.pending=null:(f=f.next,d.next=f,JC(c,f)))}function Yb(c,d,f){var g=c.pending;if(c.pending=null,g!==null){g=g.next;do d.status="rejected",d.reason=f,eT(d),d=d.next;while(d!==g)}c.action=null}function eT(c){c=c.listeners;for(var d=0;d<c.length;d++)(0,c[d])()}function tT(c,d){return d}function nT(c,d){if(mt){var f=Ot.formState;if(f!==null){e:{var g=Je;if(mt){if(Kt){t:{for(var y=Kt,T=Ss;y.nodeType!==8;){if(!T){y=null;break t}if(y=hs(y.nextSibling),y===null){y=null;break t}}T=y.data,y=T==="F!"||T==="F"?y:null}if(y){Kt=hs(y.nextSibling),g=y.data==="F!";break e}}Qr(g)}g=!1}g&&(d=f[0])}}return f=ci(),f.memoizedState=f.baseState=d,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tT,lastRenderedState:d},f.queue=g,f=vT.bind(null,Je,g),g.dispatch=f,g=Zb(!1),T=t_.bind(null,Je,!1,g.queue),g=ci(),y={state:d,dispatch:null,action:c,pending:null},g.queue=y,f=LL.bind(null,Je,y,T,f),y.dispatch=f,g.memoizedState=c,[d,f,!1]}function iT(c){var d=ln();return sT(d,kt,c)}function sT(c,d,f){if(d=jb(c,d,tT)[0],c=cf(so)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var g=uu(d)}catch(E){throw E===su?nf:E}else g=d;d=ln();var y=d.queue,T=y.dispatch;return f!==d.memoizedState&&(Je.flags|=2048,xl(9,uf(),BL.bind(null,y,f),null)),[g,T,c]}function BL(c,d){c.action=d}function oT(c){var d=ln(),f=kt;if(f!==null)return sT(d,f,c);ln(),d=d.memoizedState,f=ln();var g=f.queue.dispatch;return f.memoizedState=c,[d,g,!1]}function xl(c,d,f,g){return c={tag:c,create:f,deps:g,inst:d,next:null},d=Je.updateQueue,d===null&&(d=$b(),Je.updateQueue=d),f=d.lastEffect,f===null?d.lastEffect=c.next=c:(g=f.next,f.next=c,c.next=g,d.lastEffect=c),c}function uf(){return{destroy:void 0,resource:void 0}}function rT(){return ln().memoizedState}function df(c,d,f,g){var y=ci();g=g===void 0?null:g,Je.flags|=c,y.memoizedState=xl(1|d,uf(),f,g)}function du(c,d,f,g){var y=ln();g=g===void 0?null:g;var T=y.memoizedState.inst;kt!==null&&g!==null&&Ub(g,kt.memoizedState.deps)?y.memoizedState=xl(d,T,f,g):(Je.flags|=c,y.memoizedState=xl(1|d,T,f,g))}function aT(c,d){df(8390656,8,c,d)}function lT(c,d){du(2048,8,c,d)}function cT(c,d){return du(4,2,c,d)}function uT(c,d){return du(4,4,c,d)}function dT(c,d){if(typeof d=="function"){c=c();var f=d(c);return function(){typeof f=="function"?f():d(null)}}if(d!=null)return c=c(),d.current=c,function(){d.current=null}}function hT(c,d,f){f=f!=null?f.concat([c]):null,du(4,4,dT.bind(null,d,c),f)}function Jb(){}function fT(c,d){var f=ln();d=d===void 0?null:d;var g=f.memoizedState;return d!==null&&Ub(d,g[1])?g[0]:(f.memoizedState=[c,d],c)}function mT(c,d){var f=ln();d=d===void 0?null:d;var g=f.memoizedState;if(d!==null&&Ub(d,g[1]))return g[0];if(g=c(),ia){xt(!0);try{c()}finally{xt(!1)}}return f.memoizedState=[g,d],g}function Xb(c,d,f){return f===void 0||(Zo&1073741824)!==0?c.memoizedState=d:(c.memoizedState=f,c=bx(),Je.lanes|=c,nr|=c,f)}function gT(c,d,f,g){return ki(f,d)?f:vl.current!==null?(c=Xb(c,f,g),ki(c,d)||(yn=!0),c):(Zo&42)===0?(yn=!0,c.memoizedState=f):(c=bx(),Je.lanes|=c,nr|=c,d)}function pT(c,d,f,g,y){var T=le.p;le.p=T!==0&&8>T?T:8;var E=B.T,R={};B.T=R,t_(c,!1,d,f);try{var M=y(),$=B.S;if($!==null&&$(R,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var ne=NL(M,g);hu(c,d,ne,Ii(c))}else hu(c,d,g,Ii(c))}catch(oe){hu(c,d,{then:function(){},status:"rejected",reason:oe},Ii())}finally{le.p=T,B.T=E}}function FL(){}function Qb(c,d,f,g){if(c.tag!==5)throw Error(n(476));var y=bT(c).queue;pT(c,y,d,he,f===null?FL:function(){return _T(c),f(g)})}function bT(c){var d=c.memoizedState;if(d!==null)return d;d={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:he},next:null};var f={};return d.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:f},next:null},c.memoizedState=d,c=c.alternate,c!==null&&(c.memoizedState=d),d}function _T(c){var d=bT(c).next.queue;hu(c,d,{},Ii())}function e_(){return Un(Iu)}function wT(){return ln().memoizedState}function yT(){return ln().memoizedState}function UL(c){for(var d=c.return;d!==null;){switch(d.tag){case 24:case 3:var f=Ii();c=jo(f);var g=Ko(d,c,f);g!==null&&(Pi(g,d,f),ru(g,d,f)),d={cache:Ib()},c.payload=d;return}d=d.return}}function zL(c,d,f){var g=Ii();f={lane:g,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},hf(c)?CT(d,f):(f=yb(c,d,f,g),f!==null&&(Pi(f,c,g),TT(f,d,g)))}function vT(c,d,f){var g=Ii();hu(c,d,f,g)}function hu(c,d,f,g){var y={lane:g,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(hf(c))CT(d,y);else{var T=c.alternate;if(c.lanes===0&&(T===null||T.lanes===0)&&(T=d.lastRenderedReducer,T!==null))try{var E=d.lastRenderedState,R=T(E,f);if(y.hasEagerState=!0,y.eagerState=R,ki(R,E))return Kh(c,d,y,0),Ot===null&&jh(),!1}catch{}finally{}if(f=yb(c,d,y,g),f!==null)return Pi(f,c,g),TT(f,d,g),!0}return!1}function t_(c,d,f,g){if(g={lane:2,revertLane:V_(),action:g,hasEagerState:!1,eagerState:null,next:null},hf(c)){if(d)throw Error(n(479))}else d=yb(c,f,g,2),d!==null&&Pi(d,c,2)}function hf(c){var d=c.alternate;return c===Je||d!==null&&d===Je}function CT(c,d){Cl=rf=!0;var f=c.pending;f===null?d.next=d:(d.next=f.next,f.next=d),c.pending=d}function TT(c,d,f){if((f&4194048)!==0){var g=d.lanes;g&=c.pendingLanes,f|=g,d.lanes=f,P1(c,f)}}var ff={readContext:Un,use:lf,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useLayoutEffect:tn,useInsertionEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useSyncExternalStore:tn,useId:tn,useHostTransitionStatus:tn,useFormState:tn,useActionState:tn,useOptimistic:tn,useMemoCache:tn,useCacheRefresh:tn},xT={readContext:Un,use:lf,useCallback:function(c,d){return ci().memoizedState=[c,d===void 0?null:d],c},useContext:Un,useEffect:aT,useImperativeHandle:function(c,d,f){f=f!=null?f.concat([c]):null,df(4194308,4,dT.bind(null,d,c),f)},useLayoutEffect:function(c,d){return df(4194308,4,c,d)},useInsertionEffect:function(c,d){df(4,2,c,d)},useMemo:function(c,d){var f=ci();d=d===void 0?null:d;var g=c();if(ia){xt(!0);try{c()}finally{xt(!1)}}return f.memoizedState=[g,d],g},useReducer:function(c,d,f){var g=ci();if(f!==void 0){var y=f(d);if(ia){xt(!0);try{f(d)}finally{xt(!1)}}}else y=d;return g.memoizedState=g.baseState=y,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:y},g.queue=c,c=c.dispatch=zL.bind(null,Je,c),[g.memoizedState,c]},useRef:function(c){var d=ci();return c={current:c},d.memoizedState=c},useState:function(c){c=Zb(c);var d=c.queue,f=vT.bind(null,Je,d);return d.dispatch=f,[c.memoizedState,f]},useDebugValue:Jb,useDeferredValue:function(c,d){var f=ci();return Xb(f,c,d)},useTransition:function(){var c=Zb(!1);return c=pT.bind(null,Je,c.queue,!0,!1),ci().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,d,f){var g=Je,y=ci();if(mt){if(f===void 0)throw Error(n(407));f=f()}else{if(f=d(),Ot===null)throw Error(n(349));(ot&124)!==0||$C(g,d,f)}y.memoizedState=f;var T={value:f,getSnapshot:d};return y.queue=T,aT(jC.bind(null,g,T,c),[c]),g.flags|=2048,xl(9,uf(),GC.bind(null,g,T,f,d),null),f},useId:function(){var c=ci(),d=Ot.identifierPrefix;if(mt){var f=to,g=eo;f=(g&~(1<<32-jt(g)-1)).toString(32)+f,d="«"+d+"R"+f,f=af++,0<f&&(d+="H"+f.toString(32)),d+="»"}else f=DL++,d="«"+d+"r"+f.toString(32)+"»";return c.memoizedState=d},useHostTransitionStatus:e_,useFormState:nT,useActionState:nT,useOptimistic:function(c){var d=ci();d.memoizedState=d.baseState=c;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=f,d=t_.bind(null,Je,!0,f),f.dispatch=d,[c,d]},useMemoCache:Gb,useCacheRefresh:function(){return ci().memoizedState=UL.bind(null,Je)}},kT={readContext:Un,use:lf,useCallback:fT,useContext:Un,useEffect:lT,useImperativeHandle:hT,useInsertionEffect:cT,useLayoutEffect:uT,useMemo:mT,useReducer:cf,useRef:rT,useState:function(){return cf(so)},useDebugValue:Jb,useDeferredValue:function(c,d){var f=ln();return gT(f,kt.memoizedState,c,d)},useTransition:function(){var c=cf(so)[0],d=ln().memoizedState;return[typeof c=="boolean"?c:uu(c),d]},useSyncExternalStore:qC,useId:wT,useHostTransitionStatus:e_,useFormState:iT,useActionState:iT,useOptimistic:function(c,d){var f=ln();return YC(f,kt,c,d)},useMemoCache:Gb,useCacheRefresh:yT},HL={readContext:Un,use:lf,useCallback:fT,useContext:Un,useEffect:lT,useImperativeHandle:hT,useInsertionEffect:cT,useLayoutEffect:uT,useMemo:mT,useReducer:Kb,useRef:rT,useState:function(){return Kb(so)},useDebugValue:Jb,useDeferredValue:function(c,d){var f=ln();return kt===null?Xb(f,c,d):gT(f,kt.memoizedState,c,d)},useTransition:function(){var c=Kb(so)[0],d=ln().memoizedState;return[typeof c=="boolean"?c:uu(c),d]},useSyncExternalStore:qC,useId:wT,useHostTransitionStatus:e_,useFormState:oT,useActionState:oT,useOptimistic:function(c,d){var f=ln();return kt!==null?YC(f,kt,c,d):(f.baseState=c,[c,f.queue.dispatch])},useMemoCache:Gb,useCacheRefresh:yT},kl=null,fu=0;function mf(c){var d=fu;return fu+=1,kl===null&&(kl=[]),OC(kl,c,d)}function mu(c,d){d=d.props.ref,c.ref=d!==void 0?d:null}function gf(c,d){throw d.$$typeof===m?Error(n(525)):(c=Object.prototype.toString.call(d),Error(n(31,c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c)))}function ET(c){var d=c._init;return d(c._payload)}function ST(c){function d(z,L){if(c){var q=z.deletions;q===null?(z.deletions=[L],z.flags|=16):q.push(L)}}function f(z,L){if(!c)return null;for(;L!==null;)d(z,L),L=L.sibling;return null}function g(z){for(var L=new Map;z!==null;)z.key!==null?L.set(z.key,z):L.set(z.index,z),z=z.sibling;return L}function y(z,L){return z=Qs(z,L),z.index=0,z.sibling=null,z}function T(z,L,q){return z.index=q,c?(q=z.alternate,q!==null?(q=q.index,q<L?(z.flags|=67108866,L):q):(z.flags|=67108866,L)):(z.flags|=1048576,L)}function E(z){return c&&z.alternate===null&&(z.flags|=67108866),z}function R(z,L,q,ie){return L===null||L.tag!==6?(L=Cb(q,z.mode,ie),L.return=z,L):(L=y(L,q),L.return=z,L)}function M(z,L,q,ie){var xe=q.type;return xe===C?ne(z,L,q.props.children,ie,q.key):L!==null&&(L.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===j&&ET(xe)===L.type)?(L=y(L,q.props),mu(L,q),L.return=z,L):(L=Yh(q.type,q.key,q.props,null,z.mode,ie),mu(L,q),L.return=z,L)}function $(z,L,q,ie){return L===null||L.tag!==4||L.stateNode.containerInfo!==q.containerInfo||L.stateNode.implementation!==q.implementation?(L=Tb(q,z.mode,ie),L.return=z,L):(L=y(L,q.children||[]),L.return=z,L)}function ne(z,L,q,ie,xe){return L===null||L.tag!==7?(L=Zr(q,z.mode,ie,xe),L.return=z,L):(L=y(L,q),L.return=z,L)}function oe(z,L,q){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Cb(""+L,z.mode,q),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case p:return q=Yh(L.type,L.key,L.props,null,z.mode,q),mu(q,L),q.return=z,q;case v:return L=Tb(L,z.mode,q),L.return=z,L;case j:var ie=L._init;return L=ie(L._payload),oe(z,L,q)}if(we(L)||me(L))return L=Zr(L,z.mode,q,null),L.return=z,L;if(typeof L.then=="function")return oe(z,mf(L),q);if(L.$$typeof===P)return oe(z,ef(z,L),q);gf(z,L)}return null}function K(z,L,q,ie){var xe=L!==null?L.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return xe!==null?null:R(z,L,""+q,ie);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case p:return q.key===xe?M(z,L,q,ie):null;case v:return q.key===xe?$(z,L,q,ie):null;case j:return xe=q._init,q=xe(q._payload),K(z,L,q,ie)}if(we(q)||me(q))return xe!==null?null:ne(z,L,q,ie,null);if(typeof q.then=="function")return K(z,L,mf(q),ie);if(q.$$typeof===P)return K(z,L,ef(z,q),ie);gf(z,q)}return null}function J(z,L,q,ie,xe){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return z=z.get(q)||null,R(L,z,""+ie,xe);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case p:return z=z.get(ie.key===null?q:ie.key)||null,M(L,z,ie,xe);case v:return z=z.get(ie.key===null?q:ie.key)||null,$(L,z,ie,xe);case j:var Xe=ie._init;return ie=Xe(ie._payload),J(z,L,q,ie,xe)}if(we(ie)||me(ie))return z=z.get(q)||null,ne(L,z,ie,xe,null);if(typeof ie.then=="function")return J(z,L,q,mf(ie),xe);if(ie.$$typeof===P)return J(z,L,q,ef(L,ie),xe);gf(L,ie)}return null}function Le(z,L,q,ie){for(var xe=null,Xe=null,Ie=L,Ne=L=0,Cn=null;Ie!==null&&Ne<q.length;Ne++){Ie.index>Ne?(Cn=Ie,Ie=null):Cn=Ie.sibling;var dt=K(z,Ie,q[Ne],ie);if(dt===null){Ie===null&&(Ie=Cn);break}c&&Ie&&dt.alternate===null&&d(z,Ie),L=T(dt,L,Ne),Xe===null?xe=dt:Xe.sibling=dt,Xe=dt,Ie=Cn}if(Ne===q.length)return f(z,Ie),mt&&Jr(z,Ne),xe;if(Ie===null){for(;Ne<q.length;Ne++)Ie=oe(z,q[Ne],ie),Ie!==null&&(L=T(Ie,L,Ne),Xe===null?xe=Ie:Xe.sibling=Ie,Xe=Ie);return mt&&Jr(z,Ne),xe}for(Ie=g(Ie);Ne<q.length;Ne++)Cn=J(Ie,z,Ne,q[Ne],ie),Cn!==null&&(c&&Cn.alternate!==null&&Ie.delete(Cn.key===null?Ne:Cn.key),L=T(Cn,L,Ne),Xe===null?xe=Cn:Xe.sibling=Cn,Xe=Cn);return c&&Ie.forEach(function(dr){return d(z,dr)}),mt&&Jr(z,Ne),xe}function Ve(z,L,q,ie){if(q==null)throw Error(n(151));for(var xe=null,Xe=null,Ie=L,Ne=L=0,Cn=null,dt=q.next();Ie!==null&&!dt.done;Ne++,dt=q.next()){Ie.index>Ne?(Cn=Ie,Ie=null):Cn=Ie.sibling;var dr=K(z,Ie,dt.value,ie);if(dr===null){Ie===null&&(Ie=Cn);break}c&&Ie&&dr.alternate===null&&d(z,Ie),L=T(dr,L,Ne),Xe===null?xe=dr:Xe.sibling=dr,Xe=dr,Ie=Cn}if(dt.done)return f(z,Ie),mt&&Jr(z,Ne),xe;if(Ie===null){for(;!dt.done;Ne++,dt=q.next())dt=oe(z,dt.value,ie),dt!==null&&(L=T(dt,L,Ne),Xe===null?xe=dt:Xe.sibling=dt,Xe=dt);return mt&&Jr(z,Ne),xe}for(Ie=g(Ie);!dt.done;Ne++,dt=q.next())dt=J(Ie,z,Ne,dt.value,ie),dt!==null&&(c&&dt.alternate!==null&&Ie.delete(dt.key===null?Ne:dt.key),L=T(dt,L,Ne),Xe===null?xe=dt:Xe.sibling=dt,Xe=dt);return c&&Ie.forEach(function(WB){return d(z,WB)}),mt&&Jr(z,Ne),xe}function St(z,L,q,ie){if(typeof q=="object"&&q!==null&&q.type===C&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case p:e:{for(var xe=q.key;L!==null;){if(L.key===xe){if(xe=q.type,xe===C){if(L.tag===7){f(z,L.sibling),ie=y(L,q.props.children),ie.return=z,z=ie;break e}}else if(L.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===j&&ET(xe)===L.type){f(z,L.sibling),ie=y(L,q.props),mu(ie,q),ie.return=z,z=ie;break e}f(z,L);break}else d(z,L);L=L.sibling}q.type===C?(ie=Zr(q.props.children,z.mode,ie,q.key),ie.return=z,z=ie):(ie=Yh(q.type,q.key,q.props,null,z.mode,ie),mu(ie,q),ie.return=z,z=ie)}return E(z);case v:e:{for(xe=q.key;L!==null;){if(L.key===xe)if(L.tag===4&&L.stateNode.containerInfo===q.containerInfo&&L.stateNode.implementation===q.implementation){f(z,L.sibling),ie=y(L,q.children||[]),ie.return=z,z=ie;break e}else{f(z,L);break}else d(z,L);L=L.sibling}ie=Tb(q,z.mode,ie),ie.return=z,z=ie}return E(z);case j:return xe=q._init,q=xe(q._payload),St(z,L,q,ie)}if(we(q))return Le(z,L,q,ie);if(me(q)){if(xe=me(q),typeof xe!="function")throw Error(n(150));return q=xe.call(q),Ve(z,L,q,ie)}if(typeof q.then=="function")return St(z,L,mf(q),ie);if(q.$$typeof===P)return St(z,L,ef(z,q),ie);gf(z,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,L!==null&&L.tag===6?(f(z,L.sibling),ie=y(L,q),ie.return=z,z=ie):(f(z,L),ie=Cb(q,z.mode,ie),ie.return=z,z=ie),E(z)):f(z,L)}return function(z,L,q,ie){try{fu=0;var xe=St(z,L,q,ie);return kl=null,xe}catch(Ie){if(Ie===su||Ie===nf)throw Ie;var Xe=Ei(29,Ie,null,z.mode);return Xe.lanes=ie,Xe.return=z,Xe}finally{}}}var El=ST(!0),AT=ST(!1),$i=se(null),As=null;function Yo(c){var d=c.alternate;ue(fn,fn.current&1),ue($i,c),As===null&&(d===null||vl.current!==null||d.memoizedState!==null)&&(As=c)}function RT(c){if(c.tag===22){if(ue(fn,fn.current),ue($i,c),As===null){var d=c.alternate;d!==null&&d.memoizedState!==null&&(As=c)}}else Jo()}function Jo(){ue(fn,fn.current),ue($i,$i.current)}function oo(c){be($i),As===c&&(As=null),be(fn)}var fn=se(0);function pf(c){for(var d=c;d!==null;){if(d.tag===13){var f=d.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||$_(f)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function n_(c,d,f,g){d=c.memoizedState,f=f(g,d),f=f==null?d:h({},d,f),c.memoizedState=f,c.lanes===0&&(c.updateQueue.baseState=f)}var i_={enqueueSetState:function(c,d,f){c=c._reactInternals;var g=Ii(),y=jo(g);y.payload=d,f!=null&&(y.callback=f),d=Ko(c,y,g),d!==null&&(Pi(d,c,g),ru(d,c,g))},enqueueReplaceState:function(c,d,f){c=c._reactInternals;var g=Ii(),y=jo(g);y.tag=1,y.payload=d,f!=null&&(y.callback=f),d=Ko(c,y,g),d!==null&&(Pi(d,c,g),ru(d,c,g))},enqueueForceUpdate:function(c,d){c=c._reactInternals;var f=Ii(),g=jo(f);g.tag=2,d!=null&&(g.callback=d),d=Ko(c,g,f),d!==null&&(Pi(d,c,f),ru(d,c,f))}};function IT(c,d,f,g,y,T,E){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(g,T,E):d.prototype&&d.prototype.isPureReactComponent?!Yc(f,g)||!Yc(y,T):!0}function PT(c,d,f,g){c=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(f,g),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(f,g),d.state!==c&&i_.enqueueReplaceState(d,d.state,null)}function sa(c,d){var f=d;if("ref"in d){f={};for(var g in d)g!=="ref"&&(f[g]=d[g])}if(c=c.defaultProps){f===d&&(f=h({},f));for(var y in c)f[y]===void 0&&(f[y]=c[y])}return f}var bf=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)};function MT(c){bf(c)}function VT(c){console.error(c)}function NT(c){bf(c)}function _f(c,d){try{var f=c.onUncaughtError;f(d.value,{componentStack:d.stack})}catch(g){setTimeout(function(){throw g})}}function DT(c,d,f){try{var g=c.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function s_(c,d,f){return f=jo(f),f.tag=3,f.payload={element:null},f.callback=function(){_f(c,d)},f}function OT(c){return c=jo(c),c.tag=3,c}function LT(c,d,f,g){var y=f.type.getDerivedStateFromError;if(typeof y=="function"){var T=g.value;c.payload=function(){return y(T)},c.callback=function(){DT(d,f,g)}}var E=f.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(c.callback=function(){DT(d,f,g),typeof y!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var R=g.stack;this.componentDidCatch(g.value,{componentStack:R!==null?R:""})})}function WL(c,d,f,g,y){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(d=f.alternate,d!==null&&tu(d,f,y,!0),f=$i.current,f!==null){switch(f.tag){case 13:return As===null?A_():f.alternate===null&&Zt===0&&(Zt=3),f.flags&=-257,f.flags|=65536,f.lanes=y,g===Vb?f.flags|=16384:(d=f.updateQueue,d===null?f.updateQueue=new Set([g]):d.add(g),I_(c,g,y)),!1;case 22:return f.flags|=65536,g===Vb?f.flags|=16384:(d=f.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=d):(f=d.retryQueue,f===null?d.retryQueue=new Set([g]):f.add(g)),I_(c,g,y)),!1}throw Error(n(435,f.tag))}return I_(c,g,y),A_(),!1}if(mt)return d=$i.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=y,g!==Eb&&(c=Error(n(422),{cause:g}),eu(zi(c,f)))):(g!==Eb&&(d=Error(n(423),{cause:g}),eu(zi(d,f))),c=c.current.alternate,c.flags|=65536,y&=-y,c.lanes|=y,g=zi(g,f),y=s_(c.stateNode,g,y),Ob(c,y),Zt!==4&&(Zt=2)),!1;var T=Error(n(520),{cause:g});if(T=zi(T,f),vu===null?vu=[T]:vu.push(T),Zt!==4&&(Zt=2),d===null)return!0;g=zi(g,f),f=d;do{switch(f.tag){case 3:return f.flags|=65536,c=y&-y,f.lanes|=c,c=s_(f.stateNode,g,c),Ob(f,c),!1;case 1:if(d=f.type,T=f.stateNode,(f.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ir===null||!ir.has(T))))return f.flags|=65536,y&=-y,f.lanes|=y,y=OT(y),LT(y,c,f,g),Ob(f,y),!1}f=f.return}while(f!==null);return!1}var BT=Error(n(461)),yn=!1;function In(c,d,f,g){d.child=c===null?AT(d,null,f,g):El(d,c.child,f,g)}function FT(c,d,f,g,y){f=f.render;var T=d.ref;if("ref"in g){var E={};for(var R in g)R!=="ref"&&(E[R]=g[R])}else E=g;return ta(d),g=zb(c,d,f,E,T,y),R=Hb(),c!==null&&!yn?(Wb(c,d,y),ro(c,d,y)):(mt&&R&&xb(d),d.flags|=1,In(c,d,g,y),d.child)}function UT(c,d,f,g,y){if(c===null){var T=f.type;return typeof T=="function"&&!vb(T)&&T.defaultProps===void 0&&f.compare===null?(d.tag=15,d.type=T,zT(c,d,T,g,y)):(c=Yh(f.type,null,g,d,d.mode,y),c.ref=d.ref,c.return=d,d.child=c)}if(T=c.child,!h_(c,y)){var E=T.memoizedProps;if(f=f.compare,f=f!==null?f:Yc,f(E,g)&&c.ref===d.ref)return ro(c,d,y)}return d.flags|=1,c=Qs(T,g),c.ref=d.ref,c.return=d,d.child=c}function zT(c,d,f,g,y){if(c!==null){var T=c.memoizedProps;if(Yc(T,g)&&c.ref===d.ref)if(yn=!1,d.pendingProps=g=T,h_(c,y))(c.flags&131072)!==0&&(yn=!0);else return d.lanes=c.lanes,ro(c,d,y)}return o_(c,d,f,g,y)}function HT(c,d,f){var g=d.pendingProps,y=g.children,T=c!==null?c.memoizedState:null;if(g.mode==="hidden"){if((d.flags&128)!==0){if(g=T!==null?T.baseLanes|f:f,c!==null){for(y=d.child=c.child,T=0;y!==null;)T=T|y.lanes|y.childLanes,y=y.sibling;d.childLanes=T&~g}else d.childLanes=0,d.child=null;return WT(c,d,g,f)}if((f&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},c!==null&&tf(d,T!==null?T.cachePool:null),T!==null?zC(d,T):Bb(),RT(d);else return d.lanes=d.childLanes=536870912,WT(c,d,T!==null?T.baseLanes|f:f,f)}else T!==null?(tf(d,T.cachePool),zC(d,T),Jo(),d.memoizedState=null):(c!==null&&tf(d,null),Bb(),Jo());return In(c,d,y,f),d.child}function WT(c,d,f,g){var y=Mb();return y=y===null?null:{parent:hn._currentValue,pool:y},d.memoizedState={baseLanes:f,cachePool:y},c!==null&&tf(d,null),Bb(),RT(d),c!==null&&tu(c,d,g,!0),null}function wf(c,d){var f=d.ref;if(f===null)c!==null&&c.ref!==null&&(d.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(c===null||c.ref!==f)&&(d.flags|=4194816)}}function o_(c,d,f,g,y){return ta(d),f=zb(c,d,f,g,void 0,y),g=Hb(),c!==null&&!yn?(Wb(c,d,y),ro(c,d,y)):(mt&&g&&xb(d),d.flags|=1,In(c,d,f,y),d.child)}function qT(c,d,f,g,y,T){return ta(d),d.updateQueue=null,f=WC(d,g,f,y),HC(c),g=Hb(),c!==null&&!yn?(Wb(c,d,T),ro(c,d,T)):(mt&&g&&xb(d),d.flags|=1,In(c,d,f,T),d.child)}function $T(c,d,f,g,y){if(ta(d),d.stateNode===null){var T=pl,E=f.contextType;typeof E=="object"&&E!==null&&(T=Un(E)),T=new f(g,T),d.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=i_,d.stateNode=T,T._reactInternals=d,T=d.stateNode,T.props=g,T.state=d.memoizedState,T.refs={},Nb(d),E=f.contextType,T.context=typeof E=="object"&&E!==null?Un(E):pl,T.state=d.memoizedState,E=f.getDerivedStateFromProps,typeof E=="function"&&(n_(d,f,E,g),T.state=d.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(E=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),E!==T.state&&i_.enqueueReplaceState(T,T.state,null),lu(d,g,T,y),au(),T.state=d.memoizedState),typeof T.componentDidMount=="function"&&(d.flags|=4194308),g=!0}else if(c===null){T=d.stateNode;var R=d.memoizedProps,M=sa(f,R);T.props=M;var $=T.context,ne=f.contextType;E=pl,typeof ne=="object"&&ne!==null&&(E=Un(ne));var oe=f.getDerivedStateFromProps;ne=typeof oe=="function"||typeof T.getSnapshotBeforeUpdate=="function",R=d.pendingProps!==R,ne||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(R||$!==E)&&PT(d,T,g,E),Go=!1;var K=d.memoizedState;T.state=K,lu(d,g,T,y),au(),$=d.memoizedState,R||K!==$||Go?(typeof oe=="function"&&(n_(d,f,oe,g),$=d.memoizedState),(M=Go||IT(d,f,M,g,K,$,E))?(ne||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(d.flags|=4194308)):(typeof T.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=g,d.memoizedState=$),T.props=g,T.state=$,T.context=E,g=M):(typeof T.componentDidMount=="function"&&(d.flags|=4194308),g=!1)}else{T=d.stateNode,Db(c,d),E=d.memoizedProps,ne=sa(f,E),T.props=ne,oe=d.pendingProps,K=T.context,$=f.contextType,M=pl,typeof $=="object"&&$!==null&&(M=Un($)),R=f.getDerivedStateFromProps,($=typeof R=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(E!==oe||K!==M)&&PT(d,T,g,M),Go=!1,K=d.memoizedState,T.state=K,lu(d,g,T,y),au();var J=d.memoizedState;E!==oe||K!==J||Go||c!==null&&c.dependencies!==null&&Qh(c.dependencies)?(typeof R=="function"&&(n_(d,f,R,g),J=d.memoizedState),(ne=Go||IT(d,f,ne,g,K,J,M)||c!==null&&c.dependencies!==null&&Qh(c.dependencies))?($||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(g,J,M),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(g,J,M)),typeof T.componentDidUpdate=="function"&&(d.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof T.componentDidUpdate!="function"||E===c.memoizedProps&&K===c.memoizedState||(d.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||E===c.memoizedProps&&K===c.memoizedState||(d.flags|=1024),d.memoizedProps=g,d.memoizedState=J),T.props=g,T.state=J,T.context=M,g=ne):(typeof T.componentDidUpdate!="function"||E===c.memoizedProps&&K===c.memoizedState||(d.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||E===c.memoizedProps&&K===c.memoizedState||(d.flags|=1024),g=!1)}return T=g,wf(c,d),g=(d.flags&128)!==0,T||g?(T=d.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:T.render(),d.flags|=1,c!==null&&g?(d.child=El(d,c.child,null,y),d.child=El(d,null,f,y)):In(c,d,f,y),d.memoizedState=T.state,c=d.child):c=ro(c,d,y),c}function GT(c,d,f,g){return Qc(),d.flags|=256,In(c,d,f,g),d.child}var r_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function a_(c){return{baseLanes:c,cachePool:VC()}}function l_(c,d,f){return c=c!==null?c.childLanes&~f:0,d&&(c|=Gi),c}function jT(c,d,f){var g=d.pendingProps,y=!1,T=(d.flags&128)!==0,E;if((E=T)||(E=c!==null&&c.memoizedState===null?!1:(fn.current&2)!==0),E&&(y=!0,d.flags&=-129),E=(d.flags&32)!==0,d.flags&=-33,c===null){if(mt){if(y?Yo(d):Jo(),mt){var R=Kt,M;if(M=R){e:{for(M=R,R=Ss;M.nodeType!==8;){if(!R){R=null;break e}if(M=hs(M.nextSibling),M===null){R=null;break e}}R=M}R!==null?(d.memoizedState={dehydrated:R,treeContext:Yr!==null?{id:eo,overflow:to}:null,retryLane:536870912,hydrationErrors:null},M=Ei(18,null,null,0),M.stateNode=R,M.return=d,d.child=M,Xn=d,Kt=null,M=!0):M=!1}M||Qr(d)}if(R=d.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return $_(R)?d.lanes=32:d.lanes=536870912,null;oo(d)}return R=g.children,g=g.fallback,y?(Jo(),y=d.mode,R=yf({mode:"hidden",children:R},y),g=Zr(g,y,f,null),R.return=d,g.return=d,R.sibling=g,d.child=R,y=d.child,y.memoizedState=a_(f),y.childLanes=l_(c,E,f),d.memoizedState=r_,g):(Yo(d),c_(d,R))}if(M=c.memoizedState,M!==null&&(R=M.dehydrated,R!==null)){if(T)d.flags&256?(Yo(d),d.flags&=-257,d=u_(c,d,f)):d.memoizedState!==null?(Jo(),d.child=c.child,d.flags|=128,d=null):(Jo(),y=g.fallback,R=d.mode,g=yf({mode:"visible",children:g.children},R),y=Zr(y,R,f,null),y.flags|=2,g.return=d,y.return=d,g.sibling=y,d.child=g,El(d,c.child,null,f),g=d.child,g.memoizedState=a_(f),g.childLanes=l_(c,E,f),d.memoizedState=r_,d=y);else if(Yo(d),$_(R)){if(E=R.nextSibling&&R.nextSibling.dataset,E)var $=E.dgst;E=$,g=Error(n(419)),g.stack="",g.digest=E,eu({value:g,source:null,stack:null}),d=u_(c,d,f)}else if(yn||tu(c,d,f,!1),E=(f&c.childLanes)!==0,yn||E){if(E=Ot,E!==null&&(g=f&-f,g=(g&42)!==0?1:Gp(g),g=(g&(E.suspendedLanes|f))!==0?0:g,g!==0&&g!==M.retryLane))throw M.retryLane=g,gl(c,g),Pi(E,c,g),BT;R.data==="$?"||A_(),d=u_(c,d,f)}else R.data==="$?"?(d.flags|=192,d.child=c.child,d=null):(c=M.treeContext,Kt=hs(R.nextSibling),Xn=d,mt=!0,Xr=null,Ss=!1,c!==null&&(Wi[qi++]=eo,Wi[qi++]=to,Wi[qi++]=Yr,eo=c.id,to=c.overflow,Yr=d),d=c_(d,g.children),d.flags|=4096);return d}return y?(Jo(),y=g.fallback,R=d.mode,M=c.child,$=M.sibling,g=Qs(M,{mode:"hidden",children:g.children}),g.subtreeFlags=M.subtreeFlags&65011712,$!==null?y=Qs($,y):(y=Zr(y,R,f,null),y.flags|=2),y.return=d,g.return=d,g.sibling=y,d.child=g,g=y,y=d.child,R=c.child.memoizedState,R===null?R=a_(f):(M=R.cachePool,M!==null?($=hn._currentValue,M=M.parent!==$?{parent:$,pool:$}:M):M=VC(),R={baseLanes:R.baseLanes|f,cachePool:M}),y.memoizedState=R,y.childLanes=l_(c,E,f),d.memoizedState=r_,g):(Yo(d),f=c.child,c=f.sibling,f=Qs(f,{mode:"visible",children:g.children}),f.return=d,f.sibling=null,c!==null&&(E=d.deletions,E===null?(d.deletions=[c],d.flags|=16):E.push(c)),d.child=f,d.memoizedState=null,f)}function c_(c,d){return d=yf({mode:"visible",children:d},c.mode),d.return=c,c.child=d}function yf(c,d){return c=Ei(22,c,null,d),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function u_(c,d,f){return El(d,c.child,null,f),c=c_(d,d.pendingProps.children),c.flags|=2,d.memoizedState=null,c}function KT(c,d,f){c.lanes|=d;var g=c.alternate;g!==null&&(g.lanes|=d),Ab(c.return,d,f)}function d_(c,d,f,g,y){var T=c.memoizedState;T===null?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:y}:(T.isBackwards=d,T.rendering=null,T.renderingStartTime=0,T.last=g,T.tail=f,T.tailMode=y)}function ZT(c,d,f){var g=d.pendingProps,y=g.revealOrder,T=g.tail;if(In(c,d,g.children,f),g=fn.current,(g&2)!==0)g=g&1|2,d.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=d.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&KT(c,f,d);else if(c.tag===19)KT(c,f,d);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break e;for(;c.sibling===null;){if(c.return===null||c.return===d)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}g&=1}switch(ue(fn,g),y){case"forwards":for(f=d.child,y=null;f!==null;)c=f.alternate,c!==null&&pf(c)===null&&(y=f),f=f.sibling;f=y,f===null?(y=d.child,d.child=null):(y=f.sibling,f.sibling=null),d_(d,!1,y,f,T);break;case"backwards":for(f=null,y=d.child,d.child=null;y!==null;){if(c=y.alternate,c!==null&&pf(c)===null){d.child=y;break}c=y.sibling,y.sibling=f,f=y,y=c}d_(d,!0,f,null,T);break;case"together":d_(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function ro(c,d,f){if(c!==null&&(d.dependencies=c.dependencies),nr|=d.lanes,(f&d.childLanes)===0)if(c!==null){if(tu(c,d,f,!1),(f&d.childLanes)===0)return null}else return null;if(c!==null&&d.child!==c.child)throw Error(n(153));if(d.child!==null){for(c=d.child,f=Qs(c,c.pendingProps),d.child=f,f.return=d;c.sibling!==null;)c=c.sibling,f=f.sibling=Qs(c,c.pendingProps),f.return=d;f.sibling=null}return d.child}function h_(c,d){return(c.lanes&d)!==0?!0:(c=c.dependencies,!!(c!==null&&Qh(c)))}function qL(c,d,f){switch(d.tag){case 3:pe(d,d.stateNode.containerInfo),$o(d,hn,c.memoizedState.cache),Qc();break;case 27:case 5:_e(d);break;case 4:pe(d,d.stateNode.containerInfo);break;case 10:$o(d,d.type,d.memoizedProps.value);break;case 13:var g=d.memoizedState;if(g!==null)return g.dehydrated!==null?(Yo(d),d.flags|=128,null):(f&d.child.childLanes)!==0?jT(c,d,f):(Yo(d),c=ro(c,d,f),c!==null?c.sibling:null);Yo(d);break;case 19:var y=(c.flags&128)!==0;if(g=(f&d.childLanes)!==0,g||(tu(c,d,f,!1),g=(f&d.childLanes)!==0),y){if(g)return ZT(c,d,f);d.flags|=128}if(y=d.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ue(fn,fn.current),g)break;return null;case 22:case 23:return d.lanes=0,HT(c,d,f);case 24:$o(d,hn,c.memoizedState.cache)}return ro(c,d,f)}function YT(c,d,f){if(c!==null)if(c.memoizedProps!==d.pendingProps)yn=!0;else{if(!h_(c,f)&&(d.flags&128)===0)return yn=!1,qL(c,d,f);yn=(c.flags&131072)!==0}else yn=!1,mt&&(d.flags&1048576)!==0&&EC(d,Xh,d.index);switch(d.lanes=0,d.tag){case 16:e:{c=d.pendingProps;var g=d.elementType,y=g._init;if(g=y(g._payload),d.type=g,typeof g=="function")vb(g)?(c=sa(g,c),d.tag=1,d=$T(null,d,g,c,f)):(d.tag=0,d=o_(null,d,g,c,f));else{if(g!=null){if(y=g.$$typeof,y===O){d.tag=11,d=FT(null,d,g,c,f);break e}else if(y===F){d.tag=14,d=UT(null,d,g,c,f);break e}}throw d=ze(g)||g,Error(n(306,d,""))}}return d;case 0:return o_(c,d,d.type,d.pendingProps,f);case 1:return g=d.type,y=sa(g,d.pendingProps),$T(c,d,g,y,f);case 3:e:{if(pe(d,d.stateNode.containerInfo),c===null)throw Error(n(387));g=d.pendingProps;var T=d.memoizedState;y=T.element,Db(c,d),lu(d,g,null,f);var E=d.memoizedState;if(g=E.cache,$o(d,hn,g),g!==T.cache&&Rb(d,[hn],f,!0),au(),g=E.element,T.isDehydrated)if(T={element:g,isDehydrated:!1,cache:E.cache},d.updateQueue.baseState=T,d.memoizedState=T,d.flags&256){d=GT(c,d,g,f);break e}else if(g!==y){y=zi(Error(n(424)),d),eu(y),d=GT(c,d,g,f);break e}else{switch(c=d.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(Kt=hs(c.firstChild),Xn=d,mt=!0,Xr=null,Ss=!0,f=AT(d,null,g,f),d.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Qc(),g===y){d=ro(c,d,f);break e}In(c,d,g,f)}d=d.child}return d;case 26:return wf(c,d),c===null?(f=ek(d.type,null,d.pendingProps,null))?d.memoizedState=f:mt||(f=d.type,c=d.pendingProps,g=Nf(Q.current).createElement(f),g[Fn]=d,g[ai]=c,Mn(g,f,c),wn(g),d.stateNode=g):d.memoizedState=ek(d.type,c.memoizedProps,d.pendingProps,c.memoizedState),null;case 27:return _e(d),c===null&&mt&&(g=d.stateNode=Jx(d.type,d.pendingProps,Q.current),Xn=d,Ss=!0,y=Kt,rr(d.type)?(G_=y,Kt=hs(g.firstChild)):Kt=y),In(c,d,d.pendingProps.children,f),wf(c,d),c===null&&(d.flags|=4194304),d.child;case 5:return c===null&&mt&&((y=g=Kt)&&(g=_B(g,d.type,d.pendingProps,Ss),g!==null?(d.stateNode=g,Xn=d,Kt=hs(g.firstChild),Ss=!1,y=!0):y=!1),y||Qr(d)),_e(d),y=d.type,T=d.pendingProps,E=c!==null?c.memoizedProps:null,g=T.children,H_(y,T)?g=null:E!==null&&H_(y,E)&&(d.flags|=32),d.memoizedState!==null&&(y=zb(c,d,OL,null,null,f),Iu._currentValue=y),wf(c,d),In(c,d,g,f),d.child;case 6:return c===null&&mt&&((c=f=Kt)&&(f=wB(f,d.pendingProps,Ss),f!==null?(d.stateNode=f,Xn=d,Kt=null,c=!0):c=!1),c||Qr(d)),null;case 13:return jT(c,d,f);case 4:return pe(d,d.stateNode.containerInfo),g=d.pendingProps,c===null?d.child=El(d,null,g,f):In(c,d,g,f),d.child;case 11:return FT(c,d,d.type,d.pendingProps,f);case 7:return In(c,d,d.pendingProps,f),d.child;case 8:return In(c,d,d.pendingProps.children,f),d.child;case 12:return In(c,d,d.pendingProps.children,f),d.child;case 10:return g=d.pendingProps,$o(d,d.type,g.value),In(c,d,g.children,f),d.child;case 9:return y=d.type._context,g=d.pendingProps.children,ta(d),y=Un(y),g=g(y),d.flags|=1,In(c,d,g,f),d.child;case 14:return UT(c,d,d.type,d.pendingProps,f);case 15:return zT(c,d,d.type,d.pendingProps,f);case 19:return ZT(c,d,f);case 31:return g=d.pendingProps,f=d.mode,g={mode:g.mode,children:g.children},c===null?(f=yf(g,f),f.ref=d.ref,d.child=f,f.return=d,d=f):(f=Qs(c.child,g),f.ref=d.ref,d.child=f,f.return=d,d=f),d;case 22:return HT(c,d,f);case 24:return ta(d),g=Un(hn),c===null?(y=Mb(),y===null&&(y=Ot,T=Ib(),y.pooledCache=T,T.refCount++,T!==null&&(y.pooledCacheLanes|=f),y=T),d.memoizedState={parent:g,cache:y},Nb(d),$o(d,hn,y)):((c.lanes&f)!==0&&(Db(c,d),lu(d,null,null,f),au()),y=c.memoizedState,T=d.memoizedState,y.parent!==g?(y={parent:g,cache:g},d.memoizedState=y,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=y),$o(d,hn,g)):(g=T.cache,$o(d,hn,g),g!==y.cache&&Rb(d,[hn],f,!0))),In(c,d,d.pendingProps.children,f),d.child;case 29:throw d.pendingProps}throw Error(n(156,d.tag))}function ao(c){c.flags|=4}function JT(c,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!ok(d)){if(d=$i.current,d!==null&&((ot&4194048)===ot?As!==null:(ot&62914560)!==ot&&(ot&536870912)===0||d!==As))throw ou=Vb,NC;c.flags|=8192}}function vf(c,d){d!==null&&(c.flags|=4),c.flags&16384&&(d=c.tag!==22?R1():536870912,c.lanes|=d,Il|=d)}function gu(c,d){if(!mt)switch(c.tailMode){case"hidden":d=c.tail;for(var f=null;d!==null;)d.alternate!==null&&(f=d),d=d.sibling;f===null?c.tail=null:f.sibling=null;break;case"collapsed":f=c.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?d||c.tail===null?c.tail=null:c.tail.sibling=null:g.sibling=null}}function Ht(c){var d=c.alternate!==null&&c.alternate.child===c.child,f=0,g=0;if(d)for(var y=c.child;y!==null;)f|=y.lanes|y.childLanes,g|=y.subtreeFlags&65011712,g|=y.flags&65011712,y.return=c,y=y.sibling;else for(y=c.child;y!==null;)f|=y.lanes|y.childLanes,g|=y.subtreeFlags,g|=y.flags,y.return=c,y=y.sibling;return c.subtreeFlags|=g,c.childLanes=f,d}function $L(c,d,f){var g=d.pendingProps;switch(kb(d),d.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(d),null;case 1:return Ht(d),null;case 3:return f=d.stateNode,g=null,c!==null&&(g=c.memoizedState.cache),d.memoizedState.cache!==g&&(d.flags|=2048),io(hn),Ce(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(c===null||c.child===null)&&(Xc(d)?ao(d):c===null||c.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,RC())),Ht(d),null;case 26:return f=d.memoizedState,c===null?(ao(d),f!==null?(Ht(d),JT(d,f)):(Ht(d),d.flags&=-16777217)):f?f!==c.memoizedState?(ao(d),Ht(d),JT(d,f)):(Ht(d),d.flags&=-16777217):(c.memoizedProps!==g&&ao(d),Ht(d),d.flags&=-16777217),null;case 27:Me(d),f=Q.current;var y=d.type;if(c!==null&&d.stateNode!=null)c.memoizedProps!==g&&ao(d);else{if(!g){if(d.stateNode===null)throw Error(n(166));return Ht(d),null}c=G.current,Xc(d)?SC(d):(c=Jx(y,g,f),d.stateNode=c,ao(d))}return Ht(d),null;case 5:if(Me(d),f=d.type,c!==null&&d.stateNode!=null)c.memoizedProps!==g&&ao(d);else{if(!g){if(d.stateNode===null)throw Error(n(166));return Ht(d),null}if(c=G.current,Xc(d))SC(d);else{switch(y=Nf(Q.current),c){case 1:c=y.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:c=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":c=y.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":c=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":c=y.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof g.is=="string"?y.createElement("select",{is:g.is}):y.createElement("select"),g.multiple?c.multiple=!0:g.size&&(c.size=g.size);break;default:c=typeof g.is=="string"?y.createElement(f,{is:g.is}):y.createElement(f)}}c[Fn]=d,c[ai]=g;e:for(y=d.child;y!==null;){if(y.tag===5||y.tag===6)c.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===d)break e;for(;y.sibling===null;){if(y.return===null||y.return===d)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}d.stateNode=c;e:switch(Mn(c,f,g),f){case"button":case"input":case"select":case"textarea":c=!!g.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ao(d)}}return Ht(d),d.flags&=-16777217,null;case 6:if(c&&d.stateNode!=null)c.memoizedProps!==g&&ao(d);else{if(typeof g!="string"&&d.stateNode===null)throw Error(n(166));if(c=Q.current,Xc(d)){if(c=d.stateNode,f=d.memoizedProps,g=null,y=Xn,y!==null)switch(y.tag){case 27:case 5:g=y.memoizedProps}c[Fn]=d,c=!!(c.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||qx(c.nodeValue,f)),c||Qr(d)}else c=Nf(c).createTextNode(g),c[Fn]=d,d.stateNode=c}return Ht(d),null;case 13:if(g=d.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(y=Xc(d),g!==null&&g.dehydrated!==null){if(c===null){if(!y)throw Error(n(318));if(y=d.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));y[Fn]=d}else Qc(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Ht(d),y=!1}else y=RC(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=y),y=!0;if(!y)return d.flags&256?(oo(d),d):(oo(d),null)}if(oo(d),(d.flags&128)!==0)return d.lanes=f,d;if(f=g!==null,c=c!==null&&c.memoizedState!==null,f){g=d.child,y=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(y=g.alternate.memoizedState.cachePool.pool);var T=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(T=g.memoizedState.cachePool.pool),T!==y&&(g.flags|=2048)}return f!==c&&f&&(d.child.flags|=8192),vf(d,d.updateQueue),Ht(d),null;case 4:return Ce(),c===null&&L_(d.stateNode.containerInfo),Ht(d),null;case 10:return io(d.type),Ht(d),null;case 19:if(be(fn),y=d.memoizedState,y===null)return Ht(d),null;if(g=(d.flags&128)!==0,T=y.rendering,T===null)if(g)gu(y,!1);else{if(Zt!==0||c!==null&&(c.flags&128)!==0)for(c=d.child;c!==null;){if(T=pf(c),T!==null){for(d.flags|=128,gu(y,!1),c=T.updateQueue,d.updateQueue=c,vf(d,c),d.subtreeFlags=0,c=f,f=d.child;f!==null;)kC(f,c),f=f.sibling;return ue(fn,fn.current&1|2),d.child}c=c.sibling}y.tail!==null&&He()>xf&&(d.flags|=128,g=!0,gu(y,!1),d.lanes=4194304)}else{if(!g)if(c=pf(T),c!==null){if(d.flags|=128,g=!0,c=c.updateQueue,d.updateQueue=c,vf(d,c),gu(y,!0),y.tail===null&&y.tailMode==="hidden"&&!T.alternate&&!mt)return Ht(d),null}else 2*He()-y.renderingStartTime>xf&&f!==536870912&&(d.flags|=128,g=!0,gu(y,!1),d.lanes=4194304);y.isBackwards?(T.sibling=d.child,d.child=T):(c=y.last,c!==null?c.sibling=T:d.child=T,y.last=T)}return y.tail!==null?(d=y.tail,y.rendering=d,y.tail=d.sibling,y.renderingStartTime=He(),d.sibling=null,c=fn.current,ue(fn,g?c&1|2:c&1),d):(Ht(d),null);case 22:case 23:return oo(d),Fb(),g=d.memoizedState!==null,c!==null?c.memoizedState!==null!==g&&(d.flags|=8192):g&&(d.flags|=8192),g?(f&536870912)!==0&&(d.flags&128)===0&&(Ht(d),d.subtreeFlags&6&&(d.flags|=8192)):Ht(d),f=d.updateQueue,f!==null&&vf(d,f.retryQueue),f=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(f=c.memoizedState.cachePool.pool),g=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(g=d.memoizedState.cachePool.pool),g!==f&&(d.flags|=2048),c!==null&&be(na),null;case 24:return f=null,c!==null&&(f=c.memoizedState.cache),d.memoizedState.cache!==f&&(d.flags|=2048),io(hn),Ht(d),null;case 25:return null;case 30:return null}throw Error(n(156,d.tag))}function GL(c,d){switch(kb(d),d.tag){case 1:return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 3:return io(hn),Ce(),c=d.flags,(c&65536)!==0&&(c&128)===0?(d.flags=c&-65537|128,d):null;case 26:case 27:case 5:return Me(d),null;case 13:if(oo(d),c=d.memoizedState,c!==null&&c.dehydrated!==null){if(d.alternate===null)throw Error(n(340));Qc()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 19:return be(fn),null;case 4:return Ce(),null;case 10:return io(d.type),null;case 22:case 23:return oo(d),Fb(),c!==null&&be(na),c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 24:return io(hn),null;case 25:return null;default:return null}}function XT(c,d){switch(kb(d),d.tag){case 3:io(hn),Ce();break;case 26:case 27:case 5:Me(d);break;case 4:Ce();break;case 13:oo(d);break;case 19:be(fn);break;case 10:io(d.type);break;case 22:case 23:oo(d),Fb(),c!==null&&be(na);break;case 24:io(hn)}}function pu(c,d){try{var f=d.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var y=g.next;f=y;do{if((f.tag&c)===c){g=void 0;var T=f.create,E=f.inst;g=T(),E.destroy=g}f=f.next}while(f!==y)}}catch(R){Mt(d,d.return,R)}}function Xo(c,d,f){try{var g=d.updateQueue,y=g!==null?g.lastEffect:null;if(y!==null){var T=y.next;g=T;do{if((g.tag&c)===c){var E=g.inst,R=E.destroy;if(R!==void 0){E.destroy=void 0,y=d;var M=f,$=R;try{$()}catch(ne){Mt(y,M,ne)}}}g=g.next}while(g!==T)}}catch(ne){Mt(d,d.return,ne)}}function QT(c){var d=c.updateQueue;if(d!==null){var f=c.stateNode;try{UC(d,f)}catch(g){Mt(c,c.return,g)}}}function ex(c,d,f){f.props=sa(c.type,c.memoizedProps),f.state=c.memoizedState;try{f.componentWillUnmount()}catch(g){Mt(c,d,g)}}function bu(c,d){try{var f=c.ref;if(f!==null){switch(c.tag){case 26:case 27:case 5:var g=c.stateNode;break;case 30:g=c.stateNode;break;default:g=c.stateNode}typeof f=="function"?c.refCleanup=f(g):f.current=g}}catch(y){Mt(c,d,y)}}function Rs(c,d){var f=c.ref,g=c.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(y){Mt(c,d,y)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(y){Mt(c,d,y)}else f.current=null}function tx(c){var d=c.type,f=c.memoizedProps,g=c.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(y){Mt(c,c.return,y)}}function f_(c,d,f){try{var g=c.stateNode;fB(g,c.type,f,d),g[ai]=d}catch(y){Mt(c,c.return,y)}}function nx(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&rr(c.type)||c.tag===4}function m_(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||nx(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&rr(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function g_(c,d,f){var g=c.tag;if(g===5||g===6)c=c.stateNode,d?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(c,d):(d=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,d.appendChild(c),f=f._reactRootContainer,f!=null||d.onclick!==null||(d.onclick=Vf));else if(g!==4&&(g===27&&rr(c.type)&&(f=c.stateNode,d=null),c=c.child,c!==null))for(g_(c,d,f),c=c.sibling;c!==null;)g_(c,d,f),c=c.sibling}function Cf(c,d,f){var g=c.tag;if(g===5||g===6)c=c.stateNode,d?f.insertBefore(c,d):f.appendChild(c);else if(g!==4&&(g===27&&rr(c.type)&&(f=c.stateNode),c=c.child,c!==null))for(Cf(c,d,f),c=c.sibling;c!==null;)Cf(c,d,f),c=c.sibling}function ix(c){var d=c.stateNode,f=c.memoizedProps;try{for(var g=c.type,y=d.attributes;y.length;)d.removeAttributeNode(y[0]);Mn(d,g,f),d[Fn]=c,d[ai]=f}catch(T){Mt(c,c.return,T)}}var lo=!1,nn=!1,p_=!1,sx=typeof WeakSet=="function"?WeakSet:Set,vn=null;function jL(c,d){if(c=c.containerInfo,U_=Uf,c=gC(c),mb(c)){if("selectionStart"in c)var f={start:c.selectionStart,end:c.selectionEnd};else e:{f=(f=c.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var y=g.anchorOffset,T=g.focusNode;g=g.focusOffset;try{f.nodeType,T.nodeType}catch{f=null;break e}var E=0,R=-1,M=-1,$=0,ne=0,oe=c,K=null;t:for(;;){for(var J;oe!==f||y!==0&&oe.nodeType!==3||(R=E+y),oe!==T||g!==0&&oe.nodeType!==3||(M=E+g),oe.nodeType===3&&(E+=oe.nodeValue.length),(J=oe.firstChild)!==null;)K=oe,oe=J;for(;;){if(oe===c)break t;if(K===f&&++$===y&&(R=E),K===T&&++ne===g&&(M=E),(J=oe.nextSibling)!==null)break;oe=K,K=oe.parentNode}oe=J}f=R===-1||M===-1?null:{start:R,end:M}}else f=null}f=f||{start:0,end:0}}else f=null;for(z_={focusedElem:c,selectionRange:f},Uf=!1,vn=d;vn!==null;)if(d=vn,c=d.child,(d.subtreeFlags&1024)!==0&&c!==null)c.return=d,vn=c;else for(;vn!==null;){switch(d=vn,T=d.alternate,c=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&T!==null){c=void 0,f=d,y=T.memoizedProps,T=T.memoizedState,g=f.stateNode;try{var Le=sa(f.type,y,f.elementType===f.type);c=g.getSnapshotBeforeUpdate(Le,T),g.__reactInternalSnapshotBeforeUpdate=c}catch(Ve){Mt(f,f.return,Ve)}}break;case 3:if((c&1024)!==0){if(c=d.stateNode.containerInfo,f=c.nodeType,f===9)q_(c);else if(f===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":q_(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(n(163))}if(c=d.sibling,c!==null){c.return=d.return,vn=c;break}vn=d.return}}function ox(c,d,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:Qo(c,f),g&4&&pu(5,f);break;case 1:if(Qo(c,f),g&4)if(c=f.stateNode,d===null)try{c.componentDidMount()}catch(E){Mt(f,f.return,E)}else{var y=sa(f.type,d.memoizedProps);d=d.memoizedState;try{c.componentDidUpdate(y,d,c.__reactInternalSnapshotBeforeUpdate)}catch(E){Mt(f,f.return,E)}}g&64&&QT(f),g&512&&bu(f,f.return);break;case 3:if(Qo(c,f),g&64&&(c=f.updateQueue,c!==null)){if(d=null,f.child!==null)switch(f.child.tag){case 27:case 5:d=f.child.stateNode;break;case 1:d=f.child.stateNode}try{UC(c,d)}catch(E){Mt(f,f.return,E)}}break;case 27:d===null&&g&4&&ix(f);case 26:case 5:Qo(c,f),d===null&&g&4&&tx(f),g&512&&bu(f,f.return);break;case 12:Qo(c,f);break;case 13:Qo(c,f),g&4&&lx(c,f),g&64&&(c=f.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(f=nB.bind(null,f),yB(c,f))));break;case 22:if(g=f.memoizedState!==null||lo,!g){d=d!==null&&d.memoizedState!==null||nn,y=lo;var T=nn;lo=g,(nn=d)&&!T?er(c,f,(f.subtreeFlags&8772)!==0):Qo(c,f),lo=y,nn=T}break;case 30:break;default:Qo(c,f)}}function rx(c){var d=c.alternate;d!==null&&(c.alternate=null,rx(d)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(d=c.stateNode,d!==null&&Zp(d)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var Ut=null,ui=!1;function co(c,d,f){for(f=f.child;f!==null;)ax(c,d,f),f=f.sibling}function ax(c,d,f){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(Ge,f)}catch{}switch(f.tag){case 26:nn||Rs(f,d),co(c,d,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:nn||Rs(f,d);var g=Ut,y=ui;rr(f.type)&&(Ut=f.stateNode,ui=!1),co(c,d,f),Eu(f.stateNode),Ut=g,ui=y;break;case 5:nn||Rs(f,d);case 6:if(g=Ut,y=ui,Ut=null,co(c,d,f),Ut=g,ui=y,Ut!==null)if(ui)try{(Ut.nodeType===9?Ut.body:Ut.nodeName==="HTML"?Ut.ownerDocument.body:Ut).removeChild(f.stateNode)}catch(T){Mt(f,d,T)}else try{Ut.removeChild(f.stateNode)}catch(T){Mt(f,d,T)}break;case 18:Ut!==null&&(ui?(c=Ut,Zx(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,f.stateNode),Nu(c)):Zx(Ut,f.stateNode));break;case 4:g=Ut,y=ui,Ut=f.stateNode.containerInfo,ui=!0,co(c,d,f),Ut=g,ui=y;break;case 0:case 11:case 14:case 15:nn||Xo(2,f,d),nn||Xo(4,f,d),co(c,d,f);break;case 1:nn||(Rs(f,d),g=f.stateNode,typeof g.componentWillUnmount=="function"&&ex(f,d,g)),co(c,d,f);break;case 21:co(c,d,f);break;case 22:nn=(g=nn)||f.memoizedState!==null,co(c,d,f),nn=g;break;default:co(c,d,f)}}function lx(c,d){if(d.memoizedState===null&&(c=d.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{Nu(c)}catch(f){Mt(d,d.return,f)}}function KL(c){switch(c.tag){case 13:case 19:var d=c.stateNode;return d===null&&(d=c.stateNode=new sx),d;case 22:return c=c.stateNode,d=c._retryCache,d===null&&(d=c._retryCache=new sx),d;default:throw Error(n(435,c.tag))}}function b_(c,d){var f=KL(c);d.forEach(function(g){var y=iB.bind(null,c,g);f.has(g)||(f.add(g),g.then(y,y))})}function Si(c,d){var f=d.deletions;if(f!==null)for(var g=0;g<f.length;g++){var y=f[g],T=c,E=d,R=E;e:for(;R!==null;){switch(R.tag){case 27:if(rr(R.type)){Ut=R.stateNode,ui=!1;break e}break;case 5:Ut=R.stateNode,ui=!1;break e;case 3:case 4:Ut=R.stateNode.containerInfo,ui=!0;break e}R=R.return}if(Ut===null)throw Error(n(160));ax(T,E,y),Ut=null,ui=!1,T=y.alternate,T!==null&&(T.return=null),y.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)cx(d,c),d=d.sibling}var ds=null;function cx(c,d){var f=c.alternate,g=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:Si(d,c),Ai(c),g&4&&(Xo(3,c,c.return),pu(3,c),Xo(5,c,c.return));break;case 1:Si(d,c),Ai(c),g&512&&(nn||f===null||Rs(f,f.return)),g&64&&lo&&(c=c.updateQueue,c!==null&&(g=c.callbacks,g!==null&&(f=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var y=ds;if(Si(d,c),Ai(c),g&512&&(nn||f===null||Rs(f,f.return)),g&4){var T=f!==null?f.memoizedState:null;if(g=c.memoizedState,f===null)if(g===null)if(c.stateNode===null){e:{g=c.type,f=c.memoizedProps,y=y.ownerDocument||y;t:switch(g){case"title":T=y.getElementsByTagName("title")[0],(!T||T[zc]||T[Fn]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=y.createElement(g),y.head.insertBefore(T,y.querySelector("head > title"))),Mn(T,g,f),T[Fn]=c,wn(T),g=T;break e;case"link":var E=ik("link","href",y).get(g+(f.href||""));if(E){for(var R=0;R<E.length;R++)if(T=E[R],T.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&T.getAttribute("rel")===(f.rel==null?null:f.rel)&&T.getAttribute("title")===(f.title==null?null:f.title)&&T.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){E.splice(R,1);break t}}T=y.createElement(g),Mn(T,g,f),y.head.appendChild(T);break;case"meta":if(E=ik("meta","content",y).get(g+(f.content||""))){for(R=0;R<E.length;R++)if(T=E[R],T.getAttribute("content")===(f.content==null?null:""+f.content)&&T.getAttribute("name")===(f.name==null?null:f.name)&&T.getAttribute("property")===(f.property==null?null:f.property)&&T.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&T.getAttribute("charset")===(f.charSet==null?null:f.charSet)){E.splice(R,1);break t}}T=y.createElement(g),Mn(T,g,f),y.head.appendChild(T);break;default:throw Error(n(468,g))}T[Fn]=c,wn(T),g=T}c.stateNode=g}else sk(y,c.type,c.stateNode);else c.stateNode=nk(y,g,c.memoizedProps);else T!==g?(T===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):T.count--,g===null?sk(y,c.type,c.stateNode):nk(y,g,c.memoizedProps)):g===null&&c.stateNode!==null&&f_(c,c.memoizedProps,f.memoizedProps)}break;case 27:Si(d,c),Ai(c),g&512&&(nn||f===null||Rs(f,f.return)),f!==null&&g&4&&f_(c,c.memoizedProps,f.memoizedProps);break;case 5:if(Si(d,c),Ai(c),g&512&&(nn||f===null||Rs(f,f.return)),c.flags&32){y=c.stateNode;try{ll(y,"")}catch(J){Mt(c,c.return,J)}}g&4&&c.stateNode!=null&&(y=c.memoizedProps,f_(c,y,f!==null?f.memoizedProps:y)),g&1024&&(p_=!0);break;case 6:if(Si(d,c),Ai(c),g&4){if(c.stateNode===null)throw Error(n(162));g=c.memoizedProps,f=c.stateNode;try{f.nodeValue=g}catch(J){Mt(c,c.return,J)}}break;case 3:if(Lf=null,y=ds,ds=Df(d.containerInfo),Si(d,c),ds=y,Ai(c),g&4&&f!==null&&f.memoizedState.isDehydrated)try{Nu(d.containerInfo)}catch(J){Mt(c,c.return,J)}p_&&(p_=!1,ux(c));break;case 4:g=ds,ds=Df(c.stateNode.containerInfo),Si(d,c),Ai(c),ds=g;break;case 12:Si(d,c),Ai(c);break;case 13:Si(d,c),Ai(c),c.child.flags&8192&&c.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(T_=He()),g&4&&(g=c.updateQueue,g!==null&&(c.updateQueue=null,b_(c,g)));break;case 22:y=c.memoizedState!==null;var M=f!==null&&f.memoizedState!==null,$=lo,ne=nn;if(lo=$||y,nn=ne||M,Si(d,c),nn=ne,lo=$,Ai(c),g&8192)e:for(d=c.stateNode,d._visibility=y?d._visibility&-2:d._visibility|1,y&&(f===null||M||lo||nn||oa(c)),f=null,d=c;;){if(d.tag===5||d.tag===26){if(f===null){M=f=d;try{if(T=M.stateNode,y)E=T.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{R=M.stateNode;var oe=M.memoizedProps.style,K=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;R.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(J){Mt(M,M.return,J)}}}else if(d.tag===6){if(f===null){M=d;try{M.stateNode.nodeValue=y?"":M.memoizedProps}catch(J){Mt(M,M.return,J)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===c)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break e;for(;d.sibling===null;){if(d.return===null||d.return===c)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}g&4&&(g=c.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,b_(c,f))));break;case 19:Si(d,c),Ai(c),g&4&&(g=c.updateQueue,g!==null&&(c.updateQueue=null,b_(c,g)));break;case 30:break;case 21:break;default:Si(d,c),Ai(c)}}function Ai(c){var d=c.flags;if(d&2){try{for(var f,g=c.return;g!==null;){if(nx(g)){f=g;break}g=g.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var y=f.stateNode,T=m_(c);Cf(c,T,y);break;case 5:var E=f.stateNode;f.flags&32&&(ll(E,""),f.flags&=-33);var R=m_(c);Cf(c,R,E);break;case 3:case 4:var M=f.stateNode.containerInfo,$=m_(c);g_(c,$,M);break;default:throw Error(n(161))}}catch(ne){Mt(c,c.return,ne)}c.flags&=-3}d&4096&&(c.flags&=-4097)}function ux(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var d=c;ux(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),c=c.sibling}}function Qo(c,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)ox(c,d.alternate,d),d=d.sibling}function oa(c){for(c=c.child;c!==null;){var d=c;switch(d.tag){case 0:case 11:case 14:case 15:Xo(4,d,d.return),oa(d);break;case 1:Rs(d,d.return);var f=d.stateNode;typeof f.componentWillUnmount=="function"&&ex(d,d.return,f),oa(d);break;case 27:Eu(d.stateNode);case 26:case 5:Rs(d,d.return),oa(d);break;case 22:d.memoizedState===null&&oa(d);break;case 30:oa(d);break;default:oa(d)}c=c.sibling}}function er(c,d,f){for(f=f&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var g=d.alternate,y=c,T=d,E=T.flags;switch(T.tag){case 0:case 11:case 15:er(y,T,f),pu(4,T);break;case 1:if(er(y,T,f),g=T,y=g.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch($){Mt(g,g.return,$)}if(g=T,y=g.updateQueue,y!==null){var R=g.stateNode;try{var M=y.shared.hiddenCallbacks;if(M!==null)for(y.shared.hiddenCallbacks=null,y=0;y<M.length;y++)FC(M[y],R)}catch($){Mt(g,g.return,$)}}f&&E&64&&QT(T),bu(T,T.return);break;case 27:ix(T);case 26:case 5:er(y,T,f),f&&g===null&&E&4&&tx(T),bu(T,T.return);break;case 12:er(y,T,f);break;case 13:er(y,T,f),f&&E&4&&lx(y,T);break;case 22:T.memoizedState===null&&er(y,T,f),bu(T,T.return);break;case 30:break;default:er(y,T,f)}d=d.sibling}}function __(c,d){var f=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(f=c.memoizedState.cachePool.pool),c=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(c=d.memoizedState.cachePool.pool),c!==f&&(c!=null&&c.refCount++,f!=null&&nu(f))}function w_(c,d){c=null,d.alternate!==null&&(c=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==c&&(d.refCount++,c!=null&&nu(c))}function Is(c,d,f,g){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)dx(c,d,f,g),d=d.sibling}function dx(c,d,f,g){var y=d.flags;switch(d.tag){case 0:case 11:case 15:Is(c,d,f,g),y&2048&&pu(9,d);break;case 1:Is(c,d,f,g);break;case 3:Is(c,d,f,g),y&2048&&(c=null,d.alternate!==null&&(c=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==c&&(d.refCount++,c!=null&&nu(c)));break;case 12:if(y&2048){Is(c,d,f,g),c=d.stateNode;try{var T=d.memoizedProps,E=T.id,R=T.onPostCommit;typeof R=="function"&&R(E,d.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(M){Mt(d,d.return,M)}}else Is(c,d,f,g);break;case 13:Is(c,d,f,g);break;case 23:break;case 22:T=d.stateNode,E=d.alternate,d.memoizedState!==null?T._visibility&2?Is(c,d,f,g):_u(c,d):T._visibility&2?Is(c,d,f,g):(T._visibility|=2,Sl(c,d,f,g,(d.subtreeFlags&10256)!==0)),y&2048&&__(E,d);break;case 24:Is(c,d,f,g),y&2048&&w_(d.alternate,d);break;default:Is(c,d,f,g)}}function Sl(c,d,f,g,y){for(y=y&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var T=c,E=d,R=f,M=g,$=E.flags;switch(E.tag){case 0:case 11:case 15:Sl(T,E,R,M,y),pu(8,E);break;case 23:break;case 22:var ne=E.stateNode;E.memoizedState!==null?ne._visibility&2?Sl(T,E,R,M,y):_u(T,E):(ne._visibility|=2,Sl(T,E,R,M,y)),y&&$&2048&&__(E.alternate,E);break;case 24:Sl(T,E,R,M,y),y&&$&2048&&w_(E.alternate,E);break;default:Sl(T,E,R,M,y)}d=d.sibling}}function _u(c,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var f=c,g=d,y=g.flags;switch(g.tag){case 22:_u(f,g),y&2048&&__(g.alternate,g);break;case 24:_u(f,g),y&2048&&w_(g.alternate,g);break;default:_u(f,g)}d=d.sibling}}var wu=8192;function Al(c){if(c.subtreeFlags&wu)for(c=c.child;c!==null;)hx(c),c=c.sibling}function hx(c){switch(c.tag){case 26:Al(c),c.flags&wu&&c.memoizedState!==null&&VB(ds,c.memoizedState,c.memoizedProps);break;case 5:Al(c);break;case 3:case 4:var d=ds;ds=Df(c.stateNode.containerInfo),Al(c),ds=d;break;case 22:c.memoizedState===null&&(d=c.alternate,d!==null&&d.memoizedState!==null?(d=wu,wu=16777216,Al(c),wu=d):Al(c));break;default:Al(c)}}function fx(c){var d=c.alternate;if(d!==null&&(c=d.child,c!==null)){d.child=null;do d=c.sibling,c.sibling=null,c=d;while(c!==null)}}function yu(c){var d=c.deletions;if((c.flags&16)!==0){if(d!==null)for(var f=0;f<d.length;f++){var g=d[f];vn=g,gx(g,c)}fx(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)mx(c),c=c.sibling}function mx(c){switch(c.tag){case 0:case 11:case 15:yu(c),c.flags&2048&&Xo(9,c,c.return);break;case 3:yu(c);break;case 12:yu(c);break;case 22:var d=c.stateNode;c.memoizedState!==null&&d._visibility&2&&(c.return===null||c.return.tag!==13)?(d._visibility&=-3,Tf(c)):yu(c);break;default:yu(c)}}function Tf(c){var d=c.deletions;if((c.flags&16)!==0){if(d!==null)for(var f=0;f<d.length;f++){var g=d[f];vn=g,gx(g,c)}fx(c)}for(c=c.child;c!==null;){switch(d=c,d.tag){case 0:case 11:case 15:Xo(8,d,d.return),Tf(d);break;case 22:f=d.stateNode,f._visibility&2&&(f._visibility&=-3,Tf(d));break;default:Tf(d)}c=c.sibling}}function gx(c,d){for(;vn!==null;){var f=vn;switch(f.tag){case 0:case 11:case 15:Xo(8,f,d);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:nu(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,vn=g;else e:for(f=c;vn!==null;){g=vn;var y=g.sibling,T=g.return;if(rx(g),g===f){vn=null;break e}if(y!==null){y.return=T,vn=y;break e}vn=T}}}var ZL={getCacheForType:function(c){var d=Un(hn),f=d.data.get(c);return f===void 0&&(f=c(),d.data.set(c,f)),f}},YL=typeof WeakMap=="function"?WeakMap:Map,yt=0,Ot=null,Qe=null,ot=0,vt=0,Ri=null,tr=!1,Rl=!1,y_=!1,uo=0,Zt=0,nr=0,ra=0,v_=0,Gi=0,Il=0,vu=null,di=null,C_=!1,T_=0,xf=1/0,kf=null,ir=null,Pn=0,sr=null,Pl=null,Ml=0,x_=0,k_=null,px=null,Cu=0,E_=null;function Ii(){if((yt&2)!==0&&ot!==0)return ot&-ot;if(B.T!==null){var c=wl;return c!==0?c:V_()}return M1()}function bx(){Gi===0&&(Gi=(ot&536870912)===0||mt?A1():536870912);var c=$i.current;return c!==null&&(c.flags|=32),Gi}function Pi(c,d,f){(c===Ot&&(vt===2||vt===9)||c.cancelPendingCommit!==null)&&(Vl(c,0),or(c,ot,Gi,!1)),Uc(c,f),((yt&2)===0||c!==Ot)&&(c===Ot&&((yt&2)===0&&(ra|=f),Zt===4&&or(c,ot,Gi,!1)),Ps(c))}function _x(c,d,f){if((yt&6)!==0)throw Error(n(327));var g=!f&&(d&124)===0&&(d&c.expiredLanes)===0||Ys(c,d),y=g?QL(c,d):R_(c,d,!0),T=g;do{if(y===0){Rl&&!g&&or(c,d,0,!1);break}else{if(f=c.current.alternate,T&&!JL(f)){y=R_(c,d,!1),T=!1;continue}if(y===2){if(T=d,c.errorRecoveryDisabledLanes&T)var E=0;else E=c.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){d=E;e:{var R=c;y=vu;var M=R.current.memoizedState.isDehydrated;if(M&&(Vl(R,E).flags|=256),E=R_(R,E,!1),E!==2){if(y_&&!M){R.errorRecoveryDisabledLanes|=T,ra|=T,y=4;break e}T=di,di=y,T!==null&&(di===null?di=T:di.push.apply(di,T))}y=E}if(T=!1,y!==2)continue}}if(y===1){Vl(c,0),or(c,d,0,!0);break}e:{switch(g=c,T=y,T){case 0:case 1:throw Error(n(345));case 4:if((d&4194048)!==d)break;case 6:or(g,d,Gi,!tr);break e;case 2:di=null;break;case 3:case 5:break;default:throw Error(n(329))}if((d&62914560)===d&&(y=T_+300-He(),10<y)){if(or(g,d,Gi,!tr),el(g,0,!0)!==0)break e;g.timeoutHandle=jx(wx.bind(null,g,f,di,kf,C_,d,Gi,ra,Il,tr,T,2,-0,0),y);break e}wx(g,f,di,kf,C_,d,Gi,ra,Il,tr,T,0,-0,0)}}break}while(!0);Ps(c)}function wx(c,d,f,g,y,T,E,R,M,$,ne,oe,K,J){if(c.timeoutHandle=-1,oe=d.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&(Ru={stylesheets:null,count:0,unsuspend:MB},hx(d),oe=NB(),oe!==null)){c.cancelPendingCommit=oe(Ex.bind(null,c,d,T,f,g,y,E,R,M,ne,1,K,J)),or(c,T,E,!$);return}Ex(c,d,T,f,g,y,E,R,M)}function JL(c){for(var d=c;;){var f=d.tag;if((f===0||f===11||f===15)&&d.flags&16384&&(f=d.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var y=f[g],T=y.getSnapshot;y=y.value;try{if(!ki(T(),y))return!1}catch{return!1}}if(f=d.child,d.subtreeFlags&16384&&f!==null)f.return=d,d=f;else{if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function or(c,d,f,g){d&=~v_,d&=~ra,c.suspendedLanes|=d,c.pingedLanes&=~d,g&&(c.warmLanes|=d),g=c.expirationTimes;for(var y=d;0<y;){var T=31-jt(y),E=1<<T;g[T]=-1,y&=~E}f!==0&&I1(c,f,d)}function Ef(){return(yt&6)===0?(Tu(0),!1):!0}function S_(){if(Qe!==null){if(vt===0)var c=Qe.return;else c=Qe,no=ea=null,qb(c),kl=null,fu=0,c=Qe;for(;c!==null;)XT(c.alternate,c),c=c.return;Qe=null}}function Vl(c,d){var f=c.timeoutHandle;f!==-1&&(c.timeoutHandle=-1,gB(f)),f=c.cancelPendingCommit,f!==null&&(c.cancelPendingCommit=null,f()),S_(),Ot=c,Qe=f=Qs(c.current,null),ot=d,vt=0,Ri=null,tr=!1,Rl=Ys(c,d),y_=!1,Il=Gi=v_=ra=nr=Zt=0,di=vu=null,C_=!1,(d&8)!==0&&(d|=d&32);var g=c.entangledLanes;if(g!==0)for(c=c.entanglements,g&=d;0<g;){var y=31-jt(g),T=1<<y;d|=c[y],g&=~T}return uo=d,jh(),f}function yx(c,d){Je=null,B.H=ff,d===su||d===nf?(d=LC(),vt=3):d===NC?(d=LC(),vt=4):vt=d===BT?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Ri=d,Qe===null&&(Zt=1,_f(c,zi(d,c.current)))}function vx(){var c=B.H;return B.H=ff,c===null?ff:c}function Cx(){var c=B.A;return B.A=ZL,c}function A_(){Zt=4,tr||(ot&4194048)!==ot&&$i.current!==null||(Rl=!0),(nr&134217727)===0&&(ra&134217727)===0||Ot===null||or(Ot,ot,Gi,!1)}function R_(c,d,f){var g=yt;yt|=2;var y=vx(),T=Cx();(Ot!==c||ot!==d)&&(kf=null,Vl(c,d)),d=!1;var E=Zt;e:do try{if(vt!==0&&Qe!==null){var R=Qe,M=Ri;switch(vt){case 8:S_(),E=6;break e;case 3:case 2:case 9:case 6:$i.current===null&&(d=!0);var $=vt;if(vt=0,Ri=null,Nl(c,R,M,$),f&&Rl){E=0;break e}break;default:$=vt,vt=0,Ri=null,Nl(c,R,M,$)}}XL(),E=Zt;break}catch(ne){yx(c,ne)}while(!0);return d&&c.shellSuspendCounter++,no=ea=null,yt=g,B.H=y,B.A=T,Qe===null&&(Ot=null,ot=0,jh()),E}function XL(){for(;Qe!==null;)Tx(Qe)}function QL(c,d){var f=yt;yt|=2;var g=vx(),y=Cx();Ot!==c||ot!==d?(kf=null,xf=He()+500,Vl(c,d)):Rl=Ys(c,d);e:do try{if(vt!==0&&Qe!==null){d=Qe;var T=Ri;t:switch(vt){case 1:vt=0,Ri=null,Nl(c,d,T,1);break;case 2:case 9:if(DC(T)){vt=0,Ri=null,xx(d);break}d=function(){vt!==2&&vt!==9||Ot!==c||(vt=7),Ps(c)},T.then(d,d);break e;case 3:vt=7;break e;case 4:vt=5;break e;case 7:DC(T)?(vt=0,Ri=null,xx(d)):(vt=0,Ri=null,Nl(c,d,T,7));break;case 5:var E=null;switch(Qe.tag){case 26:E=Qe.memoizedState;case 5:case 27:var R=Qe;if(!E||ok(E)){vt=0,Ri=null;var M=R.sibling;if(M!==null)Qe=M;else{var $=R.return;$!==null?(Qe=$,Sf($)):Qe=null}break t}}vt=0,Ri=null,Nl(c,d,T,5);break;case 6:vt=0,Ri=null,Nl(c,d,T,6);break;case 8:S_(),Zt=6;break e;default:throw Error(n(462))}}eB();break}catch(ne){yx(c,ne)}while(!0);return no=ea=null,B.H=g,B.A=y,yt=f,Qe!==null?0:(Ot=null,ot=0,jh(),Zt)}function eB(){for(;Qe!==null&&!Bn();)Tx(Qe)}function Tx(c){var d=YT(c.alternate,c,uo);c.memoizedProps=c.pendingProps,d===null?Sf(c):Qe=d}function xx(c){var d=c,f=d.alternate;switch(d.tag){case 15:case 0:d=qT(f,d,d.pendingProps,d.type,void 0,ot);break;case 11:d=qT(f,d,d.pendingProps,d.type.render,d.ref,ot);break;case 5:qb(d);default:XT(f,d),d=Qe=kC(d,uo),d=YT(f,d,uo)}c.memoizedProps=c.pendingProps,d===null?Sf(c):Qe=d}function Nl(c,d,f,g){no=ea=null,qb(d),kl=null,fu=0;var y=d.return;try{if(WL(c,y,d,f,ot)){Zt=1,_f(c,zi(f,c.current)),Qe=null;return}}catch(T){if(y!==null)throw Qe=y,T;Zt=1,_f(c,zi(f,c.current)),Qe=null;return}d.flags&32768?(mt||g===1?c=!0:Rl||(ot&536870912)!==0?c=!1:(tr=c=!0,(g===2||g===9||g===3||g===6)&&(g=$i.current,g!==null&&g.tag===13&&(g.flags|=16384))),kx(d,c)):Sf(d)}function Sf(c){var d=c;do{if((d.flags&32768)!==0){kx(d,tr);return}c=d.return;var f=$L(d.alternate,d,uo);if(f!==null){Qe=f;return}if(d=d.sibling,d!==null){Qe=d;return}Qe=d=c}while(d!==null);Zt===0&&(Zt=5)}function kx(c,d){do{var f=GL(c.alternate,c);if(f!==null){f.flags&=32767,Qe=f;return}if(f=c.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!d&&(c=c.sibling,c!==null)){Qe=c;return}Qe=c=f}while(c!==null);Zt=6,Qe=null}function Ex(c,d,f,g,y,T,E,R,M){c.cancelPendingCommit=null;do Af();while(Pn!==0);if((yt&6)!==0)throw Error(n(327));if(d!==null){if(d===c.current)throw Error(n(177));if(T=d.lanes|d.childLanes,T|=wb,MO(c,f,T,E,R,M),c===Ot&&(Qe=Ot=null,ot=0),Pl=d,sr=c,Ml=f,x_=T,k_=y,px=g,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,sB(xi,function(){return Px(),null})):(c.callbackNode=null,c.callbackPriority=0),g=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||g){g=B.T,B.T=null,y=le.p,le.p=2,E=yt,yt|=4;try{jL(c,d,f)}finally{yt=E,le.p=y,B.T=g}}Pn=1,Sx(),Ax(),Rx()}}function Sx(){if(Pn===1){Pn=0;var c=sr,d=Pl,f=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||f){f=B.T,B.T=null;var g=le.p;le.p=2;var y=yt;yt|=4;try{cx(d,c);var T=z_,E=gC(c.containerInfo),R=T.focusedElem,M=T.selectionRange;if(E!==R&&R&&R.ownerDocument&&mC(R.ownerDocument.documentElement,R)){if(M!==null&&mb(R)){var $=M.start,ne=M.end;if(ne===void 0&&(ne=$),"selectionStart"in R)R.selectionStart=$,R.selectionEnd=Math.min(ne,R.value.length);else{var oe=R.ownerDocument||document,K=oe&&oe.defaultView||window;if(K.getSelection){var J=K.getSelection(),Le=R.textContent.length,Ve=Math.min(M.start,Le),St=M.end===void 0?Ve:Math.min(M.end,Le);!J.extend&&Ve>St&&(E=St,St=Ve,Ve=E);var z=fC(R,Ve),L=fC(R,St);if(z&&L&&(J.rangeCount!==1||J.anchorNode!==z.node||J.anchorOffset!==z.offset||J.focusNode!==L.node||J.focusOffset!==L.offset)){var q=oe.createRange();q.setStart(z.node,z.offset),J.removeAllRanges(),Ve>St?(J.addRange(q),J.extend(L.node,L.offset)):(q.setEnd(L.node,L.offset),J.addRange(q))}}}}for(oe=[],J=R;J=J.parentNode;)J.nodeType===1&&oe.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<oe.length;R++){var ie=oe[R];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Uf=!!U_,z_=U_=null}finally{yt=y,le.p=g,B.T=f}}c.current=d,Pn=2}}function Ax(){if(Pn===2){Pn=0;var c=sr,d=Pl,f=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||f){f=B.T,B.T=null;var g=le.p;le.p=2;var y=yt;yt|=4;try{ox(c,d.alternate,d)}finally{yt=y,le.p=g,B.T=f}}Pn=3}}function Rx(){if(Pn===4||Pn===3){Pn=0,_n();var c=sr,d=Pl,f=Ml,g=px;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?Pn=5:(Pn=0,Pl=sr=null,Ix(c,c.pendingLanes));var y=c.pendingLanes;if(y===0&&(ir=null),jp(f),d=d.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(Ge,d,void 0,(d.current.flags&128)===128)}catch{}if(g!==null){d=B.T,y=le.p,le.p=2,B.T=null;try{for(var T=c.onRecoverableError,E=0;E<g.length;E++){var R=g[E];T(R.value,{componentStack:R.stack})}}finally{B.T=d,le.p=y}}(Ml&3)!==0&&Af(),Ps(c),y=c.pendingLanes,(f&4194090)!==0&&(y&42)!==0?c===E_?Cu++:(Cu=0,E_=c):Cu=0,Tu(0)}}function Ix(c,d){(c.pooledCacheLanes&=d)===0&&(d=c.pooledCache,d!=null&&(c.pooledCache=null,nu(d)))}function Af(c){return Sx(),Ax(),Rx(),Px()}function Px(){if(Pn!==5)return!1;var c=sr,d=x_;x_=0;var f=jp(Ml),g=B.T,y=le.p;try{le.p=32>f?32:f,B.T=null,f=k_,k_=null;var T=sr,E=Ml;if(Pn=0,Pl=sr=null,Ml=0,(yt&6)!==0)throw Error(n(331));var R=yt;if(yt|=4,mx(T.current),dx(T,T.current,E,f),yt=R,Tu(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(Ge,T)}catch{}return!0}finally{le.p=y,B.T=g,Ix(c,d)}}function Mx(c,d,f){d=zi(f,d),d=s_(c.stateNode,d,2),c=Ko(c,d,2),c!==null&&(Uc(c,2),Ps(c))}function Mt(c,d,f){if(c.tag===3)Mx(c,c,f);else for(;d!==null;){if(d.tag===3){Mx(d,c,f);break}else if(d.tag===1){var g=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(ir===null||!ir.has(g))){c=zi(f,c),f=OT(2),g=Ko(d,f,2),g!==null&&(LT(f,g,d,c),Uc(g,2),Ps(g));break}}d=d.return}}function I_(c,d,f){var g=c.pingCache;if(g===null){g=c.pingCache=new YL;var y=new Set;g.set(d,y)}else y=g.get(d),y===void 0&&(y=new Set,g.set(d,y));y.has(f)||(y_=!0,y.add(f),c=tB.bind(null,c,d,f),d.then(c,c))}function tB(c,d,f){var g=c.pingCache;g!==null&&g.delete(d),c.pingedLanes|=c.suspendedLanes&f,c.warmLanes&=~f,Ot===c&&(ot&f)===f&&(Zt===4||Zt===3&&(ot&62914560)===ot&&300>He()-T_?(yt&2)===0&&Vl(c,0):v_|=f,Il===ot&&(Il=0)),Ps(c)}function Vx(c,d){d===0&&(d=R1()),c=gl(c,d),c!==null&&(Uc(c,d),Ps(c))}function nB(c){var d=c.memoizedState,f=0;d!==null&&(f=d.retryLane),Vx(c,f)}function iB(c,d){var f=0;switch(c.tag){case 13:var g=c.stateNode,y=c.memoizedState;y!==null&&(f=y.retryLane);break;case 19:g=c.stateNode;break;case 22:g=c.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(d),Vx(c,f)}function sB(c,d){return it(c,d)}var Rf=null,Dl=null,P_=!1,If=!1,M_=!1,aa=0;function Ps(c){c!==Dl&&c.next===null&&(Dl===null?Rf=Dl=c:Dl=Dl.next=c),If=!0,P_||(P_=!0,rB())}function Tu(c,d){if(!M_&&If){M_=!0;do for(var f=!1,g=Rf;g!==null;){if(c!==0){var y=g.pendingLanes;if(y===0)var T=0;else{var E=g.suspendedLanes,R=g.pingedLanes;T=(1<<31-jt(42|c)+1)-1,T&=y&~(E&~R),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(f=!0,Lx(g,T))}else T=ot,T=el(g,g===Ot?T:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(T&3)===0||Ys(g,T)||(f=!0,Lx(g,T));g=g.next}while(f);M_=!1}}function oB(){Nx()}function Nx(){If=P_=!1;var c=0;aa!==0&&(mB()&&(c=aa),aa=0);for(var d=He(),f=null,g=Rf;g!==null;){var y=g.next,T=Dx(g,d);T===0?(g.next=null,f===null?Rf=y:f.next=y,y===null&&(Dl=f)):(f=g,(c!==0||(T&3)!==0)&&(If=!0)),g=y}Tu(c)}function Dx(c,d){for(var f=c.suspendedLanes,g=c.pingedLanes,y=c.expirationTimes,T=c.pendingLanes&-62914561;0<T;){var E=31-jt(T),R=1<<E,M=y[E];M===-1?((R&f)===0||(R&g)!==0)&&(y[E]=PO(R,d)):M<=d&&(c.expiredLanes|=R),T&=~R}if(d=Ot,f=ot,f=el(c,c===d?f:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),g=c.callbackNode,f===0||c===d&&(vt===2||vt===9)||c.cancelPendingCommit!==null)return g!==null&&g!==null&&nt(g),c.callbackNode=null,c.callbackPriority=0;if((f&3)===0||Ys(c,f)){if(d=f&-f,d===c.callbackPriority)return d;switch(g!==null&&nt(g),jp(f)){case 2:case 8:f=gt;break;case 32:f=xi;break;case 268435456:f=un;break;default:f=xi}return g=Ox.bind(null,c),f=it(f,g),c.callbackPriority=d,c.callbackNode=f,d}return g!==null&&g!==null&&nt(g),c.callbackPriority=2,c.callbackNode=null,2}function Ox(c,d){if(Pn!==0&&Pn!==5)return c.callbackNode=null,c.callbackPriority=0,null;var f=c.callbackNode;if(Af()&&c.callbackNode!==f)return null;var g=ot;return g=el(c,c===Ot?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),g===0?null:(_x(c,g,d),Dx(c,He()),c.callbackNode!=null&&c.callbackNode===f?Ox.bind(null,c):null)}function Lx(c,d){if(Af())return null;_x(c,d,!0)}function rB(){pB(function(){(yt&6)!==0?it(ct,oB):Nx()})}function V_(){return aa===0&&(aa=A1()),aa}function Bx(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:Uh(""+c)}function Fx(c,d){var f=d.ownerDocument.createElement("input");return f.name=d.name,f.value=d.value,c.id&&f.setAttribute("form",c.id),d.parentNode.insertBefore(f,d),c=new FormData(c),f.parentNode.removeChild(f),c}function aB(c,d,f,g,y){if(d==="submit"&&f&&f.stateNode===y){var T=Bx((y[ai]||null).action),E=g.submitter;E&&(d=(d=E[ai]||null)?Bx(d.formAction):E.getAttribute("formAction"),d!==null&&(T=d,E=null));var R=new qh("action","action",null,g,y);c.push({event:R,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(aa!==0){var M=E?Fx(y,E):new FormData(y);Qb(f,{pending:!0,data:M,method:y.method,action:T},null,M)}}else typeof T=="function"&&(R.preventDefault(),M=E?Fx(y,E):new FormData(y),Qb(f,{pending:!0,data:M,method:y.method,action:T},T,M))},currentTarget:y}]})}}for(var N_=0;N_<_b.length;N_++){var D_=_b[N_],lB=D_.toLowerCase(),cB=D_[0].toUpperCase()+D_.slice(1);us(lB,"on"+cB)}us(_C,"onAnimationEnd"),us(wC,"onAnimationIteration"),us(yC,"onAnimationStart"),us("dblclick","onDoubleClick"),us("focusin","onFocus"),us("focusout","onBlur"),us(EL,"onTransitionRun"),us(SL,"onTransitionStart"),us(AL,"onTransitionCancel"),us(vC,"onTransitionEnd"),ol("onMouseEnter",["mouseout","mouseover"]),ol("onMouseLeave",["mouseout","mouseover"]),ol("onPointerEnter",["pointerout","pointerover"]),ol("onPointerLeave",["pointerout","pointerover"]),$r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$r("onBeforeInput",["compositionend","keypress","textInput","paste"]),$r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uB=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xu));function Ux(c,d){d=(d&4)!==0;for(var f=0;f<c.length;f++){var g=c[f],y=g.event;g=g.listeners;e:{var T=void 0;if(d)for(var E=g.length-1;0<=E;E--){var R=g[E],M=R.instance,$=R.currentTarget;if(R=R.listener,M!==T&&y.isPropagationStopped())break e;T=R,y.currentTarget=$;try{T(y)}catch(ne){bf(ne)}y.currentTarget=null,T=M}else for(E=0;E<g.length;E++){if(R=g[E],M=R.instance,$=R.currentTarget,R=R.listener,M!==T&&y.isPropagationStopped())break e;T=R,y.currentTarget=$;try{T(y)}catch(ne){bf(ne)}y.currentTarget=null,T=M}}}}function et(c,d){var f=d[Kp];f===void 0&&(f=d[Kp]=new Set);var g=c+"__bubble";f.has(g)||(zx(d,c,2,!1),f.add(g))}function O_(c,d,f){var g=0;d&&(g|=4),zx(f,c,g,d)}var Pf="_reactListening"+Math.random().toString(36).slice(2);function L_(c){if(!c[Pf]){c[Pf]=!0,N1.forEach(function(f){f!=="selectionchange"&&(uB.has(f)||O_(f,!1,c),O_(f,!0,c))});var d=c.nodeType===9?c:c.ownerDocument;d===null||d[Pf]||(d[Pf]=!0,O_("selectionchange",!1,d))}}function zx(c,d,f,g){switch(dk(d)){case 2:var y=LB;break;case 8:y=BB;break;default:y=J_}f=y.bind(null,d,f,c),y=void 0,!ob||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(y=!0),g?y!==void 0?c.addEventListener(d,f,{capture:!0,passive:y}):c.addEventListener(d,f,!0):y!==void 0?c.addEventListener(d,f,{passive:y}):c.addEventListener(d,f,!1)}function B_(c,d,f,g,y){var T=g;if((d&1)===0&&(d&2)===0&&g!==null)e:for(;;){if(g===null)return;var E=g.tag;if(E===3||E===4){var R=g.stateNode.containerInfo;if(R===y)break;if(E===4)for(E=g.return;E!==null;){var M=E.tag;if((M===3||M===4)&&E.stateNode.containerInfo===y)return;E=E.return}for(;R!==null;){if(E=nl(R),E===null)return;if(M=E.tag,M===5||M===6||M===26||M===27){g=T=E;continue e}R=R.parentNode}}g=g.return}K1(function(){var $=T,ne=ib(f),oe=[];e:{var K=CC.get(c);if(K!==void 0){var J=qh,Le=c;switch(c){case"keypress":if(Hh(f)===0)break e;case"keydown":case"keyup":J=sL;break;case"focusin":Le="focus",J=cb;break;case"focusout":Le="blur",J=cb;break;case"beforeblur":case"afterblur":J=cb;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=J1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=GO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=aL;break;case _C:case wC:case yC:J=ZO;break;case vC:J=cL;break;case"scroll":case"scrollend":J=qO;break;case"wheel":J=dL;break;case"copy":case"cut":case"paste":J=JO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Q1;break;case"toggle":case"beforetoggle":J=fL}var Ve=(d&4)!==0,St=!Ve&&(c==="scroll"||c==="scrollend"),z=Ve?K!==null?K+"Capture":null:K;Ve=[];for(var L=$,q;L!==null;){var ie=L;if(q=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||q===null||z===null||(ie=Wc(L,z),ie!=null&&Ve.push(ku(L,ie,q))),St)break;L=L.return}0<Ve.length&&(K=new J(K,Le,null,f,ne),oe.push({event:K,listeners:Ve}))}}if((d&7)===0){e:{if(K=c==="mouseover"||c==="pointerover",J=c==="mouseout"||c==="pointerout",K&&f!==nb&&(Le=f.relatedTarget||f.fromElement)&&(nl(Le)||Le[tl]))break e;if((J||K)&&(K=ne.window===ne?ne:(K=ne.ownerDocument)?K.defaultView||K.parentWindow:window,J?(Le=f.relatedTarget||f.toElement,J=$,Le=Le?nl(Le):null,Le!==null&&(St=o(Le),Ve=Le.tag,Le!==St||Ve!==5&&Ve!==27&&Ve!==6)&&(Le=null)):(J=null,Le=$),J!==Le)){if(Ve=J1,ie="onMouseLeave",z="onMouseEnter",L="mouse",(c==="pointerout"||c==="pointerover")&&(Ve=Q1,ie="onPointerLeave",z="onPointerEnter",L="pointer"),St=J==null?K:Hc(J),q=Le==null?K:Hc(Le),K=new Ve(ie,L+"leave",J,f,ne),K.target=St,K.relatedTarget=q,ie=null,nl(ne)===$&&(Ve=new Ve(z,L+"enter",Le,f,ne),Ve.target=q,Ve.relatedTarget=St,ie=Ve),St=ie,J&&Le)t:{for(Ve=J,z=Le,L=0,q=Ve;q;q=Ol(q))L++;for(q=0,ie=z;ie;ie=Ol(ie))q++;for(;0<L-q;)Ve=Ol(Ve),L--;for(;0<q-L;)z=Ol(z),q--;for(;L--;){if(Ve===z||z!==null&&Ve===z.alternate)break t;Ve=Ol(Ve),z=Ol(z)}Ve=null}else Ve=null;J!==null&&Hx(oe,K,J,Ve,!1),Le!==null&&St!==null&&Hx(oe,St,Le,Ve,!0)}}e:{if(K=$?Hc($):window,J=K.nodeName&&K.nodeName.toLowerCase(),J==="select"||J==="input"&&K.type==="file")var xe=aC;else if(oC(K))if(lC)xe=TL;else{xe=vL;var Xe=yL}else J=K.nodeName,!J||J.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?$&&tb($.elementType)&&(xe=aC):xe=CL;if(xe&&(xe=xe(c,$))){rC(oe,xe,f,ne);break e}Xe&&Xe(c,K,$),c==="focusout"&&$&&K.type==="number"&&$.memoizedProps.value!=null&&eb(K,"number",K.value)}switch(Xe=$?Hc($):window,c){case"focusin":(oC(Xe)||Xe.contentEditable==="true")&&(hl=Xe,gb=$,Jc=null);break;case"focusout":Jc=gb=hl=null;break;case"mousedown":pb=!0;break;case"contextmenu":case"mouseup":case"dragend":pb=!1,pC(oe,f,ne);break;case"selectionchange":if(kL)break;case"keydown":case"keyup":pC(oe,f,ne)}var Ie;if(db)e:{switch(c){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else dl?iC(c,f)&&(Ne="onCompositionEnd"):c==="keydown"&&f.keyCode===229&&(Ne="onCompositionStart");Ne&&(eC&&f.locale!=="ko"&&(dl||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&dl&&(Ie=Z1()):(qo=ne,rb="value"in qo?qo.value:qo.textContent,dl=!0)),Xe=Mf($,Ne),0<Xe.length&&(Ne=new X1(Ne,c,null,f,ne),oe.push({event:Ne,listeners:Xe}),Ie?Ne.data=Ie:(Ie=sC(f),Ie!==null&&(Ne.data=Ie)))),(Ie=gL?pL(c,f):bL(c,f))&&(Ne=Mf($,"onBeforeInput"),0<Ne.length&&(Xe=new X1("onBeforeInput","beforeinput",null,f,ne),oe.push({event:Xe,listeners:Ne}),Xe.data=Ie)),aB(oe,c,$,f,ne)}Ux(oe,d)})}function ku(c,d,f){return{instance:c,listener:d,currentTarget:f}}function Mf(c,d){for(var f=d+"Capture",g=[];c!==null;){var y=c,T=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||T===null||(y=Wc(c,f),y!=null&&g.unshift(ku(c,y,T)),y=Wc(c,d),y!=null&&g.push(ku(c,y,T))),c.tag===3)return g;c=c.return}return[]}function Ol(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function Hx(c,d,f,g,y){for(var T=d._reactName,E=[];f!==null&&f!==g;){var R=f,M=R.alternate,$=R.stateNode;if(R=R.tag,M!==null&&M===g)break;R!==5&&R!==26&&R!==27||$===null||(M=$,y?($=Wc(f,T),$!=null&&E.unshift(ku(f,$,M))):y||($=Wc(f,T),$!=null&&E.push(ku(f,$,M)))),f=f.return}E.length!==0&&c.push({event:d,listeners:E})}var dB=/\r\n?/g,hB=/\u0000|\uFFFD/g;function Wx(c){return(typeof c=="string"?c:""+c).replace(dB,`
`).replace(hB,"")}function qx(c,d){return d=Wx(d),Wx(c)===d}function Vf(){}function Et(c,d,f,g,y,T){switch(f){case"children":typeof g=="string"?d==="body"||d==="textarea"&&g===""||ll(c,g):(typeof g=="number"||typeof g=="bigint")&&d!=="body"&&ll(c,""+g);break;case"className":Lh(c,"class",g);break;case"tabIndex":Lh(c,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Lh(c,f,g);break;case"style":G1(c,g,T);break;case"data":if(d!=="object"){Lh(c,"data",g);break}case"src":case"href":if(g===""&&(d!=="a"||f!=="href")){c.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){c.removeAttribute(f);break}g=Uh(""+g),c.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){c.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(f==="formAction"?(d!=="input"&&Et(c,d,"name",y.name,y,null),Et(c,d,"formEncType",y.formEncType,y,null),Et(c,d,"formMethod",y.formMethod,y,null),Et(c,d,"formTarget",y.formTarget,y,null)):(Et(c,d,"encType",y.encType,y,null),Et(c,d,"method",y.method,y,null),Et(c,d,"target",y.target,y,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){c.removeAttribute(f);break}g=Uh(""+g),c.setAttribute(f,g);break;case"onClick":g!=null&&(c.onclick=Vf);break;case"onScroll":g!=null&&et("scroll",c);break;case"onScrollEnd":g!=null&&et("scrollend",c);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(y.children!=null)throw Error(n(60));c.innerHTML=f}}break;case"multiple":c.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":c.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){c.removeAttribute("xlink:href");break}f=Uh(""+g),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?c.setAttribute(f,""+g):c.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?c.setAttribute(f,""):c.removeAttribute(f);break;case"capture":case"download":g===!0?c.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?c.setAttribute(f,g):c.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?c.setAttribute(f,g):c.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?c.removeAttribute(f):c.setAttribute(f,g);break;case"popover":et("beforetoggle",c),et("toggle",c),Oh(c,"popover",g);break;case"xlinkActuate":Js(c,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Js(c,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Js(c,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Js(c,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Js(c,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Js(c,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Js(c,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Js(c,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Js(c,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Oh(c,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=HO.get(f)||f,Oh(c,f,g))}}function F_(c,d,f,g,y,T){switch(f){case"style":G1(c,g,T);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(y.children!=null)throw Error(n(60));c.innerHTML=f}}break;case"children":typeof g=="string"?ll(c,g):(typeof g=="number"||typeof g=="bigint")&&ll(c,""+g);break;case"onScroll":g!=null&&et("scroll",c);break;case"onScrollEnd":g!=null&&et("scrollend",c);break;case"onClick":g!=null&&(c.onclick=Vf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!D1.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(y=f.endsWith("Capture"),d=f.slice(2,y?f.length-7:void 0),T=c[ai]||null,T=T!=null?T[f]:null,typeof T=="function"&&c.removeEventListener(d,T,y),typeof g=="function")){typeof T!="function"&&T!==null&&(f in c?c[f]=null:c.hasAttribute(f)&&c.removeAttribute(f)),c.addEventListener(d,g,y);break e}f in c?c[f]=g:g===!0?c.setAttribute(f,""):Oh(c,f,g)}}}function Mn(c,d,f){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",c),et("load",c);var g=!1,y=!1,T;for(T in f)if(f.hasOwnProperty(T)){var E=f[T];if(E!=null)switch(T){case"src":g=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,d));default:Et(c,d,T,E,f,null)}}y&&Et(c,d,"srcSet",f.srcSet,f,null),g&&Et(c,d,"src",f.src,f,null);return;case"input":et("invalid",c);var R=T=E=y=null,M=null,$=null;for(g in f)if(f.hasOwnProperty(g)){var ne=f[g];if(ne!=null)switch(g){case"name":y=ne;break;case"type":E=ne;break;case"checked":M=ne;break;case"defaultChecked":$=ne;break;case"value":T=ne;break;case"defaultValue":R=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(n(137,d));break;default:Et(c,d,g,ne,f,null)}}H1(c,T,R,M,$,E,y,!1),Bh(c);return;case"select":et("invalid",c),g=E=T=null;for(y in f)if(f.hasOwnProperty(y)&&(R=f[y],R!=null))switch(y){case"value":T=R;break;case"defaultValue":E=R;break;case"multiple":g=R;default:Et(c,d,y,R,f,null)}d=T,f=E,c.multiple=!!g,d!=null?al(c,!!g,d,!1):f!=null&&al(c,!!g,f,!0);return;case"textarea":et("invalid",c),T=y=g=null;for(E in f)if(f.hasOwnProperty(E)&&(R=f[E],R!=null))switch(E){case"value":g=R;break;case"defaultValue":y=R;break;case"children":T=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(n(91));break;default:Et(c,d,E,R,f,null)}q1(c,g,y,T),Bh(c);return;case"option":for(M in f)if(f.hasOwnProperty(M)&&(g=f[M],g!=null))switch(M){case"selected":c.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Et(c,d,M,g,f,null)}return;case"dialog":et("beforetoggle",c),et("toggle",c),et("cancel",c),et("close",c);break;case"iframe":case"object":et("load",c);break;case"video":case"audio":for(g=0;g<xu.length;g++)et(xu[g],c);break;case"image":et("error",c),et("load",c);break;case"details":et("toggle",c);break;case"embed":case"source":case"link":et("error",c),et("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in f)if(f.hasOwnProperty($)&&(g=f[$],g!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,d));default:Et(c,d,$,g,f,null)}return;default:if(tb(d)){for(ne in f)f.hasOwnProperty(ne)&&(g=f[ne],g!==void 0&&F_(c,d,ne,g,f,void 0));return}}for(R in f)f.hasOwnProperty(R)&&(g=f[R],g!=null&&Et(c,d,R,g,f,null))}function fB(c,d,f,g){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,T=null,E=null,R=null,M=null,$=null,ne=null;for(J in f){var oe=f[J];if(f.hasOwnProperty(J)&&oe!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":M=oe;default:g.hasOwnProperty(J)||Et(c,d,J,null,g,oe)}}for(var K in g){var J=g[K];if(oe=f[K],g.hasOwnProperty(K)&&(J!=null||oe!=null))switch(K){case"type":T=J;break;case"name":y=J;break;case"checked":$=J;break;case"defaultChecked":ne=J;break;case"value":E=J;break;case"defaultValue":R=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(n(137,d));break;default:J!==oe&&Et(c,d,K,J,g,oe)}}Qp(c,E,R,M,$,ne,T,y);return;case"select":J=E=R=K=null;for(T in f)if(M=f[T],f.hasOwnProperty(T)&&M!=null)switch(T){case"value":break;case"multiple":J=M;default:g.hasOwnProperty(T)||Et(c,d,T,null,g,M)}for(y in g)if(T=g[y],M=f[y],g.hasOwnProperty(y)&&(T!=null||M!=null))switch(y){case"value":K=T;break;case"defaultValue":R=T;break;case"multiple":E=T;default:T!==M&&Et(c,d,y,T,g,M)}d=R,f=E,g=J,K!=null?al(c,!!f,K,!1):!!g!=!!f&&(d!=null?al(c,!!f,d,!0):al(c,!!f,f?[]:"",!1));return;case"textarea":J=K=null;for(R in f)if(y=f[R],f.hasOwnProperty(R)&&y!=null&&!g.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Et(c,d,R,null,g,y)}for(E in g)if(y=g[E],T=f[E],g.hasOwnProperty(E)&&(y!=null||T!=null))switch(E){case"value":K=y;break;case"defaultValue":J=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(n(91));break;default:y!==T&&Et(c,d,E,y,g,T)}W1(c,K,J);return;case"option":for(var Le in f)if(K=f[Le],f.hasOwnProperty(Le)&&K!=null&&!g.hasOwnProperty(Le))switch(Le){case"selected":c.selected=!1;break;default:Et(c,d,Le,null,g,K)}for(M in g)if(K=g[M],J=f[M],g.hasOwnProperty(M)&&K!==J&&(K!=null||J!=null))switch(M){case"selected":c.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:Et(c,d,M,K,g,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in f)K=f[Ve],f.hasOwnProperty(Ve)&&K!=null&&!g.hasOwnProperty(Ve)&&Et(c,d,Ve,null,g,K);for($ in g)if(K=g[$],J=f[$],g.hasOwnProperty($)&&K!==J&&(K!=null||J!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(n(137,d));break;default:Et(c,d,$,K,g,J)}return;default:if(tb(d)){for(var St in f)K=f[St],f.hasOwnProperty(St)&&K!==void 0&&!g.hasOwnProperty(St)&&F_(c,d,St,void 0,g,K);for(ne in g)K=g[ne],J=f[ne],!g.hasOwnProperty(ne)||K===J||K===void 0&&J===void 0||F_(c,d,ne,K,g,J);return}}for(var z in f)K=f[z],f.hasOwnProperty(z)&&K!=null&&!g.hasOwnProperty(z)&&Et(c,d,z,null,g,K);for(oe in g)K=g[oe],J=f[oe],!g.hasOwnProperty(oe)||K===J||K==null&&J==null||Et(c,d,oe,K,g,J)}var U_=null,z_=null;function Nf(c){return c.nodeType===9?c:c.ownerDocument}function $x(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gx(c,d){if(c===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&d==="foreignObject"?0:c}function H_(c,d){return c==="textarea"||c==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var W_=null;function mB(){var c=window.event;return c&&c.type==="popstate"?c===W_?!1:(W_=c,!0):(W_=null,!1)}var jx=typeof setTimeout=="function"?setTimeout:void 0,gB=typeof clearTimeout=="function"?clearTimeout:void 0,Kx=typeof Promise=="function"?Promise:void 0,pB=typeof queueMicrotask=="function"?queueMicrotask:typeof Kx<"u"?function(c){return Kx.resolve(null).then(c).catch(bB)}:jx;function bB(c){setTimeout(function(){throw c})}function rr(c){return c==="head"}function Zx(c,d){var f=d,g=0,y=0;do{var T=f.nextSibling;if(c.removeChild(f),T&&T.nodeType===8)if(f=T.data,f==="/$"){if(0<g&&8>g){f=g;var E=c.ownerDocument;if(f&1&&Eu(E.documentElement),f&2&&Eu(E.body),f&4)for(f=E.head,Eu(f),E=f.firstChild;E;){var R=E.nextSibling,M=E.nodeName;E[zc]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&E.rel.toLowerCase()==="stylesheet"||f.removeChild(E),E=R}}if(y===0){c.removeChild(T),Nu(d);return}y--}else f==="$"||f==="$?"||f==="$!"?y++:g=f.charCodeAt(0)-48;else g=0;f=T}while(f);Nu(d)}function q_(c){var d=c.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var f=d;switch(d=d.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":q_(f),Zp(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}c.removeChild(f)}}function _B(c,d,f,g){for(;c.nodeType===1;){var y=f;if(c.nodeName.toLowerCase()!==d.toLowerCase()){if(!g&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(g){if(!c[zc])switch(d){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(T=c.getAttribute("rel"),T==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(T!==y.rel||c.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||c.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||c.getAttribute("title")!==(y.title==null?null:y.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(T=c.getAttribute("src"),(T!==(y.src==null?null:y.src)||c.getAttribute("type")!==(y.type==null?null:y.type)||c.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&T&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(d==="input"&&c.type==="hidden"){var T=y.name==null?null:""+y.name;if(y.type==="hidden"&&c.getAttribute("name")===T)return c}else return c;if(c=hs(c.nextSibling),c===null)break}return null}function wB(c,d,f){if(d==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!f||(c=hs(c.nextSibling),c===null))return null;return c}function $_(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function yB(c,d){var f=c.ownerDocument;if(c.data!=="$?"||f.readyState==="complete")d();else{var g=function(){d(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),c._reactRetry=g}}function hs(c){for(;c!=null;c=c.nextSibling){var d=c.nodeType;if(d===1||d===3)break;if(d===8){if(d=c.data,d==="$"||d==="$!"||d==="$?"||d==="F!"||d==="F")break;if(d==="/$")return null}}return c}var G_=null;function Yx(c){c=c.previousSibling;for(var d=0;c;){if(c.nodeType===8){var f=c.data;if(f==="$"||f==="$!"||f==="$?"){if(d===0)return c;d--}else f==="/$"&&d++}c=c.previousSibling}return null}function Jx(c,d,f){switch(d=Nf(f),c){case"html":if(c=d.documentElement,!c)throw Error(n(452));return c;case"head":if(c=d.head,!c)throw Error(n(453));return c;case"body":if(c=d.body,!c)throw Error(n(454));return c;default:throw Error(n(451))}}function Eu(c){for(var d=c.attributes;d.length;)c.removeAttributeNode(d[0]);Zp(c)}var ji=new Map,Xx=new Set;function Df(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var ho=le.d;le.d={f:vB,r:CB,D:TB,C:xB,L:kB,m:EB,X:AB,S:SB,M:RB};function vB(){var c=ho.f(),d=Ef();return c||d}function CB(c){var d=il(c);d!==null&&d.tag===5&&d.type==="form"?_T(d):ho.r(c)}var Ll=typeof document>"u"?null:document;function Qx(c,d,f){var g=Ll;if(g&&typeof d=="string"&&d){var y=Ui(d);y='link[rel="'+c+'"][href="'+y+'"]',typeof f=="string"&&(y+='[crossorigin="'+f+'"]'),Xx.has(y)||(Xx.add(y),c={rel:c,crossOrigin:f,href:d},g.querySelector(y)===null&&(d=g.createElement("link"),Mn(d,"link",c),wn(d),g.head.appendChild(d)))}}function TB(c){ho.D(c),Qx("dns-prefetch",c,null)}function xB(c,d){ho.C(c,d),Qx("preconnect",c,d)}function kB(c,d,f){ho.L(c,d,f);var g=Ll;if(g&&c&&d){var y='link[rel="preload"][as="'+Ui(d)+'"]';d==="image"&&f&&f.imageSrcSet?(y+='[imagesrcset="'+Ui(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(y+='[imagesizes="'+Ui(f.imageSizes)+'"]')):y+='[href="'+Ui(c)+'"]';var T=y;switch(d){case"style":T=Bl(c);break;case"script":T=Fl(c)}ji.has(T)||(c=h({rel:"preload",href:d==="image"&&f&&f.imageSrcSet?void 0:c,as:d},f),ji.set(T,c),g.querySelector(y)!==null||d==="style"&&g.querySelector(Su(T))||d==="script"&&g.querySelector(Au(T))||(d=g.createElement("link"),Mn(d,"link",c),wn(d),g.head.appendChild(d)))}}function EB(c,d){ho.m(c,d);var f=Ll;if(f&&c){var g=d&&typeof d.as=="string"?d.as:"script",y='link[rel="modulepreload"][as="'+Ui(g)+'"][href="'+Ui(c)+'"]',T=y;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Fl(c)}if(!ji.has(T)&&(c=h({rel:"modulepreload",href:c},d),ji.set(T,c),f.querySelector(y)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Au(T)))return}g=f.createElement("link"),Mn(g,"link",c),wn(g),f.head.appendChild(g)}}}function SB(c,d,f){ho.S(c,d,f);var g=Ll;if(g&&c){var y=sl(g).hoistableStyles,T=Bl(c);d=d||"default";var E=y.get(T);if(!E){var R={loading:0,preload:null};if(E=g.querySelector(Su(T)))R.loading=5;else{c=h({rel:"stylesheet",href:c,"data-precedence":d},f),(f=ji.get(T))&&j_(c,f);var M=E=g.createElement("link");wn(M),Mn(M,"link",c),M._p=new Promise(function($,ne){M.onload=$,M.onerror=ne}),M.addEventListener("load",function(){R.loading|=1}),M.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Of(E,d,g)}E={type:"stylesheet",instance:E,count:1,state:R},y.set(T,E)}}}function AB(c,d){ho.X(c,d);var f=Ll;if(f&&c){var g=sl(f).hoistableScripts,y=Fl(c),T=g.get(y);T||(T=f.querySelector(Au(y)),T||(c=h({src:c,async:!0},d),(d=ji.get(y))&&K_(c,d),T=f.createElement("script"),wn(T),Mn(T,"link",c),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},g.set(y,T))}}function RB(c,d){ho.M(c,d);var f=Ll;if(f&&c){var g=sl(f).hoistableScripts,y=Fl(c),T=g.get(y);T||(T=f.querySelector(Au(y)),T||(c=h({src:c,async:!0,type:"module"},d),(d=ji.get(y))&&K_(c,d),T=f.createElement("script"),wn(T),Mn(T,"link",c),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},g.set(y,T))}}function ek(c,d,f,g){var y=(y=Q.current)?Df(y):null;if(!y)throw Error(n(446));switch(c){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(d=Bl(f.href),f=sl(y).hoistableStyles,g=f.get(d),g||(g={type:"style",instance:null,count:0,state:null},f.set(d,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){c=Bl(f.href);var T=sl(y).hoistableStyles,E=T.get(c);if(E||(y=y.ownerDocument||y,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(c,E),(T=y.querySelector(Su(c)))&&!T._p&&(E.instance=T,E.state.loading=5),ji.has(c)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},ji.set(c,f),T||IB(y,c,f,E.state))),d&&g===null)throw Error(n(528,""));return E}if(d&&g!==null)throw Error(n(529,""));return null;case"script":return d=f.async,f=f.src,typeof f=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=Fl(f),f=sl(y).hoistableScripts,g=f.get(d),g||(g={type:"script",instance:null,count:0,state:null},f.set(d,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,c))}}function Bl(c){return'href="'+Ui(c)+'"'}function Su(c){return'link[rel="stylesheet"]['+c+"]"}function tk(c){return h({},c,{"data-precedence":c.precedence,precedence:null})}function IB(c,d,f,g){c.querySelector('link[rel="preload"][as="style"]['+d+"]")?g.loading=1:(d=c.createElement("link"),g.preload=d,d.addEventListener("load",function(){return g.loading|=1}),d.addEventListener("error",function(){return g.loading|=2}),Mn(d,"link",f),wn(d),c.head.appendChild(d))}function Fl(c){return'[src="'+Ui(c)+'"]'}function Au(c){return"script[async]"+c}function nk(c,d,f){if(d.count++,d.instance===null)switch(d.type){case"style":var g=c.querySelector('style[data-href~="'+Ui(f.href)+'"]');if(g)return d.instance=g,wn(g),g;var y=h({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(c.ownerDocument||c).createElement("style"),wn(g),Mn(g,"style",y),Of(g,f.precedence,c),d.instance=g;case"stylesheet":y=Bl(f.href);var T=c.querySelector(Su(y));if(T)return d.state.loading|=4,d.instance=T,wn(T),T;g=tk(f),(y=ji.get(y))&&j_(g,y),T=(c.ownerDocument||c).createElement("link"),wn(T);var E=T;return E._p=new Promise(function(R,M){E.onload=R,E.onerror=M}),Mn(T,"link",g),d.state.loading|=4,Of(T,f.precedence,c),d.instance=T;case"script":return T=Fl(f.src),(y=c.querySelector(Au(T)))?(d.instance=y,wn(y),y):(g=f,(y=ji.get(T))&&(g=h({},f),K_(g,y)),c=c.ownerDocument||c,y=c.createElement("script"),wn(y),Mn(y,"link",g),c.head.appendChild(y),d.instance=y);case"void":return null;default:throw Error(n(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(g=d.instance,d.state.loading|=4,Of(g,f.precedence,c));return d.instance}function Of(c,d,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=g.length?g[g.length-1]:null,T=y,E=0;E<g.length;E++){var R=g[E];if(R.dataset.precedence===d)T=R;else if(T!==y)break}T?T.parentNode.insertBefore(c,T.nextSibling):(d=f.nodeType===9?f.head:f,d.insertBefore(c,d.firstChild))}function j_(c,d){c.crossOrigin==null&&(c.crossOrigin=d.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=d.referrerPolicy),c.title==null&&(c.title=d.title)}function K_(c,d){c.crossOrigin==null&&(c.crossOrigin=d.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=d.referrerPolicy),c.integrity==null&&(c.integrity=d.integrity)}var Lf=null;function ik(c,d,f){if(Lf===null){var g=new Map,y=Lf=new Map;y.set(f,g)}else y=Lf,g=y.get(f),g||(g=new Map,y.set(f,g));if(g.has(c))return g;for(g.set(c,null),f=f.getElementsByTagName(c),y=0;y<f.length;y++){var T=f[y];if(!(T[zc]||T[Fn]||c==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var E=T.getAttribute(d)||"";E=c+E;var R=g.get(E);R?R.push(T):g.set(E,[T])}}return g}function sk(c,d,f){c=c.ownerDocument||c,c.head.insertBefore(f,d==="title"?c.querySelector("head > title"):null)}function PB(c,d,f){if(f===1||d.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return c=d.disabled,typeof d.precedence=="string"&&c==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function ok(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var Ru=null;function MB(){}function VB(c,d,f){if(Ru===null)throw Error(n(475));var g=Ru;if(d.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var y=Bl(f.href),T=c.querySelector(Su(y));if(T){c=T._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(g.count++,g=Bf.bind(g),c.then(g,g)),d.state.loading|=4,d.instance=T,wn(T);return}T=c.ownerDocument||c,f=tk(f),(y=ji.get(y))&&j_(f,y),T=T.createElement("link"),wn(T);var E=T;E._p=new Promise(function(R,M){E.onload=R,E.onerror=M}),Mn(T,"link",f),d.instance=T}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(d,c),(c=d.state.preload)&&(d.state.loading&3)===0&&(g.count++,d=Bf.bind(g),c.addEventListener("load",d),c.addEventListener("error",d))}}function NB(){if(Ru===null)throw Error(n(475));var c=Ru;return c.stylesheets&&c.count===0&&Z_(c,c.stylesheets),0<c.count?function(d){var f=setTimeout(function(){if(c.stylesheets&&Z_(c,c.stylesheets),c.unsuspend){var g=c.unsuspend;c.unsuspend=null,g()}},6e4);return c.unsuspend=d,function(){c.unsuspend=null,clearTimeout(f)}}:null}function Bf(){if(this.count--,this.count===0){if(this.stylesheets)Z_(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var Ff=null;function Z_(c,d){c.stylesheets=null,c.unsuspend!==null&&(c.count++,Ff=new Map,d.forEach(DB,c),Ff=null,Bf.call(c))}function DB(c,d){if(!(d.state.loading&4)){var f=Ff.get(c);if(f)var g=f.get(null);else{f=new Map,Ff.set(c,f);for(var y=c.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<y.length;T++){var E=y[T];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(f.set(E.dataset.precedence,E),g=E)}g&&f.set(null,g)}y=d.instance,E=y.getAttribute("data-precedence"),T=f.get(E)||g,T===g&&f.set(null,y),f.set(E,y),this.count++,g=Bf.bind(this),y.addEventListener("load",g),y.addEventListener("error",g),T?T.parentNode.insertBefore(y,T.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(y,c.firstChild)),d.state.loading|=4}}var Iu={$$typeof:P,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function OB(c,d,f,g,y,T,E,R){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$p(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$p(0),this.hiddenUpdates=$p(null),this.identifierPrefix=g,this.onUncaughtError=y,this.onCaughtError=T,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function rk(c,d,f,g,y,T,E,R,M,$,ne,oe){return c=new OB(c,d,f,E,R,M,$,oe),d=1,T===!0&&(d|=24),T=Ei(3,null,null,d),c.current=T,T.stateNode=c,d=Ib(),d.refCount++,c.pooledCache=d,d.refCount++,T.memoizedState={element:g,isDehydrated:f,cache:d},Nb(T),c}function ak(c){return c?(c=pl,c):pl}function lk(c,d,f,g,y,T){y=ak(y),g.context===null?g.context=y:g.pendingContext=y,g=jo(d),g.payload={element:f},T=T===void 0?null:T,T!==null&&(g.callback=T),f=Ko(c,g,d),f!==null&&(Pi(f,c,d),ru(f,c,d))}function ck(c,d){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var f=c.retryLane;c.retryLane=f!==0&&f<d?f:d}}function Y_(c,d){ck(c,d),(c=c.alternate)&&ck(c,d)}function uk(c){if(c.tag===13){var d=gl(c,67108864);d!==null&&Pi(d,c,67108864),Y_(c,67108864)}}var Uf=!0;function LB(c,d,f,g){var y=B.T;B.T=null;var T=le.p;try{le.p=2,J_(c,d,f,g)}finally{le.p=T,B.T=y}}function BB(c,d,f,g){var y=B.T;B.T=null;var T=le.p;try{le.p=8,J_(c,d,f,g)}finally{le.p=T,B.T=y}}function J_(c,d,f,g){if(Uf){var y=X_(g);if(y===null)B_(c,d,g,zf,f),hk(c,g);else if(UB(y,c,d,f,g))g.stopPropagation();else if(hk(c,g),d&4&&-1<FB.indexOf(c)){for(;y!==null;){var T=il(y);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var E=Rn(T.pendingLanes);if(E!==0){var R=T;for(R.pendingLanes|=2,R.entangledLanes|=2;E;){var M=1<<31-jt(E);R.entanglements[1]|=M,E&=~M}Ps(T),(yt&6)===0&&(xf=He()+500,Tu(0))}}break;case 13:R=gl(T,2),R!==null&&Pi(R,T,2),Ef(),Y_(T,2)}if(T=X_(g),T===null&&B_(c,d,g,zf,f),T===y)break;y=T}y!==null&&g.stopPropagation()}else B_(c,d,g,null,f)}}function X_(c){return c=ib(c),Q_(c)}var zf=null;function Q_(c){if(zf=null,c=nl(c),c!==null){var d=o(c);if(d===null)c=null;else{var f=d.tag;if(f===13){if(c=r(d),c!==null)return c;c=null}else if(f===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;c=null}else d!==c&&(c=null)}}return zf=c,null}function dk(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(An()){case ct:return 2;case gt:return 8;case xi:case ri:return 32;case un:return 268435456;default:return 32}default:return 32}}var ew=!1,ar=null,lr=null,cr=null,Pu=new Map,Mu=new Map,ur=[],FB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hk(c,d){switch(c){case"focusin":case"focusout":ar=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":Pu.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mu.delete(d.pointerId)}}function Vu(c,d,f,g,y,T){return c===null||c.nativeEvent!==T?(c={blockedOn:d,domEventName:f,eventSystemFlags:g,nativeEvent:T,targetContainers:[y]},d!==null&&(d=il(d),d!==null&&uk(d)),c):(c.eventSystemFlags|=g,d=c.targetContainers,y!==null&&d.indexOf(y)===-1&&d.push(y),c)}function UB(c,d,f,g,y){switch(d){case"focusin":return ar=Vu(ar,c,d,f,g,y),!0;case"dragenter":return lr=Vu(lr,c,d,f,g,y),!0;case"mouseover":return cr=Vu(cr,c,d,f,g,y),!0;case"pointerover":var T=y.pointerId;return Pu.set(T,Vu(Pu.get(T)||null,c,d,f,g,y)),!0;case"gotpointercapture":return T=y.pointerId,Mu.set(T,Vu(Mu.get(T)||null,c,d,f,g,y)),!0}return!1}function fk(c){var d=nl(c.target);if(d!==null){var f=o(d);if(f!==null){if(d=f.tag,d===13){if(d=r(f),d!==null){c.blockedOn=d,VO(c.priority,function(){if(f.tag===13){var g=Ii();g=Gp(g);var y=gl(f,g);y!==null&&Pi(y,f,g),Y_(f,g)}});return}}else if(d===3&&f.stateNode.current.memoizedState.isDehydrated){c.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Hf(c){if(c.blockedOn!==null)return!1;for(var d=c.targetContainers;0<d.length;){var f=X_(c.nativeEvent);if(f===null){f=c.nativeEvent;var g=new f.constructor(f.type,f);nb=g,f.target.dispatchEvent(g),nb=null}else return d=il(f),d!==null&&uk(d),c.blockedOn=f,!1;d.shift()}return!0}function mk(c,d,f){Hf(c)&&f.delete(d)}function zB(){ew=!1,ar!==null&&Hf(ar)&&(ar=null),lr!==null&&Hf(lr)&&(lr=null),cr!==null&&Hf(cr)&&(cr=null),Pu.forEach(mk),Mu.forEach(mk)}function Wf(c,d){c.blockedOn===d&&(c.blockedOn=null,ew||(ew=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zB)))}var qf=null;function gk(c){qf!==c&&(qf=c,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){qf===c&&(qf=null);for(var d=0;d<c.length;d+=3){var f=c[d],g=c[d+1],y=c[d+2];if(typeof g!="function"){if(Q_(g||f)===null)continue;break}var T=il(f);T!==null&&(c.splice(d,3),d-=3,Qb(T,{pending:!0,data:y,method:f.method,action:g},g,y))}}))}function Nu(c){function d(M){return Wf(M,c)}ar!==null&&Wf(ar,c),lr!==null&&Wf(lr,c),cr!==null&&Wf(cr,c),Pu.forEach(d),Mu.forEach(d);for(var f=0;f<ur.length;f++){var g=ur[f];g.blockedOn===c&&(g.blockedOn=null)}for(;0<ur.length&&(f=ur[0],f.blockedOn===null);)fk(f),f.blockedOn===null&&ur.shift();if(f=(c.ownerDocument||c).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var y=f[g],T=f[g+1],E=y[ai]||null;if(typeof T=="function")E||gk(f);else if(E){var R=null;if(T&&T.hasAttribute("formAction")){if(y=T,E=T[ai]||null)R=E.formAction;else if(Q_(y)!==null)continue}else R=E.action;typeof R=="function"?f[g+1]=R:(f.splice(g,3),g-=3),gk(f)}}}function tw(c){this._internalRoot=c}$f.prototype.render=tw.prototype.render=function(c){var d=this._internalRoot;if(d===null)throw Error(n(409));var f=d.current,g=Ii();lk(f,g,c,d,null,null)},$f.prototype.unmount=tw.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var d=c.containerInfo;lk(c.current,2,null,c,null,null),Ef(),d[tl]=null}};function $f(c){this._internalRoot=c}$f.prototype.unstable_scheduleHydration=function(c){if(c){var d=M1();c={blockedOn:null,target:c,priority:d};for(var f=0;f<ur.length&&d!==0&&d<ur[f].priority;f++);ur.splice(f,0,c),f===0&&fk(c)}};var pk=t.version;if(pk!=="19.1.0")throw Error(n(527,pk,"19.1.0"));le.findDOMNode=function(c){var d=c._reactInternals;if(d===void 0)throw typeof c.render=="function"?Error(n(188)):(c=Object.keys(c).join(","),Error(n(268,c)));return c=l(d),c=c!==null?u(c):null,c=c===null?null:c.stateNode,c};var HB={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gf.isDisabled&&Gf.supportsFiber)try{Ge=Gf.inject(HB),Pt=Gf}catch{}}return Ou.createRoot=function(c,d){if(!s(c))throw Error(n(299));var f=!1,g="",y=MT,T=VT,E=NT,R=null;return d!=null&&(d.unstable_strictMode===!0&&(f=!0),d.identifierPrefix!==void 0&&(g=d.identifierPrefix),d.onUncaughtError!==void 0&&(y=d.onUncaughtError),d.onCaughtError!==void 0&&(T=d.onCaughtError),d.onRecoverableError!==void 0&&(E=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(R=d.unstable_transitionCallbacks)),d=rk(c,1,!1,null,null,f,g,y,T,E,R,null),c[tl]=d.current,L_(c),new tw(d)},Ou.hydrateRoot=function(c,d,f){if(!s(c))throw Error(n(299));var g=!1,y="",T=MT,E=VT,R=NT,M=null,$=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(T=f.onUncaughtError),f.onCaughtError!==void 0&&(E=f.onCaughtError),f.onRecoverableError!==void 0&&(R=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(M=f.unstable_transitionCallbacks),f.formState!==void 0&&($=f.formState)),d=rk(c,1,!0,d,f??null,g,y,T,E,R,M,$),d.context=ak(null),f=d.current,g=Ii(),g=Gp(g),y=jo(g),y.callback=null,Ko(f,y,g),f=g,d.current.lanes=f,Uc(d,f),Ps(d),c[tl]=d.current,L_(c),new $f(d)},Ou.version="19.1.0",Ou}var Ek;function t3(){if(Ek)return sw.exports;Ek=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),sw.exports=e3(),sw.exports}var n3=t3();const i3="/animal-center/assets/banner-CERUORKF.png",s3="/animal-center/assets/logo-DTo2tcWP.png",py=[{title:"동물보호센터",link:"/introCenter",sub:[{subTitle:"동물보호센터 소개",subLink:"/introCenter"},{subTitle:"오시는길",subLink:"/contactUs"}]},{title:"동물보호 정보",link:"/animalList",sub:[{subTitle:"유기동물 현황",subLink:"/animalChart"},{subTitle:"유기동물 보호정보",subLink:"/animalList"},{subTitle:"유기동물 신고",subLink:"/animalReport"}]},{title:"반려생활 길잡이",link:"/infoPet",sub:[{subTitle:"반려생활 길잡이",subLink:"/infoPet"},{subTitle:"반려동물 출입식당",subLink:"/petRestaurant"},{subTitle:"무엇이든 물어보살",subLink:"/petQuestion"}]}],o3="data:image/svg+xml,%3csvg%20width='200'%20height='200'%20viewBox='0%200%20200%20200'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M28%2045H173'%20stroke='black'%20stroke-width='10'%20stroke-linecap='round'/%3e%3cpath%20d='M73%20101H173'%20stroke='black'%20stroke-width='10'%20stroke-linecap='round'/%3e%3cpath%20d='M28%20157H173'%20stroke='black'%20stroke-width='10'%20stroke-linecap='round'/%3e%3c/svg%3e",r3="data:image/svg+xml,%3csvg%20width='200'%20height='200'%20viewBox='0%200%20200%20200'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M163%2036L37.0771%20164.621'%20stroke='black'%20stroke-width='10'%20stroke-linecap='round'/%3e%3cpath%20d='M37.0771%2036L163%20164.621'%20stroke='black'%20stroke-width='10'%20stroke-linecap='round'/%3e%3c/svg%3e";var Lu={},Sk;function a3(){if(Sk)return Lu;Sk=1,Object.defineProperty(Lu,"__esModule",{value:!0}),Lu.parse=r,Lu.serialize=u;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,e=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const p=function(){};return p.prototype=Object.create(null),p})();function r(p,v){const C=new o,x=p.length;if(x<2)return C;const k=(v==null?void 0:v.decode)||h;let S=0;do{const I=p.indexOf("=",S);if(I===-1)break;const P=p.indexOf(";",S),O=P===-1?x:P;if(I>O){S=p.lastIndexOf(";",I-1)+1;continue}const D=a(p,S,I),Y=l(p,I,D),F=p.slice(D,Y);if(C[F]===void 0){let j=a(p,I+1,O),U=l(p,O,j);const X=k(p.slice(j,U));C[F]=X}S=O+1}while(S<x);return C}function a(p,v,C){do{const x=p.charCodeAt(v);if(x!==32&&x!==9)return v}while(++v<C);return C}function l(p,v,C){for(;v>C;){const x=p.charCodeAt(--v);if(x!==32&&x!==9)return v+1}return C}function u(p,v,C){const x=(C==null?void 0:C.encode)||encodeURIComponent;if(!i.test(p))throw new TypeError(`argument name is invalid: ${p}`);const k=x(v);if(!t.test(k))throw new TypeError(`argument val is invalid: ${v}`);let S=p+"="+k;if(!C)return S;if(C.maxAge!==void 0){if(!Number.isInteger(C.maxAge))throw new TypeError(`option maxAge is invalid: ${C.maxAge}`);S+="; Max-Age="+C.maxAge}if(C.domain){if(!e.test(C.domain))throw new TypeError(`option domain is invalid: ${C.domain}`);S+="; Domain="+C.domain}if(C.path){if(!n.test(C.path))throw new TypeError(`option path is invalid: ${C.path}`);S+="; Path="+C.path}if(C.expires){if(!m(C.expires)||!Number.isFinite(C.expires.valueOf()))throw new TypeError(`option expires is invalid: ${C.expires}`);S+="; Expires="+C.expires.toUTCString()}if(C.httpOnly&&(S+="; HttpOnly"),C.secure&&(S+="; Secure"),C.partitioned&&(S+="; Partitioned"),C.priority)switch(typeof C.priority=="string"?C.priority.toLowerCase():void 0){case"low":S+="; Priority=Low";break;case"medium":S+="; Priority=Medium";break;case"high":S+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${C.priority}`)}if(C.sameSite)switch(typeof C.sameSite=="string"?C.sameSite.toLowerCase():C.sameSite){case!0:case"strict":S+="; SameSite=Strict";break;case"lax":S+="; SameSite=Lax";break;case"none":S+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${C.sameSite}`)}return S}function h(p){if(p.indexOf("%")===-1)return p;try{return decodeURIComponent(p)}catch{return p}}function m(p){return s.call(p)==="[object Date]"}return Lu}a3();var Ak="popstate";function l3(i={}){function t(s,o){let{pathname:r="/",search:a="",hash:l=""}=Ua(s.location.hash.substring(1));return!r.startsWith("/")&&!r.startsWith(".")&&(r="/"+r),by("",{pathname:r,search:a,hash:l},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function e(s,o){let r=s.document.querySelector("base"),a="";if(r&&r.getAttribute("href")){let l=s.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof o=="string"?o:Ld(o))}function n(s,o){es(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return u3(t,e,n,i)}function Gt(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function es(i,t){if(!i){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function c3(){return Math.random().toString(36).substring(2,10)}function Rk(i,t){return{usr:i.state,key:i.key,idx:t}}function by(i,t,e=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof t=="string"?Ua(t):t,state:e,key:t&&t.key||n||c3()}}function Ld({pathname:i="/",search:t="",hash:e=""}){return t&&t!=="?"&&(i+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(i+=e.charAt(0)==="#"?e:"#"+e),i}function Ua(i){let t={};if(i){let e=i.indexOf("#");e>=0&&(t.hash=i.substring(e),i=i.substring(0,e));let n=i.indexOf("?");n>=0&&(t.search=i.substring(n),i=i.substring(0,n)),i&&(t.pathname=i)}return t}function u3(i,t,e,n={}){let{window:s=document.defaultView,v5Compat:o=!1}=n,r=s.history,a="POP",l=null,u=h();u==null&&(u=0,r.replaceState({...r.state,idx:u},""));function h(){return(r.state||{idx:null}).idx}function m(){a="POP";let k=h(),S=k==null?null:k-u;u=k,l&&l({action:a,location:x.location,delta:S})}function p(k,S){a="PUSH";let I=by(x.location,k,S);e&&e(I,k),u=h()+1;let P=Rk(I,u),O=x.createHref(I);try{r.pushState(P,"",O)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(O)}o&&l&&l({action:a,location:x.location,delta:1})}function v(k,S){a="REPLACE";let I=by(x.location,k,S);e&&e(I,k),u=h();let P=Rk(I,u),O=x.createHref(I);r.replaceState(P,"",O),o&&l&&l({action:a,location:x.location,delta:0})}function C(k){return d3(k)}let x={get action(){return a},get location(){return i(s,r)},listen(k){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Ak,m),l=k,()=>{s.removeEventListener(Ak,m),l=null}},createHref(k){return t(s,k)},createURL:C,encodeLocation(k){let S=C(k);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:p,replace:v,go(k){return r.go(k)}};return x}function d3(i,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Gt(e,"No window.location.(origin|href) available to create URL");let n=typeof i=="string"?i:Ld(i);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=e+n),new URL(n,e)}function YI(i,t,e="/"){return h3(i,t,e,!1)}function h3(i,t,e,n){let s=typeof t=="string"?Ua(t):t,o=Po(s.pathname||"/",e);if(o==null)return null;let r=JI(i);f3(r);let a=null;for(let l=0;a==null&&l<r.length;++l){let u=x3(o);a=C3(r[l],u,n)}return a}function JI(i,t=[],e=[],n=""){let s=(o,r,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:r,route:o};l.relativePath.startsWith("/")&&(Gt(l.relativePath.startsWith(n),`Absolute route path "${l.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(n.length));let u=Ao([n,l.relativePath]),h=e.concat(l);o.children&&o.children.length>0&&(Gt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),JI(o.children,t,h,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:y3(u,o.index),routesMeta:h})};return i.forEach((o,r)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))s(o,r);else for(let l of XI(o.path))s(o,r,l)}),t}function XI(i){let t=i.split("/");if(t.length===0)return[];let[e,...n]=t,s=e.endsWith("?"),o=e.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let r=XI(n.join("/")),a=[];return a.push(...r.map(l=>l===""?o:[o,l].join("/"))),s&&a.push(...r),a.map(l=>i.startsWith("/")&&l===""?"/":l)}function f3(i){i.sort((t,e)=>t.score!==e.score?e.score-t.score:v3(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var m3=/^:[\w-]+$/,g3=3,p3=2,b3=1,_3=10,w3=-2,Ik=i=>i==="*";function y3(i,t){let e=i.split("/"),n=e.length;return e.some(Ik)&&(n+=w3),t&&(n+=p3),e.filter(s=>!Ik(s)).reduce((s,o)=>s+(m3.test(o)?g3:o===""?b3:_3),n)}function v3(i,t){return i.length===t.length&&i.slice(0,-1).every((n,s)=>n===t[s])?i[i.length-1]-t[t.length-1]:0}function C3(i,t,e=!1){let{routesMeta:n}=i,s={},o="/",r=[];for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1,h=o==="/"?t:t.slice(o.length)||"/",m=sg({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),p=l.route;if(!m&&u&&e&&!n[n.length-1].route.index&&(m=sg({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!m)return null;Object.assign(s,m.params),r.push({params:s,pathname:Ao([o,m.pathname]),pathnameBase:A3(Ao([o,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(o=Ao([o,m.pathnameBase]))}return r}function sg(i,t){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[e,n]=T3(i.path,i.caseSensitive,i.end),s=t.match(e);if(!s)return null;let o=s[0],r=o.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((u,{paramName:h,isOptional:m},p)=>{if(h==="*"){let C=a[p]||"";r=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const v=a[p];return m&&!v?u[h]=void 0:u[h]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:r,pattern:i}}function T3(i,t=!1,e=!0){es(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],s="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(r,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(n.push({paramName:"*"}),s+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?s+="\\/*$":i!==""&&i!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function x3(i){try{return i.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return es(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),i}}function Po(i,t){if(t==="/")return i;if(!i.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=i.charAt(e);return n&&n!=="/"?null:i.slice(e)||"/"}function k3(i,t="/"){let{pathname:e,search:n="",hash:s=""}=typeof i=="string"?Ua(i):i;return{pathname:e?e.startsWith("/")?e:E3(e,t):t,search:R3(n),hash:I3(s)}}function E3(i,t){let e=t.replace(/\/+$/,"").split("/");return i.split("/").forEach(s=>{s===".."?e.length>1&&e.pop():s!=="."&&e.push(s)}),e.length>1?e.join("/"):"/"}function lw(i,t,e,n){return`Cannot include a '${i}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function S3(i){return i.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function QI(i){let t=S3(i);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function eP(i,t,e,n=!1){let s;typeof i=="string"?s=Ua(i):(s={...i},Gt(!s.pathname||!s.pathname.includes("?"),lw("?","pathname","search",s)),Gt(!s.pathname||!s.pathname.includes("#"),lw("#","pathname","hash",s)),Gt(!s.search||!s.search.includes("#"),lw("#","search","hash",s)));let o=i===""||s.pathname==="",r=o?"/":s.pathname,a;if(r==null)a=e;else{let m=t.length-1;if(!n&&r.startsWith("..")){let p=r.split("/");for(;p[0]==="..";)p.shift(),m-=1;s.pathname=p.join("/")}a=m>=0?t[m]:"/"}let l=k3(s,a),u=r&&r!=="/"&&r.endsWith("/"),h=(o||r===".")&&e.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}var Ao=i=>i.join("/").replace(/\/\/+/g,"/"),A3=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),R3=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,I3=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function P3(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var tP=["POST","PUT","PATCH","DELETE"];new Set(tP);var M3=["GET",...tP];new Set(M3);var Pc=H.createContext(null);Pc.displayName="DataRouter";var rp=H.createContext(null);rp.displayName="DataRouterState";var nP=H.createContext({isTransitioning:!1});nP.displayName="ViewTransition";var V3=H.createContext(new Map);V3.displayName="Fetchers";var N3=H.createContext(null);N3.displayName="Await";var js=H.createContext(null);js.displayName="Navigation";var vh=H.createContext(null);vh.displayName="Location";var Oo=H.createContext({outlet:null,matches:[],isDataRoute:!1});Oo.displayName="Route";var Hv=H.createContext(null);Hv.displayName="RouteError";function D3(i,{relative:t}={}){Gt(Ch(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=H.useContext(js),{hash:s,pathname:o,search:r}=Th(i,{relative:t}),a=o;return e!=="/"&&(a=o==="/"?e:Ao([e,o])),n.createHref({pathname:a,search:r,hash:s})}function Ch(){return H.useContext(vh)!=null}function Br(){return Gt(Ch(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(vh).location}var iP="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sP(i){H.useContext(js).static||H.useLayoutEffect(i)}function ap(){let{isDataRoute:i}=H.useContext(Oo);return i?K3():O3()}function O3(){Gt(Ch(),"useNavigate() may be used only in the context of a <Router> component.");let i=H.useContext(Pc),{basename:t,navigator:e}=H.useContext(js),{matches:n}=H.useContext(Oo),{pathname:s}=Br(),o=JSON.stringify(QI(n)),r=H.useRef(!1);return sP(()=>{r.current=!0}),H.useCallback((l,u={})=>{if(es(r.current,iP),!r.current)return;if(typeof l=="number"){e.go(l);return}let h=eP(l,JSON.parse(o),s,u.relative==="path");i==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Ao([t,h.pathname])),(u.replace?e.replace:e.push)(h,u.state,u)},[t,e,o,s,i])}H.createContext(null);function Th(i,{relative:t}={}){let{matches:e}=H.useContext(Oo),{pathname:n}=Br(),s=JSON.stringify(QI(e));return H.useMemo(()=>eP(i,JSON.parse(s),n,t==="path"),[i,s,n,t])}function L3(i,t){return oP(i,t)}function oP(i,t,e,n){var I;Gt(Ch(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=H.useContext(js),{matches:r}=H.useContext(Oo),a=r[r.length-1],l=a?a.params:{},u=a?a.pathname:"/",h=a?a.pathnameBase:"/",m=a&&a.route;{let P=m&&m.path||"";rP(u,!m||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let p=Br(),v;if(t){let P=typeof t=="string"?Ua(t):t;Gt(h==="/"||((I=P.pathname)==null?void 0:I.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${P.pathname}" was given in the \`location\` prop.`),v=P}else v=p;let C=v.pathname||"/",x=C;if(h!=="/"){let P=h.replace(/^\//,"").split("/");x="/"+C.replace(/^\//,"").split("/").slice(P.length).join("/")}let k=!o&&e&&e.matches&&e.matches.length>0?e.matches:YI(i,{pathname:x});es(m||k!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),es(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=H3(k&&k.map(P=>Object.assign({},P,{params:Object.assign({},l,P.params),pathname:Ao([h,s.encodeLocation?s.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?h:Ao([h,s.encodeLocation?s.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),r,e,n);return t&&S?H.createElement(vh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},S):S}function B3(){let i=j3(),t=P3(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),e=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},r=null;return console.error("Error handled by React Router default ErrorBoundary:",i),r=H.createElement(H.Fragment,null,H.createElement("p",null,"💿 Hey developer 👋"),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:o},"ErrorBoundary")," or"," ",H.createElement("code",{style:o},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},t),e?H.createElement("pre",{style:s},e):null,r)}var F3=H.createElement(B3,null),U3=class extends H.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,t){return t.location!==i.location||t.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:t.error,location:t.location,revalidation:i.revalidation||t.revalidation}}componentDidCatch(i,t){console.error("React Router caught the following error during render",i,t)}render(){return this.state.error!==void 0?H.createElement(Oo.Provider,{value:this.props.routeContext},H.createElement(Hv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function z3({routeContext:i,match:t,children:e}){let n=H.useContext(Pc);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),H.createElement(Oo.Provider,{value:i},e)}function H3(i,t=[],e=null,n=null){if(i==null){if(!e)return null;if(e.errors)i=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)i=e.matches;else return null}let s=i,o=e==null?void 0:e.errors;if(o!=null){let l=s.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);Gt(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let r=!1,a=-1;if(e)for(let l=0;l<s.length;l++){let u=s[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:h,errors:m}=e,p=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!m||m[u.route.id]===void 0);if(u.route.lazy||p){r=!0,a>=0?s=s.slice(0,a+1):s=[s[0]];break}}}return s.reduceRight((l,u,h)=>{let m,p=!1,v=null,C=null;e&&(m=o&&u.route.id?o[u.route.id]:void 0,v=u.route.errorElement||F3,r&&(a<0&&h===0?(rP("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,C=null):a===h&&(p=!0,C=u.route.hydrateFallbackElement||null)));let x=t.concat(s.slice(0,h+1)),k=()=>{let S;return m?S=v:p?S=C:u.route.Component?S=H.createElement(u.route.Component,null):u.route.element?S=u.route.element:S=l,H.createElement(z3,{match:u,routeContext:{outlet:l,matches:x,isDataRoute:e!=null},children:S})};return e&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?H.createElement(U3,{location:e.location,revalidation:e.revalidation,component:v,error:m,children:k(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):k()},null)}function Wv(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function W3(i){let t=H.useContext(Pc);return Gt(t,Wv(i)),t}function q3(i){let t=H.useContext(rp);return Gt(t,Wv(i)),t}function $3(i){let t=H.useContext(Oo);return Gt(t,Wv(i)),t}function qv(i){let t=$3(i),e=t.matches[t.matches.length-1];return Gt(e.route.id,`${i} can only be used on routes that contain a unique "id"`),e.route.id}function G3(){return qv("useRouteId")}function j3(){var n;let i=H.useContext(Hv),t=q3("useRouteError"),e=qv("useRouteError");return i!==void 0?i:(n=t.errors)==null?void 0:n[e]}function K3(){let{router:i}=W3("useNavigate"),t=qv("useNavigate"),e=H.useRef(!1);return sP(()=>{e.current=!0}),H.useCallback(async(s,o={})=>{es(e.current,iP),e.current&&(typeof s=="number"?i.navigate(s):await i.navigate(s,{fromRouteId:t,...o}))},[i,t])}var Pk={};function rP(i,t,e){!t&&!Pk[i]&&(Pk[i]=!0,es(!1,e))}H.memo(Z3);function Z3({routes:i,future:t,state:e}){return oP(i,void 0,e,t)}function fs(i){Gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Y3({basename:i="/",children:t=null,location:e,navigationType:n="POP",navigator:s,static:o=!1}){Gt(!Ch(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let r=i.replace(/^\/*/,"/"),a=H.useMemo(()=>({basename:r,navigator:s,static:o,future:{}}),[r,s,o]);typeof e=="string"&&(e=Ua(e));let{pathname:l="/",search:u="",hash:h="",state:m=null,key:p="default"}=e,v=H.useMemo(()=>{let C=Po(l,r);return C==null?null:{location:{pathname:C,search:u,hash:h,state:m,key:p},navigationType:n}},[r,l,u,h,m,p,n]);return es(v!=null,`<Router basename="${r}"> is not able to match the URL "${l}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:H.createElement(js.Provider,{value:a},H.createElement(vh.Provider,{children:t,value:v}))}function J3({children:i,location:t}){return L3(_y(i),t)}function _y(i,t=[]){let e=[];return H.Children.forEach(i,(n,s)=>{if(!H.isValidElement(n))return;let o=[...t,s];if(n.type===H.Fragment){e.push.apply(e,_y(n.props.children,o));return}Gt(n.type===fs,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Gt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let r={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(r.children=_y(n.props.children,o)),e.push(r)}),e}var Pm="get",Mm="application/x-www-form-urlencoded";function lp(i){return i!=null&&typeof i.tagName=="string"}function X3(i){return lp(i)&&i.tagName.toLowerCase()==="button"}function Q3(i){return lp(i)&&i.tagName.toLowerCase()==="form"}function eF(i){return lp(i)&&i.tagName.toLowerCase()==="input"}function tF(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function nF(i,t){return i.button===0&&(!t||t==="_self")&&!tF(i)}function wy(i=""){return new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((t,e)=>{let n=i[e];return t.concat(Array.isArray(n)?n.map(s=>[e,s]):[[e,n]])},[]))}function iF(i,t){let e=wy(i);return t&&t.forEach((n,s)=>{e.has(s)||t.getAll(s).forEach(o=>{e.append(s,o)})}),e}var jf=null;function sF(){if(jf===null)try{new FormData(document.createElement("form"),0),jf=!1}catch{jf=!0}return jf}var oF=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function cw(i){return i!=null&&!oF.has(i)?(es(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Mm}"`),null):i}function rF(i,t){let e,n,s,o,r;if(Q3(i)){let a=i.getAttribute("action");n=a?Po(a,t):null,e=i.getAttribute("method")||Pm,s=cw(i.getAttribute("enctype"))||Mm,o=new FormData(i)}else if(X3(i)||eF(i)&&(i.type==="submit"||i.type==="image")){let a=i.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=i.getAttribute("formaction")||a.getAttribute("action");if(n=l?Po(l,t):null,e=i.getAttribute("formmethod")||a.getAttribute("method")||Pm,s=cw(i.getAttribute("formenctype"))||cw(a.getAttribute("enctype"))||Mm,o=new FormData(a,i),!sF()){let{name:u,type:h,value:m}=i;if(h==="image"){let p=u?`${u}.`:"";o.append(`${p}x`,"0"),o.append(`${p}y`,"0")}else u&&o.append(u,m)}}else{if(lp(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Pm,n=null,s=Mm,r=i}return o&&s==="text/plain"&&(r=o,o=void 0),{action:n,method:e.toLowerCase(),encType:s,formData:o,body:r}}function $v(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}async function aF(i,t){if(i.id in t)return t[i.id];try{let e=await import(i.module);return t[i.id]=e,e}catch(e){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lF(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function cF(i,t,e){let n=await Promise.all(i.map(async s=>{let o=t.routes[s.route.id];if(o){let r=await aF(o,e);return r.links?r.links():[]}return[]}));return fF(n.flat(1).filter(lF).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Mk(i,t,e,n,s,o){let r=(l,u)=>e[u]?l.route.id!==e[u].route.id:!0,a=(l,u)=>{var h;return e[u].pathname!==l.pathname||((h=e[u].route.path)==null?void 0:h.endsWith("*"))&&e[u].params["*"]!==l.params["*"]};return o==="assets"?t.filter((l,u)=>r(l,u)||a(l,u)):o==="data"?t.filter((l,u)=>{var m;let h=n.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(r(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=e[0])==null?void 0:m.params)||{},nextUrl:new URL(i,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function uF(i,t,{includeHydrateFallback:e}={}){return dF(i.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),e&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function dF(i){return[...new Set(i)]}function hF(i){let t={},e=Object.keys(i).sort();for(let n of e)t[n]=i[n];return t}function fF(i,t){let e=new Set;return new Set(t),i.reduce((n,s)=>{let o=JSON.stringify(hF(s));return e.has(o)||(e.add(o),n.push({key:o,link:s})),n},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var mF=new Set([100,101,204,205]);function gF(i,t){let e=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return e.pathname==="/"?e.pathname="_root.data":t&&Po(e.pathname,t)==="/"?e.pathname=`${t.replace(/\/$/,"")}/_root.data`:e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function aP(){let i=H.useContext(Pc);return $v(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function pF(){let i=H.useContext(rp);return $v(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Gv=H.createContext(void 0);Gv.displayName="FrameworkContext";function lP(){let i=H.useContext(Gv);return $v(i,"You must render this element inside a <HydratedRouter> element"),i}function bF(i,t){let e=H.useContext(Gv),[n,s]=H.useState(!1),[o,r]=H.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:h,onTouchStart:m}=t,p=H.useRef(null);H.useEffect(()=>{if(i==="render"&&r(!0),i==="viewport"){let x=S=>{S.forEach(I=>{r(I.isIntersecting)})},k=new IntersectionObserver(x,{threshold:.5});return p.current&&k.observe(p.current),()=>{k.disconnect()}}},[i]),H.useEffect(()=>{if(n){let x=setTimeout(()=>{r(!0)},100);return()=>{clearTimeout(x)}}},[n]);let v=()=>{s(!0)},C=()=>{s(!1),r(!1)};return e?i!=="intent"?[o,p,{}]:[o,p,{onFocus:Bu(a,v),onBlur:Bu(l,C),onMouseEnter:Bu(u,v),onMouseLeave:Bu(h,C),onTouchStart:Bu(m,v)}]:[!1,p,{}]}function Bu(i,t){return e=>{i&&i(e),e.defaultPrevented||t(e)}}function _F({page:i,...t}){let{router:e}=aP(),n=H.useMemo(()=>YI(e.routes,i,e.basename),[e.routes,i,e.basename]);return n?H.createElement(yF,{page:i,matches:n,...t}):null}function wF(i){let{manifest:t,routeModules:e}=lP(),[n,s]=H.useState([]);return H.useEffect(()=>{let o=!1;return cF(i,t,e).then(r=>{o||s(r)}),()=>{o=!0}},[i,t,e]),n}function yF({page:i,matches:t,...e}){let n=Br(),{manifest:s,routeModules:o}=lP(),{basename:r}=aP(),{loaderData:a,matches:l}=pF(),u=H.useMemo(()=>Mk(i,t,l,s,n,"data"),[i,t,l,s,n]),h=H.useMemo(()=>Mk(i,t,l,s,n,"assets"),[i,t,l,s,n]),m=H.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let C=new Set,x=!1;if(t.forEach(S=>{var P;let I=s.routes[S.route.id];!I||!I.hasLoader||(!u.some(O=>O.route.id===S.route.id)&&S.route.id in a&&((P=o[S.route.id])!=null&&P.shouldRevalidate)||I.hasClientLoader?x=!0:C.add(S.route.id))}),C.size===0)return[];let k=gF(i,r);return x&&C.size>0&&k.searchParams.set("_routes",t.filter(S=>C.has(S.route.id)).map(S=>S.route.id).join(",")),[k.pathname+k.search]},[r,a,n,s,u,t,i,o]),p=H.useMemo(()=>uF(h,s),[h,s]),v=wF(h);return H.createElement(H.Fragment,null,m.map(C=>H.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...e})),p.map(C=>H.createElement("link",{key:C,rel:"modulepreload",href:C,...e})),v.map(({key:C,link:x})=>H.createElement("link",{key:C,...x})))}function vF(...i){return t=>{i.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var cP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{cP&&(window.__reactRouterVersion="7.6.0")}catch{}function CF({basename:i,children:t,window:e}){let n=H.useRef();n.current==null&&(n.current=l3({window:e,v5Compat:!0}));let s=n.current,[o,r]=H.useState({action:s.action,location:s.location}),a=H.useCallback(l=>{H.startTransition(()=>r(l))},[r]);return H.useLayoutEffect(()=>s.listen(a),[s,a]),H.createElement(Y3,{basename:i,children:t,location:o.location,navigationType:o.action,navigator:s})}var uP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ya=H.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:s,reloadDocument:o,replace:r,state:a,target:l,to:u,preventScrollReset:h,viewTransition:m,...p},v){let{basename:C}=H.useContext(js),x=typeof u=="string"&&uP.test(u),k,S=!1;if(typeof u=="string"&&x&&(k=u,cP))try{let U=new URL(window.location.href),X=u.startsWith("//")?new URL(U.protocol+u):new URL(u),ae=Po(X.pathname,C);X.origin===U.origin&&ae!=null?u=ae+X.search+X.hash:S=!0}catch{es(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let I=D3(u,{relative:s}),[P,O,D]=bF(n,p),Y=EF(u,{replace:r,state:a,target:l,preventScrollReset:h,relative:s,viewTransition:m});function F(U){t&&t(U),U.defaultPrevented||Y(U)}let j=H.createElement("a",{...p,...D,href:k||I,onClick:S||o?t:F,ref:vF(v,O),target:l,"data-discover":!x&&e==="render"?"true":void 0});return P&&!x?H.createElement(H.Fragment,null,j,H.createElement(_F,{page:I})):j});ya.displayName="Link";var TF=H.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:s=!1,style:o,to:r,viewTransition:a,children:l,...u},h){let m=Th(r,{relative:u.relative}),p=Br(),v=H.useContext(rp),{navigator:C,basename:x}=H.useContext(js),k=v!=null&&MF(m)&&a===!0,S=C.encodeLocation?C.encodeLocation(m).pathname:m.pathname,I=p.pathname,P=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;e||(I=I.toLowerCase(),P=P?P.toLowerCase():null,S=S.toLowerCase()),P&&x&&(P=Po(P,x)||P);const O=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let D=I===S||!s&&I.startsWith(S)&&I.charAt(O)==="/",Y=P!=null&&(P===S||!s&&P.startsWith(S)&&P.charAt(S.length)==="/"),F={isActive:D,isPending:Y,isTransitioning:k},j=D?t:void 0,U;typeof n=="function"?U=n(F):U=[n,D?"active":null,Y?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let X=typeof o=="function"?o(F):o;return H.createElement(ya,{...u,"aria-current":j,className:U,ref:h,style:X,to:r,viewTransition:a},typeof l=="function"?l(F):l)});TF.displayName="NavLink";var xF=H.forwardRef(({discover:i="render",fetcherKey:t,navigate:e,reloadDocument:n,replace:s,state:o,method:r=Pm,action:a,onSubmit:l,relative:u,preventScrollReset:h,viewTransition:m,...p},v)=>{let C=IF(),x=PF(a,{relative:u}),k=r.toLowerCase()==="get"?"get":"post",S=typeof a=="string"&&uP.test(a),I=P=>{if(l&&l(P),P.defaultPrevented)return;P.preventDefault();let O=P.nativeEvent.submitter,D=(O==null?void 0:O.getAttribute("formmethod"))||r;C(O||P.currentTarget,{fetcherKey:t,method:D,navigate:e,replace:s,state:o,relative:u,preventScrollReset:h,viewTransition:m})};return H.createElement("form",{ref:v,method:k,action:x,onSubmit:n?l:I,...p,"data-discover":!S&&i==="render"?"true":void 0})});xF.displayName="Form";function kF(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dP(i){let t=H.useContext(Pc);return Gt(t,kF(i)),t}function EF(i,{target:t,replace:e,state:n,preventScrollReset:s,relative:o,viewTransition:r}={}){let a=ap(),l=Br(),u=Th(i,{relative:o});return H.useCallback(h=>{if(nF(h,t)){h.preventDefault();let m=e!==void 0?e:Ld(l)===Ld(u);a(i,{replace:m,state:n,preventScrollReset:s,relative:o,viewTransition:r})}},[l,a,u,e,n,t,i,s,o,r])}function SF(i){es(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=H.useRef(wy(i)),e=H.useRef(!1),n=Br(),s=H.useMemo(()=>iF(n.search,e.current?null:t.current),[n.search]),o=ap(),r=H.useCallback((a,l)=>{const u=wy(typeof a=="function"?a(s):a);e.current=!0,o("?"+u,l)},[o,s]);return[s,r]}var AF=0,RF=()=>`__${String(++AF)}__`;function IF(){let{router:i}=dP("useSubmit"),{basename:t}=H.useContext(js),e=G3();return H.useCallback(async(n,s={})=>{let{action:o,method:r,encType:a,formData:l,body:u}=rF(n,t);if(s.navigate===!1){let h=s.fetcherKey||RF();await i.fetch(h,e,s.action||o,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||r,formEncType:s.encType||a,flushSync:s.flushSync})}else await i.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||r,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:e,flushSync:s.flushSync,viewTransition:s.viewTransition})},[i,t,e])}function PF(i,{relative:t}={}){let{basename:e}=H.useContext(js),n=H.useContext(Oo);Gt(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),o={...Th(i||".",{relative:t})},r=Br();if(i==null){o.search=r.search;let a=new URLSearchParams(o.search),l=a.getAll("index");if(l.some(h=>h==="")){a.delete("index"),l.filter(m=>m).forEach(m=>a.append("index",m));let h=a.toString();o.search=h?`?${h}`:""}}return(!i||i===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:Ao([e,o.pathname])),Ld(o)}function MF(i,t={}){let e=H.useContext(nP);Gt(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=dP("useViewTransitionState"),s=Th(i,{relative:t.relative});if(!e.isTransitioning)return!1;let o=Po(e.currentLocation.pathname,n)||e.currentLocation.pathname,r=Po(e.nextLocation.pathname,n)||e.nextLocation.pathname;return sg(s.pathname,r)!=null||sg(s.pathname,o)!=null}[...mF];function VF(){const[i,t]=H.useState(!1),[e,n]=H.useState(-1);return A.jsxs("nav",{className:"flex justify-between items-center",children:[A.jsx(ya,{to:"/",children:A.jsx("img",{className:"h-28",src:s3,alt:""})}),A.jsx("ul",{className:"flex items-center font-notokr max-sm:hidden",children:py.map((s,o)=>A.jsxs("li",{className:"relative h-full flex items-center group",children:[A.jsx(ya,{className:"py-4 px-6 font-bold hover:text-primary-500",to:s.link,children:s.title}),A.jsx("ul",{className:"absolute bg-white hidden group-hover:block top-full left-1/2 -translate-x-1/2 shadow w-40 rounded overflow-hidden",children:s.sub.map((r,a)=>A.jsx("li",{children:A.jsx(ya,{className:"p-3 block hover:bg-primary-500 hover:text-white",to:r.subLink,children:r.subTitle})},a))})]},o))}),A.jsx("img",{className:"w-10 h-10 sm:hidden me-4",src:o3,alt:"",onClick:()=>t(!0)}),A.jsxs("div",{className:`fixed top-0 right-0 duration-400 w-8/12 h-full bg-slate-700 z-2 ${i?null:"translate-x-full"}`,children:[A.jsx("div",{className:"flex justify-end",children:A.jsx("img",{className:"w-12 h-12 p-2 invert",src:r3,alt:"",onClick:()=>t(!1)})}),A.jsx("h1",{className:"mt-4 text-xl font-bold text-white text-center",children:"대전동물보호센터"}),A.jsx("ul",{className:"mt-4",children:py.map((s,o)=>A.jsxs("li",{children:[A.jsxs("div",{className:`flex justify-between p-3 ${e==o?"bg-blue-600":"bg-slate-800"}`,onClick:()=>n(o),children:[A.jsx("span",{className:"text-white font-bold",children:s.title}),A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"white",className:`size-6 ${e==o?"rotate-180":null} `,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})})]}),A.jsx("div",{className:`overflow-hidden ${e==o?null:"h-0"}`,children:s.sub.map((r,a)=>A.jsx(ya,{onClick:()=>t(!1),className:"w-full p-4 bg-white block border-y border-y-gray-200",to:r.subLink,children:r.subTitle},a))})]},o))})]}),i&&A.jsx("div",{className:"fixed w-full h-full top-0 left-0 bg-[#00000077] z-1",onClick:()=>t(!1)})]})}function NF(){return A.jsxs("footer",{className:"bg-slate-600 p-10",children:[A.jsxs("div",{children:[A.jsx("span",{className:"text-amber-300 font-bold pe-4",children:"개인정보처리방침"}),A.jsx("span",{className:"text-gray-300 px-4 border-s border-s-gray-500",children:"누리집 개선의견"}),A.jsx("span",{className:"text-gray-300 px-4 border-s border-s-gray-500",children:"오시는 길"})]}),A.jsxs("div",{className:"mt-6 text-white text-sm",children:[A.jsx("p",{children:"(34001) 대전광역시 유성구 금고길 7(금고동) 대전반려동물공원"}),A.jsx("p",{children:"(34001) 대전광역시 유성구 금남구즉로 1234(금고동) 대전동물보호센터 / 대표전화 (042) 270-7239"})]}),A.jsx("div",{className:"mt-2 text-gray-300 text-sm",children:"COPYRIGHT 2023 (c) DAEJEON METROPOLITAN CITY. ALL RIGHTS RESERVED."})]})}function hP(i,t){return function(){return i.apply(t,arguments)}}const{toString:DF}=Object.prototype,{getPrototypeOf:jv}=Object,{iterator:cp,toStringTag:fP}=Symbol,up=(i=>t=>{const e=DF.call(t);return i[e]||(i[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),Es=i=>(i=i.toLowerCase(),t=>up(t)===i),dp=i=>t=>typeof t===i,{isArray:Mc}=Array,Bd=dp("undefined");function OF(i){return i!==null&&!Bd(i)&&i.constructor!==null&&!Bd(i.constructor)&&yi(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const mP=Es("ArrayBuffer");function LF(i){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(i):t=i&&i.buffer&&mP(i.buffer),t}const BF=dp("string"),yi=dp("function"),gP=dp("number"),hp=i=>i!==null&&typeof i=="object",FF=i=>i===!0||i===!1,Vm=i=>{if(up(i)!=="object")return!1;const t=jv(i);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(fP in i)&&!(cp in i)},UF=Es("Date"),zF=Es("File"),HF=Es("Blob"),WF=Es("FileList"),qF=i=>hp(i)&&yi(i.pipe),$F=i=>{let t;return i&&(typeof FormData=="function"&&i instanceof FormData||yi(i.append)&&((t=up(i))==="formdata"||t==="object"&&yi(i.toString)&&i.toString()==="[object FormData]"))},GF=Es("URLSearchParams"),[jF,KF,ZF,YF]=["ReadableStream","Request","Response","Headers"].map(Es),JF=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xh(i,t,{allOwnKeys:e=!1}={}){if(i===null||typeof i>"u")return;let n,s;if(typeof i!="object"&&(i=[i]),Mc(i))for(n=0,s=i.length;n<s;n++)t.call(null,i[n],n,i);else{const o=e?Object.getOwnPropertyNames(i):Object.keys(i),r=o.length;let a;for(n=0;n<r;n++)a=o[n],t.call(null,i[a],a,i)}}function pP(i,t){t=t.toLowerCase();const e=Object.keys(i);let n=e.length,s;for(;n-- >0;)if(s=e[n],t===s.toLowerCase())return s;return null}const va=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,bP=i=>!Bd(i)&&i!==va;function yy(){const{caseless:i}=bP(this)&&this||{},t={},e=(n,s)=>{const o=i&&pP(t,s)||s;Vm(t[o])&&Vm(n)?t[o]=yy(t[o],n):Vm(n)?t[o]=yy({},n):Mc(n)?t[o]=n.slice():t[o]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&xh(arguments[n],e);return t}const XF=(i,t,e,{allOwnKeys:n}={})=>(xh(t,(s,o)=>{e&&yi(s)?i[o]=hP(s,e):i[o]=s},{allOwnKeys:n}),i),QF=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),e4=(i,t,e,n)=>{i.prototype=Object.create(t.prototype,n),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:t.prototype}),e&&Object.assign(i.prototype,e)},t4=(i,t,e,n)=>{let s,o,r;const a={};if(t=t||{},i==null)return t;do{for(s=Object.getOwnPropertyNames(i),o=s.length;o-- >0;)r=s[o],(!n||n(r,i,t))&&!a[r]&&(t[r]=i[r],a[r]=!0);i=e!==!1&&jv(i)}while(i&&(!e||e(i,t))&&i!==Object.prototype);return t},n4=(i,t,e)=>{i=String(i),(e===void 0||e>i.length)&&(e=i.length),e-=t.length;const n=i.indexOf(t,e);return n!==-1&&n===e},i4=i=>{if(!i)return null;if(Mc(i))return i;let t=i.length;if(!gP(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=i[t];return e},s4=(i=>t=>i&&t instanceof i)(typeof Uint8Array<"u"&&jv(Uint8Array)),o4=(i,t)=>{const n=(i&&i[cp]).call(i);let s;for(;(s=n.next())&&!s.done;){const o=s.value;t.call(i,o[0],o[1])}},r4=(i,t)=>{let e;const n=[];for(;(e=i.exec(t))!==null;)n.push(e);return n},a4=Es("HTMLFormElement"),l4=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,s){return n.toUpperCase()+s}),Vk=(({hasOwnProperty:i})=>(t,e)=>i.call(t,e))(Object.prototype),c4=Es("RegExp"),_P=(i,t)=>{const e=Object.getOwnPropertyDescriptors(i),n={};xh(e,(s,o)=>{let r;(r=t(s,o,i))!==!1&&(n[o]=r||s)}),Object.defineProperties(i,n)},u4=i=>{_P(i,(t,e)=>{if(yi(i)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=i[e];if(yi(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},d4=(i,t)=>{const e={},n=s=>{s.forEach(o=>{e[o]=!0})};return Mc(i)?n(i):n(String(i).split(t)),e},h4=()=>{},f4=(i,t)=>i!=null&&Number.isFinite(i=+i)?i:t;function m4(i){return!!(i&&yi(i.append)&&i[fP]==="FormData"&&i[cp])}const g4=i=>{const t=new Array(10),e=(n,s)=>{if(hp(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[s]=n;const o=Mc(n)?[]:{};return xh(n,(r,a)=>{const l=e(r,s+1);!Bd(l)&&(o[a]=l)}),t[s]=void 0,o}}return n};return e(i,0)},p4=Es("AsyncFunction"),b4=i=>i&&(hp(i)||yi(i))&&yi(i.then)&&yi(i.catch),wP=((i,t)=>i?setImmediate:t?((e,n)=>(va.addEventListener("message",({source:s,data:o})=>{s===va&&o===e&&n.length&&n.shift()()},!1),s=>{n.push(s),va.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",yi(va.postMessage)),_4=typeof queueMicrotask<"u"?queueMicrotask.bind(va):typeof process<"u"&&process.nextTick||wP,w4=i=>i!=null&&yi(i[cp]),ee={isArray:Mc,isArrayBuffer:mP,isBuffer:OF,isFormData:$F,isArrayBufferView:LF,isString:BF,isNumber:gP,isBoolean:FF,isObject:hp,isPlainObject:Vm,isReadableStream:jF,isRequest:KF,isResponse:ZF,isHeaders:YF,isUndefined:Bd,isDate:UF,isFile:zF,isBlob:HF,isRegExp:c4,isFunction:yi,isStream:qF,isURLSearchParams:GF,isTypedArray:s4,isFileList:WF,forEach:xh,merge:yy,extend:XF,trim:JF,stripBOM:QF,inherits:e4,toFlatObject:t4,kindOf:up,kindOfTest:Es,endsWith:n4,toArray:i4,forEachEntry:o4,matchAll:r4,isHTMLForm:a4,hasOwnProperty:Vk,hasOwnProp:Vk,reduceDescriptors:_P,freezeMethods:u4,toObjectSet:d4,toCamelCase:l4,noop:h4,toFiniteNumber:f4,findKey:pP,global:va,isContextDefined:bP,isSpecCompliantForm:m4,toJSONObject:g4,isAsyncFn:p4,isThenable:b4,setImmediate:wP,asap:_4,isIterable:w4};function We(i,t,e,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}ee.inherits(We,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.status}}});const yP=We.prototype,vP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{vP[i]={value:i}});Object.defineProperties(We,vP);Object.defineProperty(yP,"isAxiosError",{value:!0});We.from=(i,t,e,n,s,o)=>{const r=Object.create(yP);return ee.toFlatObject(i,r,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),We.call(r,i.message,t,e,n,s),r.cause=i,r.name=i.name,o&&Object.assign(r,o),r};const y4=null;function vy(i){return ee.isPlainObject(i)||ee.isArray(i)}function CP(i){return ee.endsWith(i,"[]")?i.slice(0,-2):i}function Nk(i,t,e){return i?i.concat(t).map(function(s,o){return s=CP(s),!e&&o?"["+s+"]":s}).join(e?".":""):t}function v4(i){return ee.isArray(i)&&!i.some(vy)}const C4=ee.toFlatObject(ee,{},null,function(t){return/^is[A-Z]/.test(t)});function fp(i,t,e){if(!ee.isObject(i))throw new TypeError("target must be an object");t=t||new FormData,e=ee.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,k){return!ee.isUndefined(k[x])});const n=e.metaTokens,s=e.visitor||h,o=e.dots,r=e.indexes,l=(e.Blob||typeof Blob<"u"&&Blob)&&ee.isSpecCompliantForm(t);if(!ee.isFunction(s))throw new TypeError("visitor must be a function");function u(C){if(C===null)return"";if(ee.isDate(C))return C.toISOString();if(!l&&ee.isBlob(C))throw new We("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(C)||ee.isTypedArray(C)?l&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function h(C,x,k){let S=C;if(C&&!k&&typeof C=="object"){if(ee.endsWith(x,"{}"))x=n?x:x.slice(0,-2),C=JSON.stringify(C);else if(ee.isArray(C)&&v4(C)||(ee.isFileList(C)||ee.endsWith(x,"[]"))&&(S=ee.toArray(C)))return x=CP(x),S.forEach(function(P,O){!(ee.isUndefined(P)||P===null)&&t.append(r===!0?Nk([x],O,o):r===null?x:x+"[]",u(P))}),!1}return vy(C)?!0:(t.append(Nk(k,x,o),u(C)),!1)}const m=[],p=Object.assign(C4,{defaultVisitor:h,convertValue:u,isVisitable:vy});function v(C,x){if(!ee.isUndefined(C)){if(m.indexOf(C)!==-1)throw Error("Circular reference detected in "+x.join("."));m.push(C),ee.forEach(C,function(S,I){(!(ee.isUndefined(S)||S===null)&&s.call(t,S,ee.isString(I)?I.trim():I,x,p))===!0&&v(S,x?x.concat(I):[I])}),m.pop()}}if(!ee.isObject(i))throw new TypeError("data must be an object");return v(i),t}function Dk(i){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Kv(i,t){this._pairs=[],i&&fp(i,this,t)}const TP=Kv.prototype;TP.append=function(t,e){this._pairs.push([t,e])};TP.toString=function(t){const e=t?function(n){return t.call(this,n,Dk)}:Dk;return this._pairs.map(function(s){return e(s[0])+"="+e(s[1])},"").join("&")};function T4(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function xP(i,t,e){if(!t)return i;const n=e&&e.encode||T4;ee.isFunction(e)&&(e={serialize:e});const s=e&&e.serialize;let o;if(s?o=s(t,e):o=ee.isURLSearchParams(t)?t.toString():new Kv(t,e).toString(n),o){const r=i.indexOf("#");r!==-1&&(i=i.slice(0,r)),i+=(i.indexOf("?")===-1?"?":"&")+o}return i}class Ok{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ee.forEach(this.handlers,function(n){n!==null&&t(n)})}}const kP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},x4=typeof URLSearchParams<"u"?URLSearchParams:Kv,k4=typeof FormData<"u"?FormData:null,E4=typeof Blob<"u"?Blob:null,S4={isBrowser:!0,classes:{URLSearchParams:x4,FormData:k4,Blob:E4},protocols:["http","https","file","blob","url","data"]},Zv=typeof window<"u"&&typeof document<"u",Cy=typeof navigator=="object"&&navigator||void 0,A4=Zv&&(!Cy||["ReactNative","NativeScript","NS"].indexOf(Cy.product)<0),R4=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",I4=Zv&&window.location.href||"http://localhost",P4=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Zv,hasStandardBrowserEnv:A4,hasStandardBrowserWebWorkerEnv:R4,navigator:Cy,origin:I4},Symbol.toStringTag,{value:"Module"})),Gn={...P4,...S4};function M4(i,t){return fp(i,new Gn.classes.URLSearchParams,Object.assign({visitor:function(e,n,s,o){return Gn.isNode&&ee.isBuffer(e)?(this.append(n,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function V4(i){return ee.matchAll(/\w+|\[(\w*)]/g,i).map(t=>t[0]==="[]"?"":t[1]||t[0])}function N4(i){const t={},e=Object.keys(i);let n;const s=e.length;let o;for(n=0;n<s;n++)o=e[n],t[o]=i[o];return t}function EP(i){function t(e,n,s,o){let r=e[o++];if(r==="__proto__")return!0;const a=Number.isFinite(+r),l=o>=e.length;return r=!r&&ee.isArray(s)?s.length:r,l?(ee.hasOwnProp(s,r)?s[r]=[s[r],n]:s[r]=n,!a):((!s[r]||!ee.isObject(s[r]))&&(s[r]=[]),t(e,n,s[r],o)&&ee.isArray(s[r])&&(s[r]=N4(s[r])),!a)}if(ee.isFormData(i)&&ee.isFunction(i.entries)){const e={};return ee.forEachEntry(i,(n,s)=>{t(V4(n),s,e,0)}),e}return null}function D4(i,t,e){if(ee.isString(i))try{return(t||JSON.parse)(i),ee.trim(i)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(i)}const kh={transitional:kP,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",s=n.indexOf("application/json")>-1,o=ee.isObject(t);if(o&&ee.isHTMLForm(t)&&(t=new FormData(t)),ee.isFormData(t))return s?JSON.stringify(EP(t)):t;if(ee.isArrayBuffer(t)||ee.isBuffer(t)||ee.isStream(t)||ee.isFile(t)||ee.isBlob(t)||ee.isReadableStream(t))return t;if(ee.isArrayBufferView(t))return t.buffer;if(ee.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return M4(t,this.formSerializer).toString();if((a=ee.isFileList(t))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return fp(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return o||s?(e.setContentType("application/json",!1),D4(t)):t}],transformResponse:[function(t){const e=this.transitional||kh.transitional,n=e&&e.forcedJSONParsing,s=this.responseType==="json";if(ee.isResponse(t)||ee.isReadableStream(t))return t;if(t&&ee.isString(t)&&(n&&!this.responseType||s)){const r=!(e&&e.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(a){if(r)throw a.name==="SyntaxError"?We.from(a,We.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gn.classes.FormData,Blob:Gn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ee.forEach(["delete","get","head","post","put","patch"],i=>{kh.headers[i]={}});const O4=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),L4=i=>{const t={};let e,n,s;return i&&i.split(`
`).forEach(function(r){s=r.indexOf(":"),e=r.substring(0,s).trim().toLowerCase(),n=r.substring(s+1).trim(),!(!e||t[e]&&O4[e])&&(e==="set-cookie"?t[e]?t[e].push(n):t[e]=[n]:t[e]=t[e]?t[e]+", "+n:n)}),t},Lk=Symbol("internals");function Fu(i){return i&&String(i).trim().toLowerCase()}function Nm(i){return i===!1||i==null?i:ee.isArray(i)?i.map(Nm):String(i)}function B4(i){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(i);)t[n[1]]=n[2];return t}const F4=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function uw(i,t,e,n,s){if(ee.isFunction(n))return n.call(this,t,e);if(s&&(t=e),!!ee.isString(t)){if(ee.isString(n))return t.indexOf(n)!==-1;if(ee.isRegExp(n))return n.test(t)}}function U4(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}function z4(i,t){const e=ee.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(i,n+e,{value:function(s,o,r){return this[n].call(this,t,s,o,r)},configurable:!0})})}let vi=class{constructor(t){t&&this.set(t)}set(t,e,n){const s=this;function o(a,l,u){const h=Fu(l);if(!h)throw new Error("header name must be a non-empty string");const m=ee.findKey(s,h);(!m||s[m]===void 0||u===!0||u===void 0&&s[m]!==!1)&&(s[m||l]=Nm(a))}const r=(a,l)=>ee.forEach(a,(u,h)=>o(u,h,l));if(ee.isPlainObject(t)||t instanceof this.constructor)r(t,e);else if(ee.isString(t)&&(t=t.trim())&&!F4(t))r(L4(t),e);else if(ee.isObject(t)&&ee.isIterable(t)){let a={},l,u;for(const h of t){if(!ee.isArray(h))throw TypeError("Object iterator must return a key-value pair");a[u=h[0]]=(l=a[u])?ee.isArray(l)?[...l,h[1]]:[l,h[1]]:h[1]}r(a,e)}else t!=null&&o(e,t,n);return this}get(t,e){if(t=Fu(t),t){const n=ee.findKey(this,t);if(n){const s=this[n];if(!e)return s;if(e===!0)return B4(s);if(ee.isFunction(e))return e.call(this,s,n);if(ee.isRegExp(e))return e.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Fu(t),t){const n=ee.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||uw(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let s=!1;function o(r){if(r=Fu(r),r){const a=ee.findKey(n,r);a&&(!e||uw(n,n[a],a,e))&&(delete n[a],s=!0)}}return ee.isArray(t)?t.forEach(o):o(t),s}clear(t){const e=Object.keys(this);let n=e.length,s=!1;for(;n--;){const o=e[n];(!t||uw(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const e=this,n={};return ee.forEach(this,(s,o)=>{const r=ee.findKey(n,o);if(r){e[r]=Nm(s),delete e[o];return}const a=t?U4(o):String(o).trim();a!==o&&delete e[o],e[a]=Nm(s),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return ee.forEach(this,(n,s)=>{n!=null&&n!==!1&&(e[s]=t&&ee.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[Lk]=this[Lk]={accessors:{}}).accessors,s=this.prototype;function o(r){const a=Fu(r);n[a]||(z4(s,r),n[a]=!0)}return ee.isArray(t)?t.forEach(o):o(t),this}};vi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ee.reduceDescriptors(vi.prototype,({value:i},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>i,set(n){this[e]=n}}});ee.freezeMethods(vi);function dw(i,t){const e=this||kh,n=t||e,s=vi.from(n.headers);let o=n.data;return ee.forEach(i,function(a){o=a.call(e,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function SP(i){return!!(i&&i.__CANCEL__)}function Vc(i,t,e){We.call(this,i??"canceled",We.ERR_CANCELED,t,e),this.name="CanceledError"}ee.inherits(Vc,We,{__CANCEL__:!0});function AP(i,t,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?i(e):t(new We("Request failed with status code "+e.status,[We.ERR_BAD_REQUEST,We.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function H4(i){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return t&&t[1]||""}function W4(i,t){i=i||10;const e=new Array(i),n=new Array(i);let s=0,o=0,r;return t=t!==void 0?t:1e3,function(l){const u=Date.now(),h=n[o];r||(r=u),e[s]=l,n[s]=u;let m=o,p=0;for(;m!==s;)p+=e[m++],m=m%i;if(s=(s+1)%i,s===o&&(o=(o+1)%i),u-r<t)return;const v=h&&u-h;return v?Math.round(p*1e3/v):void 0}}function q4(i,t){let e=0,n=1e3/t,s,o;const r=(u,h=Date.now())=>{e=h,s=null,o&&(clearTimeout(o),o=null),i.apply(null,u)};return[(...u)=>{const h=Date.now(),m=h-e;m>=n?r(u,h):(s=u,o||(o=setTimeout(()=>{o=null,r(s)},n-m)))},()=>s&&r(s)]}const og=(i,t,e=3)=>{let n=0;const s=W4(50,250);return q4(o=>{const r=o.loaded,a=o.lengthComputable?o.total:void 0,l=r-n,u=s(l),h=r<=a;n=r;const m={loaded:r,total:a,progress:a?r/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&h?(a-r)/u:void 0,event:o,lengthComputable:a!=null,[t?"download":"upload"]:!0};i(m)},e)},Bk=(i,t)=>{const e=i!=null;return[n=>t[0]({lengthComputable:e,total:i,loaded:n}),t[1]]},Fk=i=>(...t)=>ee.asap(()=>i(...t)),$4=Gn.hasStandardBrowserEnv?((i,t)=>e=>(e=new URL(e,Gn.origin),i.protocol===e.protocol&&i.host===e.host&&(t||i.port===e.port)))(new URL(Gn.origin),Gn.navigator&&/(msie|trident)/i.test(Gn.navigator.userAgent)):()=>!0,G4=Gn.hasStandardBrowserEnv?{write(i,t,e,n,s,o){const r=[i+"="+encodeURIComponent(t)];ee.isNumber(e)&&r.push("expires="+new Date(e).toGMTString()),ee.isString(n)&&r.push("path="+n),ee.isString(s)&&r.push("domain="+s),o===!0&&r.push("secure"),document.cookie=r.join("; ")},read(i){const t=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function j4(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function K4(i,t){return t?i.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):i}function RP(i,t,e){let n=!j4(t);return i&&(n||e==!1)?K4(i,t):t}const Uk=i=>i instanceof vi?{...i}:i;function Pa(i,t){t=t||{};const e={};function n(u,h,m,p){return ee.isPlainObject(u)&&ee.isPlainObject(h)?ee.merge.call({caseless:p},u,h):ee.isPlainObject(h)?ee.merge({},h):ee.isArray(h)?h.slice():h}function s(u,h,m,p){if(ee.isUndefined(h)){if(!ee.isUndefined(u))return n(void 0,u,m,p)}else return n(u,h,m,p)}function o(u,h){if(!ee.isUndefined(h))return n(void 0,h)}function r(u,h){if(ee.isUndefined(h)){if(!ee.isUndefined(u))return n(void 0,u)}else return n(void 0,h)}function a(u,h,m){if(m in t)return n(u,h);if(m in i)return n(void 0,u)}const l={url:o,method:o,data:o,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:a,headers:(u,h,m)=>s(Uk(u),Uk(h),m,!0)};return ee.forEach(Object.keys(Object.assign({},i,t)),function(h){const m=l[h]||s,p=m(i[h],t[h],h);ee.isUndefined(p)&&m!==a||(e[h]=p)}),e}const IP=i=>{const t=Pa({},i);let{data:e,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:o,headers:r,auth:a}=t;t.headers=r=vi.from(r),t.url=xP(RP(t.baseURL,t.url,t.allowAbsoluteUrls),i.params,i.paramsSerializer),a&&r.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(ee.isFormData(e)){if(Gn.hasStandardBrowserEnv||Gn.hasStandardBrowserWebWorkerEnv)r.setContentType(void 0);else if((l=r.getContentType())!==!1){const[u,...h]=l?l.split(";").map(m=>m.trim()).filter(Boolean):[];r.setContentType([u||"multipart/form-data",...h].join("; "))}}if(Gn.hasStandardBrowserEnv&&(n&&ee.isFunction(n)&&(n=n(t)),n||n!==!1&&$4(t.url))){const u=s&&o&&G4.read(o);u&&r.set(s,u)}return t},Z4=typeof XMLHttpRequest<"u",Y4=Z4&&function(i){return new Promise(function(e,n){const s=IP(i);let o=s.data;const r=vi.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=s,h,m,p,v,C;function x(){v&&v(),C&&C(),s.cancelToken&&s.cancelToken.unsubscribe(h),s.signal&&s.signal.removeEventListener("abort",h)}let k=new XMLHttpRequest;k.open(s.method.toUpperCase(),s.url,!0),k.timeout=s.timeout;function S(){if(!k)return;const P=vi.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),D={data:!a||a==="text"||a==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:P,config:i,request:k};AP(function(F){e(F),x()},function(F){n(F),x()},D),k=null}"onloadend"in k?k.onloadend=S:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(S)},k.onabort=function(){k&&(n(new We("Request aborted",We.ECONNABORTED,i,k)),k=null)},k.onerror=function(){n(new We("Network Error",We.ERR_NETWORK,i,k)),k=null},k.ontimeout=function(){let O=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const D=s.transitional||kP;s.timeoutErrorMessage&&(O=s.timeoutErrorMessage),n(new We(O,D.clarifyTimeoutError?We.ETIMEDOUT:We.ECONNABORTED,i,k)),k=null},o===void 0&&r.setContentType(null),"setRequestHeader"in k&&ee.forEach(r.toJSON(),function(O,D){k.setRequestHeader(D,O)}),ee.isUndefined(s.withCredentials)||(k.withCredentials=!!s.withCredentials),a&&a!=="json"&&(k.responseType=s.responseType),u&&([p,C]=og(u,!0),k.addEventListener("progress",p)),l&&k.upload&&([m,v]=og(l),k.upload.addEventListener("progress",m),k.upload.addEventListener("loadend",v)),(s.cancelToken||s.signal)&&(h=P=>{k&&(n(!P||P.type?new Vc(null,i,k):P),k.abort(),k=null)},s.cancelToken&&s.cancelToken.subscribe(h),s.signal&&(s.signal.aborted?h():s.signal.addEventListener("abort",h)));const I=H4(s.url);if(I&&Gn.protocols.indexOf(I)===-1){n(new We("Unsupported protocol "+I+":",We.ERR_BAD_REQUEST,i));return}k.send(o||null)})},J4=(i,t)=>{const{length:e}=i=i?i.filter(Boolean):[];if(t||e){let n=new AbortController,s;const o=function(u){if(!s){s=!0,a();const h=u instanceof Error?u:this.reason;n.abort(h instanceof We?h:new Vc(h instanceof Error?h.message:h))}};let r=t&&setTimeout(()=>{r=null,o(new We(`timeout ${t} of ms exceeded`,We.ETIMEDOUT))},t);const a=()=>{i&&(r&&clearTimeout(r),r=null,i.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),i=null)};i.forEach(u=>u.addEventListener("abort",o));const{signal:l}=n;return l.unsubscribe=()=>ee.asap(a),l}},X4=function*(i,t){let e=i.byteLength;if(e<t){yield i;return}let n=0,s;for(;n<e;)s=n+t,yield i.slice(n,s),n=s},Q4=async function*(i,t){for await(const e of e7(i))yield*X4(e,t)},e7=async function*(i){if(i[Symbol.asyncIterator]){yield*i;return}const t=i.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},zk=(i,t,e,n)=>{const s=Q4(i,t);let o=0,r,a=l=>{r||(r=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:u,value:h}=await s.next();if(u){a(),l.close();return}let m=h.byteLength;if(e){let p=o+=m;e(p)}l.enqueue(new Uint8Array(h))}catch(u){throw a(u),u}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},mp=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",PP=mp&&typeof ReadableStream=="function",t7=mp&&(typeof TextEncoder=="function"?(i=>t=>i.encode(t))(new TextEncoder):async i=>new Uint8Array(await new Response(i).arrayBuffer())),MP=(i,...t)=>{try{return!!i(...t)}catch{return!1}},n7=PP&&MP(()=>{let i=!1;const t=new Request(Gn.origin,{body:new ReadableStream,method:"POST",get duplex(){return i=!0,"half"}}).headers.has("Content-Type");return i&&!t}),Hk=64*1024,Ty=PP&&MP(()=>ee.isReadableStream(new Response("").body)),rg={stream:Ty&&(i=>i.body)};mp&&(i=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!rg[t]&&(rg[t]=ee.isFunction(i[t])?e=>e[t]():(e,n)=>{throw new We(`Response type '${t}' is not supported`,We.ERR_NOT_SUPPORT,n)})})})(new Response);const i7=async i=>{if(i==null)return 0;if(ee.isBlob(i))return i.size;if(ee.isSpecCompliantForm(i))return(await new Request(Gn.origin,{method:"POST",body:i}).arrayBuffer()).byteLength;if(ee.isArrayBufferView(i)||ee.isArrayBuffer(i))return i.byteLength;if(ee.isURLSearchParams(i)&&(i=i+""),ee.isString(i))return(await t7(i)).byteLength},s7=async(i,t)=>{const e=ee.toFiniteNumber(i.getContentLength());return e??i7(t)},o7=mp&&(async i=>{let{url:t,method:e,data:n,signal:s,cancelToken:o,timeout:r,onDownloadProgress:a,onUploadProgress:l,responseType:u,headers:h,withCredentials:m="same-origin",fetchOptions:p}=IP(i);u=u?(u+"").toLowerCase():"text";let v=J4([s,o&&o.toAbortSignal()],r),C;const x=v&&v.unsubscribe&&(()=>{v.unsubscribe()});let k;try{if(l&&n7&&e!=="get"&&e!=="head"&&(k=await s7(h,n))!==0){let D=new Request(t,{method:"POST",body:n,duplex:"half"}),Y;if(ee.isFormData(n)&&(Y=D.headers.get("content-type"))&&h.setContentType(Y),D.body){const[F,j]=Bk(k,og(Fk(l)));n=zk(D.body,Hk,F,j)}}ee.isString(m)||(m=m?"include":"omit");const S="credentials"in Request.prototype;C=new Request(t,{...p,signal:v,method:e.toUpperCase(),headers:h.normalize().toJSON(),body:n,duplex:"half",credentials:S?m:void 0});let I=await fetch(C);const P=Ty&&(u==="stream"||u==="response");if(Ty&&(a||P&&x)){const D={};["status","statusText","headers"].forEach(U=>{D[U]=I[U]});const Y=ee.toFiniteNumber(I.headers.get("content-length")),[F,j]=a&&Bk(Y,og(Fk(a),!0))||[];I=new Response(zk(I.body,Hk,F,()=>{j&&j(),x&&x()}),D)}u=u||"text";let O=await rg[ee.findKey(rg,u)||"text"](I,i);return!P&&x&&x(),await new Promise((D,Y)=>{AP(D,Y,{data:O,headers:vi.from(I.headers),status:I.status,statusText:I.statusText,config:i,request:C})})}catch(S){throw x&&x(),S&&S.name==="TypeError"&&/Load failed|fetch/i.test(S.message)?Object.assign(new We("Network Error",We.ERR_NETWORK,i,C),{cause:S.cause||S}):We.from(S,S&&S.code,i,C)}}),xy={http:y4,xhr:Y4,fetch:o7};ee.forEach(xy,(i,t)=>{if(i){try{Object.defineProperty(i,"name",{value:t})}catch{}Object.defineProperty(i,"adapterName",{value:t})}});const Wk=i=>`- ${i}`,r7=i=>ee.isFunction(i)||i===null||i===!1,VP={getAdapter:i=>{i=ee.isArray(i)?i:[i];const{length:t}=i;let e,n;const s={};for(let o=0;o<t;o++){e=i[o];let r;if(n=e,!r7(e)&&(n=xy[(r=String(e)).toLowerCase()],n===void 0))throw new We(`Unknown adapter '${r}'`);if(n)break;s[r||"#"+o]=n}if(!n){const o=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let r=t?o.length>1?`since :
`+o.map(Wk).join(`
`):" "+Wk(o[0]):"as no adapter specified";throw new We("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return n},adapters:xy};function hw(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new Vc(null,i)}function qk(i){return hw(i),i.headers=vi.from(i.headers),i.data=dw.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),VP.getAdapter(i.adapter||kh.adapter)(i).then(function(n){return hw(i),n.data=dw.call(i,i.transformResponse,n),n.headers=vi.from(n.headers),n},function(n){return SP(n)||(hw(i),n&&n.response&&(n.response.data=dw.call(i,i.transformResponse,n.response),n.response.headers=vi.from(n.response.headers))),Promise.reject(n)})}const NP="1.9.0",gp={};["object","boolean","number","function","string","symbol"].forEach((i,t)=>{gp[i]=function(n){return typeof n===i||"a"+(t<1?"n ":" ")+i}});const $k={};gp.transitional=function(t,e,n){function s(o,r){return"[Axios v"+NP+"] Transitional option '"+o+"'"+r+(n?". "+n:"")}return(o,r,a)=>{if(t===!1)throw new We(s(r," has been removed"+(e?" in "+e:"")),We.ERR_DEPRECATED);return e&&!$k[r]&&($k[r]=!0,console.warn(s(r," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(o,r,a):!0}};gp.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function a7(i,t,e){if(typeof i!="object")throw new We("options must be an object",We.ERR_BAD_OPTION_VALUE);const n=Object.keys(i);let s=n.length;for(;s-- >0;){const o=n[s],r=t[o];if(r){const a=i[o],l=a===void 0||r(a,o,i);if(l!==!0)throw new We("option "+o+" must be "+l,We.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new We("Unknown option "+o,We.ERR_BAD_OPTION)}}const Dm={assertOptions:a7,validators:gp},Ms=Dm.validators;let xa=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Ok,response:new Ok}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Pa(this.defaults,e);const{transitional:n,paramsSerializer:s,headers:o}=e;n!==void 0&&Dm.assertOptions(n,{silentJSONParsing:Ms.transitional(Ms.boolean),forcedJSONParsing:Ms.transitional(Ms.boolean),clarifyTimeoutError:Ms.transitional(Ms.boolean)},!1),s!=null&&(ee.isFunction(s)?e.paramsSerializer={serialize:s}:Dm.assertOptions(s,{encode:Ms.function,serialize:Ms.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),Dm.assertOptions(e,{baseUrl:Ms.spelling("baseURL"),withXsrfToken:Ms.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let r=o&&ee.merge(o.common,o[e.method]);o&&ee.forEach(["delete","get","head","post","put","patch","common"],C=>{delete o[C]}),e.headers=vi.concat(r,o);const a=[];let l=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(e)===!1||(l=l&&x.synchronous,a.unshift(x.fulfilled,x.rejected))});const u=[];this.interceptors.response.forEach(function(x){u.push(x.fulfilled,x.rejected)});let h,m=0,p;if(!l){const C=[qk.bind(this),void 0];for(C.unshift.apply(C,a),C.push.apply(C,u),p=C.length,h=Promise.resolve(e);m<p;)h=h.then(C[m++],C[m++]);return h}p=a.length;let v=e;for(m=0;m<p;){const C=a[m++],x=a[m++];try{v=C(v)}catch(k){x.call(this,k);break}}try{h=qk.call(this,v)}catch(C){return Promise.reject(C)}for(m=0,p=u.length;m<p;)h=h.then(u[m++],u[m++]);return h}getUri(t){t=Pa(this.defaults,t);const e=RP(t.baseURL,t.url,t.allowAbsoluteUrls);return xP(e,t.params,t.paramsSerializer)}};ee.forEach(["delete","get","head","options"],function(t){xa.prototype[t]=function(e,n){return this.request(Pa(n||{},{method:t,url:e,data:(n||{}).data}))}});ee.forEach(["post","put","patch"],function(t){function e(n){return function(o,r,a){return this.request(Pa(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:r}))}}xa.prototype[t]=e(),xa.prototype[t+"Form"]=e(!0)});let l7=class DP{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(o){e=o});const n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o;const r=new Promise(a=>{n.subscribe(a),o=a}).then(s);return r.cancel=function(){n.unsubscribe(o)},r},t(function(o,r,a){n.reason||(n.reason=new Vc(o,r,a),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=n=>{t.abort(n)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new DP(function(s){t=s}),cancel:t}}};function c7(i){return function(e){return i.apply(null,e)}}function u7(i){return ee.isObject(i)&&i.isAxiosError===!0}const ky={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ky).forEach(([i,t])=>{ky[t]=i});function OP(i){const t=new xa(i),e=hP(xa.prototype.request,t);return ee.extend(e,xa.prototype,t,{allOwnKeys:!0}),ee.extend(e,t,null,{allOwnKeys:!0}),e.create=function(s){return OP(Pa(i,s))},e}const Nt=OP(kh);Nt.Axios=xa;Nt.CanceledError=Vc;Nt.CancelToken=l7;Nt.isCancel=SP;Nt.VERSION=NP;Nt.toFormData=fp;Nt.AxiosError=We;Nt.Cancel=Nt.CanceledError;Nt.all=function(t){return Promise.all(t)};Nt.spread=c7;Nt.isAxiosError=u7;Nt.mergeConfig=Pa;Nt.AxiosHeaders=vi;Nt.formToJSON=i=>EP(ee.isHTMLForm(i)?new FormData(i):i);Nt.getAdapter=VP.getAdapter;Nt.HttpStatusCode=ky;Nt.default=Nt;const{Axios:zfe,AxiosError:Hfe,CanceledError:Wfe,isCancel:qfe,CancelToken:$fe,VERSION:Gfe,all:jfe,Cancel:Kfe,isAxiosError:Zfe,spread:Yfe,toFormData:Jfe,AxiosHeaders:Xfe,HttpStatusCode:Qfe,formToJSON:eme,getAdapter:tme,mergeConfig:nme}=Nt;function rc(i){return i==1?"암컷":"수컷"}function LP(i){return i==1?"공고중":i==2?"입양가능":i==3?"입양예정":i==4?"입양완료":"주인반환"}function d7(i){return i==1?"강아지":i==2?"고양이":"기타동물"}function h7(i){return i==1?"동구":i==2?"중구":i==3?"서구":i==4?"유성구":"대덕구"}function f7(i){return i==1?"bg-amber-500":i==2?"bg-blue-500":i==3?"bg-red-500":i==4?"bg-green-500":"bg-purple-500"}function m7(i){return i==1?"border-t-amber-500":i==2?"border-t-blue-500":i==3?"border-t-red-500":i==4?"border-t-green-500":"border-t-purple-500"}const g7="/animal-center/assets/catdog-BC91BXmj.png",pp="https://apis.data.go.kr/6300000/animalDaejeonService/animalDaejeonList",bp="2btSF2E6uTmzg%2Bd5TE77QXgTmB64yxeV4YmQN9fSae97LGTRZywDpUl7HAjs39r6lmeDT0%2FrXHQPYwqM8fGE%2BA%3D%3D",p7="AIzaSyDgcsKH8eR8yRF2N3irL-Uucz0HsinQzeg";function b7(){H.useEffect(()=>{(async()=>{var m=pp,p=`?serviceKey=${bp}`;p+="&numOfRows=5",p+="&searchCondition3=2";const C=(await Nt.get(m+p)).data,k=new X2JS().xml_str2json(C);console.log(k);const S=k.ServiceResult.MsgBody.items;console.log(S),t(S)})(),(async()=>{var m="http://apis.data.go.kr/6300000/animalDaejeonService/animalDaejeonList",p="?serviceKey=2btSF2E6uTmzg%2Bd5TE77QXgTmB64yxeV4YmQN9fSae97LGTRZywDpUl7HAjs39r6lmeDT0%2FrXHQPYwqM8fGE%2BA%3D%3D";p+="&pageNo=1",p+="&numOfRows=4",p+="&searchCondition3=1";const C=(await Nt.get(m+p)).data,k=new X2JS().xml_str2json(C);console.log(k);const S=k.ServiceResult.MsgBody.items;console.log(S),n(S)})()},[]);const[i,t]=H.useState([]),[e,n]=H.useState([]),[s,o]=H.useState(0),[r,a]=H.useState(0),l=ap();return A.jsxs("div",{className:"py-4",children:[A.jsxs("div",{className:"py-4 px-2 max-sm:hidden",children:[A.jsxs("div",{children:[A.jsx("span",{className:"text-xl font-bold ",children:"입양가능"}),A.jsx("span",{className:"ms-2 text-xs text-gray-600",children:"#대전동물보호센터에서 새로운 가족을 기다리고 있어요"})]}),A.jsx("div",{className:"grid grid-cols-5 gap-4 mt-4",children:i.map(u=>A.jsxs("div",{onClick:()=>l(`/animalDetail?regId= ${u.regId}`),className:"aspect-9/12 group cursor-pointer shadow rounded-xl overflow-hidden",children:[A.jsx("div",{className:"h-3/5 flex justify-center items-center overflow-hidden",children:A.jsx("img",{className:"h-full duration-300 group-hover:scale-125",src:`https://www.daejeon.go.kr/${u.filePath}`,alt:""})}),A.jsxs("div",{className:"h-2/5 pt-2 relative flex flex-col items-center justify-evenly border-t-4 border-t-blue-500",children:[A.jsx("span",{className:"font-bold",children:u.species}),A.jsx("span",{className:"text-sm",children:rc(u.gender)}),A.jsx("span",{className:"bg-blue-500 text-white font-bold absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 text-sm px-3 py-2 rounded-4xl",children:"입양가능"})]})]},u.regId))})]}),A.jsxs("div",{className:"sm:hidden p-4",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("span",{className:"text-xl font-bold",children:"입양가능"}),A.jsxs("div",{className:"flex",children:[A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"#d1d5dc",onClick:()=>o(s==0?i.length-1:s-1),className:"size-6 border border-gray-300 rounded-[8px]",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"#d1d5dc",onClick:()=>o(s==4?null:s+1),className:"size-6 border border-gray-300 rounded-[8px] mx-1",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})}),A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"#d1d5dc",className:"size-6 border border-gray-300 rounded-[8px]",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})]})]}),A.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"#대전동물보호센터에서 새로운 가족을 기다리고 있어요"}),A.jsx("div",{className:"whitespace-nowrap overflow-hidden mt-4",children:i.map(u=>A.jsxs("div",{onClick:()=>l(`/animalDetail?regId= ${u.regId}`),style:{transform:`translateX(-${s*100}%)`},className:"inline-block aspect-10/12 group cursor-pointer shadow rounded-xl overflow-hidden duration-400",children:[A.jsx("div",{className:"h-3/5 flex justify-center items-center overflow-hidden",children:A.jsx("img",{className:"h-full min-w-full duration-300 group-hover:scale-125",src:`https://www.daejeon.go.kr/${u.filePath}`,alt:""})}),A.jsxs("div",{className:"h-2/5 pt-2 relative flex flex-col items-center justify-evenly border-t-4 border-t-blue-500",children:[A.jsx("span",{className:"font-bold",children:u.species}),A.jsx("span",{className:"text-sm",children:rc(u.gender)}),A.jsx("span",{className:"bg-blue-500 text-white font-bold absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 text-sm px-3 py-2 rounded-4xl",children:"입양가능"})]})]},u.regId))})]}),A.jsxs("div",{className:"bg-blue-200 py-4 px-2 max-sm:hidden",children:[A.jsxs("div",{children:[A.jsx("span",{className:"text-xl",children:"공고중인"}),A.jsx("span",{className:"text-xl font-bold",children:"보호동물"}),A.jsx("span",{className:"ms-2 text-xs text-gray-600",children:"#대전동물보호센터의 새 식구를 소개합니다"})]}),A.jsxs("div",{className:"grid grid-cols-5 gap-4 mt-4",children:[A.jsx("div",{className:"flex items-end",children:A.jsx("img",{src:g7,alt:""})}),e.map(u=>A.jsxs("div",{onClick:()=>l(`/animalDetail?regId=${u.regId}`),className:"aspect-9/12 group cursor-pointer shadow rounded-xl overflow-hidden",children:[A.jsx("div",{className:"h-1/2 flex justify-center items-center overflow-hidden",children:A.jsx("img",{className:"h-full min-w-full duration-300 group-hover:scale-125",src:`https://www.daejeon.go.kr/${u.filePath}`,alt:""})}),A.jsxs("div",{className:"bg-white h-1/2 pt-2 px-3 relative flex flex-col items-center justify-evenly border-t-4 border-t-amber-500",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-bold",children:u.species}),A.jsx("span",{className:"text-sm text-gray-600 ms-1",children:rc(u.gender)})]}),A.jsxs("div",{className:"text-sm text-gray-600 w-full",children:[A.jsxs("div",{children:[A.jsx("span",{children:"관리번호"}),A.jsx("span",{className:"ps-1",children:u.regId})]}),A.jsxs("div",{children:[A.jsx("span",{children:"공고날짜"}),A.jsx("span",{className:"ps-1",children:u.regDtTm})]}),A.jsxs("div",{children:[A.jsx("span",{children:"발견장소"}),A.jsx("span",{className:"ps-1",children:u.foundPlace.length>7?u.foundPlace.substring(0,7)+"...":u.foundPlace})]})]}),A.jsx("span",{className:"bg-amber-500 text-white font-bold absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 text-sm px-3 py-1 rounded-2xl",children:"공고중"})]})]},u.regId))]})]}),A.jsxs("div",{className:"sm:hidden p-4 bg-blue-200",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsxs("div",{children:[A.jsx("span",{className:"text-xl",children:"공고중인"}),A.jsx("span",{className:"text-xl font-bold",children:"보호동물"})]}),A.jsxs("div",{className:"flex",children:[A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"#d1d5dc",onClick:()=>a(r==0?e.length-1:r-1),className:"size-6 border border-gray-300 rounded-[8px] bg-white",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"#d1d5dc",onClick:()=>a(r==e.length-1?0:r+1),className:"size-6 border border-gray-300 rounded-[8px] mx-1 bg-white",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})}),A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"#d1d5dc",className:"size-6 bg-white border border-gray-300 rounded-[8px]",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})]})]}),A.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"#대전동물보호센터에서 새로운 가족을 기다리고 있어요"}),A.jsx("div",{className:"whitespace-nowrap overflow-hidden mt-4",children:e.map(u=>A.jsxs("div",{onClick:()=>l(`/animalDetail?regId=${u.regId}`),style:{transform:`translateX(-${r*100}%)`},className:"inline-block aspect-10/12 group cursor-pointer shadow rounded-xl overflow-hidden duration-400",children:[A.jsx("div",{className:"h-1/2 flex justify-center items-center overflow-hidden",children:A.jsx("img",{className:"h-full min-w-full duration-300 group-hover:scale-125",src:`https://www.daejeon.go.kr/${u.filePath}`,alt:""})}),A.jsxs("div",{className:"bg-white h-1/2 pt-2 px-3 relative flex flex-col items-center justify-evenly border-t-4 border-t-amber-500",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-bold text-xl",children:u.species}),A.jsx("span",{className:"text-lg text-gray-600 ms-1",children:rc(u.gender)})]}),A.jsxs("div",{className:"text-lg text-gray-600 w-full",children:[A.jsxs("div",{children:[A.jsx("span",{children:"관리번호"}),A.jsx("span",{className:"ps-1",children:u.regId})]}),A.jsxs("div",{children:[A.jsx("span",{children:"공고날짜"}),A.jsx("span",{className:"ps-1",children:u.regDtTm})]}),A.jsxs("div",{children:[A.jsx("span",{children:"발견장소"}),A.jsx("span",{className:"ps-1",children:u.foundPlace.length>7?u.foundPlace.substring(0,7)+"...":u.foundPlace})]})]}),A.jsx("span",{className:"bg-amber-500 text-white font-bold absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 text-lg px-3 py-1 rounded-2xl",children:"공고중"})]})]},u.regId))})]})]})}const BP="/animal-center/assets/noimage-BsExY8-f.png";function Fr(i){var s;const t=i.from,[e,n]=H.useState({});return H.useEffect(()=>{py.forEach(o=>{o.sub.forEach(r=>{r.subLink==t&&n(o)})})},[]),A.jsxs("div",{className:"w-1/5 max-sm:hidden",children:[A.jsx("h1",{className:"p-4 mb-8 text-primary-500 font-bold text-2xl",children:e.title}),A.jsx("ul",{className:"mb-4",children:(s=e.sub)==null?void 0:s.map((o,r)=>A.jsx("li",{children:A.jsx(ya,{className:`px-5 py-4 block font-bold border-y border-y-gray-300 ${o.subLink==t?"bg-primary-500 text-white":"hover:text-primary-500"}`,to:o.subLink,children:o.subTitle})},r))})]})}function _7(){const[i]=SF();console.log(i.get("regId")),H.useEffect(()=>{(async()=>{var s=pp,o=`?serviceKey=${bp}`;o+=`&regId=${i.get("regId")}`;const a=(await Nt.get(s+o)).data,u=new X2JS().xml_str2json(a);console.log(u);const h=u.ServiceResult.MsgBody.items;console.log(h),e(h)})()},[]);const[t,e]=H.useState({});return A.jsxs("div",{className:"flex",children:[A.jsx(Fr,{from:"/animalList"}),A.jsxs("div",{className:"w-4/5 px-6 max-sm:w-full max-sm:px-2",children:[A.jsx("h1",{className:"p-4 text-3xl font-bold border-b border-b-gray-300",children:"보호동물"}),A.jsx("div",{className:"w-3/5 max-sm:w-full m-auto mt-6 aspect-3/2 border border-gray-300 p-2",children:A.jsx("img",{className:"h-full w-full",src:t.filePath?`https://www.daejeon.go.kr/${t.filePath}`:BP,alt:""})}),A.jsx("table",{className:"w-full mt-8 border-t-2 border-b border-b-gray-300 border-t-black",children:A.jsxs("tbody",{children:[A.jsxs("tr",{className:"max-sm: hidden",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"관리번호"}),A.jsx("td",{className:"px-4 py-3",children:t.regId}),A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"공고번호"}),A.jsx("td",{className:"px-4 py-3",children:t.animalSeq})]}),A.jsxs("tr",{className:"sm: hidden",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"관리번호"}),A.jsx("td",{colSpan:3,className:"px-4 py-3",children:t.regId})]}),A.jsxs("tr",{className:"sm: hidden border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"공고번호"}),A.jsx("td",{colSpan:3,className:"px-4 py-3",children:t.animalSeq})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"입양상태"}),A.jsx("td",{colSpan:3,className:"px-4 py-3",children:LP(t.adoptionStatusCd)})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"품종"}),A.jsx("td",{colSpan:3,className:"px-4 py-3",children:t.species})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"성별"}),A.jsx("td",{colSpan:3,className:"px-4 py-3",children:rc(t.gender)})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"발견장소"}),A.jsx("td",{colSpan:3,className:"px-4 py-3",children:t.foundPlace})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"구조일"}),A.jsx("td",{colSpan:3,className:"px-4 py-3",children:t.rescueDate})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"나이"}),A.jsx("td",{colSpan:3,className:"px-4 py-3",children:t.age})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"몸무게"}),A.jsx("td",{colSpan:3,className:"px-4 py-3",children:t.weight})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"모색"}),A.jsx("td",{colSpan:3,className:"px-4 py-3",children:t.hairColor})]}),A.jsxs("tr",{className:"border-t border-t-gray-300",children:[A.jsx("td",{className:"px-4 py-3 bg-gray-200 font-bold",children:"기타정보"}),A.jsx("td",{colSpan:3,className:"px-4 py-3",children:t.memo})]})]})}),A.jsx("div",{className:"my-6 flex justify-end",children:A.jsx("button",{className:"bg-gray-500 text-white px-5 py-2 rounded hover:bg-gray-600",children:"목록"})})]})]})}function w7(){return A.jsxs("div",{className:"flex",children:[A.jsx(Fr,{from:"/contactUs"}),A.jsxs("div",{className:"w-4/5 px-6 max-sm:w-full max-sm:px-2",children:[A.jsx("h1",{className:"p-4 text-3xl font-bold border-b border-b-gray-300",children:"오시는길"}),A.jsx("div",{className:"w-4/5 aspect-video m-auto my-8 max-sm:w-full",children:A.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3208.9479117896262!2d127.38046307563941!3d36.45881507234638!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x357ab35759eb49f9%3A0x4e667dc771de408c!2z64yA7KCE64-Z66y867O07Zi47IS87YSw!5e0!3m2!1sko!2skr!4v1747639517671!5m2!1sko!2skr",width:"100%",height:"100%",style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})}),A.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8 max-sm:grid-cols-subgrid",children:[A.jsx("div",{className:"aspect-video",children:A.jsx("iframe",{width:"100%",height:"100%",src:"https://www.youtube.com/embed/fx5X97HTajg?si=hqDNB6FhJ6ohMwaX",title:"YouTube video player",style:{border:0},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})}),A.jsx("div",{className:"aspect-video",children:A.jsx("iframe",{width:"100%",height:"100%",src:"https://www.youtube.com/embed/auys4n-YNw8?si=bxHvXtIK1VgtXOZa",title:"YouTube video player",style:{border:0},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})})]})]})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Eh(i){return i+.5|0}const yr=(i,t,e)=>Math.max(Math.min(i,e),t);function id(i){return yr(Eh(i*2.55),0,255)}function xr(i){return yr(Eh(i*255),0,255)}function vo(i){return yr(Eh(i/2.55)/100,0,1)}function Gk(i){return yr(Eh(i*100),0,100)}const Ki={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ey=[..."0123456789ABCDEF"],y7=i=>Ey[i&15],v7=i=>Ey[(i&240)>>4]+Ey[i&15],Kf=i=>(i&240)>>4===(i&15),C7=i=>Kf(i.r)&&Kf(i.g)&&Kf(i.b)&&Kf(i.a);function T7(i){var t=i.length,e;return i[0]==="#"&&(t===4||t===5?e={r:255&Ki[i[1]]*17,g:255&Ki[i[2]]*17,b:255&Ki[i[3]]*17,a:t===5?Ki[i[4]]*17:255}:(t===7||t===9)&&(e={r:Ki[i[1]]<<4|Ki[i[2]],g:Ki[i[3]]<<4|Ki[i[4]],b:Ki[i[5]]<<4|Ki[i[6]],a:t===9?Ki[i[7]]<<4|Ki[i[8]]:255})),e}const x7=(i,t)=>i<255?t(i):"";function k7(i){var t=C7(i)?y7:v7;return i?"#"+t(i.r)+t(i.g)+t(i.b)+x7(i.a,t):void 0}const E7=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function FP(i,t,e){const n=t*Math.min(e,1-e),s=(o,r=(o+i/30)%12)=>e-n*Math.max(Math.min(r-3,9-r,1),-1);return[s(0),s(8),s(4)]}function S7(i,t,e){const n=(s,o=(s+i/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function A7(i,t,e){const n=FP(i,1,.5);let s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)n[s]*=1-t-e,n[s]+=t;return n}function R7(i,t,e,n,s){return i===s?(t-e)/n+(t<e?6:0):t===s?(e-i)/n+2:(i-t)/n+4}function Yv(i){const e=i.r/255,n=i.g/255,s=i.b/255,o=Math.max(e,n,s),r=Math.min(e,n,s),a=(o+r)/2;let l,u,h;return o!==r&&(h=o-r,u=a>.5?h/(2-o-r):h/(o+r),l=R7(e,n,s,h,o),l=l*60+.5),[l|0,u||0,a]}function Jv(i,t,e,n){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,n)).map(xr)}function Xv(i,t,e){return Jv(FP,i,t,e)}function I7(i,t,e){return Jv(A7,i,t,e)}function P7(i,t,e){return Jv(S7,i,t,e)}function UP(i){return(i%360+360)%360}function M7(i){const t=E7.exec(i);let e=255,n;if(!t)return;t[5]!==n&&(e=t[6]?id(+t[5]):xr(+t[5]));const s=UP(+t[2]),o=+t[3]/100,r=+t[4]/100;return t[1]==="hwb"?n=I7(s,o,r):t[1]==="hsv"?n=P7(s,o,r):n=Xv(s,o,r),{r:n[0],g:n[1],b:n[2],a:e}}function V7(i,t){var e=Yv(i);e[0]=UP(e[0]+t),e=Xv(e),i.r=e[0],i.g=e[1],i.b=e[2]}function N7(i){if(!i)return;const t=Yv(i),e=t[0],n=Gk(t[1]),s=Gk(t[2]);return i.a<255?`hsla(${e}, ${n}%, ${s}%, ${vo(i.a)})`:`hsl(${e}, ${n}%, ${s}%)`}const jk={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Kk={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function D7(){const i={},t=Object.keys(Kk),e=Object.keys(jk);let n,s,o,r,a;for(n=0;n<t.length;n++){for(r=a=t[n],s=0;s<e.length;s++)o=e[s],a=a.replace(o,jk[o]);o=parseInt(Kk[r],16),i[a]=[o>>16&255,o>>8&255,o&255]}return i}let Zf;function O7(i){Zf||(Zf=D7(),Zf.transparent=[0,0,0,0]);const t=Zf[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const L7=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function B7(i){const t=L7.exec(i);let e=255,n,s,o;if(t){if(t[7]!==n){const r=+t[7];e=t[8]?id(r):yr(r*255,0,255)}return n=+t[1],s=+t[3],o=+t[5],n=255&(t[2]?id(n):yr(n,0,255)),s=255&(t[4]?id(s):yr(s,0,255)),o=255&(t[6]?id(o):yr(o,0,255)),{r:n,g:s,b:o,a:e}}}function F7(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${vo(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}const fw=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,Ul=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function U7(i,t,e){const n=Ul(vo(i.r)),s=Ul(vo(i.g)),o=Ul(vo(i.b));return{r:xr(fw(n+e*(Ul(vo(t.r))-n))),g:xr(fw(s+e*(Ul(vo(t.g))-s))),b:xr(fw(o+e*(Ul(vo(t.b))-o))),a:i.a+e*(t.a-i.a)}}function Yf(i,t,e){if(i){let n=Yv(i);n[t]=Math.max(0,Math.min(n[t]+n[t]*e,t===0?360:1)),n=Xv(n),i.r=n[0],i.g=n[1],i.b=n[2]}}function zP(i,t){return i&&Object.assign(t||{},i)}function Zk(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=xr(i[3]))):(t=zP(i,{r:0,g:0,b:0,a:1}),t.a=xr(t.a)),t}function z7(i){return i.charAt(0)==="r"?B7(i):M7(i)}class Fd{constructor(t){if(t instanceof Fd)return t;const e=typeof t;let n;e==="object"?n=Zk(t):e==="string"&&(n=T7(t)||O7(t)||z7(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=zP(this._rgb);return t&&(t.a=vo(t.a)),t}set rgb(t){this._rgb=Zk(t)}rgbString(){return this._valid?F7(this._rgb):void 0}hexString(){return this._valid?k7(this._rgb):void 0}hslString(){return this._valid?N7(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,s=t.rgb;let o;const r=e===o?.5:e,a=2*r-1,l=n.a-s.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-u,n.r=255&u*n.r+o*s.r+.5,n.g=255&u*n.g+o*s.g+.5,n.b=255&u*n.b+o*s.b+.5,n.a=r*n.a+(1-r)*s.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=U7(this._rgb,t._rgb,e)),this}clone(){return new Fd(this.rgb)}alpha(t){return this._rgb.a=xr(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Eh(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Yf(this._rgb,2,t),this}darken(t){return Yf(this._rgb,2,-t),this}saturate(t){return Yf(this._rgb,1,t),this}desaturate(t){return Yf(this._rgb,1,-t),this}rotate(t){return V7(this._rgb,t),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function fo(){}const H7=(()=>{let i=0;return()=>i++})();function bt(i){return i==null}function mn(i){if(Array.isArray&&Array.isArray(i))return!0;const t=Object.prototype.toString.call(i);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function lt(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function ts(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function Vs(i,t){return ts(i)?i:t}function tt(i,t){return typeof i>"u"?t:i}const W7=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/t,HP=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*t:+i;function Bt(i,t,e){if(i&&typeof i.call=="function")return i.apply(e,t)}function Ct(i,t,e,n){let s,o,r;if(mn(i))for(o=i.length,s=0;s<o;s++)t.call(e,i[s],s);else if(lt(i))for(r=Object.keys(i),o=r.length,s=0;s<o;s++)t.call(e,i[r[s]],r[s])}function ag(i,t){let e,n,s,o;if(!i||!t||i.length!==t.length)return!1;for(e=0,n=i.length;e<n;++e)if(s=i[e],o=t[e],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function lg(i){if(mn(i))return i.map(lg);if(lt(i)){const t=Object.create(null),e=Object.keys(i),n=e.length;let s=0;for(;s<n;++s)t[e[s]]=lg(i[e[s]]);return t}return i}function WP(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function q7(i,t,e,n){if(!WP(i))return;const s=t[i],o=e[i];lt(s)&&lt(o)?Ud(s,o,n):t[i]=lg(o)}function Ud(i,t,e){const n=mn(t)?t:[t],s=n.length;if(!lt(i))return i;e=e||{};const o=e.merger||q7;let r;for(let a=0;a<s;++a){if(r=n[a],!lt(r))continue;const l=Object.keys(r);for(let u=0,h=l.length;u<h;++u)o(l[u],i,r,e)}return i}function bd(i,t){return Ud(i,t,{merger:$7})}function $7(i,t,e){if(!WP(i))return;const n=t[i],s=e[i];lt(n)&&lt(s)?bd(n,s):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=lg(s))}const Yk={"":i=>i,x:i=>i.x,y:i=>i.y};function G7(i){const t=i.split("."),e=[];let n="";for(const s of t)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(e.push(n),n="");return e}function j7(i){const t=G7(i);return e=>{for(const n of t){if(n==="")break;e=e&&e[n]}return e}}function Ma(i,t){return(Yk[t]||(Yk[t]=j7(t)))(i)}function Qv(i){return i.charAt(0).toUpperCase()+i.slice(1)}const zd=i=>typeof i<"u",Rr=i=>typeof i=="function",Jk=(i,t)=>{if(i.size!==t.size)return!1;for(const e of i)if(!t.has(e))return!1;return!0};function K7(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const en=Math.PI,Qt=2*en,Z7=Qt+en,cg=Number.POSITIVE_INFINITY,Y7=en/180,gn=en/2,la=en/4,Xk=en*2/3,qP=Math.log10,Hs=Math.sign;function _d(i,t,e){return Math.abs(i-t)<e}function Qk(i){const t=Math.round(i);i=_d(i,t,i/1e3)?t:i;const e=Math.pow(10,Math.floor(qP(i))),n=i/e;return(n<=1?1:n<=2?2:n<=5?5:10)*e}function J7(i){const t=[],e=Math.sqrt(i);let n;for(n=1;n<e;n++)i%n===0&&(t.push(n),t.push(i/n));return e===(e|0)&&t.push(e),t.sort((s,o)=>s-o).pop(),t}function X7(i){return typeof i=="symbol"||typeof i=="object"&&i!==null&&!(Symbol.toPrimitive in i||"toString"in i||"valueOf"in i)}function Hd(i){return!X7(i)&&!isNaN(parseFloat(i))&&isFinite(i)}function Q7(i,t){const e=Math.round(i);return e-t<=i&&e+t>=i}function e6(i,t,e){let n,s,o;for(n=0,s=i.length;n<s;n++)o=i[n][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function ko(i){return i*(en/180)}function t6(i){return i*(180/en)}function eE(i){if(!ts(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function $P(i,t){const e=t.x-i.x,n=t.y-i.y,s=Math.sqrt(e*e+n*n);let o=Math.atan2(n,e);return o<-.5*en&&(o+=Qt),{angle:o,distance:s}}function Sy(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function n6(i,t){return(i-t+Z7)%Qt-en}function pr(i){return(i%Qt+Qt)%Qt}function Wd(i,t,e,n){const s=pr(i),o=pr(t),r=pr(e),a=pr(o-s),l=pr(r-s),u=pr(s-o),h=pr(s-r);return s===o||s===r||n&&o===r||a>l&&u<h}function jn(i,t,e){return Math.max(t,Math.min(e,i))}function i6(i){return jn(i,-32768,32767)}function vr(i,t,e,n=1e-6){return i>=Math.min(t,e)-n&&i<=Math.max(t,e)+n}function e0(i,t,e){e=e||(r=>i[r]<t);let n=i.length-1,s=0,o;for(;n-s>1;)o=s+n>>1,e(o)?s=o:n=o;return{lo:s,hi:n}}const Ca=(i,t,e,n)=>e0(i,e,n?s=>{const o=i[s][t];return o<e||o===e&&i[s+1][t]===e}:s=>i[s][t]<e),s6=(i,t,e)=>e0(i,e,n=>i[n][t]>=e);function o6(i,t,e){let n=0,s=i.length;for(;n<s&&i[n]<t;)n++;for(;s>n&&i[s-1]>e;)s--;return n>0||s<i.length?i.slice(n,s):i}const GP=["push","pop","shift","splice","unshift"];function r6(i,t){if(i._chartjs){i._chartjs.listeners.push(t);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),GP.forEach(e=>{const n="_onData"+Qv(e),s=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...o){const r=s.apply(this,o);return i._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...o)}),r}})})}function tE(i,t){const e=i._chartjs;if(!e)return;const n=e.listeners,s=n.indexOf(t);s!==-1&&n.splice(s,1),!(n.length>0)&&(GP.forEach(o=>{delete i[o]}),delete i._chartjs)}function jP(i){const t=new Set(i);return t.size===i.length?i:Array.from(t)}const KP=function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame}();function ZP(i,t){let e=[],n=!1;return function(...s){e=s,n||(n=!0,KP.call(window,()=>{n=!1,i.apply(t,e)}))}}function a6(i,t){let e;return function(...n){return t?(clearTimeout(e),e=setTimeout(i,t,n)):i.apply(this,n),t}}const t0=i=>i==="start"?"left":i==="end"?"right":"center",qn=(i,t,e)=>i==="start"?t:i==="end"?e:(t+e)/2,l6=(i,t,e,n)=>i===(n?"left":"right")?e:i==="center"?(t+e)/2:t;function c6(i,t,e){const n=t.length;let s=0,o=n;if(i._sorted){const{iScale:r,vScale:a,_parsed:l}=i,u=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null,h=r.axis,{min:m,max:p,minDefined:v,maxDefined:C}=r.getUserBounds();if(v){if(s=Math.min(Ca(l,h,m).lo,e?n:Ca(t,h,r.getPixelForValue(m)).lo),u){const x=l.slice(0,s+1).reverse().findIndex(k=>!bt(k[a.axis]));s-=Math.max(0,x)}s=jn(s,0,n-1)}if(C){let x=Math.max(Ca(l,r.axis,p,!0).hi+1,e?0:Ca(t,h,r.getPixelForValue(p),!0).hi+1);if(u){const k=l.slice(x-1).findIndex(S=>!bt(S[a.axis]));x+=Math.max(0,k)}o=jn(x,s,n)-s}else o=n-s}return{start:s,count:o}}function u6(i){const{xScale:t,yScale:e,_scaleRanges:n}=i,s={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!n)return i._scaleRanges=s,!0;const o=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==e.min||n.ymax!==e.max;return Object.assign(n,s),o}const Jf=i=>i===0||i===1,nE=(i,t,e)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-t)*Qt/e)),iE=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*Qt/e)+1,wd={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*gn)+1,easeOutSine:i=>Math.sin(i*gn),easeInOutSine:i=>-.5*(Math.cos(en*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>Jf(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>Jf(i)?i:nE(i,.075,.3),easeOutElastic:i=>Jf(i)?i:iE(i,.075,.3),easeInOutElastic(i){return Jf(i)?i:i<.5?.5*nE(i*2,.1125,.45):.5+.5*iE(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let t=1.70158;return(i/=.5)<1?.5*(i*i*(((t*=1.525)+1)*i-t)):.5*((i-=2)*i*(((t*=1.525)+1)*i+t)+2)},easeInBounce:i=>1-wd.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?wd.easeInBounce(i*2)*.5:wd.easeOutBounce(i*2-1)*.5+.5};function n0(i){if(i&&typeof i=="object"){const t=i.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function sE(i){return n0(i)?i:new Fd(i)}function mw(i){return n0(i)?i:new Fd(i).saturate(.5).darken(.1).hexString()}const d6=["x","y","borderWidth","radius","tension"],h6=["color","borderColor","backgroundColor"];function f6(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),i.set("animations",{colors:{type:"color",properties:h6},numbers:{type:"number",properties:d6}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function m6(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const oE=new Map;function g6(i,t){t=t||{};const e=i+JSON.stringify(t);let n=oE.get(e);return n||(n=new Intl.NumberFormat(i,t),oE.set(e,n)),n}function i0(i,t,e){return g6(t,e).format(i)}const p6={values(i){return mn(i)?i:""+i},numeric(i,t,e){if(i===0)return"0";const n=this.chart.options.locale;let s,o=i;if(e.length>1){const u=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),o=b6(i,e)}const r=qP(Math.abs(o)),a=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),i0(i,n,l)}};function b6(i,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}var YP={formatters:p6};function _6(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:YP.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Va=Object.create(null),Ay=Object.create(null);function yd(i,t){if(!t)return i;const e=t.split(".");for(let n=0,s=e.length;n<s;++n){const o=e[n];i=i[o]||(i[o]=Object.create(null))}return i}function gw(i,t,e){return typeof t=="string"?Ud(yd(i,t),e):Ud(yd(i,""),t)}class w6{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>mw(s.backgroundColor),this.hoverBorderColor=(n,s)=>mw(s.borderColor),this.hoverColor=(n,s)=>mw(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return gw(this,t,e)}get(t){return yd(this,t)}describe(t,e){return gw(Ay,t,e)}override(t,e){return gw(Va,t,e)}route(t,e,n,s){const o=yd(this,t),r=yd(this,n),a="_"+e;Object.defineProperties(o,{[a]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[a],u=r[s];return lt(l)?Object.assign({},u,l):tt(l,u)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}}var on=new w6({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[f6,m6,_6]);function y6(i){return!i||bt(i.size)||bt(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function rE(i,t,e,n,s){let o=t[s];return o||(o=t[s]=i.measureText(s).width,e.push(s)),o>n&&(n=o),n}function ca(i,t,e){const n=i.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((t-s)*n)/n+s}function aE(i,t){!t&&!i||(t=t||i.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore())}function Ry(i,t,e,n){JP(i,t,e,n,null)}function JP(i,t,e,n,s){let o,r,a,l,u,h,m,p;const v=t.pointStyle,C=t.rotation,x=t.radius;let k=(C||0)*Y7;if(v&&typeof v=="object"&&(o=v.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){i.save(),i.translate(e,n),i.rotate(k),i.drawImage(v,-v.width/2,-v.height/2,v.width,v.height),i.restore();return}if(!(isNaN(x)||x<=0)){switch(i.beginPath(),v){default:s?i.ellipse(e,n,s/2,x,0,0,Qt):i.arc(e,n,x,0,Qt),i.closePath();break;case"triangle":h=s?s/2:x,i.moveTo(e+Math.sin(k)*h,n-Math.cos(k)*x),k+=Xk,i.lineTo(e+Math.sin(k)*h,n-Math.cos(k)*x),k+=Xk,i.lineTo(e+Math.sin(k)*h,n-Math.cos(k)*x),i.closePath();break;case"rectRounded":u=x*.516,l=x-u,r=Math.cos(k+la)*l,m=Math.cos(k+la)*(s?s/2-u:l),a=Math.sin(k+la)*l,p=Math.sin(k+la)*(s?s/2-u:l),i.arc(e-m,n-a,u,k-en,k-gn),i.arc(e+p,n-r,u,k-gn,k),i.arc(e+m,n+a,u,k,k+gn),i.arc(e-p,n+r,u,k+gn,k+en),i.closePath();break;case"rect":if(!C){l=Math.SQRT1_2*x,h=s?s/2:l,i.rect(e-h,n-l,2*h,2*l);break}k+=la;case"rectRot":m=Math.cos(k)*(s?s/2:x),r=Math.cos(k)*x,a=Math.sin(k)*x,p=Math.sin(k)*(s?s/2:x),i.moveTo(e-m,n-a),i.lineTo(e+p,n-r),i.lineTo(e+m,n+a),i.lineTo(e-p,n+r),i.closePath();break;case"crossRot":k+=la;case"cross":m=Math.cos(k)*(s?s/2:x),r=Math.cos(k)*x,a=Math.sin(k)*x,p=Math.sin(k)*(s?s/2:x),i.moveTo(e-m,n-a),i.lineTo(e+m,n+a),i.moveTo(e+p,n-r),i.lineTo(e-p,n+r);break;case"star":m=Math.cos(k)*(s?s/2:x),r=Math.cos(k)*x,a=Math.sin(k)*x,p=Math.sin(k)*(s?s/2:x),i.moveTo(e-m,n-a),i.lineTo(e+m,n+a),i.moveTo(e+p,n-r),i.lineTo(e-p,n+r),k+=la,m=Math.cos(k)*(s?s/2:x),r=Math.cos(k)*x,a=Math.sin(k)*x,p=Math.sin(k)*(s?s/2:x),i.moveTo(e-m,n-a),i.lineTo(e+m,n+a),i.moveTo(e+p,n-r),i.lineTo(e-p,n+r);break;case"line":r=s?s/2:Math.cos(k)*x,a=Math.sin(k)*x,i.moveTo(e-r,n-a),i.lineTo(e+r,n+a);break;case"dash":i.moveTo(e,n),i.lineTo(e+Math.cos(k)*(s?s/2:x),n+Math.sin(k)*x);break;case!1:i.closePath();break}i.fill(),t.borderWidth>0&&i.stroke()}}function qd(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function s0(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function o0(i){i.restore()}function v6(i,t,e,n,s){if(!t)return i.lineTo(e.x,e.y);if(s==="middle"){const o=(t.x+e.x)/2;i.lineTo(o,t.y),i.lineTo(o,e.y)}else s==="after"!=!!n?i.lineTo(t.x,e.y):i.lineTo(e.x,t.y);i.lineTo(e.x,e.y)}function C6(i,t,e,n){if(!t)return i.lineTo(e.x,e.y);i.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?e.cp2x:e.cp1x,n?e.cp2y:e.cp1y,e.x,e.y)}function T6(i,t){t.translation&&i.translate(t.translation[0],t.translation[1]),bt(t.rotation)||i.rotate(t.rotation),t.color&&(i.fillStyle=t.color),t.textAlign&&(i.textAlign=t.textAlign),t.textBaseline&&(i.textBaseline=t.textBaseline)}function x6(i,t,e,n,s){if(s.strikethrough||s.underline){const o=i.measureText(n),r=t-o.actualBoundingBoxLeft,a=t+o.actualBoundingBoxRight,l=e-o.actualBoundingBoxAscent,u=e+o.actualBoundingBoxDescent,h=s.strikethrough?(l+u)/2:u;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=s.decorationWidth||2,i.moveTo(r,h),i.lineTo(a,h),i.stroke()}}function k6(i,t){const e=i.fillStyle;i.fillStyle=t.color,i.fillRect(t.left,t.top,t.width,t.height),i.fillStyle=e}function $d(i,t,e,n,s,o={}){const r=mn(t)?t:[t],a=o.strokeWidth>0&&o.strokeColor!=="";let l,u;for(i.save(),i.font=s.string,T6(i,o),l=0;l<r.length;++l)u=r[l],o.backdrop&&k6(i,o.backdrop),a&&(o.strokeColor&&(i.strokeStyle=o.strokeColor),bt(o.strokeWidth)||(i.lineWidth=o.strokeWidth),i.strokeText(u,e,n,o.maxWidth)),i.fillText(u,e,n,o.maxWidth),x6(i,e,n,u,o),n+=Number(s.lineHeight);i.restore()}function ug(i,t){const{x:e,y:n,w:s,h:o,radius:r}=t;i.arc(e+r.topLeft,n+r.topLeft,r.topLeft,1.5*en,en,!0),i.lineTo(e,n+o-r.bottomLeft),i.arc(e+r.bottomLeft,n+o-r.bottomLeft,r.bottomLeft,en,gn,!0),i.lineTo(e+s-r.bottomRight,n+o),i.arc(e+s-r.bottomRight,n+o-r.bottomRight,r.bottomRight,gn,0,!0),i.lineTo(e+s,n+r.topRight),i.arc(e+s-r.topRight,n+r.topRight,r.topRight,0,-gn,!0),i.lineTo(e+r.topLeft,n)}const E6=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,S6=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function A6(i,t){const e=(""+i).match(E6);if(!e||e[1]==="normal")return t*1.2;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100;break}return t*i}const R6=i=>+i||0;function r0(i,t){const e={},n=lt(t),s=n?Object.keys(t):t,o=lt(i)?n?r=>tt(i[r],i[t[r]]):r=>i[r]:()=>i;for(const r of s)e[r]=R6(o(r));return e}function XP(i){return r0(i,{top:"y",right:"x",bottom:"y",left:"x"})}function mc(i){return r0(i,["topLeft","topRight","bottomLeft","bottomRight"])}function ns(i){const t=XP(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Kn(i,t){i=i||{},t=t||on.font;let e=tt(i.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let n=tt(i.style,t.style);n&&!(""+n).match(S6)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const s={family:tt(i.family,t.family),lineHeight:A6(tt(i.lineHeight,t.lineHeight),e),size:e,style:n,weight:tt(i.weight,t.weight),string:""};return s.string=y6(s),s}function Xf(i,t,e,n){let s,o,r;for(s=0,o=i.length;s<o;++s)if(r=i[s],r!==void 0&&r!==void 0)return r}function I6(i,t,e){const{min:n,max:s}=i,o=HP(t,(s-n)/2),r=(a,l)=>e&&a===0?0:a+l;return{min:r(n,-Math.abs(o)),max:r(s,o)}}function za(i,t){return Object.assign(Object.create(i),t)}function a0(i,t=[""],e,n,s=()=>i[0]){const o=e||i;typeof n>"u"&&(n=nM("_fallback",i));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:o,_fallback:n,_getTarget:s,override:a=>a0([a,...i],t,o,n)};return new Proxy(r,{deleteProperty(a,l){return delete a[l],delete a._keys,delete i[0][l],!0},get(a,l){return eM(a,l,()=>B6(l,t,i,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(a,l){return cE(a).includes(l)},ownKeys(a){return cE(a)},set(a,l,u){const h=a._storage||(a._storage=s());return a[l]=h[l]=u,delete a._keys,!0}})}function wc(i,t,e,n){const s={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:QP(i,n),setContext:o=>wc(i,o,e,n),override:o=>wc(i.override(o),t,e,n)};return new Proxy(s,{deleteProperty(o,r){return delete o[r],delete i[r],!0},get(o,r,a){return eM(o,r,()=>M6(o,r,a))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(i,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,r)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(o,r){return Reflect.has(i,r)},ownKeys(){return Reflect.ownKeys(i)},set(o,r,a){return i[r]=a,delete o[r],!0}})}function QP(i,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:n=t.indexable,_allKeys:s=t.allKeys}=i;return{allKeys:s,scriptable:e,indexable:n,isScriptable:Rr(e)?e:()=>e,isIndexable:Rr(n)?n:()=>n}}const P6=(i,t)=>i?i+Qv(t):t,l0=(i,t)=>lt(t)&&i!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function eM(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t)||t==="constructor")return i[t];const n=e();return i[t]=n,n}function M6(i,t,e){const{_proxy:n,_context:s,_subProxy:o,_descriptors:r}=i;let a=n[t];return Rr(a)&&r.isScriptable(t)&&(a=V6(t,a,i,e)),mn(a)&&a.length&&(a=N6(t,a,i,r.isIndexable)),l0(t,a)&&(a=wc(a,s,o&&o[t],r)),a}function V6(i,t,e,n){const{_proxy:s,_context:o,_subProxy:r,_stack:a}=e;if(a.has(i))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+i);a.add(i);let l=t(o,r||n);return a.delete(i),l0(i,l)&&(l=c0(s._scopes,s,i,l)),l}function N6(i,t,e,n){const{_proxy:s,_context:o,_subProxy:r,_descriptors:a}=e;if(typeof o.index<"u"&&n(i))return t[o.index%t.length];if(lt(t[0])){const l=t,u=s._scopes.filter(h=>h!==l);t=[];for(const h of l){const m=c0(u,s,i,h);t.push(wc(m,o,r&&r[i],a))}}return t}function tM(i,t,e){return Rr(i)?i(t,e):i}const D6=(i,t)=>i===!0?t:typeof i=="string"?Ma(t,i):void 0;function O6(i,t,e,n,s){for(const o of t){const r=D6(e,o);if(r){i.add(r);const a=tM(r._fallback,e,s);if(typeof a<"u"&&a!==e&&a!==n)return a}else if(r===!1&&typeof n<"u"&&e!==n)return null}return!1}function c0(i,t,e,n){const s=t._rootScopes,o=tM(t._fallback,e,n),r=[...i,...s],a=new Set;a.add(n);let l=lE(a,r,e,o||e,n);return l===null||typeof o<"u"&&o!==e&&(l=lE(a,r,o,l,n),l===null)?!1:a0(Array.from(a),[""],s,o,()=>L6(t,e,n))}function lE(i,t,e,n,s){for(;e;)e=O6(i,t,e,n,s);return e}function L6(i,t,e){const n=i._getTarget();t in n||(n[t]={});const s=n[t];return mn(s)&&lt(e)?e:s||{}}function B6(i,t,e,n){let s;for(const o of t)if(s=nM(P6(o,i),e),typeof s<"u")return l0(i,s)?c0(e,n,i,s):s}function nM(i,t){for(const e of t){if(!e)continue;const n=e[i];if(typeof n<"u")return n}}function cE(i){let t=i._keys;return t||(t=i._keys=F6(i._scopes)),t}function F6(i){const t=new Set;for(const e of i)for(const n of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(n);return Array.from(t)}const U6=Number.EPSILON||1e-14,yc=(i,t)=>t<i.length&&!i[t].skip&&i[t],iM=i=>i==="x"?"y":"x";function z6(i,t,e,n){const s=i.skip?t:i,o=t,r=e.skip?t:e,a=Sy(o,s),l=Sy(r,o);let u=a/(a+l),h=l/(a+l);u=isNaN(u)?0:u,h=isNaN(h)?0:h;const m=n*u,p=n*h;return{previous:{x:o.x-m*(r.x-s.x),y:o.y-m*(r.y-s.y)},next:{x:o.x+p*(r.x-s.x),y:o.y+p*(r.y-s.y)}}}function H6(i,t,e){const n=i.length;let s,o,r,a,l,u=yc(i,0);for(let h=0;h<n-1;++h)if(l=u,u=yc(i,h+1),!(!l||!u)){if(_d(t[h],0,U6)){e[h]=e[h+1]=0;continue}s=e[h]/t[h],o=e[h+1]/t[h],a=Math.pow(s,2)+Math.pow(o,2),!(a<=9)&&(r=3/Math.sqrt(a),e[h]=s*r*t[h],e[h+1]=o*r*t[h])}}function W6(i,t,e="x"){const n=iM(e),s=i.length;let o,r,a,l=yc(i,0);for(let u=0;u<s;++u){if(r=a,a=l,l=yc(i,u+1),!a)continue;const h=a[e],m=a[n];r&&(o=(h-r[e])/3,a[`cp1${e}`]=h-o,a[`cp1${n}`]=m-o*t[u]),l&&(o=(l[e]-h)/3,a[`cp2${e}`]=h+o,a[`cp2${n}`]=m+o*t[u])}}function q6(i,t="x"){const e=iM(t),n=i.length,s=Array(n).fill(0),o=Array(n);let r,a,l,u=yc(i,0);for(r=0;r<n;++r)if(a=l,l=u,u=yc(i,r+1),!!l){if(u){const h=u[t]-l[t];s[r]=h!==0?(u[e]-l[e])/h:0}o[r]=a?u?Hs(s[r-1])!==Hs(s[r])?0:(s[r-1]+s[r])/2:s[r-1]:s[r]}H6(i,s,o),W6(i,o,t)}function Qf(i,t,e){return Math.max(Math.min(i,e),t)}function $6(i,t){let e,n,s,o,r,a=qd(i[0],t);for(e=0,n=i.length;e<n;++e)r=o,o=a,a=e<n-1&&qd(i[e+1],t),o&&(s=i[e],r&&(s.cp1x=Qf(s.cp1x,t.left,t.right),s.cp1y=Qf(s.cp1y,t.top,t.bottom)),a&&(s.cp2x=Qf(s.cp2x,t.left,t.right),s.cp2y=Qf(s.cp2y,t.top,t.bottom)))}function G6(i,t,e,n,s){let o,r,a,l;if(t.spanGaps&&(i=i.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")q6(i,s);else{let u=n?i[i.length-1]:i[0];for(o=0,r=i.length;o<r;++o)a=i[o],l=z6(u,a,i[Math.min(o+1,r-(n?0:1))%r],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}t.capBezierPoints&&$6(i,e)}function u0(){return typeof window<"u"&&typeof document<"u"}function d0(i){let t=i.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function dg(i,t,e){let n;return typeof i=="string"?(n=parseInt(i,10),i.indexOf("%")!==-1&&(n=n/100*t.parentNode[e])):n=i,n}const _p=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function j6(i,t){return _p(i).getPropertyValue(t)}const K6=["top","right","bottom","left"];function ka(i,t,e){const n={};e=e?"-"+e:"";for(let s=0;s<4;s++){const o=K6[s];n[o]=parseFloat(i[t+"-"+o+e])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const Z6=(i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot);function Y6(i,t){const e=i.touches,n=e&&e.length?e[0]:i,{offsetX:s,offsetY:o}=n;let r=!1,a,l;if(Z6(s,o,i.target))a=s,l=o;else{const u=t.getBoundingClientRect();a=n.clientX-u.left,l=n.clientY-u.top,r=!0}return{x:a,y:l,box:r}}function ba(i,t){if("native"in i)return i;const{canvas:e,currentDevicePixelRatio:n}=t,s=_p(e),o=s.boxSizing==="border-box",r=ka(s,"padding"),a=ka(s,"border","width"),{x:l,y:u,box:h}=Y6(i,e),m=r.left+(h&&a.left),p=r.top+(h&&a.top);let{width:v,height:C}=t;return o&&(v-=r.width+a.width,C-=r.height+a.height),{x:Math.round((l-m)/v*e.width/n),y:Math.round((u-p)/C*e.height/n)}}function J6(i,t,e){let n,s;if(t===void 0||e===void 0){const o=i&&d0(i);if(!o)t=i.clientWidth,e=i.clientHeight;else{const r=o.getBoundingClientRect(),a=_p(o),l=ka(a,"border","width"),u=ka(a,"padding");t=r.width-u.width-l.width,e=r.height-u.height-l.height,n=dg(a.maxWidth,o,"clientWidth"),s=dg(a.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:n||cg,maxHeight:s||cg}}const em=i=>Math.round(i*10)/10;function X6(i,t,e,n){const s=_p(i),o=ka(s,"margin"),r=dg(s.maxWidth,i,"clientWidth")||cg,a=dg(s.maxHeight,i,"clientHeight")||cg,l=J6(i,t,e);let{width:u,height:h}=l;if(s.boxSizing==="content-box"){const p=ka(s,"border","width"),v=ka(s,"padding");u-=v.width+p.width,h-=v.height+p.height}return u=Math.max(0,u-o.width),h=Math.max(0,n?u/n:h-o.height),u=em(Math.min(u,r,l.maxWidth)),h=em(Math.min(h,a,l.maxHeight)),u&&!h&&(h=em(u/2)),(t!==void 0||e!==void 0)&&n&&l.height&&h>l.height&&(h=l.height,u=em(Math.floor(h*n))),{width:u,height:h}}function uE(i,t,e){const n=t||1,s=Math.floor(i.height*n),o=Math.floor(i.width*n);i.height=Math.floor(i.height),i.width=Math.floor(i.width);const r=i.canvas;return r.style&&(e||!r.style.height&&!r.style.width)&&(r.style.height=`${i.height}px`,r.style.width=`${i.width}px`),i.currentDevicePixelRatio!==n||r.height!==s||r.width!==o?(i.currentDevicePixelRatio=n,r.height=s,r.width=o,i.ctx.setTransform(n,0,0,n,0,0),!0):!1}const Q6=function(){let i=!1;try{const t={get passive(){return i=!0,!1}};u0()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return i}();function dE(i,t){const e=j6(i,t),n=e&&e.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function _a(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:i.y+e*(t.y-i.y)}}function eU(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:n==="middle"?e<.5?i.y:t.y:n==="after"?e<1?i.y:t.y:e>0?t.y:i.y}}function tU(i,t,e,n){const s={x:i.cp2x,y:i.cp2y},o={x:t.cp1x,y:t.cp1y},r=_a(i,s,e),a=_a(s,o,e),l=_a(o,t,e),u=_a(r,a,e),h=_a(a,l,e);return _a(u,h,e)}const nU=function(i,t){return{x(e){return i+i+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,n){return e-n},leftForLtr(e,n){return e-n}}},iU=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,t){return i+t},leftForLtr(i,t){return i}}};function gc(i,t,e){return i?nU(t,e):iU()}function sM(i,t){let e,n;(t==="ltr"||t==="rtl")&&(e=i.canvas.style,n=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),i.prevTextDirection=n)}function oM(i,t){t!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function rM(i){return i==="angle"?{between:Wd,compare:n6,normalize:pr}:{between:vr,compare:(t,e)=>t-e,normalize:t=>t}}function hE({start:i,end:t,count:e,loop:n,style:s}){return{start:i%e,end:t%e,loop:n&&(t-i+1)%e===0,style:s}}function sU(i,t,e){const{property:n,start:s,end:o}=e,{between:r,normalize:a}=rM(n),l=t.length;let{start:u,end:h,loop:m}=i,p,v;if(m){for(u+=l,h+=l,p=0,v=l;p<v&&r(a(t[u%l][n]),s,o);++p)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:m,style:i.style}}function oU(i,t,e){if(!e)return[i];const{property:n,start:s,end:o}=e,r=t.length,{compare:a,between:l,normalize:u}=rM(n),{start:h,end:m,loop:p,style:v}=sU(i,t,e),C=[];let x=!1,k=null,S,I,P;const O=()=>l(s,P,S)&&a(s,P)!==0,D=()=>a(o,S)===0||l(o,P,S),Y=()=>x||O(),F=()=>!x||D();for(let j=h,U=h;j<=m;++j)I=t[j%r],!I.skip&&(S=u(I[n]),S!==P&&(x=l(S,s,o),k===null&&Y()&&(k=a(S,s)===0?j:U),k!==null&&F()&&(C.push(hE({start:k,end:j,loop:p,count:r,style:v})),k=null),U=j,P=S));return k!==null&&C.push(hE({start:k,end:m,loop:p,count:r,style:v})),C}function rU(i,t){const e=[],n=i.segments;for(let s=0;s<n.length;s++){const o=oU(n[s],i.points,t);o.length&&e.push(...o)}return e}function aU(i,t,e,n){let s=0,o=t-1;if(e&&!n)for(;s<t&&!i[s].skip;)s++;for(;s<t&&i[s].skip;)s++;for(s%=t,e&&(o+=s);o>s&&i[o%t].skip;)o--;return o%=t,{start:s,end:o}}function lU(i,t,e,n){const s=i.length,o=[];let r=t,a=i[t],l;for(l=t+1;l<=e;++l){const u=i[l%s];u.skip||u.stop?a.skip||(n=!1,o.push({start:t%s,end:(l-1)%s,loop:n}),t=r=u.stop?l:null):(r=l,a.skip&&(t=l)),a=u}return r!==null&&o.push({start:t%s,end:r%s,loop:n}),o}function cU(i,t){const e=i.points,n=i.options.spanGaps,s=e.length;if(!s)return[];const o=!!i._loop,{start:r,end:a}=aU(e,s,o,n);if(n===!0)return fE(i,[{start:r,end:a,loop:o}],e,t);const l=a<r?a+s:a,u=!!i._fullLoop&&r===0&&a===s-1;return fE(i,lU(e,r,l,u),e,t)}function fE(i,t,e,n){return!n||!n.setContext||!e?t:uU(i,t,e,n)}function uU(i,t,e,n){const s=i._chart.getContext(),o=mE(i.options),{_datasetIndex:r,options:{spanGaps:a}}=i,l=e.length,u=[];let h=o,m=t[0].start,p=m;function v(C,x,k,S){const I=a?-1:1;if(C!==x){for(C+=l;e[C%l].skip;)C-=I;for(;e[x%l].skip;)x+=I;C%l!==x%l&&(u.push({start:C%l,end:x%l,loop:k,style:S}),h=S,m=x%l)}}for(const C of t){m=a?m:C.start;let x=e[m%l],k;for(p=m+1;p<=C.end;p++){const S=e[p%l];k=mE(n.setContext(za(s,{type:"segment",p0:x,p1:S,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:r}))),dU(k,h)&&v(m,p-1,C.loop,h),x=S,h=k}m<p-1&&v(m,p-1,C.loop,h)}return u}function mE(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function dU(i,t){if(!t)return!1;const e=[],n=function(s,o){return n0(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(i,n)!==JSON.stringify(t,n)}function tm(i,t,e){return i.options.clip?i[e]:t[e]}function hU(i,t){const{xScale:e,yScale:n}=i;return e&&n?{left:tm(e,t,"left"),right:tm(e,t,"right"),top:tm(n,t,"top"),bottom:tm(n,t,"bottom")}:t}function fU(i,t){const e=t._clip;if(e.disabled)return!1;const n=hU(t,i.chartArea);return{left:e.left===!1?0:n.left-(e.left===!0?0:e.left),right:e.right===!1?i.width:n.right+(e.right===!0?0:e.right),top:e.top===!1?0:n.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?i.height:n.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class mU{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,s){const o=e.listeners[s],r=e.duration;o.forEach(a=>a({chart:t,initial:e.initial,numSteps:r,currentStep:Math.min(n-e.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=KP.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;const o=n.items;let r=o.length-1,a=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(t),a=!0):(o[r]=o[o.length-1],o.pop());a&&(s.draw(),this._notify(s,n,t,"progress")),o.length||(n.running=!1,this._notify(s,n,t,"complete"),n.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let s=n.length-1;for(;s>=0;--s)n[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var po=new mU;const gE="transparent",gU={boolean(i,t,e){return e>.5?t:i},color(i,t,e){const n=sE(i||gE),s=n.valid&&sE(t||gE);return s&&s.valid?s.mix(n,e).hexString():t},number(i,t,e){return i+(t-i)*e}};class pU{constructor(t,e,n,s){const o=e[n];s=Xf([t.to,s,o,t.from]);const r=Xf([t.from,o,s]);this._active=!0,this._fn=t.fn||gU[t.type||typeof r],this._easing=wd[t.easing]||wd.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=r,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const s=this._target[this._prop],o=n-this._start,r=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=Xf([t.to,e,s,t.from]),this._from=Xf([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,s=this._prop,o=this._from,r=this._loop,a=this._to;let l;if(this._active=o!==a&&(r||e<n),!this._active){this._target[s]=a,this._notify(!0);return}if(e<0){this._target[s]=o;return}l=e/n%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(o,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][e]()}}class aM{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!lt(t))return;const e=Object.keys(on.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const o=t[s];if(!lt(o))return;const r={};for(const a of e)r[a]=o[a];(mn(o.properties)&&o.properties||[s]).forEach(a=>{(a===s||!n.has(a))&&n.set(a,r)})})}_animateOptions(t,e){const n=e.options,s=_U(t,n);if(!s)return[];const o=this._createAnimations(s,n);return n.$shared&&bU(t.options.$animations,n).then(()=>{t.options=n},()=>{}),o}_createAnimations(t,e){const n=this._properties,s=[],o=t.$animations||(t.$animations={}),r=Object.keys(e),a=Date.now();let l;for(l=r.length-1;l>=0;--l){const u=r[l];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(t,e));continue}const h=e[u];let m=o[u];const p=n.get(u);if(m)if(p&&m.active()){m.update(p,h,a);continue}else m.cancel();if(!p||!p.duration){t[u]=h;continue}o[u]=m=new pU(p,t,u,h),s.push(m)}return s}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const n=this._createAnimations(t,e);if(n.length)return po.add(this._chart,n),!0}}function bU(i,t){const e=[],n=Object.keys(t);for(let s=0;s<n.length;s++){const o=i[n[s]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function _U(i,t){if(!t)return;let e=i.options;if(!e){i.options=t;return}return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function pE(i,t){const e=i&&i.options||{},n=e.reverse,s=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:n?o:s,end:n?s:o}}function wU(i,t,e){if(e===!1)return!1;const n=pE(i,e),s=pE(t,e);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function yU(i){let t,e,n,s;return lt(i)?(t=i.top,e=i.right,n=i.bottom,s=i.left):t=e=n=s=i,{top:t,right:e,bottom:n,left:s,disabled:i===!1}}function lM(i,t){const e=[],n=i._getSortedDatasetMetas(t);let s,o;for(s=0,o=n.length;s<o;++s)e.push(n[s].index);return e}function bE(i,t,e,n={}){const s=i.keys,o=n.mode==="single";let r,a,l,u;if(t===null)return;let h=!1;for(r=0,a=s.length;r<a;++r){if(l=+s[r],l===e){if(h=!0,n.all)continue;break}u=i.values[l],ts(u)&&(o||t===0||Hs(t)===Hs(u))&&(t+=u)}return!h&&!n.all?0:t}function vU(i,t){const{iScale:e,vScale:n}=t,s=e.axis==="x"?"x":"y",o=n.axis==="x"?"x":"y",r=Object.keys(i),a=new Array(r.length);let l,u,h;for(l=0,u=r.length;l<u;++l)h=r[l],a[l]={[s]:h,[o]:i[h]};return a}function pw(i,t){const e=i&&i.options.stacked;return e||e===void 0&&t.stack!==void 0}function CU(i,t,e){return`${i.id}.${t.id}.${e.stack||e.type}`}function TU(i){const{min:t,max:e,minDefined:n,maxDefined:s}=i.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function xU(i,t,e){const n=i[t]||(i[t]={});return n[e]||(n[e]={})}function _E(i,t,e,n){for(const s of t.getMatchingVisibleMetas(n).reverse()){const o=i[s.index];if(e&&o>0||!e&&o<0)return s.index}return null}function wE(i,t){const{chart:e,_cachedMeta:n}=i,s=e._stacks||(e._stacks={}),{iScale:o,vScale:r,index:a}=n,l=o.axis,u=r.axis,h=CU(o,r,n),m=t.length;let p;for(let v=0;v<m;++v){const C=t[v],{[l]:x,[u]:k}=C,S=C._stacks||(C._stacks={});p=S[u]=xU(s,h,x),p[a]=k,p._top=_E(p,r,!0,n.type),p._bottom=_E(p,r,!1,n.type);const I=p._visualValues||(p._visualValues={});I[a]=k}}function bw(i,t){const e=i.scales;return Object.keys(e).filter(n=>e[n].axis===t).shift()}function kU(i,t){return za(i,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function EU(i,t,e){return za(i,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Uu(i,t){const e=i.controller.index,n=i.vScale&&i.vScale.axis;if(n){t=t||i._parsed;for(const s of t){const o=s._stacks;if(!o||o[n]===void 0||o[n][e]===void 0)return;delete o[n][e],o[n]._visualValues!==void 0&&o[n]._visualValues[e]!==void 0&&delete o[n]._visualValues[e]}}}const _w=i=>i==="reset"||i==="none",yE=(i,t)=>t?i:Object.assign({},i),SU=(i,t,e)=>i&&!t.hidden&&t._stacked&&{keys:lM(e,!0),values:null};class Ea{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=pw(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Uu(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),s=(m,p,v,C)=>m==="x"?p:m==="r"?C:v,o=e.xAxisID=tt(n.xAxisID,bw(t,"x")),r=e.yAxisID=tt(n.yAxisID,bw(t,"y")),a=e.rAxisID=tt(n.rAxisID,bw(t,"r")),l=e.indexAxis,u=e.iAxisID=s(l,o,r,a),h=e.vAxisID=s(l,r,o,a);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(r),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(u),e.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&tE(this._data,this),t._stacked&&Uu(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(lt(e)){const s=this._cachedMeta;this._data=vU(e,s)}else if(n!==e){if(n){tE(n,this);const s=this._cachedMeta;Uu(s),s._parsed=[]}e&&Object.isExtensible(e)&&r6(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let s=!1;this._dataCheck();const o=e._stacked;e._stacked=pw(e.vScale,e),e.stack!==n.stack&&(s=!0,Uu(e),e.stack=n.stack),this._resyncElements(t),(s||o!==e._stacked)&&(wE(this,e._parsed),e._stacked=pw(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:s}=this,{iScale:o,_stacked:r}=n,a=o.axis;let l=t===0&&e===s.length?!0:n._sorted,u=t>0&&n._parsed[t-1],h,m,p;if(this._parsing===!1)n._parsed=s,n._sorted=!0,p=s;else{mn(s[t])?p=this.parseArrayData(n,s,t,e):lt(s[t])?p=this.parseObjectData(n,s,t,e):p=this.parsePrimitiveData(n,s,t,e);const v=()=>m[a]===null||u&&m[a]<u[a];for(h=0;h<e;++h)n._parsed[h+t]=m=p[h],l&&(v()&&(l=!1),u=m);n._sorted=l}r&&wE(this,p)}parsePrimitiveData(t,e,n,s){const{iScale:o,vScale:r}=t,a=o.axis,l=r.axis,u=o.getLabels(),h=o===r,m=new Array(s);let p,v,C;for(p=0,v=s;p<v;++p)C=p+n,m[p]={[a]:h||o.parse(u[C],C),[l]:r.parse(e[C],C)};return m}parseArrayData(t,e,n,s){const{xScale:o,yScale:r}=t,a=new Array(s);let l,u,h,m;for(l=0,u=s;l<u;++l)h=l+n,m=e[h],a[l]={x:o.parse(m[0],h),y:r.parse(m[1],h)};return a}parseObjectData(t,e,n,s){const{xScale:o,yScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(s);let h,m,p,v;for(h=0,m=s;h<m;++h)p=h+n,v=e[p],u[h]={x:o.parse(Ma(v,a),p),y:r.parse(Ma(v,l),p)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const s=this.chart,o=this._cachedMeta,r=e[t.axis],a={keys:lM(s,!0),values:e._stacks[t.axis]._visualValues};return bE(a,r,o.index,{mode:n})}updateRangeFromParsed(t,e,n,s){const o=n[e.axis];let r=o===null?NaN:o;const a=s&&n._stacks[e.axis];s&&a&&(s.values=a,r=bE(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,e){const n=this._cachedMeta,s=n._parsed,o=n._sorted&&t===n.iScale,r=s.length,a=this._getOtherScale(t),l=SU(e,n,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:m}=TU(a);let p,v;function C(){v=s[p];const x=v[a.axis];return!ts(v[t.axis])||h>x||m<x}for(p=0;p<r&&!(!C()&&(this.updateRangeFromParsed(u,t,v,l),o));++p);if(o){for(p=r-1;p>=0;--p)if(!C()){this.updateRangeFromParsed(u,t,v,l);break}}return u}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let s,o,r;for(s=0,o=e.length;s<o;++s)r=e[s][t.axis],ts(r)&&n.push(r);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,s=e.vScale,o=this.getParsed(t);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=yU(tt(this.options.clip,wU(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,s=n.data||[],o=e.chartArea,r=[],a=this._drawStart||0,l=this._drawCount||s.length-a,u=this.options.drawActiveElementsOnTop;let h;for(n.dataset&&n.dataset.draw(t,o,a,l),h=a;h<a+l;++h){const m=s[h];m.hidden||(m.active&&u?r.push(m):m.draw(t,o))}for(h=0;h<r.length;++h)r[h].draw(t,o)}getStyle(t,e){const n=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const s=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const r=this._cachedMeta.data[t];o=r.$context||(r.$context=EU(this.getContext(),t,r)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=kU(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=n,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const s=e==="active",o=this._cachedDataOpts,r=t+"-"+e,a=o[r],l=this.enableOptionSharing&&zd(n);if(a)return yE(a,l);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,t),m=s?[`${t}Hover`,"hover",t,""]:[t,""],p=u.getOptionScopes(this.getDataset(),h),v=Object.keys(on.elements[t]),C=()=>this.getContext(n,s,e),x=u.resolveNamedOptions(p,v,C,m);return x.$shared&&(x.$shared=l,o[r]=Object.freeze(yE(x,l))),x}_resolveAnimations(t,e,n){const s=this.chart,o=this._cachedDataOpts,r=`animation-${e}`,a=o[r];if(a)return a;let l;if(s.options.animation!==!1){const h=this.chart.config,m=h.datasetAnimationScopeKeys(this._type,e),p=h.getOptionScopes(this.getDataset(),m);l=h.createResolver(p,this.getContext(t,n,e))}const u=new aM(s,l&&l.animations);return l&&l._cacheable&&(o[r]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||_w(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),s=this._sharedOptions,o=this.getSharedOptions(n),r=this.includeOptions(e,o)||o!==s;return this.updateSharedOptions(o,e,n),{sharedOptions:o,includeOptions:r}}updateElement(t,e,n,s){_w(s)?Object.assign(t,n):this._resolveAnimations(e,s).update(t,n)}updateSharedOptions(t,e,n){t&&!_w(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,s){t.active=s;const o=this.getStyle(e,s);this._resolveAnimations(e,n,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const s=n.length,o=e.length,r=Math.min(o,s);r&&this.parse(0,r),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,e,n=!0){const s=this._cachedMeta,o=s.data,r=t+e;let a;const l=u=>{for(u.length+=e,a=u.length-1;a>=r;a--)u[a]=u[a-e]};for(l(o),a=t;a<r;++a)o[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,e),n&&this.updateElements(o,t,e,"reset")}updateElements(t,e,n,s){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const s=n._parsed.splice(t,e);n._stacked&&Uu(n,s)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,s]=t;this[e](n,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}_(Ea,"defaults",{}),_(Ea,"datasetElementType",null),_(Ea,"dataElementType",null);function AU(i,t){if(!i._cache.$bar){const e=i.getMatchingVisibleMetas(t);let n=[];for(let s=0,o=e.length;s<o;s++)n=n.concat(e[s].controller.getAllParsedValues(i));i._cache.$bar=jP(n.sort((s,o)=>s-o))}return i._cache.$bar}function RU(i){const t=i.iScale,e=AU(t,i.type);let n=t._length,s,o,r,a;const l=()=>{r===32767||r===-32768||(zd(a)&&(n=Math.min(n,Math.abs(r-a)||n)),a=r)};for(s=0,o=e.length;s<o;++s)r=t.getPixelForValue(e[s]),l();for(a=void 0,s=0,o=t.ticks.length;s<o;++s)r=t.getPixelForTick(s),l();return n}function IU(i,t,e,n){const s=e.barThickness;let o,r;return bt(s)?(o=t.min*e.categoryPercentage,r=e.barPercentage):(o=s*n,r=1),{chunk:o/n,ratio:r,start:t.pixels[i]-o/2}}function PU(i,t,e,n){const s=t.pixels,o=s[i];let r=i>0?s[i-1]:null,a=i<s.length-1?s[i+1]:null;const l=e.categoryPercentage;r===null&&(r=o-(a===null?t.end-t.start:a-o)),a===null&&(a=o+o-r);const u=o-(o-Math.min(r,a))/2*l;return{chunk:Math.abs(a-r)/2*l/n,ratio:e.barPercentage,start:u}}function MU(i,t,e,n){const s=e.parse(i[0],n),o=e.parse(i[1],n),r=Math.min(s,o),a=Math.max(s,o);let l=r,u=a;Math.abs(r)>Math.abs(a)&&(l=a,u=r),t[e.axis]=u,t._custom={barStart:l,barEnd:u,start:s,end:o,min:r,max:a}}function cM(i,t,e,n){return mn(i)?MU(i,t,e,n):t[e.axis]=e.parse(i,n),t}function vE(i,t,e,n){const s=i.iScale,o=i.vScale,r=s.getLabels(),a=s===o,l=[];let u,h,m,p;for(u=e,h=e+n;u<h;++u)p=t[u],m={},m[s.axis]=a||s.parse(r[u],u),l.push(cM(p,m,o,u));return l}function ww(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function VU(i,t,e){return i!==0?Hs(i):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function NU(i){let t,e,n,s,o;return i.horizontal?(t=i.base>i.x,e="left",n="right"):(t=i.base<i.y,e="bottom",n="top"),t?(s="end",o="start"):(s="start",o="end"),{start:e,end:n,reverse:t,top:s,bottom:o}}function DU(i,t,e,n){let s=t.borderSkipped;const o={};if(!s){i.borderSkipped=o;return}if(s===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:a,reverse:l,top:u,bottom:h}=NU(i);s==="middle"&&e&&(i.enableBorderRadius=!0,(e._top||0)===n?s=u:(e._bottom||0)===n?s=h:(o[CE(h,r,a,l)]=!0,s=u)),o[CE(s,r,a,l)]=!0,i.borderSkipped=o}function CE(i,t,e,n){return n?(i=OU(i,t,e),i=TE(i,e,t)):i=TE(i,t,e),i}function OU(i,t,e){return i===t?e:i===e?t:i}function TE(i,t,e){return i==="start"?t:i==="end"?e:i}function LU(i,{inflateAmount:t},e){i.inflateAmount=t==="auto"?e===1?.33:0:t}class Om extends Ea{parsePrimitiveData(t,e,n,s){return vE(t,e,n,s)}parseArrayData(t,e,n,s){return vE(t,e,n,s)}parseObjectData(t,e,n,s){const{iScale:o,vScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=o.axis==="x"?a:l,h=r.axis==="x"?a:l,m=[];let p,v,C,x;for(p=n,v=n+s;p<v;++p)x=e[p],C={},C[o.axis]=o.parse(Ma(x,u),p),m.push(cM(Ma(x,h),C,r,p));return m}updateRangeFromParsed(t,e,n,s){super.updateRangeFromParsed(t,e,n,s);const o=n._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:s}=e,o=this.getParsed(t),r=o._custom,a=ww(r)?"["+r.start+", "+r.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,s){const o=s==="reset",{index:r,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),u=a.isHorizontal(),h=this._getRuler(),{sharedOptions:m,includeOptions:p}=this._getSharedOptions(e,s);for(let v=e;v<e+n;v++){const C=this.getParsed(v),x=o||bt(C[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(v),k=this._calculateBarIndexPixels(v,h),S=(C._stacks||{})[a.axis],I={horizontal:u,base:x.base,enableBorderRadius:!S||ww(C._custom)||r===S._top||r===S._bottom,x:u?x.head:k.center,y:u?k.center:x.head,height:u?k.size:Math.abs(x.size),width:u?Math.abs(x.size):k.size};p&&(I.options=m||this.resolveDataElementOptions(v,t[v].active?"active":s));const P=I.options||t[v].options;DU(I,P,S,r),LU(I,P,h.ratio),this.updateElement(t[v],v,I,s)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,s=n.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),o=n.options.stacked,r=[],a=this._cachedMeta.controller.getParsed(e),l=a&&a[n.axis],u=h=>{const m=h._parsed.find(v=>v[n.axis]===l),p=m&&m[h.vScale.axis];if(bt(p)||isNaN(p))return!0};for(const h of s)if(!(e!==void 0&&u(h))&&((o===!1||r.indexOf(h.stack)===-1||o===void 0&&h.stack===void 0)&&r.push(h.stack),h.index===t))break;return r.length||r.push(void 0),r}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,n){const s=this._getStacks(t,n),o=e!==void 0?s.indexOf(e):-1;return o===-1?s.length-1:o}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,s=[];let o,r;for(o=0,r=e.data.length;o<r;++o)s.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));const a=t.barThickness;return{min:a||RU(e),pixels:s,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:s},options:{base:o,minBarLength:r}}=this,a=o||0,l=this.getParsed(t),u=l._custom,h=ww(u);let m=l[e.axis],p=0,v=n?this.applyStack(e,l,n):m,C,x;v!==m&&(p=v-m,v=m),h&&(m=u.barStart,v=u.barEnd-u.barStart,m!==0&&Hs(m)!==Hs(u.barEnd)&&(p=0),p+=m);const k=!bt(o)&&!h?o:p;let S=e.getPixelForValue(k);if(this.chart.getDataVisibility(t)?C=e.getPixelForValue(p+v):C=S,x=C-S,Math.abs(x)<r){x=VU(x,e,a)*r,m===a&&(S-=x/2);const I=e.getPixelForDecimal(0),P=e.getPixelForDecimal(1),O=Math.min(I,P),D=Math.max(I,P);S=Math.max(Math.min(S,D),O),C=S+x,n&&!h&&(l._stacks[e.axis]._visualValues[s]=e.getValueForPixel(C)-e.getValueForPixel(S))}if(S===e.getPixelForValue(a)){const I=Hs(x)*e.getLineWidthForValue(a)/2;S+=I,x-=I}return{size:x,base:S,head:C,center:C+x/2}}_calculateBarIndexPixels(t,e){const n=e.scale,s=this.options,o=s.skipNull,r=tt(s.maxBarThickness,1/0);let a,l;if(e.grouped){const u=o?this._getStackCount(t):e.stackCount,h=s.barThickness==="flex"?PU(t,e,s,u):IU(t,e,s,u),m=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);a=h.start+h.chunk*m+h.chunk/2,l=Math.min(r,h.chunk*h.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),l=Math.min(r,e.min*e.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,s=n.length;let o=0;for(;o<s;++o)this.getParsed(o)[e.axis]!==null&&!n[o].hidden&&n[o].draw(this._ctx)}}_(Om,"id","bar"),_(Om,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),_(Om,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function BU(i,t,e){let n=1,s=1,o=0,r=0;if(t<Qt){const a=i,l=a+t,u=Math.cos(a),h=Math.sin(a),m=Math.cos(l),p=Math.sin(l),v=(P,O,D)=>Wd(P,a,l,!0)?1:Math.max(O,O*e,D,D*e),C=(P,O,D)=>Wd(P,a,l,!0)?-1:Math.min(O,O*e,D,D*e),x=v(0,u,m),k=v(gn,h,p),S=C(en,u,m),I=C(en+gn,h,p);n=(x-S)/2,s=(k-I)/2,o=-(x+S)/2,r=-(k+I)/2}return{ratioX:n,ratioY:s,offsetX:o,offsetY:r}}class sd extends Ea{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=n;else{let o=l=>+n[l];if(lt(n[t])){const{key:l="value"}=this._parsing;o=u=>+Ma(n[u],l)}let r,a;for(r=t,a=t+e;r<a;++r)s._parsed[r]=o(r)}}_getRotation(){return ko(this.options.rotation-90)}_getCircumference(){return ko(this.options.circumference)}_getRotationExtents(){let t=Qt,e=-Qt;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const s=this.chart.getDatasetMeta(n).controller,o=s._getRotation(),r=s._getCircumference();t=Math.min(t,o),e=Math.max(e,o+r)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,s=this._cachedMeta,o=s.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-r)/2,0),l=Math.min(W7(this.options.cutout,a),1),u=this._getRingWeight(this.index),{circumference:h,rotation:m}=this._getRotationExtents(),{ratioX:p,ratioY:v,offsetX:C,offsetY:x}=BU(m,h,l),k=(n.width-r)/p,S=(n.height-r)/v,I=Math.max(Math.min(k,S)/2,0),P=HP(this.options.radius,I),O=Math.max(P*l,0),D=(P-O)/this._getVisibleDatasetWeightTotal();this.offsetX=C*P,this.offsetY=x*P,s.total=this.calculateTotal(),this.outerRadius=P-D*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-D*u,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){const n=this.options,s=this._cachedMeta,o=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*o/Qt)}updateElements(t,e,n,s){const o=s==="reset",r=this.chart,a=r.chartArea,u=r.options.animation,h=(a.left+a.right)/2,m=(a.top+a.bottom)/2,p=o&&u.animateScale,v=p?0:this.innerRadius,C=p?0:this.outerRadius,{sharedOptions:x,includeOptions:k}=this._getSharedOptions(e,s);let S=this._getRotation(),I;for(I=0;I<e;++I)S+=this._circumference(I,o);for(I=e;I<e+n;++I){const P=this._circumference(I,o),O=t[I],D={x:h+this.offsetX,y:m+this.offsetY,startAngle:S,endAngle:S+P,circumference:P,outerRadius:C,innerRadius:v};k&&(D.options=x||this.resolveDataElementOptions(I,O.active?"active":s)),S+=P,this.updateElement(O,I,D,s)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n=0,s;for(s=0;s<e.length;s++){const o=t._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!e[s].hidden&&(n+=Math.abs(o))}return n}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?Qt*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,s=n.data.labels||[],o=i0(e._parsed[t],n.options.locale);return{label:s[t]||"",value:o}}getMaxBorderWidth(t){let e=0;const n=this.chart;let s,o,r,a,l;if(!t){for(s=0,o=n.data.datasets.length;s<o;++s)if(n.isDatasetVisible(s)){r=n.getDatasetMeta(s),t=r.data,a=r.controller;break}}if(!t)return 0;for(s=0,o=t.length;s<o;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,s=t.length;n<s;++n){const o=this.resolveDataElementOptions(n);e=Math.max(e,o.offset||0,o.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(tt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}_(sd,"id","doughnut"),_(sd,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),_(sd,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),_(sd,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:s}}=t.legend.options;return e.labels.map((o,r)=>{const l=t.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}});class Lm extends Ea{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:s=[],_dataset:o}=e,r=this.chart._animationsDisabled;let{start:a,count:l}=c6(e,s,r);this._drawStart=a,this._drawCount=l,u6(e)&&(a=0,l=s.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=s;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:u},t),this.updateElements(s,a,l,t)}updateElements(t,e,n,s){const o=s==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:m}=this._getSharedOptions(e,s),p=r.axis,v=a.axis,{spanGaps:C,segment:x}=this.options,k=Hd(C)?C:Number.POSITIVE_INFINITY,S=this.chart._animationsDisabled||o||s==="none",I=e+n,P=t.length;let O=e>0&&this.getParsed(e-1);for(let D=0;D<P;++D){const Y=t[D],F=S?Y:{};if(D<e||D>=I){F.skip=!0;continue}const j=this.getParsed(D),U=bt(j[v]),X=F[p]=r.getPixelForValue(j[p],D),ae=F[v]=o||U?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,j,l):j[v],D);F.skip=isNaN(X)||isNaN(ae)||U,F.stop=D>0&&Math.abs(j[p]-O[p])>k,x&&(F.parsed=j,F.raw=u.data[D]),m&&(F.options=h||this.resolveDataElementOptions(D,Y.active?"active":s)),S||this.updateElement(Y,D,F,s),O=j}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,s=t.data||[];if(!s.length)return n;const o=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(n,o,r)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}_(Lm,"id","line"),_(Lm,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),_(Lm,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Iy extends sd{}_(Iy,"id","pie"),_(Iy,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function ua(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class h0{constructor(t){_(this,"options");this.options=t||{}}static override(t){Object.assign(h0.prototype,t)}init(){}formats(){return ua()}parse(){return ua()}format(){return ua()}add(){return ua()}diff(){return ua()}startOf(){return ua()}endOf(){return ua()}}var FU={_date:h0};function UU(i,t,e,n){const{controller:s,data:o,_sorted:r}=i,a=s._cachedMeta.iScale,l=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&r&&o.length){const u=a._reversePixels?s6:Ca;if(n){if(s._sharedOptions){const h=o[0],m=typeof h.getRange=="function"&&h.getRange(t);if(m){const p=u(o,t,e-m),v=u(o,t,e+m);return{lo:p.lo,hi:v.hi}}}}else{const h=u(o,t,e);if(l){const{vScale:m}=s._cachedMeta,{_parsed:p}=i,v=p.slice(0,h.lo+1).reverse().findIndex(x=>!bt(x[m.axis]));h.lo-=Math.max(0,v);const C=p.slice(h.hi).findIndex(x=>!bt(x[m.axis]));h.hi+=Math.max(0,C)}return h}}return{lo:0,hi:o.length-1}}function wp(i,t,e,n,s){const o=i.getSortedVisibleDatasetMetas(),r=e[t];for(let a=0,l=o.length;a<l;++a){const{index:u,data:h}=o[a],{lo:m,hi:p}=UU(o[a],t,r,s);for(let v=m;v<=p;++v){const C=h[v];C.skip||n(C,u,v)}}}function zU(i){const t=i.indexOf("x")!==-1,e=i.indexOf("y")!==-1;return function(n,s){const o=t?Math.abs(n.x-s.x):0,r=e?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function yw(i,t,e,n,s){const o=[];return!s&&!i.isPointInArea(t)||wp(i,e,t,function(a,l,u){!s&&!qd(a,i.chartArea,0)||a.inRange(t.x,t.y,n)&&o.push({element:a,datasetIndex:l,index:u})},!0),o}function HU(i,t,e,n){let s=[];function o(r,a,l){const{startAngle:u,endAngle:h}=r.getProps(["startAngle","endAngle"],n),{angle:m}=$P(r,{x:t.x,y:t.y});Wd(m,u,h)&&s.push({element:r,datasetIndex:a,index:l})}return wp(i,e,t,o),s}function WU(i,t,e,n,s,o){let r=[];const a=zU(e);let l=Number.POSITIVE_INFINITY;function u(h,m,p){const v=h.inRange(t.x,t.y,s);if(n&&!v)return;const C=h.getCenterPoint(s);if(!(!!o||i.isPointInArea(C))&&!v)return;const k=a(t,C);k<l?(r=[{element:h,datasetIndex:m,index:p}],l=k):k===l&&r.push({element:h,datasetIndex:m,index:p})}return wp(i,e,t,u),r}function vw(i,t,e,n,s,o){return!o&&!i.isPointInArea(t)?[]:e==="r"&&!n?HU(i,t,e,s):WU(i,t,e,n,s,o)}function xE(i,t,e,n,s){const o=[],r=e==="x"?"inXRange":"inYRange";let a=!1;return wp(i,e,t,(l,u,h)=>{l[r]&&l[r](t[e],s)&&(o.push({element:l,datasetIndex:u,index:h}),a=a||l.inRange(t.x,t.y,s))}),n&&!a?[]:o}var qU={modes:{index(i,t,e,n){const s=ba(t,i),o=e.axis||"x",r=e.includeInvisible||!1,a=e.intersect?yw(i,s,o,n,r):vw(i,s,o,!1,n,r),l=[];return a.length?(i.getSortedVisibleDatasetMetas().forEach(u=>{const h=a[0].index,m=u.data[h];m&&!m.skip&&l.push({element:m,datasetIndex:u.index,index:h})}),l):[]},dataset(i,t,e,n){const s=ba(t,i),o=e.axis||"xy",r=e.includeInvisible||!1;let a=e.intersect?yw(i,s,o,n,r):vw(i,s,o,!1,n,r);if(a.length>0){const l=a[0].datasetIndex,u=i.getDatasetMeta(l).data;a=[];for(let h=0;h<u.length;++h)a.push({element:u[h],datasetIndex:l,index:h})}return a},point(i,t,e,n){const s=ba(t,i),o=e.axis||"xy",r=e.includeInvisible||!1;return yw(i,s,o,n,r)},nearest(i,t,e,n){const s=ba(t,i),o=e.axis||"xy",r=e.includeInvisible||!1;return vw(i,s,o,e.intersect,n,r)},x(i,t,e,n){const s=ba(t,i);return xE(i,s,"x",e.intersect,n)},y(i,t,e,n){const s=ba(t,i);return xE(i,s,"y",e.intersect,n)}}};const uM=["left","top","right","bottom"];function zu(i,t){return i.filter(e=>e.pos===t)}function kE(i,t){return i.filter(e=>uM.indexOf(e.pos)===-1&&e.box.axis===t)}function Hu(i,t){return i.sort((e,n)=>{const s=t?n:e,o=t?e:n;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function $U(i){const t=[];let e,n,s,o,r,a;for(e=0,n=(i||[]).length;e<n;++e)s=i[e],{position:o,options:{stack:r,stackWeight:a=1}}=s,t.push({index:e,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:r&&o+r,stackWeight:a});return t}function GU(i){const t={};for(const e of i){const{stack:n,pos:s,stackWeight:o}=e;if(!n||!uM.includes(s))continue;const r=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return t}function jU(i,t){const e=GU(i),{vBoxMaxWidth:n,hBoxMaxHeight:s}=t;let o,r,a;for(o=0,r=i.length;o<r;++o){a=i[o];const{fullSize:l}=a.box,u=e[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*n:l&&t.availableWidth,a.height=s):(a.width=n,a.height=h?h*s:l&&t.availableHeight)}return e}function KU(i){const t=$U(i),e=Hu(t.filter(u=>u.box.fullSize),!0),n=Hu(zu(t,"left"),!0),s=Hu(zu(t,"right")),o=Hu(zu(t,"top"),!0),r=Hu(zu(t,"bottom")),a=kE(t,"x"),l=kE(t,"y");return{fullSize:e,leftAndTop:n.concat(o),rightAndBottom:s.concat(l).concat(r).concat(a),chartArea:zu(t,"chartArea"),vertical:n.concat(s).concat(l),horizontal:o.concat(r).concat(a)}}function EE(i,t,e,n){return Math.max(i[e],t[e])+Math.max(i[n],t[n])}function dM(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function ZU(i,t,e,n){const{pos:s,box:o}=e,r=i.maxPadding;if(!lt(s)){e.size&&(i[s]-=e.size);const m=n[e.stack]||{size:0,count:1};m.size=Math.max(m.size,e.horizontal?o.height:o.width),e.size=m.size/m.count,i[s]+=e.size}o.getPadding&&dM(r,o.getPadding());const a=Math.max(0,t.outerWidth-EE(r,i,"left","right")),l=Math.max(0,t.outerHeight-EE(r,i,"top","bottom")),u=a!==i.w,h=l!==i.h;return i.w=a,i.h=l,e.horizontal?{same:u,other:h}:{same:h,other:u}}function YU(i){const t=i.maxPadding;function e(n){const s=Math.max(t[n]-i[n],0);return i[n]+=s,s}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}function JU(i,t){const e=t.maxPadding;function n(s){const o={left:0,top:0,right:0,bottom:0};return s.forEach(r=>{o[r]=Math.max(t[r],e[r])}),o}return n(i?["left","right"]:["top","bottom"])}function od(i,t,e,n){const s=[];let o,r,a,l,u,h;for(o=0,r=i.length,u=0;o<r;++o){a=i[o],l=a.box,l.update(a.width||t.w,a.height||t.h,JU(a.horizontal,t));const{same:m,other:p}=ZU(t,e,a,n);u|=m&&s.length,h=h||p,l.fullSize||s.push(a)}return u&&od(s,t,e,n)||h}function nm(i,t,e,n,s){i.top=e,i.left=t,i.right=t+n,i.bottom=e+s,i.width=n,i.height=s}function SE(i,t,e,n){const s=e.padding;let{x:o,y:r}=t;for(const a of i){const l=a.box,u=n[a.stack]||{placed:0,weight:1},h=a.stackWeight/u.weight||1;if(a.horizontal){const m=t.w*h,p=u.size||l.height;zd(u.start)&&(r=u.start),l.fullSize?nm(l,s.left,r,e.outerWidth-s.right-s.left,p):nm(l,t.left+u.placed,r,m,p),u.start=r,u.placed+=m,r=l.bottom}else{const m=t.h*h,p=u.size||l.width;zd(u.start)&&(o=u.start),l.fullSize?nm(l,o,s.top,p,e.outerHeight-s.bottom-s.top):nm(l,o,t.top+u.placed,p,m),u.start=o,u.placed+=m,o=l.right}}t.x=o,t.y=r}var Xi={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){const e=i.boxes?i.boxes.indexOf(t):-1;e!==-1&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,n){if(!i)return;const s=ns(i.options.layout.padding),o=Math.max(t-s.width,0),r=Math.max(e-s.height,0),a=KU(i.boxes),l=a.vertical,u=a.horizontal;Ct(i.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const h=l.reduce((x,k)=>k.box.options&&k.box.options.display===!1?x:x+1,0)||1,m=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/h,hBoxMaxHeight:r/2}),p=Object.assign({},s);dM(p,ns(n));const v=Object.assign({maxPadding:p,w:o,h:r,x:s.left,y:s.top},s),C=jU(l.concat(u),m);od(a.fullSize,v,m,C),od(l,v,m,C),od(u,v,m,C)&&od(l,v,m,C),YU(v),SE(a.leftAndTop,v,m,C),v.x+=v.w,v.y+=v.h,SE(a.rightAndBottom,v,m,C),i.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},Ct(a.chartArea,x=>{const k=x.box;Object.assign(k,i.chartArea),k.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class hM{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,s){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):n)}}isAttached(t){return!0}updateConfig(t){}}class XU extends hM{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Bm="$chartjs",QU={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},AE=i=>i===null||i==="";function ez(i,t){const e=i.style,n=i.getAttribute("height"),s=i.getAttribute("width");if(i[Bm]={initial:{height:n,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",AE(s)){const o=dE(i,"width");o!==void 0&&(i.width=o)}if(AE(n))if(i.style.height==="")i.height=i.width/(t||2);else{const o=dE(i,"height");o!==void 0&&(i.height=o)}return i}const fM=Q6?{passive:!0}:!1;function tz(i,t,e){i&&i.addEventListener(t,e,fM)}function nz(i,t,e){i&&i.canvas&&i.canvas.removeEventListener(t,e,fM)}function iz(i,t){const e=QU[i.type]||i.type,{x:n,y:s}=ba(i,t);return{type:e,chart:t,native:i,x:n!==void 0?n:null,y:s!==void 0?s:null}}function hg(i,t){for(const e of i)if(e===t||e.contains(t))return!0}function sz(i,t,e){const n=i.canvas,s=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||hg(a.addedNodes,n),r=r&&!hg(a.removedNodes,n);r&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function oz(i,t,e){const n=i.canvas,s=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||hg(a.removedNodes,n),r=r&&!hg(a.addedNodes,n);r&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const Gd=new Map;let RE=0;function mM(){const i=window.devicePixelRatio;i!==RE&&(RE=i,Gd.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function rz(i,t){Gd.size||window.addEventListener("resize",mM),Gd.set(i,t)}function az(i){Gd.delete(i),Gd.size||window.removeEventListener("resize",mM)}function lz(i,t,e){const n=i.canvas,s=n&&d0(n);if(!s)return;const o=ZP((a,l)=>{const u=s.clientWidth;e(a,l),u<s.clientWidth&&e()},window),r=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,h=l.contentRect.height;u===0&&h===0||o(u,h)});return r.observe(s),rz(i,o),r}function Cw(i,t,e){e&&e.disconnect(),t==="resize"&&az(i)}function cz(i,t,e){const n=i.canvas,s=ZP(o=>{i.ctx!==null&&e(iz(o,i))},i);return tz(n,t,s),s}class uz extends hM{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(ez(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[Bm])return!1;const n=e[Bm].initial;["height","width"].forEach(o=>{const r=n[o];bt(r)?e.removeAttribute(o):e.setAttribute(o,r)});const s=n.style||{};return Object.keys(s).forEach(o=>{e.style[o]=s[o]}),e.width=e.width,delete e[Bm],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),r={attach:sz,detach:oz,resize:lz}[e]||cz;s[e]=r(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),s=n[e];if(!s)return;({attach:Cw,detach:Cw,resize:Cw}[e]||nz)(t,e,s),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,s){return X6(t,e,n,s)}isAttached(t){const e=t&&d0(t);return!!(e&&e.isConnected)}}function dz(i){return!u0()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?XU:uz}var Im;let Lo=(Im=class{constructor(){_(this,"x");_(this,"y");_(this,"active",!1);_(this,"options");_(this,"$animations")}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return Hd(this.x)&&Hd(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const s={};return t.forEach(o=>{s[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),s}},_(Im,"defaults",{}),_(Im,"defaultRoutes"),Im);function hz(i,t){const e=i.options.ticks,n=fz(i),s=Math.min(e.maxTicksLimit||n,n),o=e.major.enabled?gz(t):[],r=o.length,a=o[0],l=o[r-1],u=[];if(r>s)return pz(t,u,o,r/s),u;const h=mz(o,t,s);if(r>0){let m,p;const v=r>1?Math.round((l-a)/(r-1)):null;for(im(t,u,h,bt(v)?0:a-v,a),m=0,p=r-1;m<p;m++)im(t,u,h,o[m],o[m+1]);return im(t,u,h,l,bt(v)?t.length:l+v),u}return im(t,u,h),u}function fz(i){const t=i.options.offset,e=i._tickSize(),n=i._length/e+(t?0:1),s=i._maxLength/e;return Math.floor(Math.min(n,s))}function mz(i,t,e){const n=bz(i),s=t.length/e;if(!n)return Math.max(s,1);const o=J7(n);for(let r=0,a=o.length-1;r<a;r++){const l=o[r];if(l>s)return l}return Math.max(s,1)}function gz(i){const t=[];let e,n;for(e=0,n=i.length;e<n;e++)i[e].major&&t.push(e);return t}function pz(i,t,e,n){let s=0,o=e[0],r;for(n=Math.ceil(n),r=0;r<i.length;r++)r===o&&(t.push(i[r]),s++,o=e[s*n])}function im(i,t,e,n,s){const o=tt(n,0),r=Math.min(tt(s,i.length),i.length);let a=0,l,u,h;for(e=Math.ceil(e),s&&(l=s-n,e=l/Math.floor(l/e)),h=o;h<0;)a++,h=Math.round(o+a*e);for(u=Math.max(o,0);u<r;u++)u===h&&(t.push(i[u]),a++,h=Math.round(o+a*e))}function bz(i){const t=i.length;let e,n;if(t<2)return!1;for(n=i[0],e=1;e<t;++e)if(i[e]-i[e-1]!==n)return!1;return n}const _z=i=>i==="left"?"right":i==="right"?"left":i,IE=(i,t,e)=>t==="top"||t==="left"?i[t]+e:i[t]-e,PE=(i,t)=>Math.min(t||i,i);function ME(i,t){const e=[],n=i.length/t,s=i.length;let o=0;for(;o<s;o+=n)e.push(i[Math.floor(o)]);return e}function wz(i,t,e){const n=i.ticks.length,s=Math.min(t,n-1),o=i._startPixel,r=i._endPixel,a=1e-6;let l=i.getPixelForTick(s),u;if(!(e&&(n===1?u=Math.max(l-o,r-l):t===0?u=(i.getPixelForTick(1)-l)/2:u=(l-i.getPixelForTick(s-1))/2,l+=s<t?u:-u,l<o-a||l>r+a)))return l}function yz(i,t){Ct(i,e=>{const n=e.gc,s=n.length/2;let o;if(s>t){for(o=0;o<s;++o)delete e.data[n[o]];n.splice(0,s)}})}function Wu(i){return i.drawTicks?i.tickLength:0}function VE(i,t){if(!i.display)return 0;const e=Kn(i.font,t),n=ns(i.padding);return(mn(i.text)?i.text.length:1)*e.lineHeight+n.height}function vz(i,t){return za(i,{scale:t,type:"scale"})}function Cz(i,t,e){return za(i,{tick:e,index:t,type:"tick"})}function Tz(i,t,e){let n=t0(i);return(e&&t!=="right"||!e&&t==="right")&&(n=_z(n)),n}function xz(i,t,e,n){const{top:s,left:o,bottom:r,right:a,chart:l}=i,{chartArea:u,scales:h}=l;let m=0,p,v,C;const x=r-s,k=a-o;if(i.isHorizontal()){if(v=qn(n,o,a),lt(e)){const S=Object.keys(e)[0],I=e[S];C=h[S].getPixelForValue(I)+x-t}else e==="center"?C=(u.bottom+u.top)/2+x-t:C=IE(i,e,t);p=a-o}else{if(lt(e)){const S=Object.keys(e)[0],I=e[S];v=h[S].getPixelForValue(I)-k+t}else e==="center"?v=(u.left+u.right)/2-k+t:v=IE(i,e,t);C=qn(n,r,s),m=e==="left"?-gn:gn}return{titleX:v,titleY:C,maxWidth:p,rotation:m}}let yp=class gM extends Lo{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:s}=this;return t=Vs(t,Number.POSITIVE_INFINITY),e=Vs(e,Number.NEGATIVE_INFINITY),n=Vs(n,Number.POSITIVE_INFINITY),s=Vs(s,Number.NEGATIVE_INFINITY),{min:Vs(t,n),max:Vs(e,s),minDefined:ts(t),maxDefined:ts(e)}}getMinMax(t){let{min:e,max:n,minDefined:s,maxDefined:o}=this.getUserBounds(),r;if(s&&o)return{min:e,max:n};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)r=a[l].controller.getMinMax(this,t),s||(e=Math.min(e,r.min)),o||(n=Math.max(n,r.max));return e=o&&e>n?n:e,n=s&&e>n?e:n,{min:Vs(e,Vs(n,e)),max:Vs(n,Vs(e,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Bt(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:s,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=I6(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?ME(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=hz(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,n;this.isHorizontal()?(e=this.left,n=this.right):(e=this.top,n=this.bottom,t=!t),this._startPixel=e,this._endPixel=n,this._reversePixels=t,this._length=n-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Bt(this.options.afterUpdate,[this])}beforeSetDimensions(){Bt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Bt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Bt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Bt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,s,o;for(n=0,s=t.length;n<s;n++)o=t[n],o.label=Bt(e.callback,[o.value,n,t],this)}afterTickToLabelConversion(){Bt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Bt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=PE(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,o=e.maxRotation;let r=s,a,l,u;if(!this._isVisible()||!e.display||s>=o||n<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),m=h.widest.width,p=h.highest.height,v=jn(this.chart.width-m,0,this.maxWidth);a=t.offset?this.maxWidth/n:v/(n-1),m+6>a&&(a=v/(n-(t.offset?.5:1)),l=this.maxHeight-Wu(t.grid)-e.padding-VE(t.title,this.chart.options.font),u=Math.sqrt(m*m+p*p),r=t6(Math.min(Math.asin(jn((h.highest.height+6)/a,-1,1)),Math.asin(jn(l/u,-1,1))-Math.asin(jn(p/u,-1,1)))),r=Math.max(s,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){Bt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Bt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:s,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const l=VE(s,e.options.font);if(a?(t.width=this.maxWidth,t.height=Wu(o)+l):(t.height=this.maxHeight,t.width=Wu(o)+l),n.display&&this.ticks.length){const{first:u,last:h,widest:m,highest:p}=this._getLabelSizes(),v=n.padding*2,C=ko(this.labelRotation),x=Math.cos(C),k=Math.sin(C);if(a){const S=n.mirror?0:k*m.width+x*p.height;t.height=Math.min(this.maxHeight,t.height+S+v)}else{const S=n.mirror?0:x*m.width+k*p.height;t.width=Math.min(this.maxWidth,t.width+S+v)}this._calculatePadding(u,h,k,x)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,s){const{ticks:{align:o,padding:r},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,m=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,v=0;l?u?(p=s*t.width,v=n*e.height):(p=n*t.height,v=s*e.width):o==="start"?v=e.width:o==="end"?p=t.width:o!=="inner"&&(p=t.width/2,v=e.width/2),this.paddingLeft=Math.max((p-h+r)*this.width/(this.width-h),0),this.paddingRight=Math.max((v-m+r)*this.width/(this.width-m),0)}else{let h=e.height/2,m=t.height/2;o==="start"?(h=0,m=t.height):o==="end"&&(h=e.height,m=0),this.paddingTop=h+r,this.paddingBottom=m+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Bt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,n;for(e=0,n=t.length;e<n;e++)bt(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=ME(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:s,_longestTextCache:o}=this,r=[],a=[],l=Math.floor(e/PE(e,n));let u=0,h=0,m,p,v,C,x,k,S,I,P,O,D;for(m=0;m<e;m+=l){if(C=t[m].label,x=this._resolveTickFontOptions(m),s.font=k=x.string,S=o[k]=o[k]||{data:{},gc:[]},I=x.lineHeight,P=O=0,!bt(C)&&!mn(C))P=rE(s,S.data,S.gc,P,C),O=I;else if(mn(C))for(p=0,v=C.length;p<v;++p)D=C[p],!bt(D)&&!mn(D)&&(P=rE(s,S.data,S.gc,P,D),O+=I);r.push(P),a.push(O),u=Math.max(P,u),h=Math.max(O,h)}yz(o,e);const Y=r.indexOf(u),F=a.indexOf(h),j=U=>({width:r[U]||0,height:a[U]||0});return{first:j(0),last:j(e-1),widest:j(Y),highest:j(F),widths:r,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return i6(this._alignToPixels?ca(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=Cz(this.getContext(),t,n))}return this.$context||(this.$context=vz(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=ko(this.labelRotation),n=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),o=this._getLabelSizes(),r=t.autoSkipPadding||0,a=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*n>a*s?a/n:l/s:l*s<a*n?l/n:a/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,s=this.options,{grid:o,position:r,border:a}=s,l=o.offset,u=this.isHorizontal(),m=this.ticks.length+(l?1:0),p=Wu(o),v=[],C=a.setContext(this.getContext()),x=C.display?C.width:0,k=x/2,S=function(B){return ca(n,B,x)};let I,P,O,D,Y,F,j,U,X,ae,me,Ae;if(r==="top")I=S(this.bottom),F=this.bottom-p,U=I-k,ae=S(t.top)+k,Ae=t.bottom;else if(r==="bottom")I=S(this.top),ae=t.top,Ae=S(t.bottom)-k,F=I+k,U=this.top+p;else if(r==="left")I=S(this.right),Y=this.right-p,j=I-k,X=S(t.left)+k,me=t.right;else if(r==="right")I=S(this.left),X=t.left,me=S(t.right)-k,Y=I+k,j=this.left+p;else if(e==="x"){if(r==="center")I=S((t.top+t.bottom)/2+.5);else if(lt(r)){const B=Object.keys(r)[0],le=r[B];I=S(this.chart.scales[B].getPixelForValue(le))}ae=t.top,Ae=t.bottom,F=I+k,U=F+p}else if(e==="y"){if(r==="center")I=S((t.left+t.right)/2);else if(lt(r)){const B=Object.keys(r)[0],le=r[B];I=S(this.chart.scales[B].getPixelForValue(le))}Y=I-k,j=Y-p,X=t.left,me=t.right}const ze=tt(s.ticks.maxTicksLimit,m),we=Math.max(1,Math.ceil(m/ze));for(P=0;P<m;P+=we){const B=this.getContext(P),le=o.setContext(B),he=a.setContext(B),De=le.lineWidth,N=le.color,se=he.dash||[],be=he.dashOffset,ue=le.tickWidth,G=le.tickColor,W=le.tickBorderDash||[],Q=le.tickBorderDashOffset;O=wz(this,P,l),O!==void 0&&(D=ca(n,O,De),u?Y=j=X=me=D:F=U=ae=Ae=D,v.push({tx1:Y,ty1:F,tx2:j,ty2:U,x1:X,y1:ae,x2:me,y2:Ae,width:De,color:N,borderDash:se,borderDashOffset:be,tickWidth:ue,tickColor:G,tickBorderDash:W,tickBorderDashOffset:Q}))}return this._ticksLength=m,this._borderValue=I,v}_computeLabelItems(t){const e=this.axis,n=this.options,{position:s,ticks:o}=n,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:h,mirror:m}=o,p=Wu(n.grid),v=p+h,C=m?-h:v,x=-ko(this.labelRotation),k=[];let S,I,P,O,D,Y,F,j,U,X,ae,me,Ae="middle";if(s==="top")Y=this.bottom-C,F=this._getXAxisLabelAlignment();else if(s==="bottom")Y=this.top+C,F=this._getXAxisLabelAlignment();else if(s==="left"){const we=this._getYAxisLabelAlignment(p);F=we.textAlign,D=we.x}else if(s==="right"){const we=this._getYAxisLabelAlignment(p);F=we.textAlign,D=we.x}else if(e==="x"){if(s==="center")Y=(t.top+t.bottom)/2+v;else if(lt(s)){const we=Object.keys(s)[0],B=s[we];Y=this.chart.scales[we].getPixelForValue(B)+v}F=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")D=(t.left+t.right)/2-v;else if(lt(s)){const we=Object.keys(s)[0],B=s[we];D=this.chart.scales[we].getPixelForValue(B)}F=this._getYAxisLabelAlignment(p).textAlign}e==="y"&&(l==="start"?Ae="top":l==="end"&&(Ae="bottom"));const ze=this._getLabelSizes();for(S=0,I=a.length;S<I;++S){P=a[S],O=P.label;const we=o.setContext(this.getContext(S));j=this.getPixelForTick(S)+o.labelOffset,U=this._resolveTickFontOptions(S),X=U.lineHeight,ae=mn(O)?O.length:1;const B=ae/2,le=we.color,he=we.textStrokeColor,De=we.textStrokeWidth;let N=F;r?(D=j,F==="inner"&&(S===I-1?N=this.options.reverse?"left":"right":S===0?N=this.options.reverse?"right":"left":N="center"),s==="top"?u==="near"||x!==0?me=-ae*X+X/2:u==="center"?me=-ze.highest.height/2-B*X+X:me=-ze.highest.height+X/2:u==="near"||x!==0?me=X/2:u==="center"?me=ze.highest.height/2-B*X:me=ze.highest.height-ae*X,m&&(me*=-1),x!==0&&!we.showLabelBackdrop&&(D+=X/2*Math.sin(x))):(Y=j,me=(1-ae)*X/2);let se;if(we.showLabelBackdrop){const be=ns(we.backdropPadding),ue=ze.heights[S],G=ze.widths[S];let W=me-be.top,Q=0-be.left;switch(Ae){case"middle":W-=ue/2;break;case"bottom":W-=ue;break}switch(F){case"center":Q-=G/2;break;case"right":Q-=G;break;case"inner":S===I-1?Q-=G:S>0&&(Q-=G/2);break}se={left:Q,top:W,width:G+be.width,height:ue+be.height,color:we.backdropColor}}k.push({label:O,font:U,textOffset:me,options:{rotation:x,color:le,strokeColor:he,strokeWidth:De,textAlign:N,textBaseline:Ae,translation:[D,Y],backdrop:se}})}return k}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-ko(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:s,padding:o}}=this.options,r=this._getLabelSizes(),a=t+o,l=r.widest.width;let u,h;return e==="left"?s?(h=this.right+o,n==="near"?u="left":n==="center"?(u="center",h+=l/2):(u="right",h+=l)):(h=this.right-a,n==="near"?u="right":n==="center"?(u="center",h-=l/2):(u="left",h=this.left)):e==="right"?s?(h=this.left+o,n==="near"?u="right":n==="center"?(u="center",h-=l/2):(u="left",h-=l)):(h=this.left+a,n==="near"?u="left":n==="center"?(u="center",h+=l/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:s,width:o,height:r}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,s,o,r),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(o=>o.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const e=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,r;const a=(l,u,h)=>{!h.width||!h.color||(n.save(),n.lineWidth=h.width,n.strokeStyle=h.color,n.setLineDash(h.borderDash||[]),n.lineDashOffset=h.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(u.x,u.y),n.stroke(),n.restore())};if(e.display)for(o=0,r=s.length;o<r;++o){const l=s[o];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:s}}=this,o=n.setContext(this.getContext()),r=n.display?o.width:0;if(!r)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,h,m,p;this.isHorizontal()?(u=ca(t,this.left,r)-r/2,h=ca(t,this.right,a)+a/2,m=p=l):(m=ca(t,this.top,r)-r/2,p=ca(t,this.bottom,a)+a/2,u=h=l),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(u,m),e.lineTo(h,p),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,s=this._computeLabelArea();s&&s0(n,s);const o=this.getLabelItems(t);for(const r of o){const a=r.options,l=r.font,u=r.label,h=r.textOffset;$d(n,u,0,h,l,a)}s&&o0(n)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:s}}=this;if(!n.display)return;const o=Kn(n.font),r=ns(n.padding),a=n.align;let l=o.lineHeight/2;e==="bottom"||e==="center"||lt(e)?(l+=r.bottom,mn(n.text)&&(l+=o.lineHeight*(n.text.length-1))):l+=r.top;const{titleX:u,titleY:h,maxWidth:m,rotation:p}=xz(this,l,e,a);$d(t,n.text,0,0,o,{color:n.color,maxWidth:m,rotation:p,textAlign:Tz(a,e,s),textBaseline:"middle",translation:[u,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=tt(t.grid&&t.grid.z,-1),s=tt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==gM.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[];let o,r;for(o=0,r=e.length;o<r;++o){const a=e[o];a[n]===this.id&&(!t||a.type===t)&&s.push(a)}return s}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Kn(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}};class sm{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;Sz(e)&&(n=this.register(e));const s=this.items,o=t.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in s||(s[o]=t,kz(t,r,n),this.override&&on.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,s=this.scope;n in e&&delete e[n],s&&n in on[s]&&(delete on[s][n],this.override&&delete Va[n])}}function kz(i,t,e){const n=Ud(Object.create(null),[e?on.get(e):{},on.get(t),i.defaults]);on.set(t,n),i.defaultRoutes&&Ez(t,i.defaultRoutes),i.descriptors&&on.describe(t,i.descriptors)}function Ez(i,t){Object.keys(t).forEach(e=>{const n=e.split("."),s=n.pop(),o=[i].concat(n).join("."),r=t[e].split("."),a=r.pop(),l=r.join(".");on.route(o,s,l,a)})}function Sz(i){return"id"in i&&"defaults"in i}class Az{constructor(){this.controllers=new sm(Ea,"datasets",!0),this.elements=new sm(Lo,"elements"),this.plugins=new sm(Object,"plugins"),this.scales=new sm(yp,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(s=>{const o=n||this._getRegistryForType(s);n||o.isForType(s)||o===this.plugins&&s.id?this._exec(t,o,s):Ct(s,r=>{const a=n||this._getRegistryForType(r);this._exec(t,a,r)})})}_exec(t,e,n){const s=Qv(t);Bt(n["before"+s],[],n),e[t](n),Bt(n["after"+s],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const s=e.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return s}}var Ls=new Az;class Rz{constructor(){this._init=[]}notify(t,e,n,s){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=s?this._descriptors(t).filter(s):this._descriptors(t),r=this._notify(o,t,e,n);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,e,n,s){s=s||{};for(const o of t){const r=o.plugin,a=r[n],l=[e,s,o.options];if(Bt(a,l,r)===!1&&s.cancelable)return!1}return!0}invalidate(){bt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,s=tt(n.options&&n.options.plugins,{}),o=Iz(n);return s===!1&&!e?[]:Mz(t,o,s,e)}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,s=(o,r)=>o.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(s(e,n),t,"stop"),this._notify(s(n,e),t,"start")}}function Iz(i){const t={},e=[],n=Object.keys(Ls.plugins.items);for(let o=0;o<n.length;o++)e.push(Ls.getPlugin(n[o]));const s=i.plugins||[];for(let o=0;o<s.length;o++){const r=s[o];e.indexOf(r)===-1&&(e.push(r),t[r.id]=!0)}return{plugins:e,localIds:t}}function Pz(i,t){return!t&&i===!1?null:i===!0?{}:i}function Mz(i,{plugins:t,localIds:e},n,s){const o=[],r=i.getContext();for(const a of t){const l=a.id,u=Pz(n[l],s);u!==null&&o.push({plugin:a,options:Vz(i.config,{plugin:a,local:e[l]},u,r)})}return o}function Vz(i,{plugin:t,local:e},n,s){const o=i.pluginScopeKeys(t),r=i.getOptionScopes(n,o);return e&&t.defaults&&r.push(t.defaults),i.createResolver(r,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Py(i,t){const e=on.datasets[i]||{};return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function Nz(i,t){let e=i;return i==="_index_"?e=t:i==="_value_"&&(e=t==="x"?"y":"x"),e}function Dz(i,t){return i===t?"_index_":"_value_"}function NE(i){if(i==="x"||i==="y"||i==="r")return i}function Oz(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function My(i,...t){if(NE(i))return i;for(const e of t){const n=e.axis||Oz(e.position)||i.length>1&&NE(i[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function DE(i,t,e){if(e[t+"AxisID"]===i)return{axis:t}}function Lz(i,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(n=>n.xAxisID===i||n.yAxisID===i);if(e.length)return DE(i,"x",e[0])||DE(i,"y",e[0])}return{}}function Bz(i,t){const e=Va[i.type]||{scales:{}},n=t.scales||{},s=Py(i.type,t),o=Object.create(null);return Object.keys(n).forEach(r=>{const a=n[r];if(!lt(a))return console.error(`Invalid scale configuration for scale: ${r}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const l=My(r,a,Lz(r,i),on.scales[a.type]),u=Dz(l,s),h=e.scales||{};o[r]=bd(Object.create(null),[{axis:l},a,h[l],h[u]])}),i.data.datasets.forEach(r=>{const a=r.type||i.type,l=r.indexAxis||Py(a,t),h=(Va[a]||{}).scales||{};Object.keys(h).forEach(m=>{const p=Nz(m,l),v=r[p+"AxisID"]||p;o[v]=o[v]||Object.create(null),bd(o[v],[{axis:p},n[v],h[m]])})}),Object.keys(o).forEach(r=>{const a=o[r];bd(a,[on.scales[a.type],on.scale])}),o}function pM(i){const t=i.options||(i.options={});t.plugins=tt(t.plugins,{}),t.scales=Bz(i,t)}function bM(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function Fz(i){return i=i||{},i.data=bM(i.data),pM(i),i}const OE=new Map,_M=new Set;function om(i,t){let e=OE.get(i);return e||(e=t(),OE.set(i,e),_M.add(e)),e}const qu=(i,t,e)=>{const n=Ma(t,e);n!==void 0&&i.add(n)};let Uz=class{constructor(t){this._config=Fz(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=bM(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),pM(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return om(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return om(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return om(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,n=this.type;return om(`${n}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let s=n.get(t);return(!s||e)&&(s=new Map,n.set(t,s)),s}getOptionScopes(t,e,n){const{options:s,type:o}=this,r=this._cachedScopes(t,n),a=r.get(e);if(a)return a;const l=new Set;e.forEach(h=>{t&&(l.add(t),h.forEach(m=>qu(l,t,m))),h.forEach(m=>qu(l,s,m)),h.forEach(m=>qu(l,Va[o]||{},m)),h.forEach(m=>qu(l,on,m)),h.forEach(m=>qu(l,Ay,m))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),_M.has(e)&&r.set(e,u),u}chartOptionScopes(){const{options:t,type:e}=this;return[t,Va[e]||{},on.datasets[e]||{},{type:e},on,Ay]}resolveNamedOptions(t,e,n,s=[""]){const o={$shared:!0},{resolver:r,subPrefixes:a}=LE(this._resolverCache,t,s);let l=r;if(Hz(r,e)){o.$shared=!1,n=Rr(n)?n():n;const u=this.createResolver(t,n,a);l=wc(r,n,u)}for(const u of e)o[u]=l[u];return o}createResolver(t,e,n=[""],s){const{resolver:o}=LE(this._resolverCache,t,n);return lt(e)?wc(o,e,void 0,s):o}};function LE(i,t,e){let n=i.get(t);n||(n=new Map,i.set(t,n));const s=e.join();let o=n.get(s);return o||(o={resolver:a0(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},n.set(s,o)),o}const zz=i=>lt(i)&&Object.getOwnPropertyNames(i).some(t=>Rr(i[t]));function Hz(i,t){const{isScriptable:e,isIndexable:n}=QP(i);for(const s of t){const o=e(s),r=n(s),a=(r||o)&&i[s];if(o&&(Rr(a)||zz(a))||r&&mn(a))return!0}return!1}var Wz="4.4.9";const qz=["top","bottom","left","right","chartArea"];function BE(i,t){return i==="top"||i==="bottom"||qz.indexOf(i)===-1&&t==="x"}function FE(i,t){return function(e,n){return e[i]===n[i]?e[t]-n[t]:e[i]-n[i]}}function UE(i){const t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Bt(e&&e.onComplete,[i],t)}function $z(i){const t=i.chart,e=t.options.animation;Bt(e&&e.onProgress,[i],t)}function wM(i){return u0()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const Fm={},zE=i=>{const t=wM(i);return Object.values(Fm).filter(e=>e.canvas===t).pop()};function Gz(i,t,e){const n=Object.keys(i);for(const s of n){const o=+s;if(o>=t){const r=i[s];delete i[s],(e>0||o>t)&&(i[o+e]=r)}}}function jz(i,t,e,n){return!e||i.type==="mouseout"?null:n?t:i}var gr;let vp=(gr=class{static register(...t){Ls.add(...t),HE()}static unregister(...t){Ls.remove(...t),HE()}constructor(t,e){const n=this.config=new Uz(e),s=wM(t),o=zE(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||dz(s)),this.platform.updateConfig(n);const a=this.platform.acquireContext(s,r.aspectRatio),l=a&&a.canvas,u=l&&l.height,h=l&&l.width;if(this.id=H7(),this.ctx=a,this.canvas=l,this.width=h,this.height=u,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Rz,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=a6(m=>this.update(m),r.resizeDelay||0),this._dataChanges=[],Fm[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}po.listen(this,"complete",UE),po.listen(this,"progress",$z),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:s,_aspectRatio:o}=this;return bt(t)?e&&o?o:s?n/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ls}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():uE(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return aE(this.canvas,this.ctx),this}stop(){return po.stop(this),this}resize(t,e){po.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,s=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(s,t,e,o),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,uE(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),Bt(n.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Ct(e,(n,s)=>{n.id=s})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,s=Object.keys(n).reduce((r,a)=>(r[a]=!1,r),{});let o=[];e&&(o=o.concat(Object.keys(e).map(r=>{const a=e[r],l=My(r,a),u=l==="r",h=l==="x";return{options:a,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),Ct(o,r=>{const a=r.options,l=a.id,u=My(l,a),h=tt(a.type,r.dtype);(a.position===void 0||BE(a.position,u)!==BE(r.dposition))&&(a.position=r.dposition),s[l]=!0;let m=null;if(l in n&&n[l].type===h)m=n[l];else{const p=Ls.getScale(h);m=new p({id:l,type:h,ctx:this.ctx,chart:this}),n[m.id]=m}m.init(a,t)}),Ct(s,(r,a)=>{r||delete n[a]}),Ct(n,r=>{Xi.configure(this,r,r.options),Xi.addBox(this,r)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((s,o)=>s.index-o.index),n>e){for(let s=e;s<n;++s)this._destroyDatasetMeta(s);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(FE("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((n,s)=>{e.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,s;for(this._removeUnreferencedMetasets(),n=0,s=e.length;n<s;n++){const o=e[n];let r=this.getDatasetMeta(n);const a=o.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=a,r.indexAxis=o.indexAxis||Py(a,this.options),r.order=o.order||0,r.index=n,r.label=""+o.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const l=Ls.getController(a),{datasetElementType:u,dataElementType:h}=on.datasets[a];Object.assign(l,{dataElementType:Ls.getElement(h),datasetElementType:u&&Ls.getElement(u)}),r.controller=new l(this,n),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){Ct(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:m}=this.getDatasetMeta(u),p=!s&&o.indexOf(m)===-1;m.buildOrUpdateElements(p),r=Math.max(+m.getMaxOverflow(),r)}r=this._minPadding=n.layout.autoPadding?r:0,this._updateLayout(r),s||Ct(o,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(FE("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ct(this.scales,t=>{Xi.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!Jk(e,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:s,count:o}of e){const r=n==="_removeElements"?-o:o;Gz(t,s,r)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=o=>new Set(t.filter(r=>r[0]===o).map((r,a)=>a+","+r.splice(1).join(","))),s=n(0);for(let o=1;o<e;o++)if(!Jk(s,n(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Xi.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],Ct(this.boxes,s=>{n&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,n=this.data.datasets.length;e<n;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,Rr(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),s={meta:n,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(n.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(po.has(this)?this.attached&&!po.running(this)&&po.start(this):(this.draw(),UE({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let s,o;for(s=0,o=e.length;s<o;++s){const r=e[s];(!t||r.visible)&&n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n={meta:t,index:t.index,cancelable:!0},s=fU(this,t);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(s&&s0(e,s),t.controller.draw(),s&&o0(e),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return qd(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,s){const o=qU.modes[e];return typeof o=="function"?o(this,t,n,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let s=n.filter(o=>o&&o._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=za(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!e.hidden}setDatasetVisibility(t,e){const n=this.getDatasetMeta(t);n.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const s=n?"show":"hide",o=this.getDatasetMeta(t),r=o.controller._resolveAnimations(void 0,s);zd(e)?(o.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),r.update(o,{visible:n}),this.update(a=>a.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),po.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),aE(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Fm[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(o,r)=>{e.addEventListener(this,o,r),t[o]=r},s=(o,r,a)=>{o.offsetX=r,o.offsetY=a,this._eventHandler(o)};Ct(this.options.events,o=>n(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(l,u)=>{e.addEventListener(this,l,u),t[l]=u},s=(l,u)=>{t[l]&&(e.removeEventListener(this,l,u),delete t[l])},o=(l,u)=>{this.canvas&&this.resize(l,u)};let r;const a=()=>{s("attach",a),this.attached=!0,this.resize(),n("resize",o),n("detach",r)};r=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),n("attach",a)},e.isAttached(this.canvas)?a():r()}unbindEvents(){Ct(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Ct(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const s=n?"set":"remove";let o,r,a,l;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){r=t[a];const u=r&&this.getDatasetMeta(r.datasetIndex).controller;u&&u[s+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:o,index:r})=>{const a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[r],index:r}});!ag(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,n){const s=this.options.hover,o=(l,u)=>l.filter(h=>!u.some(m=>h.datasetIndex===m.datasetIndex&&h.index===m.index)),r=o(e,t),a=n?t:o(t,e);r.length&&this.updateHoverStyle(r,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=r=>(r.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,s)===!1)return;const o=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(o||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:s=[],options:o}=this,r=e,a=this._getActiveElements(t,s,n,r),l=K7(t),u=jz(t,this._lastEvent,n,l);n&&(this._lastEvent=null,Bt(o.onHover,[t,a,this],this),l&&Bt(o.onClick,[t,a,this],this));const h=!ag(a,s);return(h||e)&&(this._active=a,this._updateHoverStyles(a,s,e)),this._lastEvent=u,h}_getActiveElements(t,e,n,s){if(t.type==="mouseout")return[];if(!n)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}},_(gr,"defaults",on),_(gr,"instances",Fm),_(gr,"overrides",Va),_(gr,"registry",Ls),_(gr,"version",Wz),_(gr,"getChart",zE),gr);function HE(){return Ct(vp.instances,i=>i._plugins.invalidate())}function Kz(i,t,e){const{startAngle:n,pixelMargin:s,x:o,y:r,outerRadius:a,innerRadius:l}=t;let u=s/a;i.beginPath(),i.arc(o,r,a,n-u,e+u),l>s?(u=s/l,i.arc(o,r,l,e+u,n-u,!0)):i.arc(o,r,s,e+gn,n-gn),i.closePath(),i.clip()}function Zz(i){return r0(i,["outerStart","outerEnd","innerStart","innerEnd"])}function Yz(i,t,e,n){const s=Zz(i.options.borderRadius),o=(e-t)/2,r=Math.min(o,n*t/2),a=l=>{const u=(e-Math.min(o,l))*n/2;return jn(l,0,Math.min(o,u))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:jn(s.innerStart,0,r),innerEnd:jn(s.innerEnd,0,r)}}function zl(i,t,e,n){return{x:e+i*Math.cos(t),y:n+i*Math.sin(t)}}function fg(i,t,e,n,s,o){const{x:r,y:a,startAngle:l,pixelMargin:u,innerRadius:h}=t,m=Math.max(t.outerRadius+n+e-u,0),p=h>0?h+n+e+u:0;let v=0;const C=s-l;if(n){const we=h>0?h-n:0,B=m>0?m-n:0,le=(we+B)/2,he=le!==0?C*le/(le+n):C;v=(C-he)/2}const x=Math.max(.001,C*m-e/en)/m,k=(C-x)/2,S=l+k+v,I=s-k-v,{outerStart:P,outerEnd:O,innerStart:D,innerEnd:Y}=Yz(t,p,m,I-S),F=m-P,j=m-O,U=S+P/F,X=I-O/j,ae=p+D,me=p+Y,Ae=S+D/ae,ze=I-Y/me;if(i.beginPath(),o){const we=(U+X)/2;if(i.arc(r,a,m,U,we),i.arc(r,a,m,we,X),O>0){const De=zl(j,X,r,a);i.arc(De.x,De.y,O,X,I+gn)}const B=zl(me,I,r,a);if(i.lineTo(B.x,B.y),Y>0){const De=zl(me,ze,r,a);i.arc(De.x,De.y,Y,I+gn,ze+Math.PI)}const le=(I-Y/p+(S+D/p))/2;if(i.arc(r,a,p,I-Y/p,le,!0),i.arc(r,a,p,le,S+D/p,!0),D>0){const De=zl(ae,Ae,r,a);i.arc(De.x,De.y,D,Ae+Math.PI,S-gn)}const he=zl(F,S,r,a);if(i.lineTo(he.x,he.y),P>0){const De=zl(F,U,r,a);i.arc(De.x,De.y,P,S-gn,U)}}else{i.moveTo(r,a);const we=Math.cos(U)*m+r,B=Math.sin(U)*m+a;i.lineTo(we,B);const le=Math.cos(X)*m+r,he=Math.sin(X)*m+a;i.lineTo(le,he)}i.closePath()}function Jz(i,t,e,n,s){const{fullCircles:o,startAngle:r,circumference:a}=t;let l=t.endAngle;if(o){fg(i,t,e,n,l,s);for(let u=0;u<o;++u)i.fill();isNaN(a)||(l=r+(a%Qt||Qt))}return fg(i,t,e,n,l,s),i.fill(),l}function Xz(i,t,e,n,s){const{fullCircles:o,startAngle:r,circumference:a,options:l}=t,{borderWidth:u,borderJoinStyle:h,borderDash:m,borderDashOffset:p}=l,v=l.borderAlign==="inner";if(!u)return;i.setLineDash(m||[]),i.lineDashOffset=p,v?(i.lineWidth=u*2,i.lineJoin=h||"round"):(i.lineWidth=u,i.lineJoin=h||"bevel");let C=t.endAngle;if(o){fg(i,t,e,n,C,s);for(let x=0;x<o;++x)i.stroke();isNaN(a)||(C=r+(a%Qt||Qt))}v&&Kz(i,t,C),o||(fg(i,t,e,n,C,s),i.stroke())}class rd extends Lo{constructor(e){super();_(this,"circumference");_(this,"endAngle");_(this,"fullCircles");_(this,"innerRadius");_(this,"outerRadius");_(this,"pixelMargin");_(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,s){const o=this.getProps(["x","y"],s),{angle:r,distance:a}=$P(o,{x:e,y:n}),{startAngle:l,endAngle:u,innerRadius:h,outerRadius:m,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),v=(this.options.spacing+this.options.borderWidth)/2,C=tt(p,u-l),x=Wd(r,l,u)&&l!==u,k=C>=Qt||x,S=vr(a,h+v,m+v);return k&&S}getCenterPoint(e){const{x:n,y:s,startAngle:o,endAngle:r,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:u,spacing:h}=this.options,m=(o+r)/2,p=(a+l+h+u)/2;return{x:n+Math.cos(m)*p,y:s+Math.sin(m)*p}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:s}=this,o=(n.offset||0)/4,r=(n.spacing||0)/2,a=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>Qt?Math.floor(s/Qt):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*o,Math.sin(l)*o);const u=1-Math.sin(Math.min(en,s||0)),h=o*u;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,Jz(e,this,h,r,a),Xz(e,this,h,r,a),e.restore()}}_(rd,"id","arc"),_(rd,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),_(rd,"defaultRoutes",{backgroundColor:"backgroundColor"}),_(rd,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function yM(i,t,e=t){i.lineCap=tt(e.borderCapStyle,t.borderCapStyle),i.setLineDash(tt(e.borderDash,t.borderDash)),i.lineDashOffset=tt(e.borderDashOffset,t.borderDashOffset),i.lineJoin=tt(e.borderJoinStyle,t.borderJoinStyle),i.lineWidth=tt(e.borderWidth,t.borderWidth),i.strokeStyle=tt(e.borderColor,t.borderColor)}function Qz(i,t,e){i.lineTo(e.x,e.y)}function e8(i){return i.stepped?v6:i.tension||i.cubicInterpolationMode==="monotone"?C6:Qz}function vM(i,t,e={}){const n=i.length,{start:s=0,end:o=n-1}=e,{start:r,end:a}=t,l=Math.max(s,r),u=Math.min(o,a),h=s<r&&o<r||s>a&&o>a;return{count:n,start:l,loop:t.loop,ilen:u<l&&!h?n+u-l:u-l}}function t8(i,t,e,n){const{points:s,options:o}=t,{count:r,start:a,loop:l,ilen:u}=vM(s,e,n),h=e8(o);let{move:m=!0,reverse:p}=n||{},v,C,x;for(v=0;v<=u;++v)C=s[(a+(p?u-v:v))%r],!C.skip&&(m?(i.moveTo(C.x,C.y),m=!1):h(i,x,C,p,o.stepped),x=C);return l&&(C=s[(a+(p?u:0))%r],h(i,x,C,p,o.stepped)),!!l}function n8(i,t,e,n){const s=t.points,{count:o,start:r,ilen:a}=vM(s,e,n),{move:l=!0,reverse:u}=n||{};let h=0,m=0,p,v,C,x,k,S;const I=O=>(r+(u?a-O:O))%o,P=()=>{x!==k&&(i.lineTo(h,k),i.lineTo(h,x),i.lineTo(h,S))};for(l&&(v=s[I(0)],i.moveTo(v.x,v.y)),p=0;p<=a;++p){if(v=s[I(p)],v.skip)continue;const O=v.x,D=v.y,Y=O|0;Y===C?(D<x?x=D:D>k&&(k=D),h=(m*h+O)/++m):(P(),i.lineTo(O,D),C=Y,m=0,x=k=D),S=D}P()}function Vy(i){const t=i.options,e=t.borderDash&&t.borderDash.length;return!i._decimated&&!i._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?n8:t8}function i8(i){return i.stepped?eU:i.tension||i.cubicInterpolationMode==="monotone"?tU:_a}function s8(i,t,e,n){let s=t._path;s||(s=t._path=new Path2D,t.path(s,e,n)&&s.closePath()),yM(i,t.options),i.stroke(s)}function o8(i,t,e,n){const{segments:s,options:o}=t,r=Vy(t);for(const a of s)yM(i,o,a.style),i.beginPath(),r(i,t,a,{start:e,end:e+n-1})&&i.closePath(),i.stroke()}const r8=typeof Path2D=="function";function a8(i,t,e,n){r8&&!t.options.segment?s8(i,t,e,n):o8(i,t,e,n)}class ad extends Lo{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const s=n.spanGaps?this._loop:this._fullLoop;G6(this._points,n,t,s,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=cU(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,s=t[e],o=this.points,r=rU(this,{property:e,start:s,end:s});if(!r.length)return;const a=[],l=i8(n);let u,h;for(u=0,h=r.length;u<h;++u){const{start:m,end:p}=r[u],v=o[m],C=o[p];if(v===C){a.push(v);continue}const x=Math.abs((s-v[e])/(C[e]-v[e])),k=l(v,C,x,n.stepped);k[e]=t[e],a.push(k)}return a.length===1?a[0]:a}pathSegment(t,e,n){return Vy(this)(t,this,e,n)}path(t,e,n){const s=this.segments,o=Vy(this);let r=this._loop;e=e||0,n=n||this.points.length-e;for(const a of s)r&=o(t,this,a,{start:e,end:e+n-1});return!!r}draw(t,e,n,s){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),a8(t,this,n,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}_(ad,"id","line"),_(ad,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),_(ad,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),_(ad,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function WE(i,t,e,n){const s=i.options,{[e]:o}=i.getProps([e],n);return Math.abs(t-o)<s.radius+s.hitRadius}class Um extends Lo{constructor(e){super();_(this,"parsed");_(this,"skip");_(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,s){const o=this.options,{x:r,y:a}=this.getProps(["x","y"],s);return Math.pow(e-r,2)+Math.pow(n-a,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(e,n){return WE(this,e,"x",n)}inYRange(e,n){return WE(this,e,"y",n)}getCenterPoint(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const s=n&&e.borderWidth||0;return(n+s)*2}draw(e,n){const s=this.options;this.skip||s.radius<.1||!qd(this,n,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,Ry(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}_(Um,"id","point"),_(Um,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),_(Um,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function CM(i,t){const{x:e,y:n,base:s,width:o,height:r}=i.getProps(["x","y","base","width","height"],t);let a,l,u,h,m;return i.horizontal?(m=r/2,a=Math.min(e,s),l=Math.max(e,s),u=n-m,h=n+m):(m=o/2,a=e-m,l=e+m,u=Math.min(n,s),h=Math.max(n,s)),{left:a,top:u,right:l,bottom:h}}function Cr(i,t,e,n){return i?0:jn(t,e,n)}function l8(i,t,e){const n=i.options.borderWidth,s=i.borderSkipped,o=XP(n);return{t:Cr(s.top,o.top,0,e),r:Cr(s.right,o.right,0,t),b:Cr(s.bottom,o.bottom,0,e),l:Cr(s.left,o.left,0,t)}}function c8(i,t,e){const{enableBorderRadius:n}=i.getProps(["enableBorderRadius"]),s=i.options.borderRadius,o=mc(s),r=Math.min(t,e),a=i.borderSkipped,l=n||lt(s);return{topLeft:Cr(!l||a.top||a.left,o.topLeft,0,r),topRight:Cr(!l||a.top||a.right,o.topRight,0,r),bottomLeft:Cr(!l||a.bottom||a.left,o.bottomLeft,0,r),bottomRight:Cr(!l||a.bottom||a.right,o.bottomRight,0,r)}}function u8(i){const t=CM(i),e=t.right-t.left,n=t.bottom-t.top,s=l8(i,e/2,n/2),o=c8(i,e/2,n/2);return{outer:{x:t.left,y:t.top,w:e,h:n,radius:o},inner:{x:t.left+s.l,y:t.top+s.t,w:e-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,o.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(s.b,s.r))}}}}function Tw(i,t,e,n){const s=t===null,o=e===null,a=i&&!(s&&o)&&CM(i,n);return a&&(s||vr(t,a.left,a.right))&&(o||vr(e,a.top,a.bottom))}function d8(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function h8(i,t){i.rect(t.x,t.y,t.w,t.h)}function xw(i,t,e={}){const n=i.x!==e.x?-t:0,s=i.y!==e.y?-t:0,o=(i.x+i.w!==e.x+e.w?t:0)-n,r=(i.y+i.h!==e.y+e.h?t:0)-s;return{x:i.x+n,y:i.y+s,w:i.w+o,h:i.h+r,radius:i.radius}}class zm extends Lo{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:s}}=this,{inner:o,outer:r}=u8(this),a=d8(r.radius)?ug:h8;t.save(),(r.w!==o.w||r.h!==o.h)&&(t.beginPath(),a(t,xw(r,e,o)),t.clip(),a(t,xw(o,-e,r)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,xw(o,e)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,e,n){return Tw(this,t,e,n)}inXRange(t,e){return Tw(this,t,null,e)}inYRange(t,e){return Tw(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:s,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+s)/2:e,y:o?n:(n+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}_(zm,"id","bar"),_(zm,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),_(zm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const qE=(i,t)=>{let{boxHeight:e=t,boxWidth:n=t}=i;return i.usePointStyle&&(e=Math.min(e,t),n=i.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:e,itemHeight:Math.max(t,e)}},f8=(i,t)=>i!==null&&t!==null&&i.datasetIndex===t.datasetIndex&&i.index===t.index;class $E extends Lo{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Bt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(n=>t.filter(n,this.chart.data))),t.sort&&(e=e.sort((n,s)=>t.sort(n,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,s=Kn(n.font),o=s.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=qE(n,o);let u,h;e.font=s.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(r,o,a,l)+10):(h=this.maxHeight,u=this._fitCols(r,s,a,l)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,s){const{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],h=s+a;let m=t;o.textAlign="left",o.textBaseline="middle";let p=-1,v=-h;return this.legendItems.forEach((C,x)=>{const k=n+e/2+o.measureText(C.text).width;(x===0||u[u.length-1]+k+2*a>r)&&(m+=h,u[u.length-(x>0?0:1)]=0,v+=h,p++),l[x]={left:0,top:v,row:p,width:k,height:s},u[u.length-1]+=k+a}),m}_fitCols(t,e,n,s){const{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],h=r-t;let m=a,p=0,v=0,C=0,x=0;return this.legendItems.forEach((k,S)=>{const{itemWidth:I,itemHeight:P}=m8(n,e,o,k,s);S>0&&v+P+2*a>h&&(m+=p+a,u.push({width:p,height:v}),C+=p+a,x++,p=v=0),l[S]={left:C,top:v,col:x,width:I,height:P},p=Math.max(p,I),v+=P+a}),m+=p,u.push({width:p,height:v}),m}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:s},rtl:o}}=this,r=gc(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=qn(n,this.left+s,this.right-this.lineWidths[a]);for(const u of e)a!==u.row&&(a=u.row,l=qn(n,this.left+s,this.right-this.lineWidths[a])),u.top+=this.top+t+s,u.left=r.leftForLtr(r.x(l),u.width),l+=u.width+s}else{let a=0,l=qn(n,this.top+t+s,this.bottom-this.columnSizes[a].height);for(const u of e)u.col!==a&&(a=u.col,l=qn(n,this.top+t+s,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+s,u.left=r.leftForLtr(r.x(u.left),u.width),l+=u.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;s0(t,this),this._draw(),o0(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:s}=this,{align:o,labels:r}=t,a=on.color,l=gc(t.rtl,this.left,this.width),u=Kn(r.font),{padding:h}=r,m=u.size,p=m/2;let v;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=u.string;const{boxWidth:C,boxHeight:x,itemHeight:k}=qE(r,m),S=function(Y,F,j){if(isNaN(C)||C<=0||isNaN(x)||x<0)return;s.save();const U=tt(j.lineWidth,1);if(s.fillStyle=tt(j.fillStyle,a),s.lineCap=tt(j.lineCap,"butt"),s.lineDashOffset=tt(j.lineDashOffset,0),s.lineJoin=tt(j.lineJoin,"miter"),s.lineWidth=U,s.strokeStyle=tt(j.strokeStyle,a),s.setLineDash(tt(j.lineDash,[])),r.usePointStyle){const X={radius:x*Math.SQRT2/2,pointStyle:j.pointStyle,rotation:j.rotation,borderWidth:U},ae=l.xPlus(Y,C/2),me=F+p;JP(s,X,ae,me,r.pointStyleWidth&&C)}else{const X=F+Math.max((m-x)/2,0),ae=l.leftForLtr(Y,C),me=mc(j.borderRadius);s.beginPath(),Object.values(me).some(Ae=>Ae!==0)?ug(s,{x:ae,y:X,w:C,h:x,radius:me}):s.rect(ae,X,C,x),s.fill(),U!==0&&s.stroke()}s.restore()},I=function(Y,F,j){$d(s,j.text,Y,F+k/2,u,{strikethrough:j.hidden,textAlign:l.textAlign(j.textAlign)})},P=this.isHorizontal(),O=this._computeTitleHeight();P?v={x:qn(o,this.left+h,this.right-n[0]),y:this.top+h+O,line:0}:v={x:this.left+h,y:qn(o,this.top+O+h,this.bottom-e[0].height),line:0},sM(this.ctx,t.textDirection);const D=k+h;this.legendItems.forEach((Y,F)=>{s.strokeStyle=Y.fontColor,s.fillStyle=Y.fontColor;const j=s.measureText(Y.text).width,U=l.textAlign(Y.textAlign||(Y.textAlign=r.textAlign)),X=C+p+j;let ae=v.x,me=v.y;l.setWidth(this.width),P?F>0&&ae+X+h>this.right&&(me=v.y+=D,v.line++,ae=v.x=qn(o,this.left+h,this.right-n[v.line])):F>0&&me+D>this.bottom&&(ae=v.x=ae+e[v.line].width+h,v.line++,me=v.y=qn(o,this.top+O+h,this.bottom-e[v.line].height));const Ae=l.x(ae);if(S(Ae,me,Y),ae=l6(U,ae+C+p,P?ae+X:this.right,t.rtl),I(l.x(ae),me,Y),P)v.x+=X+h;else if(typeof Y.text!="string"){const ze=u.lineHeight;v.y+=TM(Y,ze)+h}else v.y+=D}),oM(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=Kn(e.font),s=ns(e.padding);if(!e.display)return;const o=gc(t.rtl,this.left,this.width),r=this.ctx,a=e.position,l=n.size/2,u=s.top+l;let h,m=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),h=this.top+u,m=qn(t.align,m,this.right-p);else{const C=this.columnSizes.reduce((x,k)=>Math.max(x,k.height),0);h=u+qn(t.align,this.top,this.bottom-C-t.labels.padding-this._computeTitleHeight())}const v=qn(a,m,m+p);r.textAlign=o.textAlign(t0(a)),r.textBaseline="middle",r.strokeStyle=e.color,r.fillStyle=e.color,r.font=n.string,$d(r,e.text,v,h,n)}_computeTitleHeight(){const t=this.options.title,e=Kn(t.font),n=ns(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,s,o;if(vr(t,this.left,this.right)&&vr(e,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(s=o[n],vr(t,s.left,s.left+s.width)&&vr(e,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(t){const e=this.options;if(!b8(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,o=f8(s,n);s&&!o&&Bt(e.onLeave,[t,s,this],this),this._hoveredItem=n,n&&!o&&Bt(e.onHover,[t,n,this],this)}else n&&Bt(e.onClick,[t,n,this],this)}}function m8(i,t,e,n,s){const o=g8(n,i,t,e),r=p8(s,n,t.lineHeight);return{itemWidth:o,itemHeight:r}}function g8(i,t,e,n){let s=i.text;return s&&typeof s!="string"&&(s=s.reduce((o,r)=>o.length>r.length?o:r)),t+e.size/2+n.measureText(s).width}function p8(i,t,e){let n=i;return typeof t.text!="string"&&(n=TM(t,e)),n}function TM(i,t){const e=i.text?i.text.length:0;return t*e}function b8(i,t){return!!((i==="mousemove"||i==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(i==="click"||i==="mouseup"))}var _8={id:"legend",_element:$E,start(i,t,e){const n=i.legend=new $E({ctx:i.ctx,options:e,chart:i});Xi.configure(i,n,e),Xi.addBox(i,n)},stop(i){Xi.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,e){const n=i.legend;Xi.configure(i,n,e),n.options=e},afterUpdate(i){const t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,e){const n=t.datasetIndex,s=e.chart;s.isDatasetVisible(n)?(s.hide(n),t.hidden=!0):(s.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const t=i.data.datasets,{labels:{usePointStyle:e,pointStyle:n,textAlign:s,color:o,useBorderRadius:r,borderRadius:a}}=i.legend.options;return i._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(e?0:void 0),h=ns(u.borderWidth);return{text:t[l.index].label,fillStyle:u.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:n||u.pointStyle,rotation:u.rotation,textAlign:s||u.textAlign,borderRadius:r&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class xM extends Lo{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const s=mn(n.text)?n.text.length:1;this._padding=ns(n.padding);const o=s*Kn(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:n,bottom:s,right:o,options:r}=this,a=r.align;let l=0,u,h,m;return this.isHorizontal()?(h=qn(a,n,o),m=e+t,u=o-n):(r.position==="left"?(h=n+t,m=qn(a,s,e),l=en*-.5):(h=o-t,m=qn(a,e,s),l=en*.5),u=s-e),{titleX:h,titleY:m,maxWidth:u,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=Kn(e.font),o=n.lineHeight/2+this._padding.top,{titleX:r,titleY:a,maxWidth:l,rotation:u}=this._drawArgs(o);$d(t,e.text,0,0,n,{color:e.color,maxWidth:l,rotation:u,textAlign:t0(e.align),textBaseline:"middle",translation:[r,a]})}}function w8(i,t){const e=new xM({ctx:i.ctx,options:t,chart:i});Xi.configure(i,e,t),Xi.addBox(i,e),i.titleBlock=e}var y8={id:"title",_element:xM,start(i,t,e){w8(i,e)},stop(i){const t=i.titleBlock;Xi.removeBox(i,t),delete i.titleBlock},beforeUpdate(i,t,e){const n=i.titleBlock;Xi.configure(i,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ld={average(i){if(!i.length)return!1;let t,e,n=new Set,s=0,o=0;for(t=0,e=i.length;t<e;++t){const a=i[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();n.add(l.x),s+=l.y,++o}}return o===0||n.size===0?!1:{x:[...n].reduce((a,l)=>a+l)/n.size,y:s/o}},nearest(i,t){if(!i.length)return!1;let e=t.x,n=t.y,s=Number.POSITIVE_INFINITY,o,r,a;for(o=0,r=i.length;o<r;++o){const l=i[o].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),h=Sy(t,u);h<s&&(s=h,a=l)}}if(a){const l=a.tooltipPosition();e=l.x,n=l.y}return{x:e,y:n}}};function Os(i,t){return t&&(mn(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function bo(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function v8(i,t){const{element:e,datasetIndex:n,index:s}=t,o=i.getDatasetMeta(n).controller,{label:r,value:a}=o.getLabelAndValue(s);return{chart:i,label:r,parsed:o.getParsed(s),raw:i.data.datasets[n].data[s],formattedValue:a,dataset:o.getDataset(),dataIndex:s,datasetIndex:n,element:e}}function GE(i,t){const e=i.chart.ctx,{body:n,footer:s,title:o}=i,{boxWidth:r,boxHeight:a}=t,l=Kn(t.bodyFont),u=Kn(t.titleFont),h=Kn(t.footerFont),m=o.length,p=s.length,v=n.length,C=ns(t.padding);let x=C.height,k=0,S=n.reduce((O,D)=>O+D.before.length+D.lines.length+D.after.length,0);if(S+=i.beforeBody.length+i.afterBody.length,m&&(x+=m*u.lineHeight+(m-1)*t.titleSpacing+t.titleMarginBottom),S){const O=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;x+=v*O+(S-v)*l.lineHeight+(S-1)*t.bodySpacing}p&&(x+=t.footerMarginTop+p*h.lineHeight+(p-1)*t.footerSpacing);let I=0;const P=function(O){k=Math.max(k,e.measureText(O).width+I)};return e.save(),e.font=u.string,Ct(i.title,P),e.font=l.string,Ct(i.beforeBody.concat(i.afterBody),P),I=t.displayColors?r+2+t.boxPadding:0,Ct(n,O=>{Ct(O.before,P),Ct(O.lines,P),Ct(O.after,P)}),I=0,e.font=h.string,Ct(i.footer,P),e.restore(),k+=C.width,{width:k,height:x}}function C8(i,t){const{y:e,height:n}=t;return e<n/2?"top":e>i.height-n/2?"bottom":"center"}function T8(i,t,e,n){const{x:s,width:o}=n,r=e.caretSize+e.caretPadding;if(i==="left"&&s+o+r>t.width||i==="right"&&s-o-r<0)return!0}function x8(i,t,e,n){const{x:s,width:o}=e,{width:r,chartArea:{left:a,right:l}}=i;let u="center";return n==="center"?u=s<=(a+l)/2?"left":"right":s<=o/2?u="left":s>=r-o/2&&(u="right"),T8(u,i,t,e)&&(u="center"),u}function jE(i,t,e){const n=e.yAlign||t.yAlign||C8(i,e);return{xAlign:e.xAlign||t.xAlign||x8(i,t,e,n),yAlign:n}}function k8(i,t){let{x:e,width:n}=i;return t==="right"?e-=n:t==="center"&&(e-=n/2),e}function E8(i,t,e){let{y:n,height:s}=i;return t==="top"?n+=e:t==="bottom"?n-=s+e:n-=s/2,n}function KE(i,t,e,n){const{caretSize:s,caretPadding:o,cornerRadius:r}=i,{xAlign:a,yAlign:l}=e,u=s+o,{topLeft:h,topRight:m,bottomLeft:p,bottomRight:v}=mc(r);let C=k8(t,a);const x=E8(t,l,u);return l==="center"?a==="left"?C+=u:a==="right"&&(C-=u):a==="left"?C-=Math.max(h,p)+s:a==="right"&&(C+=Math.max(m,v)+s),{x:jn(C,0,n.width-t.width),y:jn(x,0,n.height-t.height)}}function rm(i,t,e){const n=ns(e.padding);return t==="center"?i.x+i.width/2:t==="right"?i.x+i.width-n.right:i.x+n.left}function ZE(i){return Os([],bo(i))}function S8(i,t,e){return za(i,{tooltip:t,tooltipItems:e,type:"tooltip"})}function YE(i,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?i.override(e):i}const kM={beforeTitle:fo,title(i){if(i.length>0){const t=i[0],e=t.chart.data.labels,n=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return e[t.dataIndex]}return""},afterTitle:fo,beforeBody:fo,beforeLabel:fo,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");const e=i.formattedValue;return bt(e)||(t+=e),t},labelColor(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:fo,afterBody:fo,beforeFooter:fo,footer:fo,afterFooter:fo};function hi(i,t,e,n){const s=i[t].call(e,n);return typeof s>"u"?kM[t].call(e,n):s}class Ny extends Lo{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&e.options.animation&&n.animations,o=new aM(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=S8(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:n}=e,s=hi(n,"beforeTitle",this,t),o=hi(n,"title",this,t),r=hi(n,"afterTitle",this,t);let a=[];return a=Os(a,bo(s)),a=Os(a,bo(o)),a=Os(a,bo(r)),a}getBeforeBody(t,e){return ZE(hi(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,s=[];return Ct(t,o=>{const r={before:[],lines:[],after:[]},a=YE(n,o);Os(r.before,bo(hi(a,"beforeLabel",this,o))),Os(r.lines,hi(a,"label",this,o)),Os(r.after,bo(hi(a,"afterLabel",this,o))),s.push(r)}),s}getAfterBody(t,e){return ZE(hi(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,s=hi(n,"beforeFooter",this,t),o=hi(n,"footer",this,t),r=hi(n,"afterFooter",this,t);let a=[];return a=Os(a,bo(s)),a=Os(a,bo(o)),a=Os(a,bo(r)),a}_createItems(t){const e=this._active,n=this.chart.data,s=[],o=[],r=[];let a=[],l,u;for(l=0,u=e.length;l<u;++l)a.push(v8(this.chart,e[l]));return t.filter&&(a=a.filter((h,m,p)=>t.filter(h,m,p,n))),t.itemSort&&(a=a.sort((h,m)=>t.itemSort(h,m,n))),Ct(a,h=>{const m=YE(t.callbacks,h);s.push(hi(m,"labelColor",this,h)),o.push(hi(m,"labelPointStyle",this,h)),r.push(hi(m,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=a,a}update(t,e){const n=this.options.setContext(this.getContext()),s=this._active;let o,r=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{const a=ld[n.position].call(this,s,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);const l=this._size=GE(this,n),u=Object.assign({},a,l),h=jE(this.chart,n,u),m=KE(n,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,o={opacity:1,x:m.x,y:m.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,s){const o=this.getCaretPosition(t,n,s);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,n){const{xAlign:s,yAlign:o}=this,{caretSize:r,cornerRadius:a}=n,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:m}=mc(a),{x:p,y:v}=t,{width:C,height:x}=e;let k,S,I,P,O,D;return o==="center"?(O=v+x/2,s==="left"?(k=p,S=k-r,P=O+r,D=O-r):(k=p+C,S=k+r,P=O-r,D=O+r),I=k):(s==="left"?S=p+Math.max(l,h)+r:s==="right"?S=p+C-Math.max(u,m)-r:S=this.caretX,o==="top"?(P=v,O=P-r,k=S-r,I=S+r):(P=v+x,O=P+r,k=S+r,I=S-r),D=P),{x1:k,x2:S,x3:I,y1:P,y2:O,y3:D}}drawTitle(t,e,n){const s=this.title,o=s.length;let r,a,l;if(o){const u=gc(n.rtl,this.x,this.width);for(t.x=rm(this,n.titleAlign,n),e.textAlign=u.textAlign(n.titleAlign),e.textBaseline="middle",r=Kn(n.titleFont),a=n.titleSpacing,e.fillStyle=n.titleColor,e.font=r.string,l=0;l<o;++l)e.fillText(s[l],u.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+a,l+1===o&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,e,n,s,o){const r=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:u}=o,h=Kn(o.bodyFont),m=rm(this,"left",o),p=s.x(m),v=l<h.lineHeight?(h.lineHeight-l)/2:0,C=e.y+v;if(o.usePointStyle){const x={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},k=s.leftForLtr(p,u)+u/2,S=C+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,Ry(t,x,k,S),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,Ry(t,x,k,S)}else{t.lineWidth=lt(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;const x=s.leftForLtr(p,u),k=s.leftForLtr(s.xPlus(p,1),u-2),S=mc(r.borderRadius);Object.values(S).some(I=>I!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,ug(t,{x,y:C,w:u,h:l,radius:S}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),ug(t,{x:k,y:C+1,w:u-2,h:l-2,radius:S}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(x,C,u,l),t.strokeRect(x,C,u,l),t.fillStyle=r.backgroundColor,t.fillRect(k,C+1,u-2,l-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:s}=this,{bodySpacing:o,bodyAlign:r,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:h}=n,m=Kn(n.bodyFont);let p=m.lineHeight,v=0;const C=gc(n.rtl,this.x,this.width),x=function(j){e.fillText(j,C.x(t.x+v),t.y+p/2),t.y+=p+o},k=C.textAlign(r);let S,I,P,O,D,Y,F;for(e.textAlign=r,e.textBaseline="middle",e.font=m.string,t.x=rm(this,k,n),e.fillStyle=n.bodyColor,Ct(this.beforeBody,x),v=a&&k!=="right"?r==="center"?u/2+h:u+2+h:0,O=0,Y=s.length;O<Y;++O){for(S=s[O],I=this.labelTextColors[O],e.fillStyle=I,Ct(S.before,x),P=S.lines,a&&P.length&&(this._drawColorBox(e,t,O,C,n),p=Math.max(m.lineHeight,l)),D=0,F=P.length;D<F;++D)x(P[D]),p=m.lineHeight;Ct(S.after,x)}v=0,p=m.lineHeight,Ct(this.afterBody,x),t.y-=o}drawFooter(t,e,n){const s=this.footer,o=s.length;let r,a;if(o){const l=gc(n.rtl,this.x,this.width);for(t.x=rm(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=l.textAlign(n.footerAlign),e.textBaseline="middle",r=Kn(n.footerFont),e.fillStyle=n.footerColor,e.font=r.string,a=0;a<o;++a)e.fillText(s[a],l.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+n.footerSpacing}}drawBackground(t,e,n,s){const{xAlign:o,yAlign:r}=this,{x:a,y:l}=t,{width:u,height:h}=n,{topLeft:m,topRight:p,bottomLeft:v,bottomRight:C}=mc(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(a+m,l),r==="top"&&this.drawCaret(t,e,n,s),e.lineTo(a+u-p,l),e.quadraticCurveTo(a+u,l,a+u,l+p),r==="center"&&o==="right"&&this.drawCaret(t,e,n,s),e.lineTo(a+u,l+h-C),e.quadraticCurveTo(a+u,l+h,a+u-C,l+h),r==="bottom"&&this.drawCaret(t,e,n,s),e.lineTo(a+v,l+h),e.quadraticCurveTo(a,l+h,a,l+h-v),r==="center"&&o==="left"&&this.drawCaret(t,e,n,s),e.lineTo(a,l+m),e.quadraticCurveTo(a,l,a+m,l),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,s=n&&n.x,o=n&&n.y;if(s||o){const r=ld[t.position].call(this,this._active,this._eventPosition);if(!r)return;const a=this._size=GE(this,t),l=Object.assign({},r,this._size),u=jE(e,t,l),h=KE(t,l,u,e);(s._to!==h.x||o._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const r=ns(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(o,t,s,e),sM(t,e.textDirection),o.y+=r.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),oM(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,s=t.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),o=!ag(n,s),r=this._positionChanged(s,e);(o||r)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],r=this._getActiveElements(t,o,e,n),a=this._positionChanged(r,t),l=e||!ag(r,o)||a;return l&&(this._active=r,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,n,s){const o=this.options;if(t.type==="mouseout")return[];if(!s)return e.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const r=this.chart.getElementsAtEventForMode(t,o.mode,o,n);return o.reverse&&r.reverse(),r}_positionChanged(t,e){const{caretX:n,caretY:s,options:o}=this,r=ld[o.position].call(this,t,e);return r!==!1&&(n!==r.x||s!==r.y)}}_(Ny,"positioners",ld);var A8={id:"tooltip",_element:Ny,positioners:ld,afterInit(i,t,e){e&&(i.tooltip=new Ny({chart:i,options:e}))},beforeUpdate(i,t,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,t,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){const t=i.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(i.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,t){if(i.tooltip){const e=t.replay;i.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:kM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const R8=(i,t,e,n)=>(typeof t=="string"?(e=i.push(t)-1,n.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function I8(i,t,e,n){const s=i.indexOf(t);if(s===-1)return R8(i,t,e,n);const o=i.lastIndexOf(t);return s!==o?e:s}const P8=(i,t)=>i===null?null:jn(Math.round(i),0,t);function JE(i){const t=this.getLabels();return i>=0&&i<t.length?t[i]:i}class Dy extends yp{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const n=this.getLabels();for(const{index:s,label:o}of e)n[s]===o&&n.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(bt(t))return null;const n=this.getLabels();return e=isFinite(e)&&n[e]===t?e:I8(n,t,tt(e,t),this._addedLabels),P8(e,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),e||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,s=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let r=t;r<=e;r++)s.push({value:r});return s}getLabelForValue(t){return JE.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}_(Dy,"id","category"),_(Dy,"defaults",{ticks:{callback:JE}});function M8(i,t){const e=[],{bounds:s,step:o,min:r,max:a,precision:l,count:u,maxTicks:h,maxDigits:m,includeBounds:p}=i,v=o||1,C=h-1,{min:x,max:k}=t,S=!bt(r),I=!bt(a),P=!bt(u),O=(k-x)/(m+1);let D=Qk((k-x)/C/v)*v,Y,F,j,U;if(D<1e-14&&!S&&!I)return[{value:x},{value:k}];U=Math.ceil(k/D)-Math.floor(x/D),U>C&&(D=Qk(U*D/C/v)*v),bt(l)||(Y=Math.pow(10,l),D=Math.ceil(D*Y)/Y),s==="ticks"?(F=Math.floor(x/D)*D,j=Math.ceil(k/D)*D):(F=x,j=k),S&&I&&o&&Q7((a-r)/o,D/1e3)?(U=Math.round(Math.min((a-r)/D,h)),D=(a-r)/U,F=r,j=a):P?(F=S?r:F,j=I?a:j,U=u-1,D=(j-F)/U):(U=(j-F)/D,_d(U,Math.round(U),D/1e3)?U=Math.round(U):U=Math.ceil(U));const X=Math.max(eE(D),eE(F));Y=Math.pow(10,bt(l)?X:l),F=Math.round(F*Y)/Y,j=Math.round(j*Y)/Y;let ae=0;for(S&&(p&&F!==r?(e.push({value:r}),F<r&&ae++,_d(Math.round((F+ae*D)*Y)/Y,r,XE(r,O,i))&&ae++):F<r&&ae++);ae<U;++ae){const me=Math.round((F+ae*D)*Y)/Y;if(I&&me>a)break;e.push({value:me})}return I&&p&&j!==a?e.length&&_d(e[e.length-1].value,a,XE(a,O,i))?e[e.length-1].value=a:e.push({value:a}):(!I||j===a)&&e.push({value:j}),e}function XE(i,t,{horizontal:e,minRotation:n}){const s=ko(n),o=(e?Math.sin(s):Math.cos(s))||.001,r=.75*t*(""+i).length;return Math.min(t/o,r)}class V8 extends yp{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return bt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:o}=this;const r=l=>s=e?s:l,a=l=>o=n?o:l;if(t){const l=Hs(s),u=Hs(o);l<0&&u<0?a(0):l>0&&u>0&&r(0)}if(s===o){let l=o===0?1:Math.abs(o*.05);a(o+l),t||r(s-l)}this.min=s,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:n}=t,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const s={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,r=M8(s,o);return t.bounds==="ticks"&&e6(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const s=(n-e)/Math.max(t.length-1,1)/2;e-=s,n+=s}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return i0(t,this.chart.options.locale,this.options.ticks.format)}}class Oy extends V8{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=ts(t)?t:0,this.max=ts(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=ko(this.options.ticks.minRotation),s=(t?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}_(Oy,"id","linear"),_(Oy,"defaults",{ticks:{callback:YP.formatters.numeric}});const Cp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},_i=Object.keys(Cp);function QE(i,t){return i-t}function eS(i,t){if(bt(t))return null;const e=i._adapter,{parser:n,round:s,isoWeekday:o}=i._parseOpts;let r=t;return typeof n=="function"&&(r=n(r)),ts(r)||(r=typeof n=="string"?e.parse(r,n):e.parse(r)),r===null?null:(s&&(r=s==="week"&&(Hd(o)||o===!0)?e.startOf(r,"isoWeek",o):e.startOf(r,s)),+r)}function tS(i,t,e,n){const s=_i.length;for(let o=_i.indexOf(i);o<s-1;++o){const r=Cp[_i[o]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((e-t)/(a*r.size))<=n)return _i[o]}return _i[s-1]}function N8(i,t,e,n,s){for(let o=_i.length-1;o>=_i.indexOf(e);o--){const r=_i[o];if(Cp[r].common&&i._adapter.diff(s,n,r)>=t-1)return r}return _i[e?_i.indexOf(e):0]}function D8(i){for(let t=_i.indexOf(i)+1,e=_i.length;t<e;++t)if(Cp[_i[t]].common)return _i[t]}function nS(i,t,e){if(!e)i[t]=!0;else if(e.length){const{lo:n,hi:s}=e0(e,t),o=e[n]>=t?e[n]:e[s];i[o]=!0}}function O8(i,t,e,n){const s=i._adapter,o=+s.startOf(t[0].value,n),r=t[t.length-1].value;let a,l;for(a=o;a<=r;a=+s.add(a,1,n))l=e[a],l>=0&&(t[l].major=!0);return t}function iS(i,t,e){const n=[],s={},o=t.length;let r,a;for(r=0;r<o;++r)a=t[r],s[a]=r,n.push({value:a,major:!1});return o===0||!e?n:O8(i,n,s,e)}class mg extends yp{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const n=t.time||(t.time={}),s=this._adapter=new FU._date(t.adapters.date);s.init(e),bd(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:eS(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:s,max:o,minDefined:r,maxDefined:a}=this.getUserBounds();function l(u){!r&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!a&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!r||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=ts(s)&&!isNaN(s)?s:+e.startOf(Date.now(),n),o=ts(o)&&!isNaN(o)?o:+e.endOf(Date.now(),n)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,s=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,r=this.max,a=o6(s,o,r);return this._unit=e.unit||(n.autoSkip?tS(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):N8(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:D8(this._unit),this.initOffsets(s),t.reverse&&a.reverse(),iS(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,n=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?e=1-s:e=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?n=o:n=(o-this.getDecimalForValue(t[t.length-2]))/2);const r=t.length<3?.5:.25;e=jn(e,0,r),n=jn(n,0,r),this._offsets={start:e,end:n,factor:1/(e+1+n)}}_generate(){const t=this._adapter,e=this.min,n=this.max,s=this.options,o=s.time,r=o.unit||tS(o.minUnit,e,n,this._getLabelCapacity(e)),a=tt(s.ticks.stepSize,1),l=r==="week"?o.isoWeekday:!1,u=Hd(l)||l===!0,h={};let m=e,p,v;if(u&&(m=+t.startOf(m,"isoWeek",l)),m=+t.startOf(m,u?"day":r),t.diff(n,e,r)>1e5*a)throw new Error(e+" and "+n+" are too far apart with stepSize of "+a+" "+r);const C=s.ticks.source==="data"&&this.getDataTimestamps();for(p=m,v=0;p<n;p=+t.add(p,a,r),v++)nS(h,p,C);return(p===n||s.bounds==="ticks"||v===1)&&nS(h,p,C),Object.keys(h).sort(QE).map(x=>+x)}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const s=this.options.time.displayFormats,o=this._unit,r=e||s[o];return this._adapter.format(t,r)}_tickFormatFunction(t,e,n,s){const o=this.options,r=o.ticks.callback;if(r)return Bt(r,[t,e,n],this);const a=o.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&a[l],m=u&&a[u],p=n[e],v=u&&m&&p&&p.major;return this._adapter.format(t,s||(v?m:h))}generateTickLabels(t){let e,n,s;for(e=0,n=t.length;e<n;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,s=ko(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(s),r=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:n*o+a*r,h:n*r+a*o}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,s=n[e.unit]||n.millisecond,o=this._tickFormatFunction(t,0,iS(this,[t],this._majorUnit),s),r=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,n;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,n=s.length;e<n;++e)t=t.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const s=this.getLabels();for(e=0,n=s.length;e<n;++e)t.push(eS(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return jP(t.sort(QE))}}_(mg,"id","time"),_(mg,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function am(i,t,e){let n=0,s=i.length-1,o,r,a,l;e?(t>=i[n].pos&&t<=i[s].pos&&({lo:n,hi:s}=Ca(i,"pos",t)),{pos:o,time:a}=i[n],{pos:r,time:l}=i[s]):(t>=i[n].time&&t<=i[s].time&&({lo:n,hi:s}=Ca(i,"time",t)),{time:o,pos:a}=i[n],{time:r,pos:l}=i[s]);const u=r-o;return u?a+(l-a)*(t-o)/u:a}class sS extends mg{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=am(e,this.min),this._tableRange=am(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,s=[],o=[];let r,a,l,u,h;for(r=0,a=t.length;r<a;++r)u=t[r],u>=e&&u<=n&&s.push(u);if(s.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(r=0,a=s.length;r<a;++r)h=s[r+1],l=s[r-1],u=s[r],Math.round((h+l)/2)!==u&&o.push({time:u,pos:r/(a-1)});return o}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(e)||n.length===1)&&n.push(e),n.sort((s,o)=>s-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return e.length&&n.length?t=this.normalize(e.concat(n)):t=e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(am(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return am(this._table,n*this._tableRange+this._minPos,!0)}}_(sS,"id","timeseries"),_(sS,"defaults",mg.defaults);const EM="label";function oS(i,t){typeof i=="function"?i(t):i&&(i.current=t)}function L8(i,t){const e=i.options;e&&t&&Object.assign(e,t)}function SM(i,t){i.labels=t}function AM(i,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:EM;const n=[];i.datasets=t.map(s=>{const o=i.datasets.find(r=>r[e]===s[e]);return!o||!s.data||n.includes(o)?{...s}:(n.push(o),Object.assign(o,s),o)})}function B8(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:EM;const e={labels:[],datasets:[]};return SM(e,i.labels),AM(e,i.datasets,t),e}function F8(i,t){const{height:e=150,width:n=300,redraw:s=!1,datasetIdKey:o,type:r,data:a,options:l,plugins:u=[],fallbackContent:h,updateMode:m,...p}=i,v=H.useRef(null),C=H.useRef(null),x=()=>{v.current&&(C.current=new vp(v.current,{type:r,data:B8(a,o),options:l&&{...l},plugins:u}),oS(t,C.current))},k=()=>{oS(t,null),C.current&&(C.current.destroy(),C.current=null)};return H.useEffect(()=>{!s&&C.current&&l&&L8(C.current,l)},[s,l]),H.useEffect(()=>{!s&&C.current&&SM(C.current.config.data,a.labels)},[s,a.labels]),H.useEffect(()=>{!s&&C.current&&a.datasets&&AM(C.current.config.data,a.datasets,o)},[s,a.datasets]),H.useEffect(()=>{C.current&&(s?(k(),setTimeout(x)):C.current.update(m))},[s,l,a.labels,a.datasets,m]),H.useEffect(()=>{C.current&&(k(),setTimeout(x))},[r]),H.useEffect(()=>(x(),()=>k()),[]),So.createElement("canvas",{ref:v,role:"img",height:e,width:n,...p},h)}const U8=H.forwardRef(F8);function f0(i,t){return vp.register(t),H.forwardRef((e,n)=>So.createElement(U8,{...e,ref:n,type:i}))}const z8=f0("line",Lm),H8=f0("bar",Om),W8=f0("pie",Iy);function RM(i){H.useEffect(()=>{const t=document.title;return document.title=i,()=>{document.title=t}},[])}vp.register(Dy,Oy,zm,y8,A8,_8,rd,Um,ad);function q8(){RM("유기동물 현황");const i={matainAspectRatio:!1,responsive:!0,plugins:{legend:{position:"top",display:!1},title:{display:!1}}};H.useEffect(()=>{(async()=>{var h=pp,m=`?serviceKey=${bp}`;m+="&pageNo=1",m+="&numOfRows=10000";const v=(await Nt.get(h+m)).data,x=new X2JS().xml_str2json(v);console.log(x);const k=x.ServiceResult.MsgBody.items;console.log(k);const S={};k.forEach(we=>{S[we.classification]?S[we.classification]+=1:S[we.classification]=1}),console.log(S);const I=Object.keys(S),P=Object.values(S);console.log(I),console.log(P);const O=I.map(we=>d7(we));console.log(O),e({labels:O,datasets:[{label:"종류별 유기동물 수",data:P,backgroundColor:["rgba(255, 99, 132, 0.5)","rgba(54, 162, 235, 0.5)","rgba(255, 206, 86, 0.5)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)"],borderWidth:2}]});const Y={};k.forEach(we=>{Y[we.gu]?Y[we.gu]+=1:Y[we.gu]=1}),console.log(Y);const F=Object.keys(Y),j=Object.values(Y);console.log(F),console.log(j);const U=F.map(we=>h7(we));console.log(U),s({labels:U,datasets:[{label:"유기동물수",data:j,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)"],borderWidth:1}]});const ae={};k.forEach(we=>{const B=we.regDtTm.substring(0,4);ae[B]?ae[B]+=1:ae[B]=1}),console.log(ae);const me=Object.keys(ae).sort(),Ae=me.map(we=>ae[we]);r({labels:me,datasets:[{label:"연도별 유기동물 수",data:Ae,borderColor:"rgba(54, 162, 235)",backgroundColor:"rgba(54, 162, 235, 1)"}]}),l(!1)})()},[]);const[t,e]=H.useState(),[n,s]=H.useState(),[o,r]=H.useState(),[a,l]=H.useState(!0);return A.jsxs("div",{className:"flex",children:[A.jsx(Fr,{from:"/animalChart"}),A.jsxs("div",{className:"w-4/5 px-6 max-sm:w-full max-sm:px-2 relative",children:[A.jsx("h1",{className:"p-4 text-3xl font-bold border-b border-b-gray-300",children:"유기동물 현황"}),A.jsxs("div",{children:[A.jsxs("div",{className:"flex mt-8",children:["  ",A.jsx("div",{className:"w-3/5 h-80",children:t&&A.jsx(H8,{options:i,data:t})}),A.jsx("div",{className:"grow",children:n&&A.jsx(W8,{options:i,data:n})})]}),A.jsxs("div",{className:"pb-10",children:[A.jsx("h1",{className:"my-6 p-4 text-3xl font-bold text-center",children:"연도별 유기동물수"}),A.jsx("div",{className:"h-100",children:o&&A.jsx(z8,{options:i,data:o})})]})]}),a&&A.jsx("div",{className:"absolute top-0 left-0 size-full bg-[#FFFFFF88] flex justify-center pt-40",children:A.jsx("div",{className:"size-40 border-6 border-blue-500 border-t-gray-200 rounded-full animate-spin"})})]})]})}function $8(){RM("유기동물 보호정보");const i=ap(),[t,e]=H.useState([]),[n,s]=H.useState([1,2,3,4,5,6,7,8,9,10]),[o,r]=H.useState(1),[a,l]=H.useState(),[u,h]=H.useState(""),[m,p]=H.useState(""),[v,C]=H.useState(""),[x,k]=H.useState(""),[S,I]=H.useState("memo"),[P,O]=H.useState(""),[D,Y]=H.useState({}),[F,j]=H.useState(),U=["전체","입양가능","개","고양이","기타동물"];H.useEffect(()=>{(async()=>{var le=pp,he=`?serviceKey=${bp}`;he+=`&pageNo=${o}`,he+="&numOfRows=9",he+=`&searchCondition=${u}`,he+=`&searchCondition2=${v}`,he+=`&searchCondition3=${m}`,he+=`&gubun=${x}`,he+=`&${S}=${P}`,console.log(le+he);const N=(await Nt.get(le+he)).data,be=new X2JS().xml_str2json(N);console.log(be);const ue=be.ServiceResult.MsgBody.items;console.log(ue),console.log(Array.isArray(ue)),Array.isArray(ue)?e(ue):e(ue?[ue]:[]);const G=be.ServiceResult.msgHeader.totalPage;l(G);const W=[],Q=10;let ve=Math.floor((o-1)/Q)*Q+1,pe=ve+Q-1;pe>G&&(pe=G);for(let Ce=ve;Ce<=pe;Ce++)W.push(Ce);s(W)})()},[o,D]);const X=()=>{Y({}),r(1)},ae=B=>{j(B),h(""),C(""),p(""),k(""),I("memo"),O(""),B==0||(B==1?p(2):B==2?h(1):B==3?h(2):B==4&&h(3)),Y({}),r(1)},me=()=>{r(1),s([1,2,3,4,5,6,7,8,9,10])},Ae=()=>{r(a)},ze=()=>{const B=Math.floor((o-1)/10)*10+11;B>a||r(B)},we=()=>{if(o<=10)return;const B=Math.floor((o-1)/10)*10;r(B)};return A.jsxs("div",{className:"flex",children:[A.jsx(Fr,{from:"/animalList"}),A.jsxs("div",{className:"w-4/5 px-6 max-sm:w-full max-sm:px-2",children:[A.jsx("h1",{className:"p-4 text-3xl font-bold border-b border-b-gray-300",children:"유기동물 보호정보"}),A.jsx("ul",{className:"w-4/5 max-sm:w-full grid grid-cols-5 m-auto mt-8",children:U.map((B,le)=>A.jsx("li",{onClick:()=>ae(le),className:`py-3 border border-gray-200 text-center font-bold cursor-pointer ${F==le?"bg-primary-500 text-white":"text-gray-700"} `,children:B},le))}),A.jsxs("div",{className:"bg-gray-100 py-6 rounded-lg mt-6",children:[A.jsxs("div",{className:"flex justify-center gap-6 flex-wrap",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-bold pe-2",children:"종류"}),A.jsxs("select",{value:u,onChange:B=>h(B.target.value),className:"bg-white p-2 border border-gray-300",children:[A.jsx("option",{value:"",children:"선택하세요"}),A.jsx("option",{value:"1",children:"개"}),A.jsx("option",{value:"2",children:"고양이"}),A.jsx("option",{value:"3",children:"기타동물"})]})]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-bold pe-2",children:"상태"}),A.jsxs("select",{value:m,onChange:B=>p(B.target.value),className:"bg-white p-2 border border-gray-300",children:[A.jsx("option",{value:"",children:"선택하세요"}),A.jsx("option",{value:"1",children:"공고중"}),A.jsx("option",{value:"2",children:"입양가능"}),A.jsx("option",{value:"3",children:"입양예정"})]})]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-bold pe-2",children:"지역"}),A.jsxs("select",{value:v,onChange:B=>C(B.target.value),className:"bg-white p-2 border border-gray-300",children:[A.jsx("option",{value:"",children:"선택하세요"}),A.jsx("option",{value:"1",children:"동구"}),A.jsx("option",{value:"2",children:"중구"}),A.jsx("option",{value:"3",children:"서구"}),A.jsx("option",{value:"4",children:"유성구"}),A.jsx("option",{value:"5",children:"대덕구"})]})]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-bold pe-2",children:"성별"}),A.jsxs("select",{value:x,onChange:B=>k(B.target.value),className:"bg-white p-2 border border-gray-300",children:[A.jsx("option",{value:"",children:"선택하세요"}),A.jsx("option",{value:"1",children:"암컷"}),A.jsx("option",{value:"2",children:"수컷"})]})]})]}),A.jsxs("div",{className:"flex mt-2 justify-center",children:[A.jsxs("select",{value:S,onChange:B=>I(B.target.value),className:"bg-white p-2 border border-gray-300",children:[A.jsx("option",{value:"memo",children:"--전체--"}),A.jsx("option",{value:"species",children:"품종"}),A.jsx("option",{value:"	regId",children:"동물등록번호"})]}),A.jsx("input",{value:P,onChange:B=>O(B.target.value),className:"bg-white p-2 border border-gray-300 mx-1",type:"text"}),A.jsx("button",{onClick:X,className:"bg-gray-700 text-white px-4",children:"검색"})]})]}),A.jsx("div",{className:"grid grid-cols-3 max-sm:grid-cols-2  gap-6 mt-6",children:t.map(B=>A.jsxs("div",{onClick:()=>i(`/animalDetail?regId= ${B.regId}`),className:"aspect-9/12 group cursor-pointer shadow rounded-xl overflow-hidden",children:[A.jsx("div",{className:"h-3/5 flex justify-center items-center overflow-hidden",children:A.jsx("img",{className:"h-full duration-300 group-hover:scale-125",src:B.filePath?`https://www.daejeon.go.kr/${B.filePath}`:BP,alt:""})}),A.jsxs("div",{className:`h-2/5 pt-2 relative flex flex-col items-center justify-evenly border-t-4 ${m7(B.adoptionStatusCd)}`,children:[A.jsx("span",{className:"font-bold",children:B.species}),A.jsx("span",{className:"text-sm",children:rc(B.gender)}),A.jsx("span",{className:`${f7(B.adoptionStatusCd)} text-white font-bold absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 text-sm px-3 py-2 rounded-4xl`,children:LP(B.adoptionStatusCd)})]})]},B.regId))}),t.length==0?A.jsx("div",{className:"text-center py-10",children:"검색결과가 없습니다."}):null,A.jsxs("ul",{className:"flex gap-1 justify-center my-8 select-none",children:[A.jsx("li",{onClick:me,className:"size-9 bg-gray-100 flex justify-center items-center border border-gray-300",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"#777777",className:"size-5",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.75 4.5-7.5 7.5 7.5 7.5m-6-15L5.25 12l7.5 7.5"})})}),A.jsx("li",{onClick:we,className:"size-9 bg-gray-100 flex justify-center items-center border border-gray-300",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"#777777",className:"size-5",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})})}),n.map(B=>A.jsx("li",{onClick:()=>r(B),className:`size-9 flex justify-center items-center ${o==B?"bg-slate-700 text-white":"border cursor-pointer border-gray-300"}`,children:B},B)),A.jsx("li",{onClick:ze,className:"size-9 bg-gray-100 flex justify-center items-center border border-gray-300",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"#777777",className:"size-5",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})})}),A.jsx("li",{onClick:Ae,className:"size-9 bg-gray-100 flex justify-center items-center border border-gray-300",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"#777777",className:"size-5",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m5.25 4.5 7.5 7.5-7.5 7.5m6-15 7.5 7.5-7.5 7.5"})})})]})]})]})}const G8="/animal-center/assets/error-v8_IavsW.webp";function j8(){return A.jsxs("div",{className:"sm:flex py-8",children:[A.jsx("div",{className:"w-4/12 p-8 max-sm:w-full",children:A.jsx("img",{className:"",src:G8,alt:""})}),A.jsxs("div",{className:"grow p-6 my-8",children:[A.jsx("h1",{className:"sm:mt-10 pb-2 text-xl font-bold text-gray-500",children:"웹페이지를 찾을 수 없습니다."}),A.jsx("h2",{className:"mt-4 mb-2 font-bold text-gray-500",children:"가능성이 높은 원인:"}),A.jsx("p",{className:"ms-2 text-sm text-gray-500",children:"주소가 오타가 있을 수 있습니다."}),A.jsx("p",{className:"ms-2 text-sm text-gray-500",children:"클릭한 링크가 만료된 것일 수 있습니다."})]})]})}function K8(){return H.useEffect(()=>{var i=document.getElementById("map"),t={center:new kakao.maps.LatLng(33.450701,126.570667),level:3},e=new kakao.maps.Map(i,t);navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(h){var m=h.coords.latitude,p=h.coords.longitude,v=new kakao.maps.LatLng(m,p);e.setCenter(v)});var n=new kakao.maps.MapTypeControl;e.addControl(n,kakao.maps.ControlPosition.TOPRIGHT);var s=new kakao.maps.ZoomControl;e.addControl(s,kakao.maps.ControlPosition.RIGHT);var o="https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png",r=new kakao.maps.Size(24,35),a=new kakao.maps.MarkerImage(o,r),l=new kakao.maps.MarkerClusterer({map:e,averageCenter:!0,minLevel:6});(async()=>{const h=await Nt.get("https://cujeong.github.io/MyShop/shop_data.json");console.log(h),console.log(h.data);const m=h.data,p=[];for(let v=0;v<m.length;v++){let C=new kakao.maps.Marker({map:e,position:new kakao.maps.LatLng(m[v].Latitude,m[v].Longitude),title:m[v].name,image:a});p.push(C);let x=`<div style="padding:5px;">${m[v].name}</div>`,k=new kakao.maps.InfoWindow({content:x});kakao.maps.event.addListener(C,"mouseover",function(){k.open(e,C)}),kakao.maps.event.addListener(C,"mouseout",function(){k.close()})}l.addMarkers(p)})()},[]),A.jsxs("div",{className:"flex",children:[A.jsx(Fr,{from:"/petRestaurant"}),A.jsxs("div",{className:"w-4/5 px-6 max-sm:w-full max-sm:px-2",children:[A.jsx("h1",{className:"p-4 text-3xl font-bold border-b border-b-gray-300",children:"반려동물 출입식당"}),A.jsx("div",{className:"w-4/5 aspect-video m-auto my-8 max-sm:w-full",children:A.jsx("div",{id:"map",style:{width:"100%",aspectRatio:"3/2"}})})]})]})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Z8(){const i={resolve:null,promise:null};return i.promise=new Promise(t=>{i.resolve=t}),i}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Y8(i){let t=null;return(...e)=>(t||(t={current:i(...e)}),t.current)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Hn=new Array(256).fill("").map((i,t)=>("0"+t.toString(16)).slice(-2));function J8(){const[i,t,e,n]=crypto.getRandomValues(new Uint32Array(4));return"e"+Hn[i>>0&255]+Hn[i>>8&255]+Hn[i>>16&255]+Hn[i>>24&255]+Hn[t>>0&255]+Hn[t>>8&255]+Hn[t>>16&255]+Hn[t>>24&255]+Hn[e>>0&255]+Hn[e>>8&255]+Hn[e>>16&255]+Hn[e>>24&255]+Hn[n>>0&255]+Hn[n>>8&255]+Hn[n>>16&255]+Hn[n>>24&255]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function X8(i,t){const e=i.extraPlugins||[];return{...i,extraPlugins:[...e,...t.filter(n=>!e.includes(n))]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function IM(i){return!!i&&/^\d+\.\d+\.\d+/.test(i)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function PM(i){return i?["nightly","alpha","internal","nightly-","staging"].some(t=>i.includes(t)):!1}function Q8(i){return IM(i)||PM(i)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function e9(i){if(!IM(i))throw new Error(`Invalid semantic version: ${i||"<blank>"}.`);const[t,e,n]=i.split(".");return{major:Number.parseInt(t,10),minor:Number.parseInt(e,10),patch:Number.parseInt(n,10)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function t9(i){if(PM(i))return 3;const{major:t}=e9(i);switch(!0){case t>=44:return 3;case t>=38:return 2;default:return 1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function n9(){const{CKEDITOR_VERSION:i,CKEDITOR:t}=window;return Q8(i)?{source:t?"cdn":"npm",version:i}:null}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function i9(){const i=n9();return i?t9(i.version):null}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function MM(i,t){switch(t||(t=i9()||void 0),t){case 1:case 2:return i===void 0;case 3:return i==="GPL";default:return!1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function s9(i,t){return function(n){MM(n.config.get("licenseKey"))||n.on("collectUsageData",(s,{setUsageData:o})=>{o(`integration.${i}`,t)})}}var o9=Object.defineProperty,r9=(i,t,e)=>t in i?o9(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,gi=(i,t,e)=>r9(i,typeof t!="symbol"?t+"":t,e);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const VM=class NM{constructor(t,e){gi(this,"_lifecycle"),gi(this,"_element"),gi(this,"_releaseLock",null),gi(this,"_value",null),gi(this,"_afterMountCallbacks",[]),gi(this,"_state",{destroyedBeforeInitialization:!1,mountingInProgress:null}),gi(this,"release",Y8(()=>{const{_releaseLock:n,_state:s,_element:o,_lifecycle:r}=this;s.mountingInProgress?s.mountingInProgress.then(()=>r.unmount({element:o,mountResult:this.value})).catch(a=>{console.error("Semaphore unmounting error:",a)}).then(n.resolve).then(()=>{this._value=null}):(s.destroyedBeforeInitialization=!0,n.resolve())})),this._element=t,this._lifecycle=e,this._lock()}get value(){return this._value}unsafeSetValue(t){this._value=t,this._afterMountCallbacks.forEach(e=>e(t)),this._afterMountCallbacks=[]}runAfterMount(t){const{_value:e,_afterMountCallbacks:n}=this;e?t(e):n.push(t)}_lock(){const{_semaphores:t}=NM,{_state:e,_element:n,_lifecycle:s}=this,o=t.get(n)||Promise.resolve(null),r=Z8();this._releaseLock=r;const a=o.then(()=>e.destroyedBeforeInitialization?Promise.resolve(void 0):(e.mountingInProgress=s.mount().then(l=>(l&&this.unsafeSetValue(l),l)),e.mountingInProgress)).then(async l=>{l&&s.afterMount&&await s.afterMount({element:n,mountResult:l})}).then(()=>r.promise).catch(l=>{console.error("Semaphore mounting error:",l)}).then(()=>{t.get(n)===a&&t.delete(n)});t.set(n,a)}};gi(VM,"_semaphores",new Map);let a9=VM;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const l9="$__CKEditorReactContextMetadata";function c9(i,t){return{...t,[l9]:i}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const u9=So.createContext(null),d9=i=>!!i&&typeof i=="object"&&"status"in i&&["initializing","initialized","error"].includes(i.status),DM=i=>t=>d9(t)&&t.status===i,rS=DM("initializing"),h9=i=>DM("initialized")(i)&&i.watchdog.state==="ready";/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const f9=s9("react",{version:"9.5.0",frameworkVersion:So.version});/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function m9(i){return MM(i.licenseKey)?i:X8(i,[f9])}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const kw="Lock from React integration (@ckeditor/ckeditor5-react)";class OM extends So.Component{constructor(t){super(t),gi(this,"domContainer",So.createRef()),gi(this,"editorSemaphore",null),this._checkVersion()}_checkVersion(){const{CKEDITOR_VERSION:t}=window;if(!t)return console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.');const[e]=t.split(".").map(Number);e>=42||t.startsWith("0.0.0")||console.warn("The <CKEditor> component requires using CKEditor 5 in version 42+ or nightly build.")}get _semaphoreValue(){const{editorSemaphore:t}=this;return t?t.value:null}get watchdog(){const{_semaphoreValue:t}=this;return t?t.watchdog:null}get editor(){const{_semaphoreValue:t}=this;return t?t.instance:null}shouldComponentUpdate(t){const{props:e,editorSemaphore:n}=this;return t.id!==e.id||t.disableWatchdog!==e.disableWatchdog?!0:(n&&(n.runAfterMount(({instance:s})=>{this._shouldUpdateEditorData(e,t,s)&&s.data.set(t.data)}),"disabled"in t&&n.runAfterMount(({instance:s})=>{t.disabled?s.enableReadOnlyMode(kw):s.disableReadOnlyMode(kw)})),!1)}componentDidMount(){rS(this.context)||this._initLifeCycleSemaphore()}componentDidUpdate(){rS(this.context)||this._initLifeCycleSemaphore()}componentWillUnmount(){this._unlockLifeCycleSemaphore()}_unlockLifeCycleSemaphore(){this.editorSemaphore&&(this.editorSemaphore.release(),this.editorSemaphore=null)}_initLifeCycleSemaphore(){this._unlockLifeCycleSemaphore(),this.editorSemaphore=new a9(this.domContainer.current,{mount:async()=>this._initializeEditor(),afterMount:({mountResult:t})=>{const{onReady:e}=this.props;e&&this.domContainer.current!==null&&e(t.instance)},unmount:async({element:t,mountResult:e})=>{const{onAfterDestroy:n}=this.props;try{await this._destroyEditor(e),t.innerHTML=""}finally{n&&n(e.instance)}}})}render(){return So.createElement("div",{ref:this.domContainer})}async _initializeEditor(){if(this.props.disableWatchdog)return{instance:await this._createEditor(this.domContainer.current,this._getConfig()),watchdog:null};const t=h9(this.context)?new g9(this.context.watchdog):new this.props.editor.EditorWatchdog(this.props.editor,this.props.watchdogConfig),e={current:0};return t.setCreator(async(n,s)=>{var o;const{editorSemaphore:r}=this,{onAfterDestroy:a}=this.props;e.current>0&&a&&((o=r==null?void 0:r.value)!=null&&o.instance)&&a(r.value.instance);const l=await this._createEditor(n,s);return r&&e.current>0&&(r.unsafeSetValue({instance:l,watchdog:t}),setTimeout(()=>{this.props.onReady&&this.props.onReady(t.editor)})),e.current++,l}),t.on("error",(n,{error:s,causesRestart:o})=>{(this.props.onError||console.error)(s,{phase:"runtime",willEditorRestart:o})}),await t.create(this.domContainer.current,this._getConfig()).catch(n=>{(this.props.onError||console.error)(n,{phase:"initialization",willEditorRestart:!1})}),{watchdog:t,instance:t.editor}}_createEditor(t,e){const{contextItemMetadata:n}=this.props;return n&&(e=c9(n,e)),this.props.editor.create(t,m9(e)).then(s=>{if("disabled"in this.props){/* istanbul ignore else -- @preserve */this.props.disabled&&s.enableReadOnlyMode(kw)}const o=s.model.document,r=s.editing.view.document;return o.on("change:data",a=>{/* istanbul ignore else -- @preserve */this.props.onChange&&this.props.onChange(a,s)}),r.on("focus",a=>{/* istanbul ignore else -- @preserve */this.props.onFocus&&this.props.onFocus(a,s)}),r.on("blur",a=>{/* istanbul ignore else -- @preserve */this.props.onBlur&&this.props.onBlur(a,s)}),s})}async _destroyEditor(t){const{watchdog:e,instance:n}=t;return new Promise((s,o)=>{/* istanbul ignore next -- @preserve */setTimeout(async()=>{try{if(e)return await e.destroy(),s();if(n)return await n.destroy(),s();s()}catch(r){console.error(r),o(r)}})})}_shouldUpdateEditorData(t,e,n){return!(t.data===e.data||n.data.get()===e.data)}_getConfig(){const t=this.props.config||{};return this.props.data&&t.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `content` property. The config value takes precedence over `content` property and will be used when both are specified."),{...t,initialData:t.initialData||this.props.data||""}}}gi(OM,"contextType",u9);class g9{constructor(t){gi(this,"_contextWatchdog"),gi(this,"_id"),gi(this,"_creator"),this._contextWatchdog=t,this._id=J8()}setCreator(t){this._creator=t}create(t,e){return this._contextWatchdog.add({sourceElementOrData:t,config:e,creator:this._creator,id:this._id,type:"editor"})}on(t,e){this._contextWatchdog.on("itemError",(n,{itemId:s,error:o})=>{s===this._id&&e(null,{error:o,causesRestart:void 0})})}destroy(){return this._contextWatchdog.state==="ready"?this._contextWatchdog.remove(this._id):Promise.resolve()}get editor(){return this._contextWatchdog.getItem(this._id)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function LM(...i){return t=>{i.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}const p9=H.memo(H.forwardRef(({id:i,semaphore:t,rootName:e},n)=>{const s=H.useRef(null);return H.useEffect(()=>{let o,r;return t.runAfterMount(({instance:a})=>{if(!s.current)return;r=a;const{ui:l,model:u}=r,h=u.document.getRoot(e);h&&r.ui.getEditableElement(e)&&r.detachEditable(h),o=l.view.createEditable(e,s.current),l.addEditable(o),a.editing.view.forceRender()}),()=>{if(r&&r.state!=="destroyed"&&s.current){const a=r.model.document.getRoot(e);/* istanbul ignore else -- @preserve */a&&r.detachEditable(a)}}},[t.revision]),So.createElement("div",{key:t.revision,id:i,ref:LM(n,s)})}));p9.displayName="EditorEditable";const b9=H.forwardRef(({editor:i},t)=>{const e=H.useRef(null);return H.useEffect(()=>{const n=e.current;if(!i||!n)return;const s=i.ui.view.toolbar.element;return n.appendChild(s),()=>{n.contains(s)&&n.removeChild(s)}},[i&&i.id]),So.createElement("div",{ref:LM(e,t)})});b9.displayName="EditorToolbarWrapper";function _9(i,t){const e={};for(let n=0;n<i.length;n++){const s=i[n],o=t(s);Object.hasOwn(e,o)||(e[o]=[]),e[o].push(s)}return e}function Xl(i){return i}function gg(){}function m0(i){return i==null||typeof i!="object"&&typeof i!="function"}function g0(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function p0(i){if(m0(i))return i;if(Array.isArray(i)||g0(i)||i instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&i instanceof SharedArrayBuffer)return i.slice(0);const t=Object.getPrototypeOf(i),e=t.constructor;if(i instanceof Date||i instanceof Map||i instanceof Set)return new e(i);if(i instanceof RegExp){const n=new e(i);return n.lastIndex=i.lastIndex,n}if(i instanceof DataView)return new e(i.buffer.slice(0));if(i instanceof Error){const n=new e(i.message);return n.stack=i.stack,n.name=i.name,n.cause=i.cause,n}if(typeof File<"u"&&i instanceof File)return new e([i],i.name,{type:i.type,lastModified:i.lastModified});if(typeof i=="object"){const n=Object.create(t);return Object.assign(n,i)}return i}function aS(i){if(!i||typeof i!="object")return!1;const t=Object.getPrototypeOf(i);return t===null||t===Object.prototype||Object.getPrototypeOf(t)===null?Object.prototype.toString.call(i)==="[object Object]":!1}function Ly(i){return typeof i=="object"&&i!==null}function pg(i){return Object.getOwnPropertySymbols(i).filter(t=>Object.prototype.propertyIsEnumerable.call(i,t))}function bg(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(i)}const BM="[object RegExp]",b0="[object String]",_0="[object Number]",w0="[object Boolean]",_g="[object Arguments]",FM="[object Symbol]",UM="[object Date]",zM="[object Map]",HM="[object Set]",WM="[object Array]",w9="[object Function]",qM="[object ArrayBuffer]",Hm="[object Object]",y9="[object Error]",$M="[object DataView]",GM="[object Uint8Array]",jM="[object Uint8ClampedArray]",KM="[object Uint16Array]",ZM="[object Uint32Array]",v9="[object BigUint64Array]",YM="[object Int8Array]",JM="[object Int16Array]",XM="[object Int32Array]",C9="[object BigInt64Array]",QM="[object Float32Array]",e5="[object Float64Array]";function T9(i,t){return ac(i,void 0,i,new Map,t)}function ac(i,t,e,n=new Map,s=void 0){const o=s==null?void 0:s(i,t,e,n);if(o!=null)return o;if(m0(i))return i;if(n.has(i))return n.get(i);if(Array.isArray(i)){const r=new Array(i.length);n.set(i,r);for(let a=0;a<i.length;a++)r[a]=ac(i[a],a,e,n,s);return Object.hasOwn(i,"index")&&(r.index=i.index),Object.hasOwn(i,"input")&&(r.input=i.input),r}if(i instanceof Date)return new Date(i.getTime());if(i instanceof RegExp){const r=new RegExp(i.source,i.flags);return r.lastIndex=i.lastIndex,r}if(i instanceof Map){const r=new Map;n.set(i,r);for(const[a,l]of i)r.set(a,ac(l,a,e,n,s));return r}if(i instanceof Set){const r=new Set;n.set(i,r);for(const a of i)r.add(ac(a,void 0,e,n,s));return r}if(typeof Buffer<"u"&&Buffer.isBuffer(i))return i.subarray();if(g0(i)){const r=new(Object.getPrototypeOf(i)).constructor(i.length);n.set(i,r);for(let a=0;a<i.length;a++)r[a]=ac(i[a],a,e,n,s);return r}if(i instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&i instanceof SharedArrayBuffer)return i.slice(0);if(i instanceof DataView){const r=new DataView(i.buffer.slice(0),i.byteOffset,i.byteLength);return n.set(i,r),wa(r,i,e,n,s),r}if(typeof File<"u"&&i instanceof File){const r=new File([i],i.name,{type:i.type});return n.set(i,r),wa(r,i,e,n,s),r}if(i instanceof Blob){const r=new Blob([i],{type:i.type});return n.set(i,r),wa(r,i,e,n,s),r}if(i instanceof Error){const r=new i.constructor;return n.set(i,r),r.message=i.message,r.name=i.name,r.stack=i.stack,r.cause=i.cause,wa(r,i,e,n,s),r}if(typeof i=="object"&&x9(i)){const r=Object.create(Object.getPrototypeOf(i));return n.set(i,r),wa(r,i,e,n,s),r}return i}function wa(i,t,e=i,n,s){const o=[...Object.keys(t),...pg(t)];for(let r=0;r<o.length;r++){const a=o[r],l=Object.getOwnPropertyDescriptor(i,a);(l==null||l.writable)&&(i[a]=ac(t[a],a,e,n,s))}}function x9(i){switch(bg(i)){case _g:case WM:case qM:case $M:case w0:case UM:case QM:case e5:case YM:case JM:case XM:case zM:case _0:case Hm:case BM:case HM:case b0:case FM:case GM:case jM:case KM:case ZM:return!0;default:return!1}}function t5(i,t){return i===t||Number.isNaN(i)&&Number.isNaN(t)}function n5(i,t,e){return cd(i,t,void 0,void 0,void 0,void 0,e)}function cd(i,t,e,n,s,o,r){const a=r(i,t,e,n,s,o);if(a!==void 0)return a;if(typeof i==typeof t)switch(typeof i){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return i===t;case"number":return i===t||Object.is(i,t);case"function":return i===t;case"object":return vd(i,t,o,r)}return vd(i,t,o,r)}function vd(i,t,e,n){if(Object.is(i,t))return!0;let s=bg(i),o=bg(t);if(s===_g&&(s=Hm),o===_g&&(o=Hm),s!==o)return!1;switch(s){case b0:return i.toString()===t.toString();case _0:{const l=i.valueOf(),u=t.valueOf();return t5(l,u)}case w0:case UM:case FM:return Object.is(i.valueOf(),t.valueOf());case BM:return i.source===t.source&&i.flags===t.flags;case w9:return i===t}e=e??new Map;const r=e.get(i),a=e.get(t);if(r!=null&&a!=null)return r===t;e.set(i,t),e.set(t,i);try{switch(s){case zM:{if(i.size!==t.size)return!1;for(const[l,u]of i.entries())if(!t.has(l)||!cd(u,t.get(l),l,i,t,e,n))return!1;return!0}case HM:{if(i.size!==t.size)return!1;const l=Array.from(i.values()),u=Array.from(t.values());for(let h=0;h<l.length;h++){const m=l[h],p=u.findIndex(v=>cd(m,v,void 0,i,t,e,n));if(p===-1)return!1;u.splice(p,1)}return!0}case WM:case GM:case jM:case KM:case ZM:case v9:case YM:case JM:case XM:case C9:case QM:case e5:{if(typeof Buffer<"u"&&Buffer.isBuffer(i)!==Buffer.isBuffer(t)||i.length!==t.length)return!1;for(let l=0;l<i.length;l++)if(!cd(i[l],t[l],l,i,t,e,n))return!1;return!0}case qM:return i.byteLength!==t.byteLength?!1:vd(new Uint8Array(i),new Uint8Array(t),e,n);case $M:return i.byteLength!==t.byteLength||i.byteOffset!==t.byteOffset?!1:vd(new Uint8Array(i),new Uint8Array(t),e,n);case y9:return i.name===t.name&&i.message===t.message;case Hm:{if(!(vd(i.constructor,t.constructor,e,n)||aS(i)&&aS(t)))return!1;const u=[...Object.keys(i),...pg(i)],h=[...Object.keys(t),...pg(t)];if(u.length!==h.length)return!1;for(let m=0;m<u.length;m++){const p=u[m],v=i[p];if(!Object.hasOwn(t,p))return!1;const C=t[p];if(!cd(v,C,p,i,t,e,n))return!1}return!0}default:return!1}}finally{e.delete(i),e.delete(t)}}function wg(i,t){return n5(i,t,gg)}function yg(i){return typeof i=="function"}function k9(i){return Number.isSafeInteger(i)&&i>=0}function E9(i){return i!=null&&typeof i!="function"&&k9(i.length)}function i5(i){switch(typeof i){case"number":case"symbol":return!1;case"string":return i.includes(".")||i.includes("[")||i.includes("]")}}function s5(i){return Object.is(i,-0)?"-0":i.toString()}function y0(i){const t=[],e=i.length;if(e===0)return t;let n=0,s="",o="",r=!1;for(i.charCodeAt(0)===46&&(t.push(""),n++);n<e;){const a=i[n];o?a==="\\"&&n+1<e?(n++,s+=i[n]):a===o?o="":s+=a:r?a==='"'||a==="'"?o=a:a==="]"?(r=!1,t.push(s),s=""):s+=a:a==="["?(r=!0,s&&(t.push(s),s="")):a==="."?s&&(t.push(s),s=""):s+=a,n++}return s&&t.push(s),t}function Ir(i,t,e){if(i==null)return e;switch(typeof t){case"string":{const n=i[t];return n===void 0?i5(t)?Ir(i,y0(t),e):e:n}case"number":case"symbol":{typeof t=="number"&&(t=s5(t));const n=i[t];return n===void 0?e:n}default:{if(Array.isArray(t))return S9(i,t,e);Object.is(t==null?void 0:t.valueOf(),-0)?t="-0":t=String(t);const n=i[t];return n===void 0?e:n}}}function S9(i,t,e){if(t.length===0)return e;let n=i;for(let s=0;s<t.length;s++){if(n==null)return e;n=n[t[s]]}return n===void 0?e:n}function A9(i){return function(t){return Ir(t,i)}}function is(i){return i!==null&&(typeof i=="object"||typeof i=="function")}function Tp(i,t){return T9(i,(e,n,s,o)=>{const r=t==null?void 0:t(e,n,s,o);if(r!=null)return r;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case _0:case b0:case w0:{const a=new i.constructor(i==null?void 0:i.valueOf());return wa(a,i),a}case _g:{const a={};return wa(a,i),a.length=i.length,a[Symbol.iterator]=i[Symbol.iterator],a}default:return}})}function Oi(i){return Tp(i)}const R9=/^(?:0|[1-9]\d*)$/;function I9(i,t=Number.MAX_SAFE_INTEGER){switch(typeof i){case"number":return Number.isInteger(i)&&i>=0&&i<t;case"symbol":return!1;case"string":return R9.test(i)}}function lS(i){return i!==null&&typeof i=="object"&&bg(i)==="[object Arguments]"}function P9(i){return typeof i=="symbol"||i instanceof Symbol}function M9(i){return P9(i)?NaN:Number(i)}function V9(i){return i?(i=M9(i),i===1/0||i===-1/0?(i<0?-1:1)*Number.MAX_VALUE:i===i?i:0):i===0?i:0}function N9(i){const t=V9(i),e=t%1;return e?t-e:t}function cS(i){return typeof i=="string"||i instanceof String}function o5(i,t,e){const n=Array.isArray(t)?t:typeof t=="string"?y0(t):[t];let s=i;for(let r=0;r<n.length-1;r++){const a=n[r],l=n[r+1];s[a]==null&&(s[a]=I9(l)?[]:{}),s=s[a]}const o=n[n.length-1];return s[o]=e,i}function D9(i,t,{signal:e,edges:n}={}){let s,o=null;const r=n!=null&&n.includes("leading"),a=n==null||n.includes("trailing"),l=()=>{o!==null&&(i.apply(s,o),s=void 0,o=null)},u=()=>{a&&l(),v()};let h=null;const m=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,u()},t)},p=()=>{h!==null&&(clearTimeout(h),h=null)},v=()=>{p(),s=void 0,o=null},C=()=>{p(),l()},x=function(...k){if(e!=null&&e.aborted)return;s=this,o=k;const S=h==null;m(),r&&S&&l()};return x.schedule=m,x.cancel=v,x.flush=C,e==null||e.addEventListener("abort",v,{once:!0}),x}function ss(i,t=0,e={}){typeof e!="object"&&(e={});const{signal:n,leading:s=!1,trailing:o=!0,maxWait:r}=e,a=Array(2);s&&(a[0]="leading"),o&&(a[1]="trailing");let l,u=null;const h=D9(function(...v){l=i.apply(this,v),u=null},t,{signal:n,edges:a}),m=function(...v){if(r!=null){if(u===null)u=Date.now();else if(Date.now()-u>=r)return l=i.apply(this,v),u=Date.now(),h.cancel(),h.schedule(),l}return h.apply(this,v),l},p=()=>(h.flush(),l);return m.cancel=h.cancel,m.flush=p,m}function vc(i,t=0,e={}){typeof e!="object"&&(e={});const{leading:n=!0,trailing:s=!0,signal:o}=e;return ss(i,t,{leading:n,trailing:s,signal:o,maxWait:t})}function v0(i){if(i==null)return"";if(Array.isArray(i))return i.map(v0).join(",");const t=String(i);return t==="0"&&Object.is(Number(i),-0)?"-0":t}function O9(i){return typeof Buffer<"u"&&Buffer.isBuffer(i)}function L9(i){const t=i==null?void 0:i.constructor,e=typeof t=="function"?t.prototype:Object.prototype;return i===e}function r5(i){return g0(i)}function B9(i,t){if(i=N9(i),i<1||!Number.isSafeInteger(i))return[];const e=new Array(i);for(let n=0;n<i;n++)e[n]=typeof t=="function"?t(n):n;return e}function F9(i){if(i==null)return[];switch(typeof i){case"object":case"function":return E9(i)?z9(i):L9(i)?U9(i):vg(i);default:return vg(Object(i))}}function vg(i){const t=[];for(const e in i)t.push(e);return t}function U9(i){return vg(i).filter(e=>e!=="constructor")}function z9(i){const t=B9(i.length,n=>`${n}`),e=new Set(t);return O9(i)&&(e.add("offset"),e.add("parent")),r5(i)&&(e.add("buffer"),e.add("byteLength"),e.add("byteOffset")),[...t,...vg(i).filter(n=>!e.has(n))]}function a5(i,...t){for(let e=0;e<t.length;e++)H9(i,t[e]);return i}function H9(i,t){const e=F9(t);for(let n=0;n<e.length;n++){const s=e[n];t5(i[s],t[s])||(i[s]=t[s])}}function uS(i,t){const e={},n=Object.keys(i);for(let s=0;s<n.length;s++){const o=n[s],r=i[o];e[o]=t(r,o,i)}return e}function W9(i,t){switch(t=t??Xl,typeof t){case"string":case"symbol":case"number":case"object":return uS(i,A9(t));case"function":return uS(i,t)}}function zs(i){var e;if(typeof i!="object"||i==null)return!1;if(Object.getPrototypeOf(i)===null)return!0;if(Object.prototype.toString.call(i)!=="[object Object]"){const n=i[Symbol.toStringTag];return n==null||!((e=Object.getOwnPropertyDescriptor(i,Symbol.toStringTag))!=null&&e.writable)?!1:i.toString()===`[object ${n}]`}let t=i;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(i)===t}function q9(i,...t){const e=t.slice(0,-1),n=t[t.length-1];let s=i;for(let o=0;o<e.length;o++){const r=e[o];s=Wm(s,r,n,new Map)}return s}function Wm(i,t,e,n){if(m0(i)&&(i=Object(i)),t==null||typeof t!="object")return i;if(n.has(t))return p0(n.get(t));if(n.set(t,i),Array.isArray(t)){t=t.slice();for(let o=0;o<t.length;o++)t[o]=t[o]??void 0}const s=[...Object.keys(t),...pg(t)];for(let o=0;o<s.length;o++){const r=s[o];let a=t[r],l=i[r];if(lS(a)&&(a={...a}),lS(l)&&(l={...l}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=Oi(a)),Array.isArray(a))if(typeof l=="object"&&l!=null){const h=[],m=Reflect.ownKeys(l);for(let p=0;p<m.length;p++){const v=m[p];h[v]=l[v]}l=h}else l=[];const u=e(l,a,r,i,t,n);u!=null?i[r]=u:Array.isArray(a)||Ly(l)&&Ly(a)?i[r]=Wm(l,a,e,n):l==null&&zs(a)?i[r]=Wm({},a,e,n):l==null&&r5(a)?i[r]=Oi(a):(l===void 0||a!==void 0)&&(i[r]=a)}return i}function C0(i,...t){return q9(i,...t,gg)}function $9(i,t){if(i==null)return!0;switch(typeof t){case"symbol":case"number":case"object":{if(Array.isArray(t))return dS(i,t);if(typeof t=="number"?t=s5(t):typeof t=="object"&&(Object.is(t==null?void 0:t.valueOf(),-0)?t="-0":t=String(t)),(i==null?void 0:i[t])===void 0)return!0;try{return delete i[t],!0}catch{return!1}}case"string":{if((i==null?void 0:i[t])===void 0&&i5(t))return dS(i,y0(t));try{return delete i[t],!0}catch{return!1}}}}function dS(i,t){const e=Ir(i,t.slice(0,-1),i),n=t[t.length-1];if((e==null?void 0:e[n])===void 0)return!0;try{return delete e[n],!0}catch{return!1}}function Pr(i){return Ly(i)&&i.nodeType===1&&!zs(i)}function hS(i,t){if(!Number.isInteger(i)||i<0)throw new Error("n must be a non-negative integer.");let e=0;return(...n)=>{if(++e>=i)return t(...n)}}function By(i,t,e=gg){return typeof e!="function"&&(e=gg),n5(i,t,(...n)=>{const s=e(...n);if(s!==void 0)return!!s;if(i instanceof Map&&t instanceof Map||i instanceof Set&&t instanceof Set)return By(Array.from(i),Array.from(t),hS(2,e))})}function G9(i){return i.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}function T0(i){return G9(v0(i))}function j9(i){return i.substring(0,1).toUpperCase()+i.substring(1)}function K9(i){return j9(v0(i))}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let Fy;try{Fy={window,document}}catch{/* istanbul ignore next -- @preserve */Fy={window:{},document:{}}}var de=Fy;function Z9(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const da=Z9(),Se={isMac:l5(da),isWindows:Y9(da),isGecko:J9(da),isSafari:X9(da),isiOS:Q9(da),isAndroid:eH(da),isBlink:tH(da),get isMediaForcedColors(){return iH()},features:{isRegExpUnicodePropertySupported:nH()}};function l5(i){return i.indexOf("macintosh")>-1}function Y9(i){return i.indexOf("windows")>-1}function J9(i){return!!i.match(/gecko\/\d+/)}function X9(i){return i.indexOf(" applewebkit/")>-1&&i.indexOf("chrome")===-1}function Q9(i){return!!i.match(/iphone|ipad/i)||l5(i)&&navigator.maxTouchPoints>0}function eH(i){return i.indexOf("android")>-1}function tH(i){return i.indexOf("chrome/")>-1&&i.indexOf("edge/")<0}function nH(){let i=!1;try{i="ć".search(new RegExp("[\\p{L}]","u"))===0}catch{}return i}function iH(){return de.window.matchMedia?de.window.matchMedia("(forced-colors: active)").matches:!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function c5(i,t,e,n){e=e||function(l,u){return l===u};const s=Array.isArray(i)?i:Array.prototype.slice.call(i),o=Array.isArray(t)?t:Array.prototype.slice.call(t),r=sH(s,o,e);return n?rH(r,o.length):oH(o,r)}function sH(i,t,e){const n=fS(i,t,e);if(n===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const s=mS(i,n),o=mS(t,n),r=fS(s,o,e),a=i.length-r,l=t.length-r;return{firstIndex:n,lastIndexOld:a,lastIndexNew:l}}function fS(i,t,e){for(let n=0;n<Math.max(i.length,t.length);n++)if(i[n]===void 0||t[n]===void 0||!e(i[n],t[n]))return n;return-1}function mS(i,t){return i.slice(t).reverse()}function oH(i,t){const e=[],{firstIndex:n,lastIndexOld:s,lastIndexNew:o}=t;return o-n>0&&e.push({index:n,type:"insert",values:i.slice(n,o)}),s-n>0&&e.push({index:n+(o-n),type:"delete",howMany:s-n}),e}function rH(i,t){const{firstIndex:e,lastIndexOld:n,lastIndexNew:s}=i;if(e===-1)return Array(t).fill("equal");let o=[];return e>0&&(o=o.concat(Array(e).fill("equal"))),s-e>0&&(o=o.concat(Array(s-e).fill("insert"))),n-e>0&&(o=o.concat(Array(n-e).fill("delete"))),s<t&&(o=o.concat(Array(t-s).fill("equal"))),o}function pc(i,t,e){e=e||function(x,k){return x===k};const n=i.length,s=t.length;if(n>200||s>200||n+s>300)return pc.fastDiff(i,t,e,!0);let o,r;if(s<n){const x=i;i=t,t=x,o="delete",r="insert"}else o="insert",r="delete";const a=i.length,l=t.length,u=l-a,h={},m={};function p(x){const k=(m[x-1]!==void 0?m[x-1]:-1)+1,S=m[x+1]!==void 0?m[x+1]:-1,I=k>S?-1:1;h[x+I]&&(h[x]=h[x+I].slice(0)),h[x]||(h[x]=[]),h[x].push(k>S?o:r);let P=Math.max(k,S),O=P-x;for(;O<a&&P<l&&e(i[O],t[P]);)O++,P++,h[x].push("equal");return P}let v=0,C;do{for(C=-v;C<u;C++)m[C]=p(C);for(C=u+v;C>u;C--)m[C]=p(C);m[u]=p(u),v++}while(m[u]!==l);return h[u].slice(1)}pc.fastDiff=c5;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function gS(){return function i(){i.called=!0}}class Mo{constructor(t,e){_(this,"source");_(this,"name");_(this,"path");_(this,"stop");_(this,"off");_(this,"return");this.source=t,this.name=e,this.path=[],this.stop=gS(),this.off=gS()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Wn=new Array(256).fill("").map((i,t)=>("0"+t.toString(16)).slice(-2));function si(){const[i,t,e,n]=crypto.getRandomValues(new Uint32Array(4));return"e"+Wn[i>>0&255]+Wn[i>>8&255]+Wn[i>>16&255]+Wn[i>>24&255]+Wn[t>>0&255]+Wn[t>>8&255]+Wn[t>>16&255]+Wn[t>>24&255]+Wn[e>>0&255]+Wn[e>>8&255]+Wn[e>>16&255]+Wn[e>>24&255]+Wn[n>>0&255]+Wn[n>>8&255]+Wn[n>>16&255]+Wn[n>>24&255]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Sa={get(i="normal"){return typeof i!="number"?this[i]||this.normal:i},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function u5(i,t){const e=Sa.get(t.priority);let n=0,s=i.length;for(;n<s;){const o=n+s>>1;Sa.get(i[o].priority)<e?s=o:n=o+1}i.splice(n,0,t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const aH="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class V extends Error{constructor(e,n,s){super(cH(e,s));_(this,"context");_(this,"data");this.name="CKEditorError",this.context=n,this.data=s}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,n){if(e.is&&e.is("CKEditorError"))throw e;const s=new V(e.message,n);throw s.stack=e.stack,s}}function Ze(i,t){console.warn(...h5(i,t))}function lH(i,t){console.error(...h5(i,t))}function d5(i){return`
Read more: ${aH}#error-${i}`}function cH(i,t){const e=new WeakSet,s=t?` ${JSON.stringify(t,(r,a)=>{if(typeof a=="object"&&a!==null){if(e.has(a))return`[object ${a.constructor.name}]`;e.add(a)}return a})}`:"",o=d5(i);return i+s+o}function h5(i,t){const e=d5(i);return t?[i,t,e]:[i,e]}const f5="45.1.0",uH=new Date(2025,4,14);/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new V("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=f5;const Ql=Symbol("listeningTo"),Uy=Symbol("emitterId"),mo=Symbol("delegations"),m5=Tt(Object);function Tt(i){if(!i)return m5;class t extends i{on(n,s,o){this.listenTo(this,n,s,o)}once(n,s,o){let r=!1;const a=(l,...u)=>{r||(r=!0,l.off(),s.call(this,l,...u))};this.listenTo(this,n,a,o)}off(n,s){this.stopListening(this,n,s)}listenTo(n,s,o,r={}){let a,l;this[Ql]||(this[Ql]={});const u=this[Ql];Ew(n)||g5(n);const h=Ew(n);(a=u[h])||(a=u[h]={emitter:n,callbacks:{}}),(l=a.callbacks[s])||(l=a.callbacks[s]=[]),l.push(o),gH(this,n,s,o,r)}stopListening(n,s,o){const r=this[Ql];let a=n&&Ew(n);const l=r&&a?r[a]:void 0,u=l&&s?l.callbacks[s]:void 0;if(!(!r||n&&!l||s&&!u))if(o)Sw(this,n,s,o),u.indexOf(o)!==-1&&(u.length===1?delete l.callbacks[s]:Sw(this,n,s,o));else if(u){for(;o=u.pop();)Sw(this,n,s,o);delete l.callbacks[s]}else if(l){for(s in l.callbacks)this.stopListening(n,s);delete r[a]}else{for(a in r)this.stopListening(r[a].emitter);delete this[Ql]}}fire(n,...s){try{const o=n instanceof Mo?n:new Mo(this,n),r=o.name;let a=mH(this,r);if(o.path.push(this),a){a=a.slice();for(let u=0;u<a.length;u++){const h=a[u].callback;if(h.call(this,o,...s),o.off.called&&(delete o.off.called,this._removeEventListener(r,h)),o.stop.called)break}}const l=this[mo];if(l){const u=l.get(r),h=l.get("*");u&&pS(u,o,s),h&&pS(h,o,s)}return o.return}catch(o){/* istanbul ignore next -- @preserve */V.rethrowUnexpectedError(o,this)}}delegate(...n){return{to:(s,o)=>{this[mo]||(this[mo]=new Map),n.forEach(r=>{const a=this[mo].get(r);a?a.set(s,o):this[mo].set(r,new Map([[s,o]]))})}}}stopDelegating(n,s){if(this[mo])if(!n)this[mo].clear();else if(!s)this[mo].delete(n);else{const o=this[mo].get(n);o&&o.delete(s)}}_addEventListener(n,s,o){fH(this,n);const r=zy(this,n),a=Sa.get(o.priority),l={callback:s,priority:a};for(const u of r)u5(u,l)}_removeEventListener(n,s){const o=zy(this,n);for(const r of o)for(let a=0;a<r.length;a++)r[a].callback==s&&(r.splice(a,1),a--)}}return t}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(i=>{Tt[i]=m5.prototype[i]});function dH(i,t){const e=i[Ql];return e&&e[t]?e[t].emitter:null}function g5(i,t){i[Uy]||(i[Uy]=t||si())}function Ew(i){return i[Uy]}function p5(i){return i._events||Object.defineProperty(i,"_events",{value:{}}),i._events}function hH(){return{callbacks:[],childEvents:[]}}function fH(i,t){const e=p5(i);if(e[t])return;let n=t,s=null;const o=[];for(;n!==""&&!e[n];)e[n]=hH(),o.push(e[n]),s&&e[n].childEvents.push(s),s=n,n=n.substr(0,n.lastIndexOf(":"));if(n!==""){for(const r of o)r.callbacks=e[n].callbacks.slice();e[n].childEvents.push(s)}}function zy(i,t){const e=p5(i)[t];if(!e)return[];let n=[e.callbacks];for(let s=0;s<e.childEvents.length;s++){const o=zy(i,e.childEvents[s]);n=n.concat(o)}return n}function mH(i,t){if(!i._events)return null;let e=t;do{const n=i._events[e];if(n&&n.callbacks&&n.callbacks.length)return n.callbacks;const s=e.lastIndexOf(":");e=s>-1?e.substring(0,s):""}while(e);return null}function pS(i,t,e){for(let[n,s]of i){s?typeof s=="function"&&(s=s(t.name)):s=t.name;const o=new Mo(t.source,s);o.path=[...t.path],n.fire(o,...e)}}function gH(i,t,e,n,s){t._addEventListener?t._addEventListener(e,n,s):i._addEventListener.call(t,e,n,s)}function Sw(i,t,e,n){t._removeEventListener?t._removeEventListener(e,n):i._removeEventListener.call(t,e,n)}const Cd=Symbol("observableProperties"),jd=Symbol("boundObservables"),Td=Symbol("boundProperties"),ha=Symbol("decoratedMethods"),bS=Symbol("decoratedOriginal"),b5=_t(Tt());function _t(i){var e,n,s,o,r;if(!i)return b5;class t extends(r=i,o=Cd,s=ha,n=Td,e=jd,r){constructor(){super(...arguments);_(this,o);_(this,s);_(this,n);_(this,e)}set(u,h){if(is(u)){Object.keys(u).forEach(p=>{this.set(p,u[p])},this);return}Aw(this);const m=this[Cd];if(u in this&&!m.has(u))throw new V("observable-set-cannot-override",this);Object.defineProperty(this,u,{enumerable:!0,configurable:!0,get(){return m.get(u)},set(p){const v=m.get(u);let C=this.fire(`set:${u}`,u,p,v);C===void 0&&(C=p),(v!==C||!m.has(u))&&(m.set(u,C),this.fire(`change:${u}`,u,C,v))}}),this[u]=h}bind(...u){if(!u.length||!_S(u))throw new V("observable-bind-wrong-properties",this);if(new Set(u).size!==u.length)throw new V("observable-bind-duplicate-properties",this);Aw(this);const h=this[Td];u.forEach(p=>{if(h.has(p))throw new V("observable-bind-rebind",this)});const m=new Map;return u.forEach(p=>{const v={property:p,to:[]};h.set(p,v),m.set(p,v)}),{to:pH,toMany:bH,_observable:this,_bindProperties:u,_to:[],_bindings:m}}unbind(...u){if(!this[Cd])return;const h=this[Td],m=this[jd];if(u.length){if(!_S(u))throw new V("observable-unbind-wrong-properties",this);u.forEach(p=>{const v=h.get(p);v&&(v.to.forEach(([C,x])=>{const k=m.get(C),S=k[x];S.delete(v),S.size||delete k[x],Object.keys(k).length||(m.delete(C),this.stopListening(C,"change"))}),h.delete(p))})}else m.forEach((p,v)=>{this.stopListening(v,"change")}),m.clear(),h.clear()}decorate(u){Aw(this);const h=this[u];if(!h)throw new V("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:u});this.on(u,(m,p)=>{m.return=h.apply(this,p)}),this[u]=function(...m){return this.fire(u,m)},this[u][bS]=h,this[ha]||(this[ha]=[]),this[ha].push(u)}stopListening(u,h,m){if(!u&&this[ha]){for(const p of this[ha])this[p]=this[p][bS];delete this[ha]}super.stopListening(u,h,m)}}return t}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(i=>{_t[i]=b5.prototype[i]});function Aw(i){i[Cd]||(Object.defineProperty(i,Cd,{value:new Map}),Object.defineProperty(i,jd,{value:new Map}),Object.defineProperty(i,Td,{value:new Map}))}function pH(...i){const t=wH(...i),e=Array.from(this._bindings.keys()),n=e.length;if(!t.callback&&t.to.length>1)throw new V("observable-bind-to-no-callback",this);if(n>1&&t.callback)throw new V("observable-bind-to-extra-callback",this);t.to.forEach(s=>{if(s.properties.length&&s.properties.length!==n)throw new V("observable-bind-to-properties-length",this);s.properties.length||(s.properties=this._bindProperties)}),this._to=t.to,t.callback&&(this._bindings.get(e[0]).callback=t.callback),CH(this._observable,this._to),vH(this),this._bindProperties.forEach(s=>{_5(this._observable,s)})}function bH(i,t,e){if(this._bindings.size>1)throw new V("observable-bind-to-many-not-one-binding",this);this.to(..._H(i,t),e)}function _H(i,t){const e=i.map(n=>[n,t]);return Array.prototype.concat.apply([],e)}function _S(i){return i.every(t=>typeof t=="string")}function wH(...i){if(!i.length)throw new V("observable-bind-to-parse-error",null);const t={to:[]};let e;return typeof i[i.length-1]=="function"&&(t.callback=i.pop()),i.forEach(n=>{if(typeof n=="string")e.properties.push(n);else if(typeof n=="object")e={observable:n,properties:[]},t.to.push(e);else throw new V("observable-bind-to-parse-error",null)}),t}function yH(i,t,e,n){const s=i[jd],o=s.get(e),r=o||{};r[n]||(r[n]=new Set),r[n].add(t),o||s.set(e,r)}function vH(i){let t;i._bindings.forEach((e,n)=>{i._to.forEach(s=>{t=s.properties[e.callback?0:i._bindProperties.indexOf(n)],e.to.push([s.observable,t]),yH(i._observable,e,s.observable,t)})})}function _5(i,t){const n=i[Td].get(t);let s;n.callback?s=n.callback.apply(i,n.to.map(o=>o[0][o[1]])):(s=n.to[0],s=s[0][s[1]]),Object.prototype.hasOwnProperty.call(i,t)?i[t]=s:i.set(t,s)}function CH(i,t){t.forEach(e=>{const n=i[jd];let s;n.get(e.observable)||i.listenTo(e.observable,"change",(o,r)=>{s=n.get(e.observable)[r],s&&s.forEach(a=>{_5(i,a.property)})})})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class TH{constructor(){_(this,"_replacedElements");this._replacedElements=[]}replace(t,e){this._replacedElements.push({element:t,newElement:e}),t.style.display="none",e&&t.parentNode.insertBefore(e,t.nextSibling)}restore(){this._replacedElements.forEach(({element:t,newElement:e})=>{t.style.display="",e&&e.remove()}),this._replacedElements=[]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Hy(i){let t=0;for(const e of i)t++;return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function $n(i,t){const e=Math.min(i.length,t.length);for(let n=0;n<e;n++)if(i[n]!=t[n])return n;return i.length==t.length?"same":i.length<t.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Li(i){return!!(i&&i[Symbol.iterator])}function ps(i,t,e={},n=[]){const s=e&&e.xmlns,o=s?i.createElementNS(s,t):i.createElement(t);for(const r in e)o.setAttribute(r,e[r]);(cS(n)||!Li(n))&&(n=[n]);for(let r of n)cS(r)&&(r=i.createTextNode(r)),o.appendChild(r);return o}class w5{constructor(t,e){_(this,"_config");this._config=Object.create(null),e&&this.define(wS(e)),t&&this._setObjectToTarget(this._config,t)}set(t,e){this._setToTarget(this._config,t,e)}define(t,e){this._setToTarget(this._config,t,e,!0)}get(t){return this._getFromSource(this._config,t)}*names(){for(const t of Object.keys(this._config))yield t}_setToTarget(t,e,n,s=!1){if(zs(e)){this._setObjectToTarget(t,e,s);return}const o=e.split(".");e=o.pop();for(const r of o)zs(t[r])||(t[r]=Object.create(null)),t=t[r];if(zs(n)){zs(t[e])||(t[e]=Object.create(null)),t=t[e],this._setObjectToTarget(t,n,s);return}s&&typeof t[e]<"u"||(t[e]=n)}_getFromSource(t,e){const n=e.split(".");e=n.pop();for(const s of n){if(!zs(t[s])){t=null;break}t=t[s]}return t?wS(t[e]):void 0}_setObjectToTarget(t,e,n){Object.keys(e).forEach(s=>{this._setToTarget(t,s,e[s],n)})}}function wS(i){return Tp(i,xH)}function xH(i){return Pr(i)||typeof i=="function"?i:void 0}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Mr(i){if(i){if(i.defaultView)return i instanceof i.defaultView.Document;if(i.ownerDocument&&i.ownerDocument.defaultView)return i instanceof i.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Cg(i){const t=Object.prototype.toString.apply(i);return t=="[object Window]"||t=="[object global]"}const y5=Yn(Tt());function Yn(i){if(!i)return y5;class t extends i{listenTo(n,s,o,r={}){if(Mr(n)||Cg(n)||n instanceof de.window.EventTarget){const a={capture:!!r.useCapture,passive:!!r.usePassive},l=this._getProxyEmitter(n,a)||new kH(n,a);this.listenTo(l,s,o,r)}else super.listenTo(n,s,o,r)}stopListening(n,s,o){if(Mr(n)||Cg(n)||n instanceof de.window.EventTarget){const r=this._getAllProxyEmitters(n);for(const a of r)this.stopListening(a,s,o)}else super.stopListening(n,s,o)}_getProxyEmitter(n,s){return dH(this,v5(n,s))}_getAllProxyEmitters(n){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(s=>this._getProxyEmitter(n,s)).filter(s=>!!s)}}return t}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(i=>{Yn[i]=y5.prototype[i]});class kH extends Tt(){constructor(e,n){super();_(this,"_domNode");_(this,"_options");_(this,"_domListeners");g5(this,v5(e,n)),this._domNode=e,this._options=n}attach(e){if(this._domListeners&&this._domListeners[e])return;const n=this._createDomListener(e);this._domNode.addEventListener(e,n,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=n}detach(e){let n;this._domListeners[e]&&(!(n=this._events[e])||!n.callbacks.length)&&this._domListeners[e].removeListener()}_addEventListener(e,n,s){this.attach(e),Tt().prototype._addEventListener.call(this,e,n,s)}_removeEventListener(e,n){Tt().prototype._removeEventListener.call(this,e,n),this.detach(e)}_createDomListener(e){const n=s=>{this.fire(e,s)};return n.removeListener=()=>{this._domNode.removeEventListener(e,n,this._options),delete this._domListeners[e]},n}}function EH(i){return i["data-ck-expando"]||(i["data-ck-expando"]=si())}function v5(i,t){let e=EH(i);for(const n of Object.keys(t).sort())t[n]&&(e+="-"+n);return e}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function SH(i){const t=[];let e=i;for(;e&&e.nodeType!=Node.DOCUMENT_NODE;)t.unshift(e),e=e.parentNode;return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function AH(i){return i instanceof HTMLTextAreaElement?i.value:i.innerHTML}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function C5(i){const t=i.ownerDocument.defaultView.getComputedStyle(i);return{top:parseInt(t.borderTopWidth,10),right:parseInt(t.borderRightWidth,10),bottom:parseInt(t.borderBottomWidth,10),left:parseInt(t.borderLeftWidth,10)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function T5(i){if(!i.target)return null;const t=i.target.ownerDocument,e=i.clientX,n=i.clientY;let s=null;return t.caretRangeFromPoint&&t.caretRangeFromPoint(e,n)?s=t.caretRangeFromPoint(e,n):i.rangeParent&&(s=t.createRange(),s.setStart(i.rangeParent,i.rangeOffset),s.collapse(!0)),s}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function $t(i){return Object.prototype.toString.call(i)=="[object Text]"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function xp(i){return Object.prototype.toString.apply(i)=="[object Range]"}function x5(i){return!i||!i.parentNode||i.offsetParent===de.document.body?null:i.offsetParent}const k5=["top","right","bottom","left","width","height"];class Pe{constructor(t){_(this,"top");_(this,"right");_(this,"bottom");_(this,"left");_(this,"width");_(this,"height");_(this,"_source");const e=xp(t);if(Object.defineProperty(this,"_source",{value:t._source||t,writable:!0,enumerable:!1}),Wy(t)||e)if(e){const n=Pe.getDomRangeRects(t);lm(this,Pe.getBoundingRect(n))}else lm(this,t.getBoundingClientRect());else if(Cg(t)){const{innerWidth:n,innerHeight:s}=t;lm(this,{top:0,right:n,bottom:s,left:0,width:n,height:s})}else lm(this,t)}clone(){return new Pe(this)}moveTo(t,e){return this.top=e,this.right=t+this.width,this.bottom=e+this.height,this.left=t,this}moveBy(t,e){return this.top+=e,this.right+=t,this.left+=t,this.bottom+=e,this}getIntersection(t){const e={top:Math.max(this.top,t.top),right:Math.min(this.right,t.right),bottom:Math.min(this.bottom,t.bottom),left:Math.max(this.left,t.left),width:0,height:0};if(e.width=e.right-e.left,e.height=e.bottom-e.top,e.width<0||e.height<0)return null;{const n=new Pe(e);return n._source=this._source,n}}getIntersectionArea(t){const e=this.getIntersection(t);return e?e.getArea():0}getArea(){return this.width*this.height}getVisible(){const t=this._source;let e=this.clone();if(yS(t))return e;let n=t,s=t.parentNode||t.commonAncestorContainer,o;for(;s&&!yS(s);){const r=RH(s)==="visible";n instanceof HTMLElement&&vS(n)==="absolute"&&(o=n);const a=vS(s);if(r||o&&(a==="relative"&&r||a!=="relative")){n=s,s=s.parentNode;continue}const l=new Pe(s),u=e.getIntersection(l);if(u)u.getArea()<e.getArea()&&(e=u);else return null;n=s,s=s.parentNode}return e}isEqual(t){for(const e of k5)if(this[e]!==t[e])return!1;return!0}contains(t){const e=this.getIntersection(t);return!!(e&&e.isEqual(t))}toAbsoluteRect(){const{scrollX:t,scrollY:e}=de.window,n=this.clone().moveBy(t,e);if(Wy(n._source)){const s=x5(n._source);s&&IH(n,s)}return n}excludeScrollbarsAndBorders(){const t=this._source;let e,n,s;if(Cg(t))e=t.innerWidth-t.document.documentElement.clientWidth,n=t.innerHeight-t.document.documentElement.clientHeight,s=t.getComputedStyle(t.document.documentElement).direction;else{const o=C5(t);e=t.offsetWidth-t.clientWidth-o.left-o.right,n=t.offsetHeight-t.clientHeight-o.top-o.bottom,s=t.ownerDocument.defaultView.getComputedStyle(t).direction,this.left+=o.left,this.top+=o.top,this.right-=o.right,this.bottom-=o.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=e,s==="ltr"?this.right-=e:this.left+=e,this.height-=n,this.bottom-=n,this}static getDomRangeRects(t){const e=[],n=Array.from(t.getClientRects());if(n.length)for(const s of n)e.push(new Pe(s));else{let s=t.startContainer;$t(s)&&(s=s.parentNode);const o=new Pe(s.getBoundingClientRect());o.right=o.left,o.width=0,e.push(o)}return e}static getBoundingRect(t){const e={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let n=0;for(const s of t)n++,e.left=Math.min(e.left,s.left),e.top=Math.min(e.top,s.top),e.right=Math.max(e.right,s.right),e.bottom=Math.max(e.bottom,s.bottom);return n==0?null:(e.width=e.right-e.left,e.height=e.bottom-e.top,new Pe(e))}}function lm(i,t){for(const e of k5)i[e]=t[e]}function yS(i){return Wy(i)?i===i.ownerDocument.body:!1}function Wy(i){return i!==null&&typeof i=="object"&&i.nodeType===1&&typeof i.getBoundingClientRect=="function"}function vS(i){return i instanceof HTMLElement?i.ownerDocument.defaultView.getComputedStyle(i).position:"static"}function RH(i){return i instanceof HTMLElement?i.ownerDocument.defaultView.getComputedStyle(i).overflow:"visible"}function IH(i,t){const e=new Pe(t),n=C5(t);let s=0,o=0;s-=e.left,o-=e.top,s+=t.scrollLeft,o+=t.scrollTop,s-=n.left,o-=n.top,i.moveBy(s,o)}var Vt;let x0=(Vt=class{constructor(t,e){_(this,"_element");_(this,"_callback");Vt._observerInstance||Vt._createObserver(),this._element=t,this._callback=e,Vt._addElementCallback(t,e),Vt._observerInstance.observe(t)}get element(){return this._element}destroy(){Vt._deleteElementCallback(this._element,this._callback)}static _addElementCallback(t,e){Vt._elementCallbacks||(Vt._elementCallbacks=new Map);let n=Vt._elementCallbacks.get(t);n||(n=new Set,Vt._elementCallbacks.set(t,n)),n.add(e)}static _deleteElementCallback(t,e){const n=Vt._getElementCallbacks(t);n&&(n.delete(e),n.size||(Vt._elementCallbacks.delete(t),Vt._observerInstance.unobserve(t))),Vt._elementCallbacks&&!Vt._elementCallbacks.size&&(Vt._observerInstance=null,Vt._elementCallbacks=null)}static _getElementCallbacks(t){return Vt._elementCallbacks?Vt._elementCallbacks.get(t):null}static _createObserver(){Vt._observerInstance=new de.window.ResizeObserver(t=>{for(const e of t){const n=Vt._getElementCallbacks(e.target);if(n)for(const s of n)s(e)}})}},_(Vt,"_observerInstance",null),_(Vt,"_elementCallbacks",null),Vt);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function CS(i,t){i instanceof HTMLTextAreaElement&&(i.value=t),i.innerHTML=t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Nc(i){return t=>t+i}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ud(i){let t=0;for(;i.previousSibling;)i=i.previousSibling,t++;return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function E5(i,t,e){i.insertBefore(e,i.childNodes[t]||null)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function xd(i){return i&&i.nodeType===Node.COMMENT_NODE}function PH(i){try{de.document.createAttribute(i)}catch{return!1}return!0}function Vo(i){return i?$t(i)?Vo(i.parentElement):i.getClientRects?!!i.getClientRects().length:!1:!1}function k0({element:i,target:t,positions:e,limiter:n,fitInViewport:s,viewportOffsetConfig:o}){yg(t)&&(t=t()),yg(n)&&(n=n());const r=x5(i),a=MH(o),l=new Pe(i),u=TS(t,a);let h;if(!u||!a.getIntersection(u))return null;const m={targetRect:u,elementRect:l,positionedElementAncestor:r,viewportRect:a};if(!n&&!s)h=new S5(e[0],m);else{if(n){const p=TS(n,a);p&&(m.limiterRect=p)}h=VH(e,m)}return h}function TS(i,t){const e=new Pe(i).getVisible();return e?e.getIntersection(t):null}function MH(i){i=Object.assign({top:0,bottom:0,left:0,right:0},i);const t=new Pe(de.window);return t.top+=i.top,t.height-=i.top,t.bottom-=i.bottom,t.height-=i.bottom,t}function VH(i,t){const{elementRect:e}=t,n=e.getArea(),s=i.map(a=>new S5(a,t)).filter(a=>!!a.name);let o=0,r=null;for(const a of s){const{limiterIntersectionArea:l,viewportIntersectionArea:u}=a;if(l===n)return a;const h=u**2+l**2;h>o&&(o=h,r=a)}return r}class S5{constructor(t,e){_(this,"name");_(this,"config");_(this,"_positioningFunctionCoordinates");_(this,"_options");_(this,"_cachedRect");_(this,"_cachedAbsoluteRect");const n=t(e.targetRect,e.elementRect,e.viewportRect,e.limiterRect);if(!n)return;const{left:s,top:o,name:r,config:a}=n;this.name=r,this.config=a,this._positioningFunctionCoordinates={left:s,top:o},this._options=e}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const t=this._options.limiterRect;return t?t.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function xS(i){const t=i.parentNode;t&&t.removeChild(i)}function qm(){const i=de.window.visualViewport;if(!i||!(Se.isiOS||Se.isSafari))return{left:0,top:0};const t=Math.max(Math.round(i.offsetLeft),0),e=Math.max(Math.round(i.offsetTop),0);return{left:t,top:e}}function NH({target:i,viewportOffset:t=0,ancestorOffset:e=0,alignToTop:n,forceScroll:s}){const o=E0(i);let r=o,a=null;for(t=LH(t);r;){let l;r==o?l=kS(i):l=kS(a),OH({parent:l,getRect:()=>Rw(i,r),alignToTop:n,ancestorOffset:e,forceScroll:s});let u=Rw(i,r);const h=Rw(l,r);if(u.height>h.height){const m=u.getIntersection(h);m&&(u=m)}if(DH({window:r,rect:u,viewportOffset:t,alignToTop:n,forceScroll:s}),r.parent!=r){if(a=r.frameElement,r=r.parent,!a)return}else r=null}}function DH({window:i,rect:t,alignToTop:e,forceScroll:n,viewportOffset:s}){const o=t.clone().moveBy(0,s.bottom),r=t.clone().moveBy(0,-s.top),a=new Pe(i).excludeScrollbarsAndBorders(),l=[r,o],u=e&&n,h=l.every(x=>a.contains(x));let{scrollX:m,scrollY:p}=i;const v=m,C=p;u?p-=a.top-t.top+s.top:h||(R5(r,a)?p-=a.top-t.top+s.top:A5(o,a)&&(e?p+=t.top-a.top-s.top:p+=t.bottom-a.bottom+s.bottom)),h||(I5(t,a)?m-=a.left-t.left+s.left:P5(t,a)&&(m+=t.right-a.right+s.right)),(m!=v||p!==C)&&i.scrollTo(m,p)}function OH({parent:i,getRect:t,alignToTop:e,forceScroll:n,ancestorOffset:s=0,limiterElement:o}){const r=E0(i),a=e&&n;let l,u,h;const m=o||r.document.body;for(;i!=m;)u=t(),l=new Pe(i).excludeScrollbarsAndBorders(),h=l.contains(u),a?i.scrollTop-=l.top-u.top+s:h||(R5(u,l)?i.scrollTop-=l.top-u.top+s:A5(u,l)&&(e?i.scrollTop+=u.top-l.top-s:i.scrollTop+=u.bottom-l.bottom+s)),h||(I5(u,l)?i.scrollLeft-=l.left-u.left+s:P5(u,l)&&(i.scrollLeft+=u.right-l.right+s)),i=i.parentNode}function A5(i,t){return i.bottom>t.bottom}function R5(i,t){return i.top<t.top}function I5(i,t){return i.left<t.left}function P5(i,t){return i.right>t.right}function E0(i){return xp(i)?i.startContainer.ownerDocument.defaultView:i.ownerDocument.defaultView}function kS(i){if(xp(i)){let t=i.commonAncestorContainer;return $t(t)&&(t=t.parentNode),t}else return i.parentNode}function Rw(i,t){const e=E0(i),n=new Pe(i);if(e===t)return n;{let s=e;for(;s!=t;){const o=s.frameElement,r=new Pe(o).excludeScrollbarsAndBorders();n.moveBy(r.left,r.top),s=s.parent}}return n}function LH(i){return typeof i=="number"?{top:i,bottom:i,left:i,right:i}:i}const BH={ctrl:"⌃",cmd:"⌘",alt:"⌥",shift:"⇧"},FH={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},ES={37:"←",38:"↑",39:"→",40:"↓",9:"⇥",33:"Page Up",34:"Page Down"},Ue=qH(),UH=Object.fromEntries(Object.entries(Ue).map(([i,t])=>{let e;return t in ES?e=ES[t]:e=i.charAt(0).toUpperCase()+i.slice(1),[t,e]}));function Cc(i){let t;if(typeof i=="string"){if(t=Ue[i.toLowerCase()],!t)throw new V("keyboard-unknown-key",null,{key:i})}else t=i.keyCode+(i.altKey?Ue.alt:0)+(i.ctrlKey?Ue.ctrl:0)+(i.shiftKey?Ue.shift:0)+(i.metaKey?Ue.cmd:0);return t}function S0(i){return typeof i=="string"&&(i=$H(i)),i.map(t=>typeof t=="string"?HH(t):t).reduce((t,e)=>e+t,0)}function Tg(i,t){let e=S0(i);const n=Se.isMac||Se.isiOS;return Object.entries(n?BH:FH).reduce((r,[a,l])=>((e&Ue[a])!=0&&(e&=~Ue[a],r+=l),r),"")+(e?UH[e]:"")}function zH(i){return i==Ue.arrowright||i==Ue.arrowleft||i==Ue.arrowup||i==Ue.arrowdown}function A0(i,t){const e=t==="ltr";switch(i){case Ue.arrowleft:return e?"left":"right";case Ue.arrowright:return e?"right":"left";case Ue.arrowup:return"up";case Ue.arrowdown:return"down"}}function HH(i){if(i.endsWith("!"))return Cc(i.slice(0,-1));const t=Cc(i);return(Se.isMac||Se.isiOS)&&t==Ue.ctrl?Ue.cmd:t}function WH(i,t){const e=A0(i,t);return e==="down"||e==="right"}function qH(){const i={pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let t=65;t<=90;t++){const e=String.fromCharCode(t);i[e.toLowerCase()]=t}for(let t=48;t<=57;t++)i[t-48]=t;for(let t=112;t<=123;t++)i["f"+(t-111)]=t;return Object.assign(i,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),i}function $H(i){return i.split("+").map(t=>t.trim())}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const GH=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig","ur","urd"];function SS(i){return GH.includes(i)?"rtl":"ltr"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function bn(i){return Array.isArray(i)?i:[i]}/* istanbul ignore else -- @preserve */de.window.CKEDITOR_TRANSLATIONS||(de.window.CKEDITOR_TRANSLATIONS={});function jH(i,t,e=1,n){if(typeof e!="number")throw new V("translation-service-quantity-not-a-number",null,{quantity:e});const s=n||de.window.CKEDITOR_TRANSLATIONS,o=YH(s);o===1&&(i=Object.keys(s)[0]);const r=t.id||t.string;if(o===0||!ZH(i,r,s))return e!==1?t.plural:t.string;const a=s[i].dictionary,l=s[i].getPluralForm||(m=>m===1?0:1),u=a[r];if(typeof u=="string")return u;const h=Number(l(e));return u[h]}function KH(i){return Array.isArray(i)?i.reduce((t,e)=>C0(t,e)):i}function ZH(i,t,e){return!!e[i]&&!!e[i].dictionary[t]}function YH(i){return Object.keys(i).length}class JH{constructor({uiLanguage:t="en",contentLanguage:e,translations:n}={}){_(this,"uiLanguage");_(this,"uiLanguageDirection");_(this,"contentLanguage");_(this,"contentLanguageDirection");_(this,"t");_(this,"translations");this.uiLanguage=t,this.contentLanguage=e||this.uiLanguage,this.uiLanguageDirection=SS(this.uiLanguage),this.contentLanguageDirection=SS(this.contentLanguage),this.translations=KH(n),this.t=(s,o)=>this._t(s,o)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(t,e=[]){e=bn(e),typeof t=="string"&&(t={string:t});const s=!!t.plural?e[0]:1,o=jH(this.uiLanguage,t,s,this.translations);return XH(o,e)}}function XH(i,t){return i.replace(/%(\d+)/g,(e,n)=>n<t.length?t[n]:e)}class En extends Tt(){constructor(e={},n={}){super();_(this,"_items");_(this,"_itemMap");_(this,"_idProperty");_(this,"_bindToCollection");_(this,"_bindToExternalToInternalMap");_(this,"_bindToInternalToExternalMap");_(this,"_skippedIndexesFromExternal");const s=Li(e);if(s||(n=e),this._items=[],this._itemMap=new Map,this._idProperty=n.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],s)for(const o of e)this._items.push(o),this._itemMap.set(this._getItemIdBeforeAdding(o),o)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,n){return this.addMany([e],n)}addMany(e,n){if(n===void 0)n=this._items.length;else if(n>this._items.length||n<0)throw new V("collection-add-item-invalid-index",this);let s=0;for(const o of e){const r=this._getItemIdBeforeAdding(o),a=n+s;this._items.splice(a,0,o),this._itemMap.set(r,o),this.fire("add",o,a),s++}return this.fire("change",{added:e,removed:[],index:n}),this}get(e){let n;if(typeof e=="string")n=this._itemMap.get(e);else if(typeof e=="number")n=this._items[e];else throw new V("collection-get-invalid-arg",this);return n||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{const n=this._idProperty,s=e[n];return s&&this._itemMap.has(s)}}getIndex(e){let n;return typeof e=="string"?n=this._itemMap.get(e):n=e,n?this._items.indexOf(n):-1}remove(e){const[n,s]=this._remove(e);return this.fire("change",{added:[],removed:[n],index:s}),n}map(e,n){return this._items.map(e,n)}forEach(e,n){this._items.forEach(e,n)}find(e,n){return this._items.find(e,n)}filter(e,n){return this._items.filter(e,n)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new V("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:n=>{this._setUpBindToBinding(s=>new n(s))},using:n=>{typeof n=="function"?this._setUpBindToBinding(n):this._setUpBindToBinding(s=>s[n])}}}_setUpBindToBinding(e){const n=this._bindToCollection,s=(o,r,a)=>{const l=n._bindToCollection==this,u=n._bindToInternalToExternalMap.get(r);if(l&&u)this._bindToExternalToInternalMap.set(r,u),this._bindToInternalToExternalMap.set(u,r);else{const h=e(r);if(!h){this._skippedIndexesFromExternal.push(a);return}let m=a;for(const p of this._skippedIndexesFromExternal)a>p&&m--;for(const p of n._skippedIndexesFromExternal)m>=p&&m++;this._bindToExternalToInternalMap.set(r,h),this._bindToInternalToExternalMap.set(h,r),this.add(h,m);for(let p=0;p<n._skippedIndexesFromExternal.length;p++)m<=n._skippedIndexesFromExternal[p]&&n._skippedIndexesFromExternal[p]++}};for(const o of n)s(null,o,n.getIndex(o));this.listenTo(n,"add",s),this.listenTo(n,"remove",(o,r,a)=>{const l=this._bindToExternalToInternalMap.get(r);l&&this.remove(l),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((u,h)=>(a<h&&u.push(h-1),a>h&&u.push(h),u),[])})}_getItemIdBeforeAdding(e){const n=this._idProperty;let s;if(n in e){if(s=e[n],typeof s!="string")throw new V("collection-add-invalid-id",this);if(this.get(s))throw new V("collection-add-item-already-exists",this)}else e[n]=s=si();return s}_remove(e){let n,s,o,r=!1;const a=this._idProperty;if(typeof e=="string"?(s=e,o=this._itemMap.get(s),r=!o,o&&(n=this._items.indexOf(o))):typeof e=="number"?(n=e,o=this._items[n],r=!o,o&&(s=o[a])):(o=e,s=o[a],n=this._items.indexOf(o),r=n==-1||!this._itemMap.get(s)),r)throw new V("collection-remove-404",this);this._items.splice(n,1),this._itemMap.delete(s);const l=this._bindToInternalToExternalMap.get(o);return this._bindToInternalToExternalMap.delete(o),this._bindToExternalToInternalMap.delete(l),this.fire("remove",o,n),[o,n]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ln(i){const t=i.next();return t.done?null:t.value}class wt extends Yn(_t()){constructor(){super();_(this,"_elements",new Set);_(this,"_externalViews",new Set);_(this,"_blurTimeout",null);this.set("isFocused",!1),this.set("focusedElement",null)}get elements(){return Array.from(this._elements.values())}get externalViews(){return Array.from(this._externalViews.values())}add(e){if(RS(e))this._addElement(e);else if(AS(e))this._addView(e);else{if(!e.element)throw new V("focustracker-add-view-missing-element",{focusTracker:this,view:e});this._addElement(e.element)}}remove(e){RS(e)?this._removeElement(e):AS(e)?this._removeView(e):this._removeElement(e.element)}_addElement(e){if(this._elements.has(e))throw new V("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",()=>{const n=this.externalViews.find(s=>QH(e,s));n?this._focus(n.element):this._focus(e)},{useCapture:!0}),this.listenTo(e,"blur",()=>{this._blur()},{useCapture:!0}),this._elements.add(e)}_removeElement(e){this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e)),e===this.focusedElement&&this._blur()}_addView(e){e.element&&this._addElement(e.element),this.listenTo(e.focusTracker,"change:focusedElement",()=>{e.focusTracker.focusedElement?e.element&&this._focus(e.element):this._blur()}),this._externalViews.add(e)}_removeView(e){e.element&&this._removeElement(e.element),this.stopListening(e.focusTracker),this._externalViews.delete(e)}destroy(){this.stopListening(),this._elements.clear(),this._externalViews.clear(),this.isFocused=!1,this.focusedElement=null}_focus(e){this._clearBlurTimeout(),this.focusedElement=e,this.isFocused=!0}_blur(){this.elements.find(s=>s.contains(document.activeElement))||this.externalViews.find(s=>s.focusTracker.isFocused&&!s.focusTracker._blurTimeout)||(this._clearBlurTimeout(),this._blurTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0))}_clearBlurTimeout(){clearTimeout(this._blurTimeout),this._blurTimeout=null}}function AS(i){return"focusTracker"in i&&i.focusTracker instanceof wt}function RS(i){return Pr(i)}function QH(i,t){return IS(i,t)?!0:!!t.focusTracker.externalViews.find(e=>IS(i,e))}function IS(i,t){return!!t.element&&t.element.contains(document.activeElement)&&i.contains(t.element)}class Dt{constructor(){_(this,"_listener");this._listener=new(Yn())}listenTo(t){this._listener.listenTo(t,"keydown",(e,n)=>{this._listener.fire("_keydown:"+Cc(n),n)})}set(t,e,n={}){const s=S0(t),o=n.priority;this._listener.listenTo(this._listener,"_keydown:"+s,(r,a)=>{n.filter&&!n.filter(a)||(e(a,()=>{a.preventDefault(),a.stopPropagation(),r.stop()}),r.return=!0)},{priority:o})}press(t){return!!this._listener.fire("_keydown:"+Cc(t),t)}stopListening(t){this._listener.stopListening(t)}destroy(){this.stopListening()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function eW(i){const t=new Map;for(const e in i)t.set(e,i[e]);return t}function Cs(i){return Li(i)?new Map(i):eW(i)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function PS(i,t,e){const n=i.length,s=t.length;for(let o=n-1;o>=e;o--)i[o+s]=i[o];for(let o=0;o<s;o++)i[e+o]=t[o]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function R0(i,t){let e;function n(...s){n.cancel(),e=setTimeout(()=>i(...s),t)}return n.cancel=()=>{clearTimeout(e)},n}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function I0(i){try{if(!i.startsWith("ey"))return null;const t=atob(i.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(t)}catch{return null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function tW(){const i=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;i[t]=e}return i}function nW(i){const t=Array.isArray(i)?i:[i],e=tW();let n=-1;const s=t.map(o=>Array.isArray(o)?o.join(""):String(o)).join("");for(let o=0;o<s.length;o++){const r=s.charCodeAt(o);n=n>>>8^e[(n^r)&255]}return n=(n^-1)>>>0,n.toString(16).padStart(8,"0")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function iW(i){return!!i&&i.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(i)}function sW(i){return!!i&&i.length==1&&/[\ud800-\udbff]/.test(i)}function oW(i){return!!i&&i.length==1&&/[\udc00-\udfff]/.test(i)}function P0(i,t){return sW(i.charAt(t-1))&&oW(i.charAt(t))}function M0(i,t){return iW(i.charAt(t))}const rW=aW();function M5(i,t){const e=String(i).matchAll(rW);return Array.from(e).some(n=>n.index<t&&t<n.index+n[0].length)}function aW(){const i=[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")],t=new RegExp("\\p{Regional_Indicator}{2}","u").source,e="(?:"+i.map(s=>s.source).join("|")+")",n=`${t}|${e}(?:‍${e})*`;return new RegExp(n,"ug")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const $u=new WeakMap;let MS=!1;function V0({view:i,element:t,text:e,isDirectHost:n=!0,keepOnFocus:s=!1}){const o=i.document;$u.has(o)||($u.set(o,new Map),o.registerPostFixer(a=>Iw($u.get(o),a)),o.on("change:isComposing",()=>{i.change(a=>Iw($u.get(o),a))},{priority:"high"})),t.is("editableElement")&&t.on("change:placeholder",(a,l,u)=>r(u)),t.placeholder?r(t.placeholder):e&&r(e),e&&fW();function r(a){const l={text:a,isDirectHost:n,keepOnFocus:s,hostElement:n?t:null};$u.get(o).set(t,l),i.change(u=>Iw([[t,l]],u))}}function lW(i,t){return t.hasClass("ck-placeholder")?!1:(i.addClass("ck-placeholder",t),!0)}function cW(i,t){return t.hasClass("ck-placeholder")?(i.removeClass("ck-placeholder",t),!0):!1}function uW(i,t){if(!i.isAttached()||dW(i))return!1;const e=i.document,s=e.selection.anchor;return e.isComposing&&s&&s.parent===i?!1:t||!e.isFocused?!0:!!s&&s.parent!==i}function dW(i){for(const t of i.getChildren())if(!t.is("uiElement"))return!0;return!1}function Iw(i,t){const e=[];let n=!1;for(const[s,o]of i)o.isDirectHost&&(e.push(s),VS(t,s,o)&&(n=!0));for(const[s,o]of i){if(o.isDirectHost)continue;const r=hW(s);r&&(e.includes(r)||(o.hostElement=r,VS(t,s,o)&&(n=!0)))}return n}function VS(i,t,e){const{text:n,isDirectHost:s,hostElement:o}=e;let r=!1;return o.getAttribute("data-placeholder")!==n&&(i.setAttribute("data-placeholder",n,o),r=!0),(s||t.childCount==1)&&uW(o,e.keepOnFocus)?lW(i,o)&&(r=!0):cW(i,o)&&(r=!0),r}function hW(i){if(i.childCount){const t=i.getChild(0);if(t.is("element")&&!t.is("uiElement")&&!t.is("attributeElement"))return t}return null}function fW(){MS||Ze("enableplaceholder-deprecated-text-option"),MS=!0}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let Ha=class{is(){throw new Error("is() method is abstract")}},Wa=class extends Tt(Ha){constructor(e){super();_(this,"document");_(this,"parent");this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new V("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let n=this;for(;n.parent;)e.unshift(n.index),n=n.parent;return e}getAncestors(e={}){const n=[];let s=e.includeSelf?this:this.parent;for(;s;)n[e.parentFirst?"push":"unshift"](s),s=s.parent;return n}getCommonAncestor(e,n={}){const s=this.getAncestors(n),o=e.getAncestors(n);let r=0;for(;s[r]==o[r]&&s[r];)r++;return r===0?null:s[r-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const n=this.getPath(),s=e.getPath(),o=$n(n,s);switch(o){case"prefix":return!0;case"extension":return!1;default:return n[o]<s[o]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,n,s){this.fire(`change:${e}`,n,s),this.parent&&this.parent._fireChange(e,n,s)}toJSON(){const e=p0(this);return delete e.parent,e}};Wa.prototype.is=function(i){return i==="node"||i==="view:node"};let Dn=class qy extends Wa{constructor(e,n){super(e);_(this,"_textData");this._textData=n}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof qy?this===e||this.data===e.data:!1}_clone(){return new qy(this.document,this.data)}};Dn.prototype.is=function(i){return i==="$text"||i==="view:$text"||i==="text"||i==="view:text"||i==="node"||i==="view:node"};let Co=class extends Ha{constructor(e,n,s){super();_(this,"textNode");_(this,"data");_(this,"offsetInText");if(this.textNode=e,n<0||n>e.data.length)throw new V("view-textproxy-wrong-offsetintext",this);if(s<0||n+s>e.data.length)throw new V("view-textproxy-wrong-length",this);this.data=e.data.substring(n,n+s),this.offsetInText=n}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){const n=[];let s=e.includeSelf?this.textNode:this.parent;for(;s!==null;)n[e.parentFirst?"push":"unshift"](s),s=s.parent;return n}};Co.prototype.is=function(i){return i==="$textProxy"||i==="view:$textProxy"||i==="textProxy"||i==="view:textProxy"};class xg{constructor(){_(this,"_consumables",new Map)}add(t,e){let n;if(t.is("$text")||t.is("documentFragment")){this._consumables.set(t,!0);return}this._consumables.has(t)?n=this._consumables.get(t):(n=new mW(t),this._consumables.set(t,n)),n.add(e?dd(e):t._getConsumables())}test(t,e){const n=this._consumables.get(t);return n===void 0?null:t.is("$text")||t.is("documentFragment")?n:n.test(dd(e))}consume(t,e){if(t.is("$text")||t.is("documentFragment"))return this.test(t,e)?(this._consumables.set(t,!1),!0):!1;const n=this._consumables.get(t);return n===void 0?!1:n.consume(dd(e))}revert(t,e){const n=this._consumables.get(t);n!==void 0&&(t.is("$text")||t.is("documentFragment")?this._consumables.set(t,!0):n.revert(dd(e)))}static createFrom(t,e){if(e||(e=new xg),t.is("$text"))e.add(t);else if(t.is("element")||t.is("documentFragment")){e.add(t);for(const n of t.getChildren())xg.createFrom(n,e)}return e}}class mW{constructor(t){_(this,"element");_(this,"_canConsumeName",null);_(this,"_attributes",new Map);this.element=t}add(t){t.name&&(this._canConsumeName=!0);for(const[e,n]of t.attributes)if(n){let s=this._attributes.get(e);(!s||typeof s=="boolean")&&(s=new Map,this._attributes.set(e,s)),s.set(n,!0)}else{if(e=="style"||e=="class")throw new V("viewconsumable-invalid-attribute",this);this._attributes.set(e,!0)}}test(t){if(t.name&&!this._canConsumeName)return this._canConsumeName;for(const[e,n]of t.attributes){const s=this._attributes.get(e);if(s===void 0)return null;if(s===!1)return!1;if(s!==!0){if(n){const o=s.get(n);if(o===void 0)return null;if(!o)return!1}else for(const o of s.values())if(!o)return!1}}return!0}consume(t){if(!this.test(t))return!1;t.name&&(this._canConsumeName=!1);for(const[e,n]of t.attributes){const s=this._attributes.get(e);if(typeof s=="boolean")for(const[o]of this.element._getConsumables(e,n).attributes)this._attributes.set(o,!1);else if(n)for(const[,o]of this.element._getConsumables(e,n).attributes)s.set(o,!1);else for(const o of s.keys())s.set(o,!1)}return!0}revert(t){t.name&&(this._canConsumeName=!0);for(const[e,n]of t.attributes){const s=this._attributes.get(e);if(s===!1){this._attributes.set(e,!0);continue}if(!(s===void 0||s===!0))if(n)s.get(n)===!1&&s.set(n,!0);else for(const o of s.keys())s.set(o,!0)}}}function dd(i){const t=[];return"attributes"in i&&i.attributes&&Pw(t,i.attributes),"classes"in i&&i.classes&&Pw(t,i.classes,"class"),"styles"in i&&i.styles&&Pw(t,i.styles,"style"),{name:i.name||!1,attributes:t}}function Pw(i,t,e){if(typeof t=="string"){i.push(e?[e,t]:[t]);return}for(const n of t)Array.isArray(n)?i.push(n):i.push(e?[e,n]:[n])}class Ts{constructor(...t){_(this,"_patterns",[]);this.add(...t)}add(...t){for(let e of t)(typeof e=="string"||e instanceof RegExp)&&(e={name:e}),this._patterns.push(e)}match(...t){for(const e of t)for(const n of this._patterns){const s=this._isElementMatching(e,n);if(s)return{element:e,pattern:n,match:s}}return null}matchAll(...t){const e=[];for(const n of t)for(const s of this._patterns){const o=this._isElementMatching(n,s);o&&e.push({element:n,pattern:s,match:o})}return e.length>0?e:null}getElementName(){if(this._patterns.length!==1)return null;const t=this._patterns[0],e=t.name;return typeof t!="function"&&e&&!(e instanceof RegExp)?e:null}_isElementMatching(t,e){if(typeof e=="function"){const o=e(t);return!o||typeof o!="object"?o:dd(o)}const n={};if(e.name&&(n.name=gW(e.name,t.name),!n.name))return null;const s=[];return e.attributes&&!pW(e.attributes,t,s)||e.classes&&!bW(e.classes,t,s)||e.styles&&!_W(e.styles,t,s)?null:(s.length&&(n.attributes=s),n)}}function kg(i,t){return i===!0||i===t||i instanceof RegExp&&!!String(t).match(i)}function gW(i,t){return i instanceof RegExp?!!t.match(i):i===t}function N0(i,t){if(Array.isArray(i))return i.map(n=>typeof n!="object"||n instanceof RegExp?t?[t,n,!0]:[n,!0]:((n.key===void 0||n.value===void 0)&&Ze("matcher-pattern-missing-key-or-value",n),t?[t,n.key,n.value]:[n.key,n.value]));if(typeof i!="object"||i instanceof RegExp)return[t?[t,i,!0]:[i,!0]];const e=[];for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.push(t?[t,n,i[n]]:[n,i[n]]);return e}function pW(i,t,e){let n;return typeof i=="object"&&!(i instanceof RegExp)&&!Array.isArray(i)?(i.style!==void 0&&Ze("matcher-pattern-deprecated-attributes-style-key",i),i.class!==void 0&&Ze("matcher-pattern-deprecated-attributes-class-key",i)):n=["class","style"],t._collectAttributesMatch(N0(i),e,n)}function bW(i,t,e){return t._collectAttributesMatch(N0(i,"class"),e)}function _W(i,t,e){return t._collectAttributesMatch(N0(i,"style"),e)}class kd{constructor(t){_(this,"_styles");_(this,"_cachedStyleNames",null);_(this,"_cachedExpandedStyleNames",null);_(this,"_styleProcessor");this._styles={},this._styleProcessor=t}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(t){this.clear();const e=yW(t);for(const[n,s]of e)this._styleProcessor.toNormalizedForm(n,s,this._styles);return this}has(t){if(this.isEmpty)return!1;const n=this._styleProcessor.getReducedForm(t,this._styles).find(([s])=>s===t);return Array.isArray(n)}set(t,e){if(this._cachedStyleNames=null,this._cachedExpandedStyleNames=null,is(t))for(const[n,s]of Object.entries(t))this._styleProcessor.toNormalizedForm(n,s,this._styles);else this._styleProcessor.toNormalizedForm(t,e,this._styles)}remove(t){for(const e of bn(t)){this._cachedStyleNames=null,this._cachedExpandedStyleNames=null;const n=$y(e);$9(this._styles,n),delete this._styles[e],this._cleanEmptyObjectsOnPath(n)}}getNormalized(t){return this._styleProcessor.getNormalized(t,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(t=>t.join(":")).sort().join(";")+";"}getAsString(t){if(this.isEmpty)return;if(this._styles[t]&&!is(this._styles[t]))return this._styles[t];const n=this._styleProcessor.getReducedForm(t,this._styles).find(([s])=>s===t);if(Array.isArray(n))return n[1]}getStyleNames(t=!1){return this.isEmpty?[]:t?(this._cachedExpandedStyleNames||(this._cachedExpandedStyleNames=this._styleProcessor.getStyleNames(this._styles)),this._cachedExpandedStyleNames):(this._cachedStyleNames||(this._cachedStyleNames=this.getStylesEntries().map(([e])=>e)),this._cachedStyleNames)}keys(){return this.getStyleNames()}clear(){this._styles={},this._cachedStyleNames=null,this._cachedExpandedStyleNames=null}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.getStyleNames())if(!t.has(e)||t.getAsString(e)!==this.getAsString(e))return!1;return!0}getStylesEntries(){const t=[],e=Object.keys(this._styles);for(const n of e)t.push(...this._styleProcessor.getReducedForm(n,this._styles));return t}_clone(){const t=new this.constructor(this._styleProcessor);return t.set(this.getNormalized()),t}_getTokensMatch(t,e){const n=[];for(const s of this.getStyleNames(!0))if(kg(t,s)){if(e===!0){n.push(s);continue}const o=this.getAsString(s);kg(e,o)&&n.push(s)}return n.length?n:void 0}_getConsumables(t){const e=[];if(t){e.push(t);for(const n of this._styleProcessor.getRelatedStyles(t))e.push(n)}else for(const n of this.getStyleNames()){for(const s of this._styleProcessor.getRelatedStyles(n))e.push(s);e.push(n)}return e}_canMergeFrom(t){for(const e of t.getStyleNames())if(this.has(e)&&this.getAsString(e)!==t.getAsString(e))return!1;return!0}_mergeFrom(t){for(const e of t.getStyleNames())this.has(e)||this.set(e,t.getAsString(e))}_isMatching(t){for(const e of t.getStyleNames())if(!this.has(e)||this.getAsString(e)!==t.getAsString(e))return!1;return!0}_cleanEmptyObjectsOnPath(t){const e=t.split(".");if(!(e.length>1))return;const s=e.splice(0,e.length-1).join("."),o=Ir(this._styles,s);if(!o)return;!Object.keys(o).length&&this.remove(s)}}class wW{constructor(){_(this,"_normalizers");_(this,"_extractors");_(this,"_reducers");_(this,"_consumables");this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(t,e,n){if(is(e)){Mw(n,$y(t),e);return}if(this._normalizers.has(t)){const s=this._normalizers.get(t),{path:o,value:r}=s(e);Mw(n,o,r)}else Mw(n,t,e)}getNormalized(t,e){if(!t)return C0({},e);if(e[t]!==void 0)return e[t];if(this._extractors.has(t)){const n=this._extractors.get(t);if(typeof n=="string")return Ir(e,n);const s=n(t,e);if(s)return s}return Ir(e,$y(t))}getReducedForm(t,e){const n=this.getNormalized(t,e);return n===void 0?[]:this._reducers.has(t)?this._reducers.get(t)(n):[[t,n]]}getStyleNames(t){const e=new Set;for(const n of this._consumables.keys()){const s=this.getNormalized(n,t);s&&(typeof s!="object"||Object.keys(s).length)&&e.add(n)}for(const n of Object.keys(t))e.add(n);return Array.from(e)}getRelatedStyles(t){return this._consumables.get(t)||[]}setNormalizer(t,e){this._normalizers.set(t,e)}setExtractor(t,e){this._extractors.set(t,e)}setReducer(t,e){this._reducers.set(t,e)}setStyleRelation(t,e){this._mapStyleNames(t,e);for(const n of e)this._mapStyleNames(n,[t])}_mapStyleNames(t,e){this._consumables.has(t)||this._consumables.set(t,[]),this._consumables.get(t).push(...e)}}function yW(i){let t=null,e=0,n=0,s=null;const o=new Map;if(i==="")return o;i.charAt(i.length-1)!=";"&&(i=i+";");for(let r=0;r<i.length;r++){const a=i.charAt(r);if(t===null)switch(a){case":":s||(s=i.substr(e,r-e),n=r+1);break;case'"':case"'":t=a;break;case";":{const l=i.substr(n,r-n);s&&o.set(s.trim(),l.trim()),s=null,e=r+1;break}}else a===t&&(t=null)}return o}function $y(i){return i.replace("-",".")}function Mw(i,t,e){let n=e;is(e)&&(n=C0({},Ir(i,t),e)),o5(i,t,n)}class Vw{constructor(){_(this,"_set",new Set)}get isEmpty(){return this._set.size==0}get size(){return this._set.size}has(t){return this._set.has(t)}keys(){return Array.from(this._set.keys())}setTo(t){this.clear();for(const e of t.split(/\s+/))e&&this._set.add(e);return this}set(t){for(const e of bn(t))e&&this._set.add(e)}remove(t){for(const e of bn(t))this._set.delete(e)}clear(){this._set.clear()}toString(){return Array.from(this._set).join(" ")}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.keys())if(!t.has(e))return!1;return!0}_clone(){const t=new this.constructor;return t._set=new Set(this._set),t}_getTokensMatch(t){const e=[];if(t===!0){for(const n of this._set.keys())e.push(n);return e}if(typeof t=="string"){for(const n of t.split(/\s+/))if(this._set.has(n))e.push(n);else return;return e}for(const n of this._set.keys())n.match(t)&&e.push(n);return e.length?e:void 0}_getConsumables(t){return t?[t]:this.keys()}_canMergeFrom(){return!0}_mergeFrom(t){for(const e of t._set.keys())this._set.has(e)||this._set.add(e)}_isMatching(t){for(const e of t._set.keys())if(!this._set.has(e))return!1;return!0}}let No=class V5 extends Wa{constructor(e,n,s,o){super(e);_(this,"name");_(this,"_unsafeAttributesToRender",[]);_(this,"_attrs");_(this,"_children");_(this,"_customProperties",new Map);this.name=n,this._attrs=this._parseAttributes(s),this._children=[],o&&this._insertChild(0,o)}get _classes(){return this._attrs.get("class")}get _styles(){return this._attrs.get("style")}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes&&(yield"class"),this._styles&&(yield"style");for(const e of this._attrs.keys())e!="class"&&e!="style"&&(yield e)}*getAttributes(){for(const[e,n]of this._attrs.entries())yield[e,String(n)]}getAttribute(e){return this._attrs.has(e)?String(this._attrs.get(e)):void 0}hasAttribute(e,n){return this._attrs.has(e)?n!==void 0?Hl(this.name,e)||Gu(this.name,e)?this._attrs.get(e).has(n):this._attrs.get(e)===n:!0:!1}isSimilar(e){if(!(e instanceof V5))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size)return!1;for(const[n,s]of this._attrs){const o=e._attrs.get(n);if(o===void 0)return!1;if(typeof s=="string"||typeof o=="string"){if(o!==s)return!1}else if(!s.isSimilar(o))return!1}return!0}hasClass(...e){for(const n of e)if(!this._classes||!this._classes.has(n))return!1;return!0}getClassNames(){const e=this._classes?this._classes.keys():[],n=e[Symbol.iterator]();return Object.assign(e,{next:n.next.bind(n)})}getStyle(e){return this._styles&&this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles&&this._styles.getNormalized(e)}getStyleNames(e){return this._styles?this._styles.getStyleNames(e):[]}hasStyle(...e){for(const n of e)if(!this._styles||!this._styles.has(n))return!1;return!0}findAncestor(...e){const n=new Ts(...e);let s=this.parent;for(;s&&!s.is("documentFragment");){if(n.match(s))return s;s=s.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=this._classes?this._classes.keys().sort().join(","):"",n=this._styles&&String(this._styles),s=Array.from(this._attrs).filter(([o])=>o!="style"&&o!="class").map(o=>`${o[0]}="${o[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(n?` style="${n}"`:"")+(s==""?"":` ${s}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){const n=[];if(e)for(const o of this.getChildren())n.push(o._clone(e));const s=new this.constructor(this.document,this.name,this._attrs,n);return s._customProperties=new Map(this._customProperties),s.getFillerOffset=this.getFillerOffset,s._unsafeAttributesToRender=this._unsafeAttributesToRender,s}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,n){this._fireChange("children",this,{index:e});let s=0;const o=vW(this.document,n);for(const r of o)r.parent!==null&&r._remove(),r.parent=this,r.document=this.document,this._children.splice(e,0,r),e++,s++;return s}_removeChildren(e,n=1){this._fireChange("children",this,{index:e});for(let s=e;s<e+n;s++)this._children[s].parent=null;return this._children.splice(e,n)}_setAttribute(e,n,s=!0){if(this._fireChange("attributes",this),Hl(this.name,e)||Gu(this.name,e)){let o=this._attrs.get(e);o||(o=Hl(this.name,e)?new kd(this.document.stylesProcessor):new Vw,this._attrs.set(e,o)),s?o.setTo(String(n)):Hl(this.name,e)?Array.isArray(n)?o.set(n[0],n[1]):o.set(n):o.set(typeof n=="string"?n.split(/\s+/):n)}else this._attrs.set(e,String(n))}_removeAttribute(e,n){if(this._fireChange("attributes",this),n!==void 0&&(Hl(this.name,e)||Gu(this.name,e))){const s=this._attrs.get(e);return s?(Gu(this.name,e)&&typeof n=="string"&&(n=n.split(/\s+/)),s.remove(n),s.isEmpty?this._attrs.delete(e):!1):!1}return this._attrs.delete(e)}_addClass(e){this._setAttribute("class",e,!1)}_removeClass(e){this._removeAttribute("class",e)}_setStyle(e,n){typeof e!="string"?this._setAttribute("style",e,!1):this._setAttribute("style",[e,n],!1)}_removeStyle(e){this._removeAttribute("style",e)}_collectAttributesMatch(e,n,s){for(const[o,r,a]of e){let l=!1,u=!1;for(const[h,m]of this._attrs)if(!(s&&s.includes(h)||!kg(o,h)))if(l=!0,typeof m=="string"){if(kg(r,m))n.push([h]),u=!0;else if(!(o instanceof RegExp))return!1}else{const p=m._getTokensMatch(r,a||!0);if(p){u=!0;for(const v of p)n.push([h,v])}else if(!(o instanceof RegExp))return!1}if(!l||!u)return!1}return!0}_getConsumables(e,n){const s=[];if(e){const o=this._attrs.get(e);if(o!==void 0)if(typeof o=="string")s.push([e]);else for(const r of o._getConsumables(n))s.push([e,r])}else for(const[o,r]of this._attrs)if(typeof r=="string")s.push([o]);else for(const a of r._getConsumables())s.push([o,a]);return{name:!e,attributes:s}}_canMergeAttributesFrom(e){if(this.name!=e.name)return!1;for(const[n,s]of e._attrs){const o=this._attrs.get(n);if(o!==void 0){if(typeof o=="string"||typeof s=="string"){if(o!==s)return!1}else if(!o._canMergeFrom(s))return!1}}return!0}_mergeAttributesFrom(e){this._fireChange("attributes",this);for(const[n,s]of e._attrs){const o=this._attrs.get(n);o===void 0||typeof o=="string"||typeof s=="string"?this._setAttribute(n,s):o._mergeFrom(s)}}_canSubtractAttributesOf(e){if(this.name!=e.name)return!1;for(const[n,s]of e._attrs){const o=this._attrs.get(n);if(o===void 0)return!1;if(typeof o=="string"||typeof s=="string"){if(o!==s)return!1}else if(!o._isMatching(s))return!1}return!0}_subtractAttributesOf(e){this._fireChange("attributes",this);for(const[n,s]of e._attrs){const o=this._attrs.get(n);typeof o=="string"||typeof s=="string"?this._attrs.delete(n):(o.remove(s.keys()),o.isEmpty&&this._attrs.delete(n))}}_setCustomProperty(e,n){this._customProperties.set(e,n)}_removeCustomProperty(e){return this._customProperties.delete(e)}_parseAttributes(e){const n=Cs(e);for(const[s,o]of n)if(o===null)n.delete(s);else if(Hl(this.name,s)){const r=o instanceof kd?o._clone():new kd(this.document.stylesProcessor).setTo(String(o));n.set(s,r)}else if(Gu(this.name,s)){const r=o instanceof Vw?o._clone():new Vw().setTo(String(o));n.set(s,r)}else typeof o!="string"&&n.set(s,String(o));return n}};No.prototype.is=function(i,t){return t?t===this.name&&(i==="element"||i==="view:element"):i==="element"||i==="view:element"||i==="node"||i==="view:node"};function vW(i,t){if(typeof t=="string")return[new Dn(i,t)];Li(t)||(t=[t]);const e=[];for(const n of t)typeof n=="string"?e.push(new Dn(i,n)):n instanceof Co?e.push(new Dn(i,n.data)):e.push(n);return e}function Gu(i,t){return t=="class"||i=="a"&&t=="rel"}function Hl(i,t){return t=="style"}class Kd extends No{constructor(t,e,n,s){super(t,e,n,s),this.getFillerOffset=CW}}Kd.prototype.is=function(i,t){return t?t===this.name&&(i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"):i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function CW(){const i=[...this.getChildren()],t=i[this.childCount-1];if(t&&t.is("element","br"))return this.childCount;for(const e of i)if(!e.is("uiElement"))return null;return this.childCount}class kp extends _t(Kd){constructor(t,e,n,s){super(t,e,n,s),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(t),this.bind("isFocused").to(t,"isFocused",o=>o&&t.selection.editableElement==this),this.listenTo(t.selection,"change",()=>{this.isFocused=t.isFocused&&t.selection.editableElement==this})}destroy(){this.stopListening()}}kp.prototype.is=function(i,t){return t?t===this.name&&(i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"):i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};const NS=Symbol("rootName");class N5 extends kp{constructor(t,e){super(t,e),this.rootName="main"}get rootName(){return this.getCustomProperty(NS)}set rootName(t){this._setCustomProperty(NS,t)}set _name(t){this.name=t}}N5.prototype.is=function(i,t){return t?t===this.name&&(i==="rootElement"||i==="view:rootElement"||i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"):i==="rootElement"||i==="view:rootElement"||i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};let Ta=class{constructor(t={}){_(this,"direction");_(this,"boundaries");_(this,"singleCharacters");_(this,"shallow");_(this,"ignoreElementEnd");_(this,"_position");_(this,"_boundaryStartParent");_(this,"_boundaryEndParent");if(!t.boundaries&&!t.startPosition)throw new V("view-tree-walker-no-start-position",null);if(t.direction&&t.direction!="forward"&&t.direction!="backward")throw new V("view-tree-walker-unknown-direction",t.startPosition,{direction:t.direction});this.boundaries=t.boundaries||null,t.startPosition?this._position=ge._createAt(t.startPosition):this._position=ge._createAt(t.boundaries[t.direction=="backward"?"end":"start"]),this.direction=t.direction||"forward",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,n;do n=this.position,e=this.next();while(!e.done&&t(e.value));e.done||(this._position=n)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone()}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let t=this.position.clone();const e=this.position,n=t.parent;if(n.parent===null&&t.offset===n.childCount)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let s;if(n&&n.is("view:$text")){if(t.isAtEnd)return this._position=ge._createAfter(n),this._next();s=n.data[t.offset]}else s=n.getChild(t.offset);if(typeof s=="string"){let o;this.singleCharacters?o=1:o=(n===this._boundaryEndParent?this.boundaries.end.offset:n.data.length)-t.offset;const r=new Co(n,t.offset,o);return t.offset+=o,this._position=t,this._formatReturnValue("text",r,e,t,o)}if(s&&s.is("view:element")){if(!this.shallow)t=new ge(s,0);else{if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}return this._position=t,this._formatReturnValue("elementStart",s,e,t,1)}if(s&&s.is("view:$text")){if(this.singleCharacters)return t=new ge(s,0),this._position=t,this._next();let o=s.data.length,r;return s==this._boundaryEndParent?(o=this.boundaries.end.offset,r=new Co(s,0,o),t=ge._createAfter(r)):(r=new Co(s,0,s.data.length),t.offset++),this._position=t,this._formatReturnValue("text",r,e,t,o)}return t=ge._createAfter(n),this._position=t,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",n,e,t)}_previous(){let t=this.position.clone();const e=this.position,n=t.parent;if(n.parent===null&&t.offset===0)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let s;if(n.is("view:$text")){if(t.isAtStart)return this._position=ge._createBefore(n),this._previous();s=n.data[t.offset-1]}else s=n.getChild(t.offset-1);if(typeof s=="string"){let o;if(this.singleCharacters)o=1;else{const a=n===this._boundaryStartParent?this.boundaries.start.offset:0;o=t.offset-a}t.offset-=o;const r=new Co(n,t.offset,o);return this._position=t,this._formatReturnValue("text",r,e,t,o)}if(s&&s.is("view:element"))return this.shallow?(t.offset--,this._position=t,this._formatReturnValue("elementStart",s,e,t,1)):(t=new ge(s,s.childCount),this._position=t,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",s,e,t));if(s&&s.is("view:$text")){if(this.singleCharacters)return t=new ge(s,s.data.length),this._position=t,this._previous();let o=s.data.length,r;if(s==this._boundaryStartParent){const a=this.boundaries.start.offset;r=new Co(s,a,s.data.length-a),o=r.data.length,t=ge._createBefore(r)}else r=new Co(s,0,s.data.length),t.offset--;return this._position=t,this._formatReturnValue("text",r,e,t,o)}return t=ge._createBefore(n),this._position=t,this._formatReturnValue("elementStart",n,e,t,1)}_formatReturnValue(t,e,n,s,o){return e.is("view:$textProxy")&&(e.offsetInText+e.data.length==e.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(s=ge._createAfter(e.textNode),this._position=s):n=ge._createAfter(e.textNode)),e.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(s=ge._createBefore(e.textNode),this._position=s):n=ge._createBefore(e.textNode))),{done:!1,value:{type:t,item:e,previousPosition:n,nextPosition:s,length:o}}}},ge=class _o extends Ha{constructor(e,n){super();_(this,"parent");_(this,"offset");this.parent=e,this.offset=n}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof kp);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){const n=_o._createAt(this),s=n.offset+e;return n.offset=s<0?0:s,n}getLastMatchingPosition(e,n={}){n.startPosition=this;const s=new Ta(n);return s.skip(e),s.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const n=this.getAncestors(),s=e.getAncestors();let o=0;for(;n[o]==s[o]&&n[o];)o++;return o===0?null:n[o-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const n=this.parent.is("node")?this.parent.getPath():[],s=e.parent.is("node")?e.parent.getPath():[];n.push(this.offset),s.push(e.offset);const o=$n(n,s);switch(o){case"prefix":return"before";case"extension":return"after";default:return n[o]<s[o]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new Ta(e)}clone(){return new _o(this.parent,this.offset)}static _createAt(e,n){if(e instanceof _o)return new this(e.parent,e.offset);{const s=e;if(n=="end")n=s.is("$text")?s.data.length:s.childCount;else{if(n=="before")return this._createBefore(s);if(n=="after")return this._createAfter(s);if(n!==0&&!n)throw new V("view-createpositionat-offset-required",s)}return new _o(s,n)}}static _createAfter(e){if(e.is("$textProxy"))return new _o(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new V("view-position-after-root",e,{root:e});return new _o(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new _o(e.textNode,e.offsetInText);if(!e.parent)throw new V("view-position-before-root",e,{root:e});return new _o(e.parent,e.index)}};ge.prototype.is=function(i){return i==="position"||i==="view:position"};let Ke=class br extends Ha{constructor(e,n=null){super();_(this,"start");_(this,"end");this.start=e.clone(),this.end=n?n.clone():e.clone()}*[Symbol.iterator](){yield*new Ta({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(cm,{direction:"backward"}),n=this.end.getLastMatchingPosition(cm);return e.parent.is("$text")&&e.isAtStart&&(e=ge._createBefore(e.parent)),n.parent.is("$text")&&n.isAtEnd&&(n=ge._createAfter(n.parent)),new br(e,n)}getTrimmed(){let e=this.start.getLastMatchingPosition(cm);if(e.isAfter(this.end)||e.isEqual(this.end))return new br(e,e);let n=this.end.getLastMatchingPosition(cm,{direction:"backward"});const s=e.nodeAfter,o=n.nodeBefore;return s&&s.is("$text")&&(e=new ge(s,0)),o&&o.is("$text")&&(n=new ge(o,o.data.length)),new br(e,n)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,n=!1){e.isCollapsed&&(n=!1);const s=this.containsPosition(e.start)||n&&this.start.isEqual(e.start),o=this.containsPosition(e.end)||n&&this.end.isEqual(e.end);return s&&o}getDifference(e){const n=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&n.push(new br(this.start,e.start)),this.containsPosition(e.end)&&n.push(new br(e.end,this.end))):n.push(this.clone()),n}getIntersection(e){if(this.isIntersecting(e)){let n=this.start,s=this.end;return this.containsPosition(e.start)&&(n=e.start),this.containsPosition(e.end)&&(s=e.end),new br(n,s)}return null}getWalker(e={}){return e.boundaries=this,new Ta(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,n=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(n=this.end.parent.previousSibling),e&&e.is("element")&&e===n?e:null}clone(){return new br(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const n=new Ta(e);for(const s of n)yield s.item}*getPositions(e={}){e.boundaries=this;const n=new Ta(e);yield n.position;for(const s of n)yield s.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,n,s,o){return new this(new ge(e,n),new ge(s,o))}static _createFromPositionAndShift(e,n){const s=e,o=e.getShiftedBy(n);return n>0?new this(s,o):new this(o,s)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const n=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(ge._createBefore(e),n)}};Ke.prototype.is=function(i){return i==="range"||i==="view:range"};function cm(i){return!!(i.item.is("attributeElement")||i.item.is("uiElement"))}let Ro=class D5 extends Tt(Ha){constructor(...e){super();_(this,"_ranges");_(this,"_lastRangeBackward");_(this,"_isFake");_(this,"_fakeSelectionLabel");this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const n of this._ranges)(!e||n.start.isBefore(e.start))&&(e=n);return e?e.clone():null}getLastRange(){let e=null;for(const n of this._ranges)(!e||n.end.isAfter(e.end))&&(e=n);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const n of this._ranges){let s=!1;for(const o of e._ranges)if(n.isEqual(o)){s=!0;break}if(!s)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const n=Hy(this.getRanges()),s=Hy(e.getRanges());if(n!=s)return!1;if(n==0)return!0;for(let o of this.getRanges()){o=o.getTrimmed();let r=!1;for(let a of e.getRanges())if(a=a.getTrimmed(),o.start.isEqual(a.start)&&o.end.isEqual(a.end)){r=!0;break}if(!r)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[n,s,o]=e;if(typeof s=="object"&&(o=s,s=void 0),n===null)this._setRanges([]),this._setFakeOptions(o);else if(n instanceof D5||n instanceof D0)this._setRanges(n.getRanges(),n.isBackward),this._setFakeOptions({fake:n.isFake,label:n.fakeSelectionLabel});else if(n instanceof Ke)this._setRanges([n],o&&o.backward),this._setFakeOptions(o);else if(n instanceof ge)this._setRanges([new Ke(n)]),this._setFakeOptions(o);else if(n instanceof Wa){const r=!!o&&!!o.backward;let a;if(s===void 0)throw new V("view-selection-setto-required-second-parameter",this);s=="in"?a=Ke._createIn(n):s=="on"?a=Ke._createOn(n):a=new Ke(ge._createAt(n,s)),this._setRanges([a],r),this._setFakeOptions(o)}else if(Li(n))this._setRanges(n,o&&o.backward),this._setFakeOptions(o);else throw new V("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,n){if(this.anchor===null)throw new V("view-selection-setfocus-no-ranges",this);const s=ge._createAt(e,n);if(s.compareWith(this.focus)=="same")return;const o=this.anchor;this._ranges.pop(),s.compareWith(o)=="before"?this._addRange(new Ke(s,o),!0):this._addRange(new Ke(o,s)),this.fire("change")}_setRanges(e,n=!1){e=Array.from(e),this._ranges=[];for(const s of e)this._addRange(s);this._lastRangeBackward=!!n}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,n=!1){if(!(e instanceof Ke))throw new V("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!n}_pushRange(e){for(const n of this._ranges)if(e.isIntersecting(n))throw new V("view-selection-range-intersects",this,{addedRange:e,intersectingRange:n});this._ranges.push(new Ke(e.start,e.end))}};Ro.prototype.is=function(i){return i==="selection"||i==="view:selection"};let D0=class extends Tt(Ha){constructor(...e){super();_(this,"_selection");this._selection=new Ro,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,n){this._selection.setFocus(e,n)}};D0.prototype.is=function(i){return i==="selection"||i=="documentSelection"||i=="view:selection"||i=="view:documentSelection"};class qa extends Mo{constructor(e,n,s){super(e,n);_(this,"startRange");_(this,"_eventPhase");_(this,"_currentTarget");this.startRange=s,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const Nw=Symbol("bubbling contexts");function Gy(i){class t extends i{fire(n,...s){try{const o=n instanceof Mo?n:new Mo(this,n),r=Dw(this);if(!r.size)return;if(ju(o,"capturing",this),Wl(r,"$capture",o,...s))return o.return;const a=o.startRange||this.selection.getFirstRange(),l=a?a.getContainedElement():null,u=l?!!O5(r,l):!1;let h=l||TW(a);if(ju(o,"atTarget",h),!u){if(Wl(r,"$text",o,...s))return o.return;ju(o,"bubbling",h)}for(;h;){if(h.is("rootElement")){if(Wl(r,"$root",o,...s))return o.return}else if(h.is("element")&&Wl(r,h.name,o,...s))return o.return;if(Wl(r,h,o,...s))return o.return;h=h.parent,ju(o,"bubbling",h)}return ju(o,"bubbling",this),Wl(r,"$document",o,...s),o.return}catch(o){/* istanbul ignore next -- @preserve */V.rethrowUnexpectedError(o,this)}}_addEventListener(n,s,o){const r=bn(o.context||"$document"),a=Dw(this);for(const l of r){let u=a.get(l);u||(u=new(Tt()),a.set(l,u)),this.listenTo(u,n,s,o)}}_removeEventListener(n,s){const o=Dw(this);for(const r of o.values())this.stopListening(r,n,s)}}return t}{const i=Gy(Object);["fire","_addEventListener","_removeEventListener"].forEach(t=>{Gy[t]=i.prototype[t]})}function ju(i,t,e){i instanceof qa&&(i._eventPhase=t,i._currentTarget=e)}function Wl(i,t,e,...n){const s=typeof t=="string"?i.get(t):O5(i,t);return s?(s.fire(e,...n),e.stop.called):!1}function O5(i,t){for(const[e,n]of i)if(typeof e=="function"&&e(t))return n;return null}function Dw(i){return i[Nw]||(i[Nw]=new Map),i[Nw]}function TW(i){if(!i)return null;const t=i.start.parent,e=i.end.parent,n=t.getPath(),s=e.getPath();return n.length>s.length?t:e}let Ep=class extends Gy(_t()){constructor(e){super();_(this,"selection");_(this,"roots");_(this,"stylesProcessor");_(this,"_postFixers",new Set);this.selection=new D0,this.roots=new En({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.forEach(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let n=!1;do for(const s of this._postFixers)if(n=s(e),n)break;while(n)}};const DS=10;class Aa extends No{constructor(e,n,s,o){super(e,n,s,o);_(this,"_priority",DS);_(this,"_id",null);_(this,"_clonesGroup",null);this.getFillerOffset=xW}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new V("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(e){return this.id!==null||e.id!==null?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e=!1){const n=super._clone(e);return n._priority=this._priority,n._id=this._id,n}_canMergeAttributesFrom(e){return this.id!==null||e.id!==null||this.priority!==e.priority?!1:super._canMergeAttributesFrom(e)}_canSubtractAttributesOf(e){return this.id!==null||e.id!==null||this.priority!==e.priority?!1:super._canSubtractAttributesOf(e)}}_(Aa,"DEFAULT_PRIORITY",DS);Aa.prototype.is=function(i,t){return t?t===this.name&&(i==="attributeElement"||i==="view:attributeElement"||i==="element"||i==="view:element"):i==="attributeElement"||i==="view:attributeElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function xW(){if(Ow(this))return null;let i=this.parent;for(;i&&i.is("attributeElement");){if(Ow(i)>1)return null;i=i.parent}return!i||Ow(i)>1?null:this.childCount}function Ow(i){return Array.from(i.getChildren()).filter(t=>!t.is("uiElement")).length}class O0 extends No{constructor(t,e,n,s){super(t,e,n,s),this.getFillerOffset=kW}_insertChild(t,e){if(e&&(e instanceof Wa||Array.from(e).length>0))throw new V("view-emptyelement-cannot-add",[this,e]);return 0}}O0.prototype.is=function(i,t){return t?t===this.name&&(i==="emptyElement"||i==="view:emptyElement"||i==="element"||i==="view:element"):i==="emptyElement"||i==="view:emptyElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function kW(){return null}class Sp extends No{constructor(t,e,n,s){super(t,e,n,s),this.getFillerOffset=SW}_insertChild(t,e){if(e&&(e instanceof Wa||Array.from(e).length>0))throw new V("view-uielement-cannot-add",[this,e]);return 0}render(t,e){return this.toDomElement(t)}toDomElement(t){const e=t.createElement(this.name);for(const n of this.getAttributeKeys())e.setAttribute(n,this.getAttribute(n));return e}}Sp.prototype.is=function(i,t){return t?t===this.name&&(i==="uiElement"||i==="view:uiElement"||i==="element"||i==="view:element"):i==="uiElement"||i==="view:uiElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function EW(i){i.document.on("arrowKey",(t,e)=>AW(t,e,i.domConverter),{priority:"low"})}function SW(){return null}function AW(i,t,e){if(t.keyCode==Ue.arrowright){const n=t.domTarget.ownerDocument.defaultView.getSelection(),s=n.rangeCount==1&&n.getRangeAt(0).collapsed;if(s||t.shiftKey){const o=n.focusNode,r=n.focusOffset,a=e.domPositionToView(o,r);if(a===null)return;let l=!1;const u=a.getLastMatchingPosition(h=>(h.item.is("uiElement")&&(l=!0),!!(h.item.is("uiElement")||h.item.is("attributeElement"))));if(l){const h=e.viewPositionToDom(u);s?n.collapse(h.parent,h.offset):n.extend(h.parent,h.offset)}}}}class L0 extends No{constructor(t,e,n,s){super(t,e,n,s),this.getFillerOffset=RW}_insertChild(t,e){if(e&&(e instanceof Wa||Array.from(e).length>0))throw new V("view-rawelement-cannot-add",[this,e]);return 0}render(t,e){}}L0.prototype.is=function(i,t){return t?t===this.name&&(i==="rawElement"||i==="view:rawElement"||i==="element"||i==="view:element"):i==="rawElement"||i==="view:rawElement"||i===this.name||i==="view:"+this.name||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function RW(){return null}let Ra=class extends Tt(Ha){constructor(e,n){super();_(this,"document");_(this,"_children",[]);_(this,"_customProperties",new Map);this.document=e,n&&this._insertChild(0,n)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,n){this._fireChange("children",this,{index:e});let s=0;const o=IW(this.document,n);for(const r of o)r.parent!==null&&r._remove(),r.parent=this,this._children.splice(e,0,r),e++,s++;return s}_removeChildren(e,n=1){this._fireChange("children",this,{index:e});for(let s=e;s<e+n;s++)this._children[s].parent=null;return this._children.splice(e,n)}_fireChange(e,n,s){this.fire(`change:${e}`,n,s)}_setCustomProperty(e,n){this._customProperties.set(e,n)}_removeCustomProperty(e){return this._customProperties.delete(e)}};Ra.prototype.is=function(i){return i==="documentFragment"||i==="view:documentFragment"};function IW(i,t){return typeof t=="string"?[new Dn(i,t)]:(Li(t)||(t=[t]),Array.from(t).map(e=>typeof e=="string"?new Dn(i,e):e instanceof Co?new Dn(i,e.data):e))}class L5{constructor(t){_(this,"document");_(this,"_cloneGroups",new Map);_(this,"_slotFactory",null);this.document=t}setSelection(...t){this.document.selection._setTo(...t)}setSelectionFocus(t,e){this.document.selection._setFocus(t,e)}createDocumentFragment(t){return new Ra(this.document,t)}createText(t){return new Dn(this.document,t)}createAttributeElement(t,e,n={}){const s=new Aa(this.document,t,e);return typeof n.priority=="number"&&(s._priority=n.priority),n.id&&(s._id=n.id),n.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),s}createContainerElement(t,e,n={},s={}){let o=null;zs(n)?s=n:o=n;const r=new Kd(this.document,t,e,o);return s.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),r}createEditableElement(t,e,n={}){const s=new kp(this.document,t,e);return n.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),s}createEmptyElement(t,e,n={}){const s=new O0(this.document,t,e);return n.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),s}createUIElement(t,e,n){const s=new Sp(this.document,t,e);return n&&(s.render=n),s}createRawElement(t,e,n,s={}){const o=new L0(this.document,t,e);return n&&(o.render=n),s.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),o}setAttribute(t,e,n,s){s!==void 0?s._setAttribute(t,e,n):n._setAttribute(t,e)}removeAttribute(t,e,n){n!==void 0?n._removeAttribute(t,e):e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,n){zs(t)&&n===void 0?e._setStyle(t):n._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,n){n._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}breakAttributes(t){return t instanceof ge?this._breakAttributes(t):this._breakAttributesRange(t)}breakContainer(t){const e=t.parent;if(!e.is("containerElement"))throw new V("view-writer-break-non-container-element",this.document);if(!e.parent)throw new V("view-writer-break-root",this.document);if(t.isAtStart)return ge._createBefore(e);if(!t.isAtEnd){const n=e._clone(!1);this.insert(ge._createAfter(e),n);const s=new Ke(t,ge._createAt(e,"end")),o=new ge(n,0);this.move(s,o)}return ge._createAfter(e)}mergeAttributes(t){const e=t.offset,n=t.parent;if(n.is("$text"))return t;if(n.is("attributeElement")&&n.childCount===0){const r=n.parent,a=n.index;return n._remove(),this._removeFromClonedElementsGroup(n),this.mergeAttributes(new ge(r,a))}const s=n.getChild(e-1),o=n.getChild(e);if(!s||!o)return t;if(s.is("$text")&&o.is("$text"))return LS(s,o);if(s.is("attributeElement")&&o.is("attributeElement")&&s.isSimilar(o)){const r=s.childCount;return s._appendChild(o.getChildren()),o._remove(),this._removeFromClonedElementsGroup(o),this.mergeAttributes(new ge(s,r))}return t}mergeContainers(t){const e=t.nodeBefore,n=t.nodeAfter;if(!e||!n||!e.is("containerElement")||!n.is("containerElement"))throw new V("view-writer-merge-containers-invalid-position",this.document);const s=e.getChild(e.childCount-1),o=s instanceof Dn?ge._createAt(s,"end"):ge._createAt(e,"end");return this.move(Ke._createIn(n),ge._createAt(e,"end")),this.remove(Ke._createOn(n)),o}insert(t,e){e=Li(e)?[...e]:[e],B5(e,this.document);const n=e.reduce((r,a)=>{const l=r[r.length-1],u=!a.is("uiElement");return!l||l.breakAttributes!=u?r.push({breakAttributes:u,nodes:[a]}):l.nodes.push(a),r},[]);let s=null,o=t;for(const{nodes:r,breakAttributes:a}of n){const l=this._insertNodes(o,r,a);s||(s=l.start),o=l.end}return s?new Ke(s,o):new Ke(t)}remove(t){const e=t instanceof Ke?t:Ke._createOn(t);if(Ku(e,this.document),e.isCollapsed)return new Ra(this.document);const{start:n,end:s}=this._breakAttributesRange(e,!0),o=n.parent,r=s.offset-n.offset,a=o._removeChildren(n.offset,r);for(const u of a)this._removeFromClonedElementsGroup(u);const l=this.mergeAttributes(n);return e.start=l,e.end=l.clone(),new Ra(this.document,a)}clear(t,e){Ku(t,this.document);const n=t.getWalker({direction:"backward",ignoreElementEnd:!0});for(const s of n){const o=s.item;let r;if(o.is("element")&&e.isSimilar(o))r=Ke._createOn(o);else if(!s.nextPosition.isAfter(t.start)&&o.is("$textProxy")){const a=o.getAncestors().find(l=>l.is("element")&&e.isSimilar(l));a&&(r=Ke._createIn(a))}r&&(r.end.isAfter(t.end)&&(r.end=t.end),r.start.isBefore(t.start)&&(r.start=t.start),this.remove(r))}}move(t,e){let n;if(e.isAfter(t.end)){e=this._breakAttributes(e,!0);const s=e.parent,o=s.childCount;t=this._breakAttributesRange(t,!0),n=this.remove(t),e.offset+=s.childCount-o}else n=this.remove(t);return this.insert(e,n)}wrap(t,e){if(!(e instanceof Aa))throw new V("view-writer-wrap-invalid-attribute",this.document);if(Ku(t,this.document),t.isCollapsed){let n=t.start;n.parent.is("element")&&!PW(n.parent)&&(n=n.getLastMatchingPosition(o=>o.item.is("uiElement"))),n=this._wrapPosition(n,e);const s=this.document.selection;return s.isCollapsed&&s.getFirstPosition().isEqual(t.start)&&this.setSelection(n),new Ke(n)}else return this._wrapRange(t,e)}unwrap(t,e){if(!(e instanceof Aa))throw new V("view-writer-unwrap-invalid-attribute",this.document);if(Ku(t,this.document),t.isCollapsed)return t;const{start:n,end:s}=this._breakAttributesRange(t,!0),o=n.parent,r=this._unwrapChildren(o,n.offset,s.offset,e),a=this.mergeAttributes(r.start);a.isEqual(r.start)||r.end.offset--;const l=this.mergeAttributes(r.end);return new Ke(a,l)}rename(t,e){const n=new Kd(this.document,t,e.getAttributes());return this.insert(ge._createAfter(e),n),this.move(Ke._createIn(e),ge._createAt(n,0)),this.remove(Ke._createOn(e)),n}clearClonedElementsGroup(t){this._cloneGroups.delete(t)}createPositionAt(t,e){return ge._createAt(t,e)}createPositionAfter(t){return ge._createAfter(t)}createPositionBefore(t){return ge._createBefore(t)}createRange(t,e){return new Ke(t,e)}createRangeOn(t){return Ke._createOn(t)}createRangeIn(t){return Ke._createIn(t)}createSelection(...t){return new Ro(...t)}createSlot(t="children"){if(!this._slotFactory)throw new V("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,t)}_registerSlotFactory(t){this._slotFactory=t}_clearSlotFactory(){this._slotFactory=null}_insertNodes(t,e,n){let s;if(n?s=jy(t):s=t.parent.is("$text")?t.parent.parent:t.parent,!s)throw new V("view-writer-invalid-position-container",this.document);let o;n?o=this._breakAttributes(t,!0):o=t.parent.is("$text")?Lw(t):t;const r=s._insertChild(o.offset,e);for(const h of e)this._addToClonedElementsGroup(h);const a=o.getShiftedBy(r),l=this.mergeAttributes(o);l.isEqual(o)||a.offset--;const u=this.mergeAttributes(a);return new Ke(l,u)}_wrapChildren(t,e,n,s){let o=e;const r=[];for(;o<n;){const l=t.getChild(o),u=l.is("$text"),h=l.is("attributeElement");if(h&&l._canMergeAttributesFrom(s))l._mergeAttributesFrom(s),r.push(new ge(t,o));else if(u||!h||MW(s,l)){const m=s._clone();l._remove(),m._appendChild(l),t._insertChild(o,m),this._addToClonedElementsGroup(m),r.push(new ge(t,o))}else this._wrapChildren(l,0,l.childCount,s);o++}let a=0;for(const l of r){if(l.offset-=a,l.offset==e)continue;this.mergeAttributes(l).isEqual(l)||(a++,n--)}return Ke._createFromParentsAndOffsets(t,e,t,n)}_unwrapChildren(t,e,n,s){let o=e;const r=[];for(;o<n;){const l=t.getChild(o);if(!l.is("attributeElement")){o++;continue}if(l.isSimilar(s)){const u=l.getChildren(),h=l.childCount;l._remove(),t._insertChild(o,u),this._removeFromClonedElementsGroup(l),r.push(new ge(t,o),new ge(t,o+h)),o+=h,n+=h-1;continue}if(l._canSubtractAttributesOf(s)){l._subtractAttributesOf(s),r.push(new ge(t,o),new ge(t,o+1)),o++;continue}this._unwrapChildren(l,0,l.childCount,s),o++}let a=0;for(const l of r){if(l.offset-=a,l.offset==e||l.offset==n)continue;this.mergeAttributes(l).isEqual(l)||(a++,n--)}return Ke._createFromParentsAndOffsets(t,e,t,n)}_wrapRange(t,e){const{start:n,end:s}=this._breakAttributesRange(t,!0),o=n.parent,r=this._wrapChildren(o,n.offset,s.offset,e),a=this.mergeAttributes(r.start);a.isEqual(r.start)||r.end.offset--;const l=this.mergeAttributes(r.end);return new Ke(a,l)}_wrapPosition(t,e){if(e.isSimilar(t.parent))return OS(t.clone());t.parent.is("$text")&&(t=Lw(t));const n=this.createAttributeElement("_wrapPosition-fake-element");n._priority=Number.POSITIVE_INFINITY,n.isSimilar=()=>!1,t.parent._insertChild(t.offset,n);const s=new Ke(t,t.getShiftedBy(1));this.wrap(s,e);const o=new ge(n.parent,n.index);n._remove();const r=o.nodeBefore,a=o.nodeAfter;return r&&r.is("view:$text")&&a&&a.is("view:$text")?LS(r,a):OS(o)}_breakAttributesRange(t,e=!1){const n=t.start,s=t.end;if(Ku(t,this.document),t.isCollapsed){const l=this._breakAttributes(t.start,e);return new Ke(l,l)}const o=this._breakAttributes(s,e),r=o.parent.childCount,a=this._breakAttributes(n,e);return o.offset+=o.parent.childCount-r,new Ke(a,o)}_breakAttributes(t,e=!1){const n=t.offset,s=t.parent;if(t.parent.is("emptyElement"))throw new V("view-writer-cannot-break-empty-element",this.document);if(t.parent.is("uiElement"))throw new V("view-writer-cannot-break-ui-element",this.document);if(t.parent.is("rawElement"))throw new V("view-writer-cannot-break-raw-element",this.document);if(!e&&s.is("$text")&&Ky(s.parent)||Ky(s))return t.clone();if(s.is("$text"))return this._breakAttributes(Lw(t),e);const o=s.childCount;if(n==o){const r=new ge(s.parent,s.index+1);return this._breakAttributes(r,e)}else if(n===0){const r=new ge(s.parent,s.index);return this._breakAttributes(r,e)}else{const r=s.index+1,a=s._clone();s.parent._insertChild(r,a),this._addToClonedElementsGroup(a);const l=s.childCount-n,u=s._removeChildren(n,l);a._appendChild(u);const h=new ge(s.parent,r);return this._breakAttributes(h,e)}}_addToClonedElementsGroup(t){if(!t.root.is("rootElement"))return;if(t.is("element"))for(const s of t.getChildren())this._addToClonedElementsGroup(s);const e=t.id;if(!e)return;let n=this._cloneGroups.get(e);n||(n=new Set,this._cloneGroups.set(e,n)),n.add(t),t._clonesGroup=n}_removeFromClonedElementsGroup(t){if(t.is("element"))for(const s of t.getChildren())this._removeFromClonedElementsGroup(s);const e=t.id;if(!e)return;const n=this._cloneGroups.get(e);n&&n.delete(t)}}function PW(i){return Array.from(i.getChildren()).some(t=>!t.is("uiElement"))}function jy(i){let t=i.parent;for(;!Ky(t);){if(!t)return;t=t.parent}return t}function MW(i,t){return i.priority<t.priority?!0:i.priority>t.priority?!1:i.getIdentity()<t.getIdentity()}function OS(i){const t=i.nodeBefore;if(t&&t.is("$text"))return new ge(t,t.data.length);const e=i.nodeAfter;return e&&e.is("$text")?new ge(e,0):i}function Lw(i){if(i.offset==i.parent.data.length)return new ge(i.parent.parent,i.parent.index+1);if(i.offset===0)return new ge(i.parent.parent,i.parent.index);const t=i.parent.data.slice(i.offset);return i.parent._data=i.parent.data.slice(0,i.offset),i.parent.parent._insertChild(i.parent.index+1,new Dn(i.root.document,t)),new ge(i.parent.parent,i.parent.index+1)}function LS(i,t){const e=i.data.length;return i._data+=t.data,t._remove(),new ge(i,e)}const VW=[Dn,Aa,Kd,O0,L0,Sp];function B5(i,t){for(const e of i){if(!VW.some(n=>e instanceof n))throw new V("view-writer-insert-invalid-node-type",t);e.is("$text")||B5(e.getChildren(),t)}}function Ky(i){return i&&(i.is("containerElement")||i.is("documentFragment"))}function Ku(i,t){const e=jy(i.start),n=jy(i.end);if(!e||!n||e!==n)throw new V("view-writer-invalid-range-container",t)}const F5=i=>i.createTextNode(" "),U5=i=>{const t=i.createElement("span");return t.dataset.ckeFiller="true",t.innerText=" ",t},z5=i=>{const t=i.createElement("br");return t.dataset.ckeFiller="true",t},Ni=7,Zd="⁠".repeat(Ni);function bi(i){return typeof i=="string"?i.substr(0,Ni)===Zd:$t(i)&&i.data.substr(0,Ni)===Zd}function lc(i){return i.data.length==Ni&&bi(i)}function BS(i){const t=typeof i=="string"?i:i.data;return bi(i)?t.slice(Ni):t}function NW(i){i.document.on("arrowKey",DW,{priority:"low"})}function DW(i,t){if(t.keyCode==Ue.arrowleft){const e=t.domTarget.ownerDocument.defaultView.getSelection();if(e.rangeCount==1&&e.getRangeAt(0).collapsed){const n=e.getRangeAt(0).startContainer,s=e.getRangeAt(0).startOffset;bi(n)&&s<=Ni&&e.collapse(n,0)}}}class OW extends _t(){constructor(e,n){super();_(this,"domDocuments",new Set);_(this,"domConverter");_(this,"markedAttributes",new Set);_(this,"markedChildren",new Set);_(this,"markedTexts",new Set);_(this,"selection");_(this,"_inlineFiller",null);_(this,"_fakeSelectionContainer",null);this.domConverter=e,this.selection=n,this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),Se.isBlink&&!Se.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()})}markToSync(e,n){if(e==="text")this.domConverter.mapViewToDom(n.parent)&&this.markedTexts.add(n);else{if(!this.domConverter.mapViewToDom(n))return;if(e==="attributes")this.markedAttributes.add(n);else if(e==="children")this.markedChildren.add(n);else throw new V("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!Se.isAndroid)return;let e=null;const n=Se.isBlink&&!Se.isAndroid?!this.isSelecting:!0;for(const s of this.markedChildren)this._updateChildrenMappings(s);n?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller),e&&e.parent.is("$text")&&(e=ge._createBefore(e.parent)));for(const s of this.markedAttributes)this._updateAttrs(s);for(const s of this.markedChildren)this._updateChildren(s,{inlineFillerPosition:e});for(const s of this.markedTexts)!this.markedChildren.has(s.parent)&&this.domConverter.mapViewToDom(s.parent)&&this._updateText(s,{inlineFillerPosition:e});if(n)if(e){const s=this.domConverter.viewPositionToDom(e),o=s.parent.ownerDocument;bi(s.parent)?this._inlineFiller=s.parent:this._inlineFiller=FS(o,s.parent,s.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){const n=this.domConverter.mapViewToDom(e);if(!n)return;const s=Array.from(n.childNodes),o=Array.from(this.domConverter.viewChildrenToDom(e,{withChildren:!1})),r=this._diffNodeLists(s,o),a=this._findUpdateActions(r,s,o,BW);if(a.indexOf("update")!==-1){const l={equal:0,insert:0,delete:0};for(const u of a)if(u==="update"){const h=l.equal+l.insert,m=l.equal+l.delete,p=e.getChild(h);p&&!p.is("uiElement")&&!p.is("rawElement")&&this._updateElementMappings(p,s[m]),xS(o[h]),l.equal++}else l[u]++}}_updateElementMappings(e,n){this.domConverter.unbindDomElement(n),this.domConverter.bindElements(n,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){const e=this.selection.getFirstPosition();return e.parent.is("$text")?ge._createBefore(e.parent):e}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),n=this.domConverter.viewPositionToDom(e);return!!(n&&$t(n.parent)&&bi(n.parent))}_removeInlineFiller(){const e=this._inlineFiller;if(!bi(e))throw new V("view-renderer-filler-was-lost",this);lc(e)?e.remove():e.data=e.data.substr(Ni),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),n=e.parent,s=e.offset;if(!this.domConverter.mapViewToDom(n.root)||!n.is("element")||!LW(n))return!1;const o=e.nodeBefore,r=e.nodeAfter;return!(o instanceof Dn||r instanceof Dn||s===n.getFillerOffset()&&(!o||!o.is("element","br"))||Se.isAndroid&&(o||r))}_updateText(e,n){const s=this.domConverter.findCorrespondingDomText(e);let r=this.domConverter.viewToDom(e).data;const a=n.inlineFillerPosition;a&&a.parent==e.parent&&a.offset==e.index&&(r=Zd+r),this._updateTextNode(s,r)}_updateAttrs(e){const n=this.domConverter.mapViewToDom(e);if(n){for(const s of Array.from(n.attributes)){const o=s.name;e.hasAttribute(o)||this.domConverter.removeDomElementAttribute(n,o)}for(const s of e.getAttributeKeys())this.domConverter.setDomElementAttribute(n,s,e.getAttribute(s),e)}}_updateChildren(e,n){const s=this.domConverter.mapViewToDom(e);if(!s)return;if(Se.isAndroid){let p=null;for(const v of Array.from(s.childNodes)){if(p&&$t(p)&&$t(v)){s.normalize();break}p=v}}const o=n.inlineFillerPosition,r=s.childNodes,a=Array.from(this.domConverter.viewChildrenToDom(e,{bind:!0}));o&&o.parent===e&&FS(s.ownerDocument,a,o.offset);const l=this._diffNodeLists(r,a),u=this._findUpdateActions(l,r,a,FW);let h=0;const m=new Set;for(const p of u)p==="delete"?(m.add(r[h]),xS(r[h])):(p==="equal"||p==="update")&&h++;h=0;for(const p of u)p==="insert"?(E5(s,h,a[h]),h++):p==="update"?(this._updateTextNode(r[h],a[h].data),h++):p==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(a[h])),h++);for(const p of m)p.parentNode||this.domConverter.unbindDomElement(p)}_diffNodeLists(e,n){return e=HW(e,this._fakeSelectionContainer),pc(e,n,UW.bind(null,this.domConverter))}_findUpdateActions(e,n,s,o){if(e.indexOf("insert")===-1||e.indexOf("delete")===-1)return e;let r=[],a=[],l=[];const u={equal:0,insert:0,delete:0};for(const h of e)h==="insert"?l.push(s[u.equal+u.insert]):h==="delete"?a.push(n[u.equal+u.delete]):(r=r.concat(pc(a,l,o).map(m=>m==="equal"?"update":m)),r.push("equal"),a=[],l=[]),u[h]++;return r.concat(pc(a,l,o).map(h=>h==="equal"?"update":h))}_updateTextNode(e,n){const s=e.data;s!=n&&(Se.isAndroid&&this.isComposing&&s.replace(/\u00A0/g," ")==n.replace(/\u00A0/g," ")||this._updateTextNodeInternal(e,n))}_updateTextNodeInternal(e,n){const s=c5(e.data,n);for(const o of s)o.type==="insert"?e.insertData(o.index,o.values.join("")):e.deleteData(o.index,o.howMany)}_markDescendantTextToSync(e){if(e){if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(const n of e.getChildren())this._markDescendantTextToSync(n)}}_updateSelection(){if(Se.isBlink&&!Se.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}const e=this.domConverter.mapViewToDom(this.selection.editableElement);!this.isFocused||!e||(this.selection.isFake?this._updateFakeSelection(e):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(e)):this.isComposing&&Se.isAndroid||this._updateDomSelection(e))}_updateFakeSelection(e){const n=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=WW(n));const s=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(s,this.selection),!this._fakeSelectionNeedsUpdate(e))return;(!s.parentElement||s.parentElement!=e)&&e.appendChild(s),s.textContent=this.selection.fakeSelectionLabel||" ";const o=n.getSelection(),r=n.createRange();o.removeAllRanges(),r.selectNodeContents(s),o.addRange(r)}_updateDomSelection(e){const n=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(n))return;const s=this.domConverter.viewPositionToDom(this.selection.anchor),o=this.domConverter.viewPositionToDom(this.selection.focus);n.setBaseAndExtent(s.parent,s.offset,o.parent,o.offset),Se.isGecko&&zW(o,n)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;const n=e&&this.domConverter.domSelectionToView(e);return!(n&&this.selection.isEqual(n)||!this.selection.isCollapsed&&this.selection.isSimilar(n))}_fakeSelectionNeedsUpdate(e){const n=this._fakeSelectionContainer,s=e.ownerDocument.getSelection();return!n||n.parentElement!==e||s.anchorNode!==n&&!n.contains(s.anchorNode)?!0:n.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const e of this.domDocuments){const n=e.getSelection();if(n.rangeCount){const s=e.activeElement,o=this.domConverter.mapDomToView(s);s&&o&&n.removeAllRanges()}}}_removeFakeSelection(){const e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){const e=this.selection.editableElement;e&&this.domConverter.focus(e)}}}function LW(i){if(i.getAttribute("contenteditable")=="false")return!1;const t=i.findAncestor(e=>e.hasAttribute("contenteditable"));return!t||t.getAttribute("contenteditable")=="true"}function FS(i,t,e){const n=t instanceof Array?t:t.childNodes,s=n[e];if($t(s))return s.data=Zd+s.data,s;{const o=i.createTextNode(Zd);return Array.isArray(t)?n.splice(e,0,o):E5(t,e,o),o}}function BW(i,t){return Mr(i)&&Mr(t)&&!$t(i)&&!$t(t)&&!xd(i)&&!xd(t)&&i.tagName.toLowerCase()===t.tagName.toLowerCase()}function FW(i,t){return Mr(i)&&Mr(t)&&$t(i)&&$t(t)}function UW(i,t,e){return t===e?!0:$t(t)&&$t(e)?t.data===e.data:!!(i.isBlockFiller(t)&&i.isBlockFiller(e))}function zW(i,t){let e=i.parent,n=i.offset;if($t(e)&&lc(e)&&(n=ud(e)+1,e=e.parentNode),e.nodeType!=Node.ELEMENT_NODE||n!=e.childNodes.length-1)return;const s=e.childNodes[n];s&&s.tagName=="BR"&&t.addRange(t.getRangeAt(0))}function HW(i,t){const e=Array.from(i);return e.length==0||!t||e[e.length-1]==t&&e.pop(),e}function WW(i){const t=i.createElement("div");return t.className="ck-fake-selection-container",Object.assign(t.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),t.textContent=" ",t}const qW=z5(de.document),$W=F5(de.document),GW=U5(de.document),um="data-ck-unsafe-attribute-",US="data-ck-unsafe-element";class Ap{constructor(t,{blockFillerMode:e,renderingMode:n="editing"}={}){_(this,"document");_(this,"renderingMode");_(this,"blockFillerMode");_(this,"preElements");_(this,"blockElements");_(this,"inlineObjectElements");_(this,"unsafeElements");_(this,"_domDocument");_(this,"_domToViewMapping",new WeakMap);_(this,"_viewToDomMapping",new WeakMap);_(this,"_fakeSelectionMapping",new WeakMap);_(this,"_rawContentElementMatcher",new Ts);_(this,"_inlineObjectElementMatcher",new Ts);_(this,"_elementsWithTemporaryCustomProperties",new Set);this.document=t,this.renderingMode=n,this.blockFillerMode=e||(n==="editing"?"br":"nbsp"),this.preElements=["pre","textarea"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?de.document:de.document.implementation.createHTMLDocument("")}get domDocument(){return this._domDocument}bindFakeSelection(t,e){this._fakeSelectionMapping.set(t,new Ro(e))}fakeSelectionToView(t){return this._fakeSelectionMapping.get(t)}bindElements(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}unbindDomElement(t){const e=this._domToViewMapping.get(t);if(e){this._domToViewMapping.delete(t),this._viewToDomMapping.delete(e);for(const n of t.children)this.unbindDomElement(n)}}bindDocumentFragments(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}shouldRenderAttribute(t,e,n){return this.renderingMode==="data"?!0:(t=t.toLowerCase(),t.startsWith("on")||t==="srcdoc"&&e.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:n==="img"&&(t==="src"||t==="srcset")||n==="source"&&t==="srcset"?!0:!e.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(t,e){if(this.renderingMode==="data"){t.innerHTML=e;return}const n=new DOMParser().parseFromString(e,"text/html"),s=n.createDocumentFragment(),o=n.body.childNodes;for(;o.length>0;)s.appendChild(o[0]);const r=n.createTreeWalker(s,NodeFilter.SHOW_ELEMENT),a=[];let l;for(;l=r.nextNode();)a.push(l);for(const u of a){for(const m of u.getAttributeNames())this.setDomElementAttribute(u,m,u.getAttribute(m));const h=u.tagName.toLowerCase();this._shouldRenameElement(h)&&(qS(h),u.replaceWith(this._createReplacementDomElement(h,u)))}for(;t.firstChild;)t.firstChild.remove();t.append(s)}viewToDom(t,e={}){if(t.is("$text")){const n=this._processDataFromViewText(t);return this._domDocument.createTextNode(n)}else{const n=t;if(this.mapViewToDom(n))if(n.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(n);else return this.mapViewToDom(n);let s;if(n.is("documentFragment"))s=this._domDocument.createDocumentFragment(),e.bind&&this.bindDocumentFragments(s,n);else{if(n.is("uiElement"))return n.name==="$comment"?s=this._domDocument.createComment(n.getCustomProperty("$rawContent")):s=n.render(this._domDocument,this),e.bind&&this.bindElements(s,n),s;this._shouldRenameElement(n.name)?(qS(n.name),s=this._createReplacementDomElement(n.name)):n.hasAttribute("xmlns")?s=this._domDocument.createElementNS(n.getAttribute("xmlns"),n.name):s=this._domDocument.createElement(n.name),n.is("rawElement")&&n.render(s,this),e.bind&&this.bindElements(s,n);for(const o of n.getAttributeKeys())this.setDomElementAttribute(s,o,n.getAttribute(o),n)}if(e.withChildren!==!1)for(const o of this.viewChildrenToDom(n,e))s instanceof HTMLTemplateElement?s.content.appendChild(o):s.appendChild(o);return s}}setDomElementAttribute(t,e,n,s){const o=this.shouldRenderAttribute(e,n,t.tagName.toLowerCase())||s&&s.shouldRenderUnsafeAttribute(e);if(o||Ze("domconverter-unsafe-attribute-detected",{domElement:t,key:e,value:n}),!PH(e)){Ze("domconverter-invalid-attribute-detected",{domElement:t,key:e,value:n});return}t.hasAttribute(e)&&!o?t.removeAttribute(e):t.hasAttribute(um+e)&&o&&t.removeAttribute(um+e),t.setAttribute(o?e:um+e,n)}removeDomElementAttribute(t,e){e!=US&&(t.removeAttribute(e),t.removeAttribute(um+e))}*viewChildrenToDom(t,e={}){const n=t.getFillerOffset&&t.getFillerOffset();let s=0;for(const o of t.getChildren()){n===s&&(yield this._getBlockFiller());const r=o.is("element")&&!!o.getCustomProperty("dataPipeline:transparentRendering")&&!Ln(o.getAttributes());if(r&&this.renderingMode=="data")if(o.is("rawElement")){const a=this._domDocument.createElement(o.name);o.render(a,this),yield*[...a.childNodes]}else yield*this.viewChildrenToDom(o,e);else r&&Ze("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:o}),yield this.viewToDom(o,e);s++}n===s&&(yield this._getBlockFiller())}viewRangeToDom(t){const e=this.viewPositionToDom(t.start),n=this.viewPositionToDom(t.end),s=this._domDocument.createRange();return s.setStart(e.parent,e.offset),s.setEnd(n.parent,n.offset),s}viewPositionToDom(t){const e=t.parent;if(e.is("$text")){const n=this.findCorrespondingDomText(e);if(!n)return null;let s=t.offset;return bi(n)&&(s+=Ni),{parent:n,offset:s}}else{let n,s,o;if(t.offset===0){if(n=this.mapViewToDom(e),!n)return null;o=n.childNodes[0]}else{const a=t.nodeBefore;if(s=a.is("$text")?this.findCorrespondingDomText(a):this.mapViewToDom(a),!s)return null;n=s.parentNode,o=s.nextSibling}if($t(o)&&bi(o))return{parent:o,offset:Ni};const r=s?ud(s)+1:0;return{parent:n,offset:r}}}domToView(t,e={}){const n=[],s=this._domToView(t,e,n),o=s.next().value;return!o||(s.next(),this._processDomInlineNodes(null,n,e),this.blockFillerMode=="br"&&HS(o))||o.is("$text")&&o.data.length==0?null:o}*domChildrenToView(t,e={},n=[]){let s=[];t instanceof HTMLTemplateElement?s=[...t.content.childNodes]:s=[...t.childNodes];for(let o=0;o<s.length;o++){const r=s[o],a=this._domToView(r,e,n),l=a.next().value;l!==null&&(this._isBlockViewElement(l)&&this._processDomInlineNodes(t,n,e),this.blockFillerMode=="br"&&HS(l)||(yield l),a.next())}this._processDomInlineNodes(t,n,e)}domSelectionToView(t){if(JW(t))return new Ro([]);if(t.rangeCount===1){let s=t.getRangeAt(0).startContainer;$t(s)&&(s=s.parentNode);const o=this.fakeSelectionToView(s);if(o)return o}const e=this.isDomSelectionBackward(t),n=[];for(let s=0;s<t.rangeCount;s++){const o=t.getRangeAt(s),r=this.domRangeToView(o);r&&n.push(r)}return new Ro(n,{backward:e})}domRangeToView(t){const e=this.domPositionToView(t.startContainer,t.startOffset),n=this.domPositionToView(t.endContainer,t.endOffset);return e&&n?new Ke(e,n):null}domPositionToView(t,e=0){if(this.isBlockFiller(t))return this.domPositionToView(t.parentNode,ud(t));const n=this.mapDomToView(t);if(n&&(n.is("uiElement")||n.is("rawElement")))return ge._createBefore(n);if($t(t)){if(lc(t))return this.domPositionToView(t.parentNode,ud(t));const s=this.findCorrespondingViewText(t);let o=e;return s?(bi(t)&&(o-=Ni,o=o<0?0:o),new ge(s,o)):null}else{if(e===0){const s=this.mapDomToView(t);if(s)return new ge(s,0)}else{const s=t.childNodes[e-1];if($t(s)&&lc(s)||s&&this.isBlockFiller(s))return this.domPositionToView(s.parentNode,ud(s));const o=$t(s)?this.findCorrespondingViewText(s):this.mapDomToView(s);if(o&&o.parent)return new ge(o.parent,o.index+1)}return null}}mapDomToView(t){return this.getHostViewElement(t)||this._domToViewMapping.get(t)}findCorrespondingViewText(t){if(lc(t))return null;const e=this.getHostViewElement(t);if(e)return e;const n=t.previousSibling;if(n){if(!this.isElement(n))return null;const s=this.mapDomToView(n);if(s){const o=s.nextSibling;return o instanceof Dn?o:null}}else{const s=this.mapDomToView(t.parentNode);if(s){const o=s.getChild(0);return o instanceof Dn?o:null}}return null}mapViewToDom(t){return this._viewToDomMapping.get(t)}findCorrespondingDomText(t){const e=t.previousSibling;return e&&this.mapViewToDom(e)?this.mapViewToDom(e).nextSibling:!e&&t.parent&&this.mapViewToDom(t.parent)?this.mapViewToDom(t.parent).childNodes[0]:null}focus(t){const e=this.mapViewToDom(t);if(!e||e.ownerDocument.activeElement===e)return;const{scrollX:n,scrollY:s}=de.window,o=[];zS(e,r=>{const{scrollLeft:a,scrollTop:l}=r;o.push([a,l])}),e.focus(),zS(e,r=>{const[a,l]=o.shift();r.scrollLeft=a,r.scrollTop=l}),de.window.scrollTo(n,s)}_clearDomSelection(){const t=this.mapViewToDom(this.document.selection.editableElement);if(!t)return;const e=t.ownerDocument.defaultView.getSelection(),n=this.domSelectionToView(e);n&&n.rangeCount>0&&e.removeAllRanges()}isElement(t){return t&&t.nodeType==Node.ELEMENT_NODE}isDocumentFragment(t){return t&&t.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(t){return this.blockFillerMode=="br"?t.isEqualNode(qW):WS(t,this.blockElements)?!0:t.isEqualNode(GW)||KW(t,this.blockElements)}isDomSelectionBackward(t){if(t.isCollapsed)return!1;const e=this._domDocument.createRange();try{e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset)}catch{return!1}const n=e.collapsed;return e.detach(),n}getHostViewElement(t){const e=SH(t);for(e.pop();e.length;){const n=e.pop(),s=this._domToViewMapping.get(n);if(s&&(s.is("uiElement")||s.is("rawElement")))return s}return null}isDomSelectionCorrect(t){return this._isDomSelectionPositionCorrect(t.anchorNode,t.anchorOffset)&&this._isDomSelectionPositionCorrect(t.focusNode,t.focusOffset)}registerRawContentMatcher(t){this._rawContentElementMatcher.add(t)}registerInlineObjectMatcher(t){this._inlineObjectElementMatcher.add(t)}_clearTemporaryCustomProperties(){for(const t of this._elementsWithTemporaryCustomProperties)t._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return F5(this._domDocument);case"markedNbsp":return U5(this._domDocument);case"br":return z5(this._domDocument)}}_isDomSelectionPositionCorrect(t,e){if($t(t)&&bi(t)&&e<Ni||this.isElement(t)&&bi(t.childNodes[e]))return!1;const n=this.mapDomToView(t);return!(n&&(n.is("uiElement")||n.is("rawElement")))}*_domToView(t,e,n){if(this.blockFillerMode!="br"&&WS(t,this.blockElements))return null;const s=this.getHostViewElement(t);if(s)return s;if(xd(t)&&e.skipComments)return null;if($t(t)){if(lc(t))return null;{const o=t.data;if(o==="")return null;const r=new Dn(this.document,o);return n.push(r),r}}else{let o=this.mapDomToView(t);if(o)return this._isInlineObjectElement(o)&&n.push(o),o;if(this.isDocumentFragment(t))o=new Ra(this.document),e.bind&&this.bindDocumentFragments(t,o);else{o=this._createViewElement(t,e),e.bind&&this.bindElements(t,o);const a=t.attributes;if(a)for(let l=a.length,u=0;u<l;u++)o._setAttribute(a[u].name,a[u].value);if(this._isViewElementWithRawContent(o,e))return o._setCustomProperty("$rawContent",t.innerHTML),this._isBlockViewElement(o)||n.push(o),o;if(xd(t))return o._setCustomProperty("$rawContent",t.data),o}yield o;const r=[];if(e.withChildren!==!1)for(const a of this.domChildrenToView(t,e,r))o._appendChild(a);if(this._isInlineObjectElement(o))n.push(o),this._processDomInlineNodes(null,r,e);else for(const a of r)n.push(a)}}_processDomInlineNodes(t,e,n){if(!e.length||t&&!this.isDocumentFragment(t)&&!this._isBlockDomElement(t))return;let s=!1;for(let o=0;o<e.length;o++){const r=e[o];if(!r.is("$text")){s=!1;continue}let a,l=!1;if(this._isPreFormatted(r))a=BS(r.data);else{a=r.data.replace(/[ \n\t\r]{1,}/g," "),l=/[^\S\u00A0]/.test(a.charAt(a.length-1));const u=o>0?e[o-1]:null,h=o+1<e.length?e[o+1]:null,m=!u||u.is("element")&&u.name=="br"||s,p=h?!1:!bi(r.data);n.withChildren!==!1&&(m&&(a=a.replace(/^ /,"")),p&&(a=a.replace(/ $/,""))),a=BS(a),this.blockFillerMode!="br"&&r.parent&&(YW(r.parent,a)?(a="",r.parent.parent&&(r.parent.parent._setCustomProperty("$hasBlockFiller",!0),r.parent._remove())):ZW(r.parent,a,this.blockElements)&&(a="",r.parent._setCustomProperty("$hasBlockFiller",!0))),a=a.replace(/ \u00A0/g,"  ");const v=h&&h.is("element")&&h.name!="br",C=h&&h.is("$text")&&h.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(a)||!h||v||C)&&(a=a.replace(/\u00A0$/," ")),(m||u&&u.is("element")&&u.name!="br")&&(a=a.replace(/^\u00A0/," "))}a.length==0&&r.parent?(r._remove(),e.splice(o,1),o--):(r._data=a,s=l)}e.length=0}_processDataFromViewText(t){let e=t.data;if(this._isPreFormatted(t))return e;if(e.charAt(0)==" "){const n=this._getTouchingInlineViewNode(t,!1);(n&&n.is("$textProxy")&&this._nodeEndsWithSpace(n)||!n)&&(e=" "+e.substr(1))}if(e.charAt(e.length-1)==" "){const n=this._getTouchingInlineViewNode(t,!0),s=n&&n.is("$textProxy")&&n.data.charAt(0)==" ";(e.charAt(e.length-2)==" "||!n||s)&&(e=e.substr(0,e.length-1)+" ")}return e.replace(/ {2}/g,"  ")}_nodeEndsWithSpace(t){if(this._isPreFormatted(t))return!1;const e=this._processDataFromViewText(t);return e.charAt(e.length-1)==" "}_isPreFormatted(t){if(jW(t,this.preElements))return!0;for(const e of t.getAncestors({parentFirst:!0}))if(!(!e.is("element")||!e.hasStyle("white-space")||e.getStyle("white-space")==="inherit"))return["pre","pre-wrap","break-spaces"].includes(e.getStyle("white-space"));return!1}_getTouchingInlineViewNode(t,e){const n=new Ta({startPosition:e?ge._createAfter(t):ge._createBefore(t),direction:e?"forward":"backward"});for(const{item:s}of n){if(s.is("$textProxy"))return s;if(s.is("element")&&s.getCustomProperty("dataPipeline:transparentRendering"))continue;if(s.is("element","br"))return null;if(this._isInlineObjectElement(s))return s;if(s.is("containerElement"))return null}return null}_isBlockDomElement(t){return this.isElement(t)&&this.blockElements.includes(t.tagName.toLowerCase())}_isBlockViewElement(t){return t.is("element")&&this.blockElements.includes(t.name)}_isInlineObjectElement(t){return t.is("element")?t.name=="br"||this.inlineObjectElements.includes(t.name)||!!this._inlineObjectElementMatcher.match(t):!1}_createViewElement(t,e){if(xd(t))return new Sp(this.document,"$comment");const n=e.keepOriginalCase?t.tagName:t.tagName.toLowerCase();return new No(this.document,n)}_isViewElementWithRawContent(t,e){return e.withChildren!==!1&&t.is("element")&&!!this._rawContentElementMatcher.match(t)}_shouldRenameElement(t){const e=t.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(e)}_createReplacementDomElement(t,e){const n=this._domDocument.createElement("span");if(n.setAttribute(US,t),e){for(;e.firstChild;)n.appendChild(e.firstChild);for(const s of e.getAttributeNames())n.setAttribute(s,e.getAttribute(s))}return n}}function jW(i,t){return i.getAncestors().some(e=>e.is("element")&&t.includes(e.name))}function zS(i,t){let e=i;for(;e;)t(e),e=e.parentElement}function KW(i,t){return i.isEqualNode($W)&&H5(i,t)&&i.parentNode.childNodes.length===1}function H5(i,t){const e=i.parentNode;return!!e&&!!e.tagName&&t.includes(e.tagName.toLowerCase())}function ZW(i,t,e){return t==" "&&i&&i.is("element")&&i.childCount==1&&e.includes(i.name)}function YW(i,t){return t==" "&&i&&i.is("element","span")&&i.childCount==1&&i.hasAttribute("data-cke-filler")}function HS(i){return i.is("element","br")&&i.hasAttribute("data-cke-filler")}function WS(i,t){return i.tagName==="BR"&&H5(i,t)&&i.parentNode.childNodes.length===1}function qS(i){i==="script"&&Ze("domconverter-unsafe-script-element-detected"),i==="style"&&Ze("domconverter-unsafe-style-element-detected")}function JW(i){if(!Se.isGecko||!i.rangeCount)return!1;const t=i.getRangeAt(0).startContainer;try{Object.prototype.toString.call(t)}catch{return!0}return!1}class Ks extends Yn(){constructor(e){super();_(this,"view");_(this,"document");_(this,"_isEnabled",!1);this.view=e,this.document=e.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&e.nodeType===3&&(e=e.parentNode),!e||e.nodeType!==1?!1:e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}class Na{constructor(t,e,n){_(this,"view");_(this,"document");_(this,"domEvent");_(this,"domTarget");this.view=t,this.document=t.document,this.domEvent=e,this.domTarget=e.target,a5(this,n)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class Bo extends Ks{constructor(){super(...arguments);_(this,"useCapture",!1);_(this,"usePassive",!1)}observe(e){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(s=>{this.listenTo(e,s,(o,r)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(r.target)&&this.onDomEvent(r)},{useCapture:this.useCapture,usePassive:this.usePassive})})}stopObserving(e){this.stopListening(e)}fire(e,n,s){this.isEnabled&&this.document.fire(e,new Na(this.view,n,s))}}class XW extends Bo{constructor(){super(...arguments);_(this,"domEventType",["keydown","keyup"])}onDomEvent(e){const n={keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return Cc(this)}};this.fire(e.type,e,n)}}class QW extends Ks{constructor(e){super(e);_(this,"_fireSelectionChangeDoneDebounced");this._fireSelectionChangeDoneDebounced=ss(n=>{this.document.fire("selectionChangeDone",n)},200)}observe(){const e=this.document;e.on("arrowKey",(n,s)=>{e.selection.isFake&&this.isEnabled&&s.preventDefault()},{context:"$capture"}),e.on("arrowKey",(n,s)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(s.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){const n=this.document.selection,s=new Ro(n.getRanges(),{backward:n.isBackward,fake:!1});(e==Ue.arrowleft||e==Ue.arrowup)&&s.setTo(s.getFirstPosition()),(e==Ue.arrowright||e==Ue.arrowdown)&&s.setTo(s.getLastPosition());const o={oldSelection:n,newSelection:s,domSelection:null};this.document.fire("selectionChange",o),this._fireSelectionChangeDoneDebounced(o)}}let W5=class extends Ks{constructor(e){super(e);_(this,"domConverter");_(this,"_config");_(this,"_domElements");_(this,"_mutationObserver");this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=e.domConverter,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.add(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}stopObserving(e){if(this._domElements.delete(e),this.isEnabled){this._mutationObserver.disconnect();for(const n of this._domElements)this._mutationObserver.observe(n,this._config)}}enable(){super.enable();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(e.length===0)return;const n=this.domConverter,s=new Set,o=new Set;for(const a of e){const l=n.mapDomToView(a.target);l&&(l.is("uiElement")||l.is("rawElement")||a.type==="childList"&&!this._isBogusBrMutation(a)&&o.add(l))}for(const a of e){const l=n.mapDomToView(a.target);if(!(l&&(l.is("uiElement")||l.is("rawElement")))&&a.type==="characterData"){const u=n.findCorrespondingViewText(a.target);u&&!o.has(u.parent)?s.add(u):!u&&bi(a.target)&&o.add(n.mapDomToView(a.target.parentNode))}}const r=[];for(const a of s)r.push({type:"text",node:a});for(const a of o){const l=n.mapViewToDom(a),u=Array.from(a.getChildren()),h=Array.from(n.domChildrenToView(l,{withChildren:!1}));By(u,h,eq)||r.push({type:"children",node:a})}r.length&&this.document.fire("mutations",{mutations:r})}_isBogusBrMutation(e){let n=null;return e.nextSibling===null&&e.removedNodes.length===0&&e.addedNodes.length==1&&(n=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),n&&n.is("element","br")}};function eq(i,t){if(!Array.isArray(i))return i===t?!0:i.is("$text")&&t.is("$text")?i.data===t.data:!1}class Eg extends Bo{constructor(e){super(e);_(this,"_renderTimeoutId",null);_(this,"_isFocusChanging",!1);_(this,"domEventType",["focus","blur"]);this.useCapture=!0;const n=this.document;n.on("focus",()=>this._handleFocus()),n.on("blur",(s,o)=>this._handleBlur(o)),n.on("beforeinput",()=>{n.isFocused||this._handleFocus()},{priority:"highest"})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(e){this.fire(e.type,e)}destroy(){this._clearTimeout(),super.destroy()}_handleFocus(){this._clearTimeout(),this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this._renderTimeoutId=null,this.flush(),this.view.change(()=>{})},50)}_handleBlur(e){const n=this.document.selection.editableElement;(n===null||n===e.target)&&(this.document.isFocused=!1,this._isFocusChanging=!1,this.view.change(()=>{}))}_clearTimeout(){this._renderTimeoutId&&(clearTimeout(this._renderTimeoutId),this._renderTimeoutId=null)}}class tq extends Ks{constructor(e){super(e);_(this,"mutationObserver");_(this,"focusObserver");_(this,"selection");_(this,"domConverter");_(this,"_documents",new WeakSet);_(this,"_fireSelectionChangeDoneDebounced");_(this,"_clearInfiniteLoopInterval");_(this,"_documentIsSelectingInactivityTimeoutDebounced");_(this,"_loopbackCounter",0);_(this,"_pendingSelectionChange",new Set);this.mutationObserver=e.getObserver(W5),this.focusObserver=e.getObserver(Eg),this.selection=this.document.selection,this.domConverter=e.domConverter,this._fireSelectionChangeDoneDebounced=ss(n=>{this.document.fire("selectionChangeDone",n)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=ss(()=>this.document.isSelecting=!1,5e3),this.view.document.on("change:isFocused",(n,s,o)=>{if(o&&this._pendingSelectionChange.size){for(const r of Array.from(this._pendingSelectionChange))this._handleSelectionChange(r);this._pendingSelectionChange.clear()}})}observe(e){const n=e.ownerDocument,s=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},o=()=>{this.document.isSelecting&&(this._handleSelectionChange(n),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(e,"selectstart",s,{priority:"highest"}),this.listenTo(e,"keydown",o,{priority:"highest",useCapture:!0}),this.listenTo(e,"keyup",o,{priority:"highest",useCapture:!0}),!this._documents.has(n)&&(this.listenTo(n,"mouseup",o,{priority:"highest",useCapture:!0}),this.listenTo(n,"selectionchange",()=>{this.document.isComposing&&!Se.isAndroid||(this._handleSelectionChange(n),this._documentIsSelectingInactivityTimeoutDebounced())}),this.listenTo(this.view.document,"compositionstart",()=>{this._handleSelectionChange(n)},{priority:"lowest"}),this._documents.add(n))}stopObserving(e){this.stopListening(e)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(e){if(!this.isEnabled)return;const n=e.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(n.anchorNode))return;this.mutationObserver.flush();const s=this.domConverter.domSelectionToView(n);if(s.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!this.view.document.isFocused){this._pendingSelectionChange.add(e);return}if(this._pendingSelectionChange.delete(e),!(this.selection.isEqual(s)&&this.domConverter.isDomSelectionCorrect(n))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(this.selection.isSimilar(s))this.view.forceRender();else{const o={oldSelection:this.selection,newSelection:s,domSelection:n};this.document.fire("selectionChange",o),this._fireSelectionChangeDoneDebounced(o)}}}_clearInfiniteLoop(){this._loopbackCounter=0}}class nq extends Bo{constructor(e){super(e);_(this,"domEventType",["compositionstart","compositionupdate","compositionend"]);const n=this.document;n.on("compositionstart",()=>{n.isComposing=!0}),n.on("compositionend",()=>{n.isComposing=!1})}onDomEvent(e){this.fire(e.type,e,{data:e.data})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class q5{constructor(t,e={}){_(this,"_files");_(this,"_native");this._files=e.cacheFiles?$S(t):null,this._native=t}get files(){return this._files||(this._files=$S(this._native)),this._files}get types(){return this._native.types}getData(t){return this._native.getData(t)}setData(t,e){this._native.setData(t,e)}set effectAllowed(t){this._native.effectAllowed=t}get effectAllowed(){return this._native.effectAllowed}set dropEffect(t){this._native.dropEffect=t}get dropEffect(){return this._native.dropEffect}setDragImage(t,e,n){this._native.setDragImage(t,e,n)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}}function $S(i){const t=Array.from(i.files||[]),e=Array.from(i.items||[]);return t.length?t:e.filter(n=>n.kind==="file").map(n=>n.getAsFile())}class iq extends Bo{constructor(){super(...arguments);_(this,"domEventType","beforeinput")}onDomEvent(e){const n=e.getTargetRanges(),s=this.view,o=s.document;let r=null,a=null,l=[];if(e.dataTransfer&&(r=new q5(e.dataTransfer)),e.data!==null?a=e.data:r&&(a=r.getData("text/plain")),o.selection.isFake)l=Array.from(o.selection.getRanges()),e.preventDefault();else if(n.length)l=n.map(u=>{let h=s.domConverter.domPositionToView(u.startContainer,u.startOffset);const m=s.domConverter.domPositionToView(u.endContainer,u.endOffset);if(h&&bi(u.startContainer)&&u.startOffset<Ni){e.preventDefault();let p=Ni-u.startOffset;h=h.getLastMatchingPosition(v=>!!(v.item.is("attributeElement")||v.item.is("uiElement")||v.item.is("$textProxy")&&p--),{direction:"backward",singleCharacters:!0})}if(h)return s.createRange(h,m);if(m)return s.createRange(m)}).filter(u=>!!u);else if(Se.isAndroid){const u=e.target.ownerDocument.defaultView.getSelection();l=Array.from(s.domConverter.domSelectionToView(u).getRanges())}if(Se.isAndroid&&e.inputType=="insertCompositionText"&&a&&a.endsWith(`
`)){this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:[s.createRange(l[0].end)]});return}if(["insertText","insertReplacementText"].includes(e.inputType)&&a&&a.includes(`
`)){const u=a.split(/\n{1,2}/g);let h=l;for(let m=0;m<u.length;m++){const p=u[m];p!=""&&(this.fire(e.type,e,{data:p,dataTransfer:r,targetRanges:h,inputType:e.inputType,isComposing:e.isComposing}),h=[o.selection.getFirstRange()]),m+1<u.length&&(this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:h}),h=[o.selection.getFirstRange()])}return}this.fire(e.type,e,{data:a,dataTransfer:r,targetRanges:l,inputType:e.inputType,isComposing:e.isComposing})}}class sq extends Ks{constructor(t){super(t),this.document.on("keydown",(e,n)=>{if(this.isEnabled&&zH(n.keyCode)){const s=new qa(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(s,n),s.stop.called&&e.stop()}})}observe(){}stopObserving(){}}class oq extends Ks{constructor(t){super(t);const e=this.document;e.on("keydown",(n,s)=>{if(!this.isEnabled||s.keyCode!=Ue.tab||s.ctrlKey)return;const o=new qa(e,"tab",e.selection.getFirstRange());e.fire(o,s),o.stop.called&&n.stop()})}observe(){}stopObserving(){}}let rq=class extends _t(){constructor(e){super();_(this,"document");_(this,"domConverter");_(this,"domRoots",new Map);_(this,"_renderer");_(this,"_initialDomRootAttributes",new WeakMap);_(this,"_observers",new Map);_(this,"_writer");_(this,"_ongoingChange",!1);_(this,"_postFixersInProgress",!1);_(this,"_renderingDisabled",!1);_(this,"_hasChangedSinceTheLastRendering",!1);this.document=new Ep(e),this.domConverter=new Ap(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new OW(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new L5(this.document),this.addObserver(W5),this.addObserver(Eg),this.addObserver(tq),this.addObserver(XW),this.addObserver(QW),this.addObserver(nq),this.addObserver(sq),this.addObserver(iq),this.addObserver(oq),NW(this),EW(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),Se.isiOS&&this.listenTo(this.document,"blur",(n,s)=>{this.domConverter.mapDomToView(s.domEvent.relatedTarget)||this.domConverter._clearDomSelection()}),this.listenTo(this.document,"mutations",(n,{mutations:s})=>{s.forEach(o=>this._renderer.markToSync(o.type,o.node))},{priority:"low"}),this.listenTo(this.document,"mutations",()=>{this.forceRender()},{priority:"lowest"})}attachDomRoot(e,n="main"){const s=this.document.getRoot(n);s._name=e.tagName.toLowerCase();const o={};for(const{name:a,value:l}of Array.from(e.attributes))o[a]=l,a==="class"?this._writer.addClass(l.split(" "),s):s.hasAttribute(a)||this._writer.setAttribute(a,l,s);this._initialDomRootAttributes.set(e,o);const r=()=>{this._writer.setAttribute("contenteditable",(!s.isReadOnly).toString(),s),s.isReadOnly?this._writer.addClass("ck-read-only",s):this._writer.removeClass("ck-read-only",s)};r(),this.domRoots.set(n,e),this.domConverter.bindElements(e,s),this._renderer.markToSync("children",s),this._renderer.markToSync("attributes",s),this._renderer.domDocuments.add(e.ownerDocument),s.on("change:children",(a,l)=>this._renderer.markToSync("children",l)),s.on("change:attributes",(a,l)=>this._renderer.markToSync("attributes",l)),s.on("change:text",(a,l)=>this._renderer.markToSync("text",l)),s.on("change:isReadOnly",()=>this.change(r)),s.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const a of this._observers.values())a.observe(e,n)}detachDomRoot(e){const n=this.domRoots.get(e);Array.from(n.attributes).forEach(({name:o})=>n.removeAttribute(o));const s=this._initialDomRootAttributes.get(n);for(const o in s)n.setAttribute(o,s[o]);this.domRoots.delete(e),this.domConverter.unbindDomElement(n);for(const o of this._observers.values())o.stopObserving(n)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let n=this._observers.get(e);if(n)return n;n=new e(this),this._observers.set(e,n);for(const[s,o]of this.domRoots)n.observe(o,s);return n.enable(),n}getObserver(e){return this._observers.get(e)}disableObservers(){for(const e of this._observers.values())e.disable()}enableObservers(){for(const e of this._observers.values())e.enable()}scrollToTheSelection({alignToTop:e,forceScroll:n,viewportOffset:s=20,ancestorOffset:o=20}={}){const r=this.document.selection.getFirstRange();if(!r)return;const a=Oi({alignToTop:e,forceScroll:n,viewportOffset:s,ancestorOffset:o});typeof s=="number"&&(s={top:s,bottom:s,left:s,right:s});const l={target:this.domConverter.viewRangeToDom(r),viewportOffset:s,ancestorOffset:o,alignToTop:e,forceScroll:n};this.fire("scrollToTheSelection",l,a),NH(l)}focus(){if(!this.document.isFocused){const e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new V("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;const n=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),n}catch(n){/* istanbul ignore next -- @preserve */V.rethrowUnexpectedError(n,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(Eg).flush(),this.change(()=>{})}destroy(){for(const e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,n){return ge._createAt(e,n)}createPositionAfter(e){return ge._createAfter(e)}createPositionBefore(e){return ge._createBefore(e)}createRange(e,n){return new Ke(e,n)}createRangeOn(e){return Ke._createOn(e)}createRangeIn(e){return Ke._createIn(e)}createSelection(...e){return new Ro(...e)}_disableRendering(e){this._renderingDisabled=e,e==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}};/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Ur{is(){throw new Error("is() method is abstract")}}class bs extends Ur{constructor(e,n,s){super();_(this,"textNode");_(this,"data");_(this,"offsetInText");if(this.textNode=e,n<0||n>e.offsetSize)throw new V("model-textproxy-wrong-offsetintext",this);if(s<0||n+s>e.offsetSize)throw new V("model-textproxy-wrong-length",this);this.data=e.data.substring(n,n+s),this.offsetInText=n}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){const n=[];let s=e.includeSelf?this:this.parent;for(;s;)n[e.parentFirst?"push":"unshift"](s),s=s.parent;return n}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}bs.prototype.is=function(i){return i==="$textProxy"||i==="model:$textProxy"||i==="textProxy"||i==="model:textProxy"};class Eo{constructor(t){_(this,"direction");_(this,"boundaries");_(this,"singleCharacters");_(this,"shallow");_(this,"ignoreElementEnd");_(this,"_position");_(this,"_boundaryStartParent");_(this,"_boundaryEndParent");_(this,"_visitedParent");if(!t||!t.boundaries&&!t.startPosition)throw new V("model-tree-walker-no-start-position",null);const e=t.direction||"forward";if(e!="forward"&&e!="backward")throw new V("model-tree-walker-unknown-direction",t,{direction:e});this.direction=e,this.boundaries=t.boundaries||null,t.startPosition?this._position=t.startPosition.clone():this._position=re._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,n,s,o;do s=this.position,o=this._visitedParent,{done:e,value:n}=this.next();while(!e&&t(n));e||(this._position=s,this._visitedParent=o)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone(),this._visitedParent=t.parent}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const t=this.position,e=this.position.clone(),n=this._visitedParent;if(n.parent===null&&e.offset===n.maxOffset)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const s=Ed(e,n),o=s||$5(e,n,s);if(o&&o.is("model:element")){if(!this.shallow)e.path.push(0),this._visitedParent=o;else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,fa("elementStart",o,t,e,1)}if(o&&o.is("model:$text")){let r;if(this.singleCharacters)r=1;else{let u=o.endOffset;this._boundaryEndParent==n&&this.boundaries.end.offset<u&&(u=this.boundaries.end.offset),r=u-e.offset}const a=e.offset-o.startOffset,l=new bs(o,a,r);return e.offset+=r,this._position=e,fa("text",l,t,e,r)}return e.path.pop(),e.offset++,this._position=e,this._visitedParent=n.parent,this.ignoreElementEnd?this._next():fa("elementEnd",n,t,e)}_previous(){const t=this.position,e=this.position.clone(),n=this._visitedParent;if(n.parent===null&&e.offset===0)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const s=e.parent,o=Ed(e,s),r=o||G5(e,s,o);if(r&&r.is("model:element"))return e.offset--,this.shallow?(this._position=e,fa("elementStart",r,t,e,1)):(e.path.push(r.maxOffset),this._position=e,this._visitedParent=r,this.ignoreElementEnd?this._previous():fa("elementEnd",r,t,e));if(r&&r.is("model:$text")){let a;if(this.singleCharacters)a=1;else{let h=r.startOffset;this._boundaryStartParent==n&&this.boundaries.start.offset>h&&(h=this.boundaries.start.offset),a=e.offset-h}const l=e.offset-r.startOffset,u=new bs(r,l-a,a);return e.offset-=a,this._position=e,fa("text",u,t,e,a)}return e.path.pop(),this._position=e,this._visitedParent=n.parent,fa("elementStart",n,t,e,1)}}function fa(i,t,e,n,s){return{done:!1,value:{type:i,item:t,previousPosition:e,nextPosition:n,length:s}}}class re extends Ur{constructor(e,n,s="toNone"){super();_(this,"root");_(this,"path");_(this,"stickiness");if(!e.is("element")&&!e.is("documentFragment"))throw new V("model-position-root-invalid",e);if(!Array.isArray(n)||n.length===0)throw new V("model-position-path-incorrect-format",e,{path:n});e.is("rootElement")?n=n.slice():(n=[...e.getPath(),...n],e=e.root),this.root=e,this.path=n,this.stickiness=s}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let n=0;n<this.path.length-1;n++)if(e=e.getChildAtOffset(this.path[n]),!e)throw new V("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new V("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return Ed(this,this.parent)}get nodeAfter(){const e=this.parent;return $5(this,e,Ed(this,e))}get nodeBefore(){const e=this.parent;return G5(this,e,Ed(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let e=this.root;for(let n=0;n<this.path.length-1;n++)if(e=e.getChildAtOffset(this.path[n]),!e)return!1;return this.offset<=e.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const n=$n(this.path,e.path);switch(n){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[n]<e.path[n]?"before":"after"}}getLastMatchingPosition(e,n={}){n.startPosition=this;const s=new Eo(n);return s.skip(e),s.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const n=this.parent;return n.is("element")?n.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const n=$n(this.path,e.path),s=typeof n=="string"?Math.min(this.path.length,e.path.length):n;return this.path.slice(0,s)}getCommonAncestor(e){const n=this.getAncestors(),s=e.getAncestors();let o=0;for(;n[o]==s[o]&&n[o];)o++;return o===0?null:n[o-1]}getShiftedBy(e){const n=this.clone(),s=n.offset+e;return n.offset=s<0?0:s,n}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;const n=Math.min(this.path.length,e.path.length);for(let s=0;s<n;s++){const o=this.path[s]-e.path[s];if(o<-1||o>1)return!1;if(o===1)return GS(e,this,s);if(o===-1)return GS(this,e,s)}return this.path.length===e.path.length?!0:this.path.length>e.path.length?Zy(this.path,n):Zy(e.path,n)}hasSameParentAs(e){if(this.root!==e.root)return!1;const n=this.getParentPath(),s=e.getParentPath();return $n(n,s)=="same"}getTransformedByOperation(e){let n;switch(e.type){case"insert":n=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":n=this._getTransformedByMoveOperation(e);break;case"split":n=this._getTransformedBySplitOperation(e);break;case"merge":n=this._getTransformedByMergeOperation(e);break;default:n=re._createAt(this);break}return n}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const n=e.movedRange;return n.containsPosition(this)||n.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const n=e.movedRange,s=n.containsPosition(this)||n.start.isEqual(this);let o;return s?(o=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(o=o._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?o=re._createAt(e.deletionPosition):o=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),o}_getTransformedByDeletion(e,n){const s=re._createAt(this);if(this.root!=e.root)return s;if($n(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+n>this.offset)return null;s.offset-=n}}else if($n(e.getParentPath(),this.getParentPath())=="prefix"){const o=e.path.length-1;if(e.offset<=this.path[o]){if(e.offset+n>this.path[o])return null;s.path[o]-=n}}return s}_getTransformedByInsertion(e,n){const s=re._createAt(this);if(this.root!=e.root)return s;if($n(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(s.offset+=n);else if($n(e.getParentPath(),this.getParentPath())=="prefix"){const o=e.path.length-1;e.offset<=this.path[o]&&(s.path[o]+=n)}return s}_getTransformedByMove(e,n,s){if(n=n._getTransformedByDeletion(e,s),e.isEqual(n))return re._createAt(this);const o=this._getTransformedByDeletion(e,s);return o===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(s).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,n):o._getTransformedByInsertion(n,s)}_getCombined(e,n){const s=e.path.length-1,o=re._createAt(n);return o.stickiness=this.stickiness,o.offset=o.offset+this.path[s]-e.offset,o.path=[...o.path,...this.path.slice(s+1)],o}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,n,s="toNone"){if(e.is("model:position"))return new re(e.root,e.path,e.stickiness);{const o=e;if(n=="end")n=o.maxOffset;else{if(n=="before")return this._createBefore(o,s);if(n=="after")return this._createAfter(o,s);if(n!==0&&!n)throw new V("model-createpositionat-offset-required",[this,e])}if(!o.is("element")&&!o.is("documentFragment"))throw new V("model-position-parent-incorrect",[this,e]);const r=o.getPath();return r.push(n),new this(o.root,r,s)}}static _createAfter(e,n){if(!e.parent)throw new V("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,n)}static _createBefore(e,n){if(!e.parent)throw new V("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,n)}static fromJSON(e,n){if(e.root==="$graveyard"){const s=new re(n.graveyard,e.path);return s.stickiness=e.stickiness,s}if(!n.getRoot(e.root))throw new V("model-position-fromjson-no-root",n,{rootName:e.root});return new re(n.getRoot(e.root),e.path,e.stickiness)}}re.prototype.is=function(i){return i==="position"||i==="model:position"};function Ed(i,t){const e=t.getChildAtOffset(i.offset);return e&&e.is("$text")&&e.startOffset<i.offset?e:null}function $5(i,t,e){return e!==null?null:t.getChildAtOffset(i.offset)}function G5(i,t,e){return e!==null?null:t.getChild(t.offsetToIndex(i.offset)-1)}function GS(i,t,e){return!(e+1===i.path.length||!Zy(t.path,e+1)||!aq(i,e+1))}function Zy(i,t){for(;t<i.length;){if(i[t]!==0)return!1;t++}return!0}function aq(i,t){let e=i.parent,n=i.path.length-1,s=0;for(;n>=t;){if(i.path[n]+s!==e.maxOffset)return!1;s=1,n--,e=e.parent}return!0}class Z extends Ur{constructor(e,n){super();_(this,"start");_(this,"end");this.start=re._createAt(e),this.end=n?re._createAt(n):re._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new Eo({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const e=this.start.getParentPath(),n=this.end.getParentPath();return $n(e,n)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,n=!1){e.isCollapsed&&(n=!1);const s=this.containsPosition(e.start)||n&&this.start.isEqual(e.start),o=this.containsPosition(e.end)||n&&this.end.isEqual(e.end);return s&&o}containsItem(e){const n=re._createBefore(e);return this.containsPosition(n)||this.start.isEqual(n)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const n=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&n.push(new Z(this.start,e.start)),this.containsPosition(e.end)&&n.push(new Z(e.end,this.end))):n.push(new Z(this.start,this.end)),n}getIntersection(e){if(this.isIntersecting(e)){let n=this.start,s=this.end;return this.containsPosition(e.start)&&(n=e.start),this.containsPosition(e.end)&&(s=e.end),new Z(n,s)}return null}getJoined(e,n=!1){let s=this.isIntersecting(e);if(s||(this.start.isBefore(e.start)?s=n?this.end.isTouching(e.start):this.end.isEqual(e.start):s=n?e.end.isTouching(this.start):e.end.isEqual(this.start)),!s)return null;let o=this.start,r=this.end;return e.start.isBefore(o)&&(o=e.start),e.end.isAfter(r)&&(r=e.end),new Z(o,r)}getMinimalFlatRanges(){const e=[],n=this.start.getCommonPath(this.end).length,s=re._createAt(this.start);let o=s.parent;for(;s.path.length>n+1;){const r=o.maxOffset-s.offset;r!==0&&e.push(new Z(s,s.getShiftedBy(r))),s.path=s.path.slice(0,-1),s.offset++,o=o.parent}for(;s.path.length<=this.end.path.length;){const r=this.end.path[s.path.length-1],a=r-s.offset;a!==0&&e.push(new Z(s,s.getShiftedBy(a))),s.offset=r,s.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new Eo(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const n=new Eo(e);for(const s of n)yield s.item}*getPositions(e={}){e.boundaries=this;const n=new Eo(e);yield n.position;for(const s of n)yield s.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new Z(this.start,this.end)]}getTransformedByOperations(e){const n=[new Z(this.start,this.end)];for(const s of e)for(let o=0;o<n.length;o++){const r=n[o].getTransformedByOperation(s);n.splice(o,1,...r),o+=r.length-1}for(let s=0;s<n.length;s++){const o=n[s];for(let r=s+1;r<n.length;r++){const a=n[r];(o.containsRange(a)||a.containsRange(o)||o.isEqual(a))&&n.splice(r,1)}}return n}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,n=this.end.nodeBefore;return e&&e.is("element")&&e===n?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,n=!1){return this._getTransformedByInsertion(e.position,e.howMany,n)}_getTransformedByMoveOperation(e,n=!1){const s=e.sourcePosition,o=e.howMany,r=e.targetPosition;return this._getTransformedByMove(s,r,o,n)}_getTransformedBySplitOperation(e){const n=this.start._getTransformedBySplitOperation(e);let s=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(s=this.end.getShiftedBy(1)),n.root!=s.root&&(s=this.end.getShiftedBy(-1)),new Z(n,s)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new Z(this.start);let n=this.start._getTransformedByMergeOperation(e),s=this.end._getTransformedByMergeOperation(e);return n.root!=s.root&&(s=this.end.getShiftedBy(-1)),n.isAfter(s)?(e.sourcePosition.isBefore(e.targetPosition)?(n=re._createAt(s),n.offset=0):(e.deletionPosition.isEqual(n)||(s=e.deletionPosition),n=e.targetPosition),new Z(n,s)):new Z(n,s)}_getTransformedByInsertion(e,n,s=!1){if(s&&this.containsPosition(e))return[new Z(this.start,e),new Z(e.getShiftedBy(n),this.end._getTransformedByInsertion(e,n))];{const o=new Z(this.start,this.end);return o.start=o.start._getTransformedByInsertion(e,n),o.end=o.end._getTransformedByInsertion(e,n),[o]}}_getTransformedByMove(e,n,s,o=!1){if(this.isCollapsed){const p=this.start._getTransformedByMove(e,n,s);return[new Z(p)]}const r=Z._createFromPositionAndShift(e,s),a=n._getTransformedByDeletion(e,s);if(this.containsPosition(n)&&!o&&(r.containsPosition(this.start)||r.containsPosition(this.end))){const p=this.start._getTransformedByMove(e,n,s),v=this.end._getTransformedByMove(e,n,s);return[new Z(p,v)]}let l;const u=this.getDifference(r);let h=null;const m=this.getIntersection(r);if(u.length==1?h=new Z(u[0].start._getTransformedByDeletion(e,s),u[0].end._getTransformedByDeletion(e,s)):u.length==2&&(h=new Z(this.start,this.end._getTransformedByDeletion(e,s))),h?l=h._getTransformedByInsertion(a,s,m!==null||o):l=[],m){const p=new Z(m.start._getCombined(r.start,a),m.end._getCombined(r.start,a));l.length==2?l.splice(1,0,p):l.push(p)}return l}_getTransformedByDeletion(e,n){let s=this.start._getTransformedByDeletion(e,n),o=this.end._getTransformedByDeletion(e,n);return s==null&&o==null?null:(s==null&&(s=e),o==null&&(o=e),new Z(s,o))}static _createFromPositionAndShift(e,n){const s=e,o=e.getShiftedBy(n);return n>0?new this(s,o):new this(o,s)}static _createIn(e){return new this(re._createAt(e,0),re._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(re._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new V("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();const n=e[0];e.sort((r,a)=>r.start.isAfter(a.start)?1:-1);const s=e.indexOf(n),o=new this(n.start,n.end);for(let r=s-1;r>=0&&e[r].end.isEqual(o.start);r--)o.start=re._createAt(e[r].start);for(let r=s+1;r<e.length&&e[r].start.isEqual(o.end);r++)o.end=re._createAt(e[r].end);return o}static fromJSON(e,n){return new this(re.fromJSON(e.start,n),re.fromJSON(e.end,n))}}Z.prototype.is=function(i){return i==="range"||i==="model:range"};class j5 extends Tt(){constructor(){super();_(this,"_modelToViewMapping",new WeakMap);_(this,"_viewToModelMapping",new WeakMap);_(this,"_viewToModelLengthCallbacks",new Map);_(this,"_markerNameToElements",new Map);_(this,"_elementToMarkerNames",new Map);_(this,"_deferredBindingRemovals",new Map);_(this,"_unboundMarkerNames",new Set);_(this,"_cache",new lq);this.on("modelToViewPosition",(e,n)=>{if(n.viewPosition)return;const s=this._modelToViewMapping.get(n.modelPosition.parent);if(!s)throw new V("mapping-model-position-view-parent-not-found",this,{modelPosition:n.modelPosition});n.viewPosition=this.findPositionIn(s,n.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(e,n)=>{if(n.modelPosition)return;const s=this.findMappedViewAncestor(n.viewPosition),o=this._viewToModelMapping.get(s),r=this._toModelOffset(n.viewPosition.parent,n.viewPosition.offset,s);n.modelPosition=re._createAt(o,r)},{priority:"low"})}bindElements(e,n){this._modelToViewMapping.set(e,n),this._viewToModelMapping.set(n,e)}unbindViewElement(e,n={}){const s=this.toModelElement(e);if(this._elementToMarkerNames.has(e))for(const o of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(o);n.defer?this._deferredBindingRemovals.set(e,e.root):(this._viewToModelMapping.delete(e)&&this._cache.stopTracking(e),this._modelToViewMapping.get(s)==e&&this._modelToViewMapping.delete(s))}unbindModelElement(e){const n=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(n)==e&&this._viewToModelMapping.delete(n)&&this._cache.stopTracking(n)}bindElementToMarker(e,n){const s=this._markerNameToElements.get(n)||new Set;s.add(e);const o=this._elementToMarkerNames.get(e)||new Set;o.add(n),this._markerNameToElements.set(n,s),this._elementToMarkerNames.set(e,o)}unbindElementFromMarkerName(e,n){const s=this._markerNameToElements.get(n);s&&(s.delete(e),s.size==0&&this._markerNameToElements.delete(n));const o=this._elementToMarkerNames.get(e);o&&(o.delete(n),o.size==0&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){const e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}flushDeferredBindings(){for(const[e,n]of this._deferredBindingRemovals)e.root==n&&this.unbindViewElement(e);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new Z(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new Ke(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){const n={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",n),n.modelPosition}toViewPosition(e,n={}){const s={modelPosition:e,mapper:this,isPhantom:n.isPhantom};return this.fire("modelToViewPosition",s),s.viewPosition}markerNameToElements(e){const n=this._markerNameToElements.get(e);if(!n)return null;const s=new Set;for(const o of n)if(o.is("attributeElement"))for(const r of o.getElementsWithSameId())s.add(r);else s.add(o);return s}registerViewToModelLength(e,n){this._viewToModelLengthCallbacks.set(e,n)}findMappedViewAncestor(e){let n=e.parent;for(;!this._viewToModelMapping.has(n);)n=n.parent;return n}_toModelOffset(e,n,s){if(s!=e){const r=this._toModelOffset(e.parent,e.index,s),a=this._toModelOffset(e,n,e);return r+a}if(e.is("$text"))return n;let o=0;for(let r=0;r<n;r++)o+=this.getModelLength(e.getChild(r));return o}getModelLength(e){const n=[e];let s=0;for(;n.length>0;){const o=n.pop(),r=o.name&&this._viewToModelLengthCallbacks.size>0&&this._viewToModelLengthCallbacks.get(o.name);if(r)s+=r(o);else if(this._viewToModelMapping.has(o))s+=1;else if(o.is("$text"))s+=o.data.length;else{if(o.is("uiElement"))continue;for(const a of o.getChildren())n.push(a)}}return s}findPositionIn(e,n){if(n===0)return this._moveViewPositionToTextNode(new ge(e,0));if(this._viewToModelLengthCallbacks.size==0&&this._viewToModelMapping.has(e)){const o=this._cache.getClosest(e,n);return this._findPositionStartingFrom(o.viewPosition,o.modelOffset,n,e,!0)}else return this._findPositionStartingFrom(new ge(e,0),0,n,e,!1)}_findPositionStartingFrom(e,n,s,o,r){let a=e.parent,l=e.offset;if(a.is("$text"))return new ge(a,s-n);let u,h=n,m=0;for(;h<s;){if(u=a.getChild(l),!u){if(a==o)throw new V("mapping-model-offset-not-found",this,{modelOffset:s,viewContainer:o});l=a.parent.getChildIndex(a)+1,a=a.parent;continue}m=this.getModelLength(u),h+=m,l++,r&&this._cache.save(a,l,o,h)}return h==s?this._moveViewPositionToTextNode(new ge(a,l)):this._findPositionStartingFrom(new ge(u,0),h-m,s,o,r)}_moveViewPositionToTextNode(e){const n=e.nodeBefore,s=e.nodeAfter;return n&&n.is("view:$text")?new ge(n,n.data.length):s&&s.is("view:$text")?new ge(s,0):e}}class lq extends Tt(){constructor(){super(...arguments);_(this,"_cachedMapping",new WeakMap);_(this,"_nodeToCacheListIndex",new WeakMap);_(this,"_invalidateOnChildrenChangeCallback",(e,n,s)=>{this._clearCacheInsideParent(n,s.index)});_(this,"_invalidateOnTextChangeCallback",(e,n)=>{this._clearCacheStartingBefore(n)})}save(e,n,s,o){const r=this._cachedMapping.get(s),a=r.cacheMap.get(o);if(a){const m=e.getChild(n-1),p=a.viewPosition.nodeBefore?this._nodeToCacheListIndex.get(a.viewPosition.nodeBefore):0;this._nodeToCacheListIndex.set(m,p);return}const u={viewPosition:new ge(e,n),modelOffset:o};r.maxModelOffset=o>r.maxModelOffset?o:r.maxModelOffset,r.cacheMap.set(o,u);let h=r.cacheList.length-1;for(;h>=0&&r.cacheList[h].modelOffset>o;)h--;if(r.cacheList.splice(h+1,0,u),n>0){const m=e.getChild(n-1);this._nodeToCacheListIndex.set(m,h+1)}}getClosest(e,n){const s=this._cachedMapping.get(e);let o;if(s)if(n>s.maxModelOffset)o=s.cacheList[s.cacheList.length-1];else{const a=s.cacheMap.get(n);a?o=a:o=this._findInCacheList(s.cacheList,n)}else o=this.startTracking(e);const r=this._hoistViewPosition(o.viewPosition);return{modelOffset:o.modelOffset,viewPosition:r}}_hoistViewPosition(e){for(;e.parent.parent&&!this._cachedMapping.has(e.parent)&&e.isAtEnd;){const n=e.parent.parent,s=n.getChildIndex(e.parent)+1;e=new ge(n,s)}return e}startTracking(e){const s={viewPosition:new ge(e,0),modelOffset:0},o={maxModelOffset:0,cacheList:[s],cacheMap:new Map([[0,s]])};return this._cachedMapping.set(e,o),e.on("change:children",this._invalidateOnChildrenChangeCallback),e.on("change:text",this._invalidateOnTextChangeCallback),s}stopTracking(e){e.off("change:children",this._invalidateOnChildrenChangeCallback),e.off("change:text",this._invalidateOnTextChangeCallback),this._cachedMapping.delete(e)}_clearCacheInsideParent(e,n){if(n==0)this._cachedMapping.has(e)?this._clearCacheAll(e):this._clearCacheStartingBefore(e);else{const s=e.getChild(n-1);this._clearCacheStartingBefore(s)}}_clearCacheAll(e){const n=this._cachedMapping.get(e);n.maxModelOffset>0&&(n.maxModelOffset=0,n.cacheList.length=1,n.cacheMap.clear(),n.cacheMap.set(0,n.cacheList[0]))}_clearCacheStartingBefore(e){const n=this._nodeToCacheListIndex.get(e);if(n===void 0){const o=e.parent;this._cachedMapping.has(o)||this._clearCacheStartingBefore(o);return}let s=e.parent;for(;!this._cachedMapping.has(s);)s=s.parent;this._clearCacheFromIndex(s,n)}_clearCacheFromIndex(e,n){n===0&&(n=1);const s=this._cachedMapping.get(e),o=s.cacheList[n-1];if(!o)return;s.maxModelOffset=o.modelOffset;const r=s.cacheList.splice(n);for(const a of r){s.cacheMap.delete(a.modelOffset);const l=a.viewPosition.nodeBefore;this._nodeToCacheListIndex.delete(l)}}_findInCacheList(e,n){let s=0,o=e.length-1,r=o-s>>1,a=e[r];for(;s<o;)a.modelOffset<n?s=r+1:o=r-1,r=s+(o-s>>1),a=e[r];return a.modelOffset<=n?a:e[r-1]}}class cq{constructor(){_(this,"_consumable",new Map);_(this,"_textProxyRegistry",new Map)}add(t,e){e=dm(e),t instanceof bs&&(t=this._getSymbolForTextProxy(t)),this._consumable.has(t)||this._consumable.set(t,new Map),this._consumable.get(t).set(e,!0)}consume(t,e){return e=dm(e),t instanceof bs&&(t=this._getSymbolForTextProxy(t)),this.test(t,e)?(this._consumable.get(t).set(e,!1),!0):!1}test(t,e){e=dm(e),t instanceof bs&&(t=this._getSymbolForTextProxy(t));const n=this._consumable.get(t);if(n===void 0)return null;const s=n.get(e);return s===void 0?null:s}revert(t,e){e=dm(e),t instanceof bs&&(t=this._getSymbolForTextProxy(t));const n=this.test(t,e);return n===!1?(this._consumable.get(t).set(e,!0),!0):n===!0?!1:null}verifyAllConsumed(t){const e=[];for(const[n,s]of this._consumable)for(const[o,r]of s){const a=o.split(":")[0];r&&t==a&&e.push({event:o,item:n.name||n.description})}if(e.length)throw new V("conversion-model-consumable-not-consumed",null,{items:e})}_getSymbolForTextProxy(t){let e=null;const n=this._textProxyRegistry.get(t.startOffset);if(n){const s=n.get(t.endOffset);s&&(e=s.get(t.parent))}return e||(e=this._addSymbolForTextProxy(t)),e}_addSymbolForTextProxy(t){const e=t.startOffset,n=t.endOffset,s=t.parent,o=Symbol("$textProxy:"+t.data);let r,a;return r=this._textProxyRegistry.get(e),r||(r=new Map,this._textProxyRegistry.set(e,r)),a=r.get(n),a||(a=new Map,r.set(n,a)),a.set(s,o),o}}function dm(i){const t=i.split(":");return t[0]=="insert"?t[0]:t[0]=="addMarker"||t[0]=="removeMarker"?i:t.length>1?t[0]+":"+t[1]:t[0]}class K5 extends Tt(){constructor(e){super();_(this,"_conversionApi");_(this,"_firedEventsMap");this._conversionApi={dispatcher:this,...e},this._firedEventsMap=new WeakMap}convertChanges(e,n,s){const o=this._createConversionApi(s,e.getRefreshedItems());for(const a of e.getMarkersToRemove())this._convertMarkerRemove(a.name,a.range,o);const r=this._reduceChanges(e.getChanges());for(const a of r)a.type==="insert"?this._convertInsert(Z._createFromPositionAndShift(a.position,a.length),o):a.type==="reinsert"?this._convertReinsert(Z._createFromPositionAndShift(a.position,a.length),o):a.type==="remove"?this._convertRemove(a.position,a.length,a.name,o):this._convertAttribute(a.range,a.attributeKey,a.attributeOldValue,a.attributeNewValue,o);o.mapper.flushDeferredBindings();for(const a of o.mapper.flushUnboundMarkerNames()){const l=n.get(a).getRange();this._convertMarkerRemove(a,l,o),this._convertMarkerAdd(a,l,o)}for(const a of e.getMarkersToAdd())this._convertMarkerAdd(a.name,a.range,o);o.consumable.verifyAllConsumed("insert")}convert(e,n,s,o={}){const r=this._createConversionApi(s,void 0,o);this._convertInsert(e,r);for(const[a,l]of n)this._convertMarkerAdd(a,l,r);r.consumable.verifyAllConsumed("insert")}convertSelection(e,n,s){const o=this._createConversionApi(s);this.fire("cleanSelection",{selection:e},o);const r=e.getFirstPosition().root;if(!o.mapper.toViewElement(r))return;const a=Array.from(n.getMarkersAtPosition(e.getFirstPosition()));if(this._addConsumablesForSelection(o.consumable,e,a),this.fire("selection",{selection:e},o),!!e.isCollapsed){for(const l of a)if(o.consumable.test(e,"addMarker:"+l.name)){const u=l.getRange();if(!uq(e.getFirstPosition(),l,o.mapper))continue;const h={item:e,markerName:l.name,markerRange:u};this.fire(`addMarker:${l.name}`,h,o)}for(const l of e.getAttributeKeys())if(o.consumable.test(e,"attribute:"+l)){const u={item:e,range:e.getFirstRange(),attributeKey:l,attributeOldValue:null,attributeNewValue:e.getAttribute(l)};this.fire(`attribute:${l}:$text`,u,o)}}}_convertInsert(e,n,s={}){s.doNotAddConsumables||this._addConsumablesForInsert(n.consumable,e);for(const o of e.getWalker({shallow:!0}))this._testAndFire("insert",jS(o),n)}_convertRemove(e,n,s,o){this.fire(`remove:${s}`,{position:e,length:n},o)}_convertAttribute(e,n,s,o,r){this._addConsumablesForRange(r.consumable,e,`attribute:${n}`);for(const a of e){const l={item:a.item,range:Z._createFromPositionAndShift(a.previousPosition,a.length),attributeKey:n,attributeOldValue:s,attributeNewValue:o};this._testAndFire(`attribute:${n}`,l,r)}}_convertReinsert(e,n){const s=Array.from(e.getWalker({shallow:!0}));this._addConsumablesForInsert(n.consumable,s);for(const o of s.map(jS))this._testAndFire("insert",{...o,reconversion:!0},n)}_convertMarkerAdd(e,n,s){if(n.root.rootName=="$graveyard")return;const o=`addMarker:${e}`;if(s.consumable.add(n,o),this.fire(o,{markerName:e,markerRange:n},s),!!s.consumable.consume(n,o)){this._addConsumablesForRange(s.consumable,n,o);for(const r of n.getItems()){if(!s.consumable.test(r,o))continue;const a={item:r,range:Z._createOn(r),markerName:e,markerRange:n};this.fire(o,a,s)}}}_convertMarkerRemove(e,n,s){n.root.rootName!="$graveyard"&&this.fire(`removeMarker:${e}`,{markerName:e,markerRange:n},s)}_reduceChanges(e){const n={changes:e};return this.fire("reduceChanges",n),n.changes}_addConsumablesForInsert(e,n){for(const s of n){const o=s.item;if(e.test(o,"insert")===null){e.add(o,"insert");for(const r of o.getAttributeKeys())e.add(o,"attribute:"+r)}}return e}_addConsumablesForRange(e,n,s){for(const o of n.getItems())e.add(o,s);return e}_addConsumablesForSelection(e,n,s){e.add(n,"selection");for(const o of s)e.add(n,"addMarker:"+o.name);for(const o of n.getAttributeKeys())e.add(n,"attribute:"+o);return e}_testAndFire(e,n,s){const o=dq(e,n),r=n.item.is("$textProxy")?s.consumable._getSymbolForTextProxy(n.item):n.item,a=this._firedEventsMap.get(s),l=a.get(r);if(!l)a.set(r,new Set([o]));else if(!l.has(o))l.add(o);else return;this.fire(o,n,s)}_testAndFireAddAttributes(e,n){const s={item:e,range:Z._createOn(e)};for(const o of s.item.getAttributeKeys())s.attributeKey=o,s.attributeOldValue=null,s.attributeNewValue=s.item.getAttribute(o),this._testAndFire(`attribute:${o}`,s,n)}_createConversionApi(e,n=new Set,s={}){const o={...this._conversionApi,consumable:new cq,writer:e,options:s,convertItem:r=>this._convertInsert(Z._createOn(r),o),convertChildren:r=>this._convertInsert(Z._createIn(r),o,{doNotAddConsumables:!0}),convertAttributes:r=>this._testAndFireAddAttributes(r,o),canReuseView:r=>!n.has(o.mapper.toModelElement(r))};return this._firedEventsMap.set(o,new Map),o}}function uq(i,t,e){const n=t.getRange(),s=Array.from(i.getAncestors());return s.shift(),s.reverse(),!s.some(r=>{if(n.containsItem(r))return!!e.toViewElement(r).getCustomProperty("addHighlight")})}function dq(i,t){const e=t.item.is("element")?t.item.name:"$text";return`${i}:${e}`}function jS(i){return{item:i.item,range:Z._createFromPositionAndShift(i.previousPosition,i.length)}}let $a=class extends Ur{constructor(e){super();_(this,"parent",null);_(this,"_attrs");_(this,"_index",null);_(this,"_startOffset",null);this._attrs=Cs(e)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return this.startOffset===null?null:this.startOffset+this.offsetSize}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const e=[];let n=this;for(;n.parent;)e.unshift(n.startOffset),n=n.parent;return e}getAncestors(e={}){const n=[];let s=e.includeSelf?this:this.parent;for(;s;)n[e.parentFirst?"push":"unshift"](s),s=s.parent;return n}getCommonAncestor(e,n={}){const s=this.getAncestors(n),o=e.getAncestors(n);let r=0;for(;s[r]==o[r]&&s[r];)r++;return r===0?null:s[r-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const n=this.getPath(),s=e.getPath(),o=$n(n,s);switch(o){case"prefix":return!0;case"extension":return!1;default:return n[o]<s[o]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((n,s)=>(n[s[0]]=s[1],n),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,n){this._attrs.set(e,n)}_setAttributesTo(e){this._attrs=Cs(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}};$a.prototype.is=function(i){return i==="node"||i==="model:node"};class Vi extends Tt(Ur){constructor(...e){super();_(this,"_lastRangeBackward",!1);_(this,"_attrs",new Map);_(this,"_ranges",[]);e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const n of this._ranges){let s=!1;for(const o of e._ranges)if(n.isEqual(o)){s=!0;break}if(!s)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new Z(e.start,e.end)}getFirstRange(){let e=null;for(const n of this._ranges)(!e||n.start.isBefore(e.start))&&(e=n);return e?new Z(e.start,e.end):null}getLastRange(){let e=null;for(const n of this._ranges)(!e||n.end.isAfter(e.end))&&(e=n);return e?new Z(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[n,s,o]=e;if(typeof s=="object"&&(o=s,s=void 0),n===null)this._setRanges([]);else if(n instanceof Vi)this._setRanges(n.getRanges(),n.isBackward);else if(n&&typeof n.getRanges=="function")this._setRanges(n.getRanges(),n.isBackward);else if(n instanceof Z)this._setRanges([n],!!o&&!!o.backward);else if(n instanceof re)this._setRanges([new Z(n)]);else if(n instanceof $a){const r=!!o&&!!o.backward;let a;if(s=="in")a=Z._createIn(n);else if(s=="on")a=Z._createOn(n);else if(s!==void 0)a=new Z(re._createAt(n,s));else throw new V("model-selection-setto-required-second-parameter",[this,n]);this._setRanges([a],r)}else if(Li(n))this._setRanges(n,o&&!!o.backward);else throw new V("model-selection-setto-not-selectable",[this,n])}_setRanges(e,n=!1){const s=Array.from(e),o=s.some(r=>{if(!(r instanceof Z))throw new V("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(a=>!a.isEqual(r))});s.length===this._ranges.length&&!o||(this._replaceAllRanges(s),this._lastRangeBackward=!!n,this.fire("change:range",{directChange:!0}))}setFocus(e,n){if(this.anchor===null)throw new V("model-selection-setfocus-no-ranges",[this,e]);const s=re._createAt(e,n);if(s.compareWith(this.focus)=="same")return;const o=this.anchor;this._ranges.length&&this._popRange(),s.compareWith(o)=="before"?(this._pushRange(new Z(s,o)),this._lastRangeBackward=!0):(this._pushRange(new Z(o,s)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,n){this.getAttribute(e)!==n&&(this._attrs.set(e,n),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const e=new WeakSet;for(const n of this.getRanges()){const s=KS(n.start,e);fq(s,n)&&(yield s);const o=n.getWalker();for(const a of o){const l=a.item;a.type=="elementEnd"&&hq(l,e,n)?yield l:a.type=="elementStart"&&l.is("model:element")&&l.root.document.model.schema.isBlock(l)&&o.jumpTo(re._createAt(l,"end"))}const r=KS(n.end,e);mq(r,n)&&(yield r)}}containsEntireContent(e=this.anchor.root){const n=re._createAt(e,0),s=re._createAt(e,"end");return n.isTouching(this.getFirstPosition())&&s.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new Z(e.start,e.end))}_checkRange(e){for(let n=0;n<this._ranges.length;n++)if(e.isIntersecting(this._ranges[n]))throw new V("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[n]})}_replaceAllRanges(e){this._removeAllRanges();for(const n of e)this._pushRange(n)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}Vi.prototype.is=function(i){return i==="selection"||i==="model:selection"};function Z5(i,t){return t.has(i)?!1:(t.add(i),i.root.document.model.schema.isBlock(i)&&!!i.parent)}function hq(i,t,e){return Z5(i,t)&&B0(i,e)}function KS(i,t){const n=i.parent.root.document.model.schema,s=i.parent.getAncestors({parentFirst:!0,includeSelf:!0});let o=!1;const r=s.find(a=>o?!1:(o=n.isLimit(a),!o&&Z5(a,t)));return s.forEach(a=>t.add(a)),r}function B0(i,t){const e=gq(i);return e?!t.containsRange(Z._createOn(e),!0):!0}function fq(i,t){return i?t.isCollapsed||i.isEmpty?!0:t.start.isTouching(re._createAt(i,i.maxOffset))?!1:B0(i,t):!1}function mq(i,t){return i?t.isCollapsed||i.isEmpty?!0:t.end.isTouching(re._createAt(i,0))?!1:B0(i,t):!1}function gq(i){const t=i.root.document.model.schema;let e=i.parent;for(;e;){if(t.isBlock(e))return e;e=e.parent}}class ei extends Tt(Z){constructor(t,e){super(t,e),pq.call(this)}detach(){this.stopListening()}toRange(){return new Z(this.start,this.end)}static fromRange(t){return new ei(t.start,t.end)}}ei.prototype.is=function(i){return i==="liveRange"||i==="model:liveRange"||i=="range"||i==="model:range"};function pq(){this.listenTo(this.root.document.model,"applyOperation",(i,t)=>{const e=t[0];e.isDocumentOperation&&bq.call(this,e)},{priority:"low"})}function bq(i){const t=this.getTransformedByOperation(i),e=Z._createFromRanges(t),n=!e.isEqual(this),s=_q(this,i);let o=null;if(n){e.root.rootName=="$graveyard"&&(i.type=="remove"?o=i.sourcePosition:o=i.deletionPosition);const r=this.toRange();this.start=e.start,this.end=e.end,this.fire("change:range",r,{deletionPosition:o})}else s&&this.fire("change:content",this.toRange(),{deletionPosition:o})}function _q(i,t){switch(t.type){case"insert":return i.containsPosition(t.position);case"move":case"remove":case"reinsert":case"merge":return i.containsPosition(t.sourcePosition)||i.start.isEqual(t.sourcePosition)||i.containsPosition(t.targetPosition);case"split":return i.containsPosition(t.splitPosition)||i.containsPosition(t.insertionPosition)}return!1}class Lt extends $a{constructor(e,n){super(n);_(this,"_data");this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new Lt(this.data,this.getAttributes())}static fromJSON(e){return new Lt(e.data,e.attributes)}}Lt.prototype.is=function(i){return i==="$text"||i==="model:$text"||i==="text"||i==="model:text"||i==="node"||i==="model:node"};const Yd="selection:";class xs extends Tt(Ur){constructor(e){super();_(this,"_selection");this._selection=new wq(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,n){this._selection.setFocus(e,n)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,n){this._selection.setAttribute(e,n)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return Yd+e}static _isStoreAttributeKey(e){return e.startsWith(Yd)}}xs.prototype.is=function(i){return i==="selection"||i=="model:selection"||i=="documentSelection"||i=="model:documentSelection"};class wq extends Vi{constructor(e){super();_(this,"markers",new En({idProperty:"name"}));_(this,"_model");_(this,"_document");_(this,"_attributePriority",new Map);_(this,"_selectionRestorePosition",null);_(this,"_hasChangedRange",!1);_(this,"_overriddenGravityRegister",new Set);_(this,"_observedMarkers",new Set);this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(n,s)=>{const o=s[0];!o.isDocumentOperation||o.type=="marker"||o.type=="rename"||o.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(n,s,o,r)=>{this._updateMarker(s,r)}),this.listenTo(this._document,"change",(n,s)=>{yq(this._model,s)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,n){super.setFocus(e,n),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,n){if(this._setAttribute(e,n)){const s=[e];this.fire("change:attribute",{attributeKeys:s,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const n=[e];this.fire("change:attribute",{attributeKeys:n,directChange:!0})}}overrideGravity(){const e=si();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new V("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){const n=this._prepareRange(e);n&&this._ranges.push(n)}_validateSelectionRanges(e){for(const n of e)if(!this._document._validateSelectionRange(n))throw new V("document-selection-wrong-position",this,{range:n})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const n=ei.fromRange(e);return n.on("change:range",(s,o,r)=>{if(this._hasChangedRange=!0,n.root==this._document.graveyard){this._selectionRestorePosition=r.deletionPosition;const a=this._ranges.indexOf(n);this._ranges.splice(a,1),n.detach()}}),n}updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let n=!1;for(const o of this._model.markers){const r=o.name.split(":",1)[0];if(!this._observedMarkers.has(r))continue;const a=o.getRange();for(const l of this.getRanges())a.containsRange(l,!l.isCollapsed)&&e.push(o)}const s=Array.from(this.markers);for(const o of e)this.markers.has(o)||(this.markers.add(o),n=!0);for(const o of Array.from(this.markers))e.includes(o)||(this.markers.remove(o),n=!0);n&&this.fire("change:marker",{oldMarkers:s,directChange:!1})}_updateMarker(e,n){const s=e.name.split(":",1)[0];if(!this._observedMarkers.has(s))return;let o=!1;const r=Array.from(this.markers),a=this.markers.has(e);if(!n)a&&(this.markers.remove(e),o=!0);else{let l=!1;for(const u of this.getRanges())if(n.containsRange(u,!u.isCollapsed)){l=!0;break}l&&!a?(this.markers.add(e),o=!0):!l&&a&&(this.markers.remove(e),o=!0)}o&&this.fire("change:marker",{oldMarkers:r,directChange:!1})}_updateAttributes(e){const n=Cs(this._getSurroundingAttributes()),s=Cs(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[r,a]of this._attributePriority)a=="low"&&(this._attrs.delete(r),this._attributePriority.delete(r));this._setAttributesTo(n);const o=[];for(const[r,a]of this.getAttributes())(!s.has(r)||s.get(r)!==a)&&o.push(r);for(const[r]of s)this.hasAttribute(r)||o.push(r);o.length>0&&this.fire("change:attribute",{attributeKeys:o,directChange:!1})}_setAttribute(e,n,s=!0){const o=s?"normal":"low";return o=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===n?!1:(this._attrs.set(e,n),this._attributePriority.set(e,o),!0)}_removeAttribute(e,n=!0){const s=n?"normal":"low";return s=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,s),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){const n=new Set;for(const[s,o]of this.getAttributes())e.get(s)!==o&&this._removeAttribute(s,!1);for(const[s,o]of e)this._setAttribute(s,o,!1)&&n.add(s);return n}*getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const n of e.getAttributeKeys())n.startsWith(Yd)&&(yield[n.substr(Yd.length),e.getAttribute(n)])}_getSurroundingAttributes(){const e=this.getFirstPosition(),n=this._model.schema;if(e.root.rootName=="$graveyard")return null;let s=null;if(this.isCollapsed){const o=e.textNode?e.textNode:e.nodeBefore,r=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(s=Zu(o,n)),s||(s=Zu(r,n)),!this.isGravityOverridden&&!s){let a=o;for(;a&&!s;)a=a.previousSibling,s=Zu(a,n)}if(!s){let a=r;for(;a&&!s;)a=a.nextSibling,s=Zu(a,n)}s||(s=this.getStoredAttributes())}else{const o=this.getFirstRange();for(const r of o){if(r.item.is("element")&&n.isObject(r.item)){s=Zu(r.item,n);break}if(r.type=="text"){s=r.item.getAttributes();break}}}return s}_fixGraveyardSelection(e){const n=this._model.schema.getNearestSelectionRange(e);n&&this._pushRange(n)}}function Zu(i,t){if(!i)return null;if(i instanceof bs||i instanceof Lt)return i.getAttributes();if(!t.isInline(i))return null;if(!t.isObject(i))return[];const e=[];for(const[n,s]of i.getAttributes())t.checkAttribute("$text",n)&&t.getAttributeProperties(n).copyFromObject!==!1&&e.push([n,s]);return e}function yq(i,t){const e=i.document.differ;for(const n of e.getChanges()){if(n.type!="insert")continue;const s=n.position.parent;n.length===s.maxOffset&&i.enqueueChange(t,r=>{const a=Array.from(s.getAttributeKeys()).filter(l=>l.startsWith(Yd));for(const l of a)r.removeAttribute(l,s)})}}class Sd{constructor(t){_(this,"_nodes",[]);_(this,"_offsetToNode",[]);t&&this._insertNodes(0,t)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(t){return this._nodes[t]||null}getNodeAtOffset(t){return this._offsetToNode[t]||null}getNodeIndex(t){return t.index}getNodeStartOffset(t){return t.startOffset}indexToOffset(t){if(t==this._nodes.length)return this.maxOffset;const e=this._nodes[t];if(!e)throw new V("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(e)}offsetToIndex(t){if(t==this._offsetToNode.length)return this._nodes.length;const e=this._offsetToNode[t];if(!e)throw new V("model-nodelist-offset-out-of-bounds",this,{offset:t,nodeList:this});return this.getNodeIndex(e)}_insertNodes(t,e){const n=[];for(const o of e){if(!(o instanceof $a))throw new V("model-nodelist-insertnodes-not-node",this);n.push(o)}let s=this.indexToOffset(t);PS(this._nodes,n,t),PS(this._offsetToNode,vq(n),s);for(let o=t;o<this._nodes.length;o++)this._nodes[o]._index=o,this._nodes[o]._startOffset=s,s+=this._nodes[o].offsetSize}_removeNodes(t,e=1){if(e==0)return[];let n=this.indexToOffset(t);const s=this._nodes.splice(t,e),o=s[s.length-1],r=o.startOffset+o.offsetSize-n;this._offsetToNode.splice(n,r);for(const a of s)a._index=null,a._startOffset=null;for(let a=t;a<this._nodes.length;a++)this._nodes[a]._index=a,this._nodes[a]._startOffset=n,n+=this._nodes[a].offsetSize;return s}_removeNodesArray(t){if(t.length==0)return;for(const n of t)n._index=null,n._startOffset=null;this._nodes=this._nodes.filter(n=>n.index!==null),this._offsetToNode=this._offsetToNode.filter(n=>n.index!==null);let e=0;for(let n=0;n<this._nodes.length;n++)this._nodes[n]._index=n,this._nodes[n]._startOffset=e,e+=this._nodes[n].offsetSize}toJSON(){return this._nodes.map(t=>t.toJSON())}}function vq(i){const t=[];let e=0;for(const n of i)for(let s=0;s<n.offsetSize;s++)t[e++]=n;return t}class Rt extends $a{constructor(e,n,s){super(n);_(this,"name");_(this,"_children",new Sd);this.name=e,s&&this._insertChild(0,s)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let n=this;for(const s of e)n=n.getChildAtOffset(s);return n}findAncestor(e,n={}){let s=n.includeSelf?this:this.parent;for(;s;){if(s.name===e)return s;s=s.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const n of this._children)e.children.push(n.toJSON())}return e}_clone(e=!1){const n=e?Tq(this._children):void 0;return new Rt(this.name,this.getAttributes(),n)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,n){const s=Cq(n);for(const o of s)o.parent!==null&&o._remove(),o.parent=this;this._children._insertNodes(e,s)}_removeChildren(e,n=1){const s=this._children._removeNodes(e,n);for(const o of s)o.parent=null;return s}_removeChildrenArray(e){this._children._removeNodesArray(e);for(const n of e)n.parent=null}static fromJSON(e){let n;if(e.children){n=[];for(const s of e.children)s.name?n.push(Rt.fromJSON(s)):n.push(Lt.fromJSON(s))}return new Rt(e.name,e.attributes,n)}}Rt.prototype.is=function(i,t){return t?t===this.name&&(i==="element"||i==="model:element"):i==="element"||i==="model:element"||i==="node"||i==="model:node"};function Cq(i){if(typeof i=="string")return[new Lt(i)];Li(i)||(i=[i]);const t=[];for(const e of i)typeof e=="string"?t.push(new Lt(e)):e instanceof bs?t.push(new Lt(e.data,e.getAttributes())):t.push(e);return t}function Tq(i){const t=[];for(const e of i)t.push(e._clone(!0));return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Y5{constructor(t){_(this,"_dispatchers");this._dispatchers=t}add(t){for(const e of this._dispatchers)t(e);return this}}class xq extends Y5{elementToElement(t){return this.add(Hq(t))}elementToStructure(t){return this.add(Wq(t))}attributeToElement(t){return this.add(qq(t))}attributeToAttribute(t){return this.add($q(t))}markerToElement(t){return this.add(Gq(t))}markerToHighlight(t){return this.add(Kq(t))}markerToData(t){return this.add(jq(t))}}function J5(){return(i,t,e)=>{if(!e.consumable.consume(t.item,i.name))return;const n=e.writer,s=e.mapper.toViewPosition(t.range.start),o=n.createText(t.item.data);n.insert(s,o)}}function X5(){return(i,t,e)=>{e.convertAttributes(t.item),!t.reconversion&&t.item.is("element")&&!t.item.isEmpty&&e.convertChildren(t.item)}}function kq(){return(i,t,e)=>{const n=e.mapper.toViewPosition(t.position),s=t.position.getShiftedBy(t.length),o=e.mapper.toViewPosition(s,{isPhantom:!0}),r=e.writer.createRange(n,o),a=e.writer.remove(r.getTrimmed());for(const l of e.writer.createRangeIn(a).getItems())e.mapper.unbindViewElement(l,{defer:!0})}}function Q5(i,t){const e=i.createAttributeElement("span",t.attributes);return t.classes&&e._addClass(t.classes),typeof t.priority=="number"&&(e._priority=t.priority),e._id=t.id,e}function Eq(){return(i,t,e)=>{const n=t.selection;if(n.isCollapsed||!e.consumable.consume(n,"selection"))return;const s=[];for(const o of n.getRanges())s.push(e.mapper.toViewRange(o));e.writer.setSelection(s,{backward:n.isBackward})}}function Sq(){return(i,t,e)=>{const n=t.selection;if(!n.isCollapsed||!e.consumable.consume(n,"selection"))return;const s=e.writer,o=n.getFirstPosition(),r=e.mapper.toViewPosition(o),a=s.breakAttributes(r);s.setSelection(a)}}function Aq(){return(i,t,e)=>{const n=e.writer,s=n.document.selection;for(const o of s.getRanges())o.isCollapsed&&o.end.parent.isAttached()&&e.writer.mergeAttributes(o.start);n.setSelection(null)}}function Rq(i){return(t,e,n)=>{if(!n.consumable.test(e.item,t.name))return;const s=i(e.attributeOldValue,n,e),o=i(e.attributeNewValue,n,e);if(!s&&!o)return;n.consumable.consume(e.item,t.name);const r=n.writer,a=r.document.selection;if(e.item instanceof Vi||e.item instanceof xs)r.wrap(a.getFirstRange(),o);else{let l=n.mapper.toViewRange(e.range);e.attributeOldValue!==null&&s&&(l=r.unwrap(l,s)),e.attributeNewValue!==null&&o&&r.wrap(l,o)}}}function Iq(i,t=t$){return(e,n,s)=>{if(!t(n.item,s.consumable,{preflight:!0}))return;const o=i(n.item,s,n);if(!o)return;t(n.item,s.consumable);const r=s.mapper.toViewPosition(n.range.start);s.mapper.bindElements(n.item,o),s.writer.insert(r,o),s.convertAttributes(n.item),sV(o,n.item.getChildren(),s,{reconversion:n.reconversion})}}function Pq(i,t){return(e,n,s)=>{if(!t(n.item,s.consumable,{preflight:!0}))return;const o=new Map;s.writer._registerSlotFactory(Jq(n.item,o,s));const r=i(n.item,s,n);if(s.writer._clearSlotFactory(),!r)return;Xq(n.item,o,s),t(n.item,s.consumable);const a=s.mapper.toViewPosition(n.range.start);s.mapper.bindElements(n.item,r),s.writer.insert(a,r),s.convertAttributes(n.item),Qq(r,o,s,{reconversion:n.reconversion})}}function Mq(i){return(t,e,n)=>{e.isOpening=!0;const s=i(e,n);e.isOpening=!1;const o=i(e,n);if(!s||!o)return;const r=e.markerRange;if(r.isCollapsed&&!n.consumable.consume(r,t.name))return;for(const u of r)if(!n.consumable.consume(u.item,t.name))return;const a=n.mapper,l=n.writer;l.insert(a.toViewPosition(r.start),s),n.mapper.bindElementToMarker(s,e.markerName),r.isCollapsed||(l.insert(a.toViewPosition(r.end),o),n.mapper.bindElementToMarker(o,e.markerName)),t.stop()}}function Vq(){return(i,t,e)=>{const n=e.mapper.markerNameToElements(t.markerName);if(n){for(const s of n)e.mapper.unbindElementFromMarkerName(s,t.markerName),e.writer.clear(e.writer.createRangeOn(s),s);e.writer.clearClonedElementsGroup(t.markerName),i.stop()}}}function Nq(i){return(t,e,n)=>{const s=i(e.markerName,n);if(!s)return;const o=e.markerRange;n.consumable.consume(o,t.name)&&(ZS(o,!1,n,e,s),ZS(o,!0,n,e,s),t.stop())}}function ZS(i,t,e,n,s){const o=t?i.start:i.end,r=o.nodeAfter&&o.nodeAfter.is("element")?o.nodeAfter:null,a=o.nodeBefore&&o.nodeBefore.is("element")?o.nodeBefore:null;if(r||a){let u,h;t&&r||!t&&!a?(u=r,h=!0):(u=a,h=!1);const m=e.mapper.toViewElement(u);if(m){Dq(m,t,h,e,n,s);return}}const l=e.mapper.toViewPosition(o);Oq(l,t,e,n,s)}function Dq(i,t,e,n,s,o){const r=`data-${o.group}-${t?"start":"end"}-${e?"before":"after"}`,a=i.hasAttribute(r)?i.getAttribute(r).split(","):[];a.unshift(o.name),n.writer.setAttribute(r,a.join(","),i),n.mapper.bindElementToMarker(i,s.markerName)}function Oq(i,t,e,n,s){const o=`${s.group}-${t?"start":"end"}`,r=s.name?{name:s.name}:null,a=e.writer.createUIElement(o,r);e.writer.insert(i,a),e.mapper.bindElementToMarker(a,n.markerName)}function Lq(i){return(t,e,n)=>{const s=i(e.markerName,n);if(!s)return;const o=n.mapper.markerNameToElements(e.markerName);if(!o)return;for(const a of o)n.mapper.unbindElementFromMarkerName(a,e.markerName),a.is("containerElement")?(r(`data-${s.group}-start-before`,a),r(`data-${s.group}-start-after`,a),r(`data-${s.group}-end-before`,a),r(`data-${s.group}-end-after`,a)):n.writer.clear(n.writer.createRangeOn(a),a);n.writer.clearClonedElementsGroup(e.markerName),t.stop();function r(a,l){if(l.hasAttribute(a)){const u=new Set(l.getAttribute(a).split(","));u.delete(s.name),u.size==0?n.writer.removeAttribute(a,l):n.writer.setAttribute(a,Array.from(u).join(","),l)}}}}function Bq(i){return(t,e,n)=>{if(!n.consumable.test(e.item,t.name))return;const s=i(e.attributeOldValue,n,e),o=i(e.attributeNewValue,n,e);if(!s&&!o)return;n.consumable.consume(e.item,t.name);const r=n.mapper.toViewElement(e.item),a=n.writer;if(!r)throw new V("conversion-attribute-to-attribute-on-text",n.dispatcher,e);if(e.attributeOldValue!==null&&s){let l=s.value;s.key=="style"&&(typeof s.value=="string"?l=new kd(a.document.stylesProcessor).setTo(s.value).getStylesEntries().map(([u])=>u):l=Object.keys(s.value)),a.removeAttribute(s.key,l,r)}if(e.attributeNewValue!==null&&o){let l=o.value;o.key=="style"&&typeof o.value=="string"&&(l=Object.fromEntries(new kd(a.document.stylesProcessor).setTo(o.value).getStylesEntries())),a.setAttribute(o.key,l,!1,r)}}}function Fq(i){return(t,e,n)=>{if(!e.item||!(e.item instanceof Vi||e.item instanceof xs)&&!e.item.is("$textProxy"))return;const s=F0(i,e,n);if(!s||!n.consumable.consume(e.item,t.name))return;const o=n.writer,r=Q5(o,s),a=o.document.selection;if(e.item instanceof Vi||e.item instanceof xs)o.wrap(a.getFirstRange(),r);else{const l=n.mapper.toViewRange(e.range),u=o.wrap(l,r);for(const h of u.getItems())if(h.is("attributeElement")&&h.isSimilar(r)){n.mapper.bindElementToMarker(h,e.markerName);break}}}}function Uq(i){return(t,e,n)=>{if(!e.item||!(e.item instanceof Rt))return;const s=F0(i,e,n);if(!s||!n.consumable.test(e.item,t.name))return;const o=n.mapper.toViewElement(e.item);if(o&&o.getCustomProperty("addHighlight")){n.consumable.consume(e.item,t.name);for(const a of Z._createIn(e.item))n.consumable.consume(a.item,t.name);o.getCustomProperty("addHighlight")(o,s,n.writer),n.mapper.bindElementToMarker(o,e.markerName)}}}function zq(i){return(t,e,n)=>{if(e.markerRange.isCollapsed)return;const s=F0(i,e,n);if(!s)return;const o=Q5(n.writer,s),r=n.mapper.markerNameToElements(e.markerName);if(r){for(const a of r)n.mapper.unbindElementFromMarkerName(a,e.markerName),a.is("attributeElement")?n.writer.unwrap(n.writer.createRangeOn(a),o):a.getCustomProperty("removeHighlight")(a,s.id,n.writer);n.writer.clearClonedElementsGroup(e.markerName),t.stop()}}}function Hq(i){const t=eV(i.model),e=Jd(i.view,"container");return t.attributes.length&&(t.children=!0),n=>{n.on(`insert:${t.name}`,Iq(e,iV(t)),{priority:i.converterPriority||"normal"}),(t.children||t.attributes.length)&&n.on("reduceChanges",nV(t),{priority:"low"})}}function Wq(i){const t=eV(i.model),e=Jd(i.view,"container");return t.children=!0,n=>{if(n._conversionApi.schema.checkChild(t.name,"$text"))throw new V("conversion-element-to-structure-disallowed-text",n,{elementName:t.name});n.on(`insert:${t.name}`,Pq(e,iV(t)),{priority:i.converterPriority||"normal"}),n.on("reduceChanges",nV(t),{priority:"low"})}}function qq(i){i=Oi(i);let t=i.model;typeof t=="string"&&(t={key:t});let e=`attribute:${t.key}`;if(t.name&&(e+=":"+t.name),t.values)for(const s of t.values)i.view[s]=Jd(i.view[s],"attribute");else i.view=Jd(i.view,"attribute");const n=tV(i);return s=>{s.on(e,Rq(n),{priority:i.converterPriority||"normal"})}}function $q(i){i=Oi(i);let t=i.model;typeof t=="string"&&(t={key:t});let e=`attribute:${t.key}`;if(t.name&&(e+=":"+t.name),t.values)for(const s of t.values)i.view[s]=YS(i.view[s]);else i.view=YS(i.view);const n=tV(i);return s=>{s.on(e,Bq(n),{priority:i.converterPriority||"normal"})}}function Gq(i){const t=Jd(i.view,"ui");return e=>{e.on(`addMarker:${i.model}`,Mq(t),{priority:i.converterPriority||"normal"}),e.on(`removeMarker:${i.model}`,Vq(),{priority:i.converterPriority||"normal"})}}function jq(i){i=Oi(i);const t=i.model;let e=i.view;return e||(e=n=>({group:t,name:n.substr(i.model.length+1)})),n=>{n.on(`addMarker:${t}`,Nq(e),{priority:i.converterPriority||"normal"}),n.on(`removeMarker:${t}`,Lq(e),{priority:i.converterPriority||"normal"})}}function Kq(i){return t=>{t.on(`addMarker:${i.model}`,Fq(i.view),{priority:i.converterPriority||"normal"}),t.on(`addMarker:${i.model}`,Uq(i.view),{priority:i.converterPriority||"normal"}),t.on(`removeMarker:${i.model}`,zq(i.view),{priority:i.converterPriority||"normal"})}}function eV(i){return typeof i=="string"&&(i={name:i}),{name:i.name,attributes:i.attributes?bn(i.attributes):[],children:!!i.children}}function Jd(i,t){return typeof i=="function"?i:(e,n)=>Zq(i,n,t)}function Zq(i,t,e){typeof i=="string"&&(i={name:i});let n;const s=t.writer,o=Object.assign({},i.attributes);if(e=="container")n=s.createContainerElement(i.name,o);else if(e=="attribute"){const r={priority:i.priority||Aa.DEFAULT_PRIORITY};n=s.createAttributeElement(i.name,o,r)}else n=s.createUIElement(i.name,o);if(i.styles){const r=Object.keys(i.styles);for(const a of r)s.setStyle(a,i.styles[a],n)}if(i.classes){const r=i.classes;if(typeof r=="string")s.addClass(r,n);else for(const a of r)s.addClass(a,n)}return n}function tV(i){return i.model.values?(t,e,n)=>{const s=i.view[t];return s?s(t,e,n):null}:i.view}function YS(i){return typeof i=="string"?t=>({key:i,value:t}):typeof i=="object"?i.value?()=>i:t=>({key:i.key,value:t}):i}function F0(i,t,e){const n=typeof i=="function"?i(t,e):i;return n?(n.priority||(n.priority=10),n.id||(n.id=t.markerName),n):null}function Yq(i){return(t,e)=>{if(!t.is("element",i.name))return!1;if(e.type=="attribute"){if(i.attributes.includes(e.attributeKey))return!0}else{/* istanbul ignore else: This is always true because otherwise it would not register a reducer callback. -- @preserve */if(i.children)return!0}return!1}}function nV(i){const t=Yq(i);return(e,n)=>{const s=[];n.reconvertedElements||(n.reconvertedElements=new Set);for(const o of n.changes){const r=o.type=="attribute"?o.range.start.nodeAfter:o.position.parent;if(!r||!t(r,o)){s.push(o);continue}if(!n.reconvertedElements.has(r)){n.reconvertedElements.add(r);const a=re._createBefore(r);let l=s.length;for(let u=s.length-1;u>=0;u--){const h=s[u],p=(h.type=="attribute"?h.range.start:h.position).compareWith(a);if(p=="before"||h.type=="remove"&&p=="same")break;l=u}s.splice(l,0,{type:"remove",name:r.name,position:a,length:1},{type:"reinsert",name:r.name,position:a,length:1})}}n.changes=s}}function iV(i){return(t,e,n={})=>{const s=["insert"];for(const o of i.attributes)t.hasAttribute(o)&&s.push(`attribute:${o}`);return s.every(o=>e.test(t,o))?(n.preflight||s.forEach(o=>e.consume(t,o)),!0):!1}}function Jq(i,t,e){return(n,s)=>{const o=n.createContainerElement("$slot");let r=null;if(s==="children")r=Array.from(i.getChildren());else if(typeof s=="function")r=Array.from(i.getChildren()).filter(a=>s(a));else throw new V("conversion-slot-mode-unknown",e.dispatcher,{modeOrFilter:s});return t.set(o,r),o}}function Xq(i,t,e){const n=Array.from(t.values()).flat(),s=new Set(n);if(s.size!=n.length)throw new V("conversion-slot-filter-overlap",e.dispatcher,{element:i});if(s.size!=i.childCount)throw new V("conversion-slot-filter-incomplete",e.dispatcher,{element:i})}function Qq(i,t,e,n){e.mapper.on("modelToViewPosition",r,{priority:"highest"});let s=null,o=null;for([s,o]of t)sV(i,o,e,n),e.writer.move(e.writer.createRangeIn(s),e.writer.createPositionBefore(s)),e.writer.remove(s);e.mapper.off("modelToViewPosition",r);function r(a,l){const u=l.modelPosition.nodeAfter,h=o.indexOf(u);h<0||(l.viewPosition=l.mapper.findPositionIn(s,h))}}function sV(i,t,e,n){for(const s of t)e$(i.root,s,e,n)||e.convertItem(s)}function e$(i,t,e,n){const{writer:s,mapper:o}=e;if(!n.reconversion)return!1;const r=o.toViewElement(t);return!r||r.root==i||!e.canReuseView(r)?!1:(s.move(s.createRangeOn(r),o.toViewPosition(re._createBefore(t))),!0)}function t$(i,t,{preflight:e}={}){return e?t.test(i,"insert"):t.consume(i,"insert")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function oV(i){const{schema:t,document:e}=i.model;for(const n of e.getRoots())if(n.isEmpty&&!t.checkChild(n,"$text")&&t.checkChild(n,"paragraph"))return i.insertElement("paragraph",n),!0;return!1}function rV(i,t,e){const n=e.createContext(i);return!(!e.checkChild(n,"paragraph")||!e.checkChild(n.push("paragraph"),t))}function aV(i,t){const e=t.createElement("paragraph");return t.insert(e,i),t.createPositionAt(e,0)}class n$ extends Y5{elementToElement(t){return this.add(lV(t))}elementToAttribute(t){return this.add(o$(t))}attributeToAttribute(t){return this.add(r$(t))}elementToMarker(t){return this.add(a$(t))}dataToMarker(t){return this.add(l$(t))}}function JS(){return(i,t,e)=>{if(!t.modelRange&&e.consumable.consume(t.viewItem,{name:!0})){const{modelRange:n,modelCursor:s}=e.convertChildren(t.viewItem,t.modelCursor);t.modelRange=n,t.modelCursor=s}}}function i$(){return(i,t,{schema:e,consumable:n,writer:s})=>{let o=t.modelCursor;if(!n.test(t.viewItem))return;if(!e.checkChild(o,"$text")){if(!rV(o,"$text",e)||t.viewItem.data.trim().length==0)return;o=aV(o,s)}n.consume(t.viewItem);const r=s.createText(t.viewItem.data);s.insert(r,o),t.modelRange=s.createRange(o,o.getShiftedBy(r.offsetSize)),t.modelCursor=t.modelRange.end}}function s$(i,t){return(e,n)=>{const s=n.newSelection,o=[];for(const a of s.getRanges())o.push(t.toModelRange(a));const r=i.createSelection(o,{backward:s.isBackward});r.isEqual(i.document.selection)||i.change(a=>{a.setSelection(r)})}}function lV(i){i=Oi(i);const t=Yy(i),e=U0(i.view),n=e?`element:${e}`:"element";return s=>{s.on(n,t,{priority:i.converterPriority||"normal"})}}function o$(i){i=Oi(i),cV(i);const t=uV(i,!1),e=U0(i.view),n=e?`element:${e}`:"element";return s=>{s.on(n,t,{priority:i.converterPriority||"low"})}}function r$(i){i=Oi(i);let t=null;(typeof i.view=="string"||i.view.key)&&(t=d$(i)),cV(i,t);const e=uV(i,!0);return n=>{n.on("element",e,{priority:i.converterPriority||"low"})}}function a$(i){const t=m$(i.model);return lV({...i,model:t})}function l$(i){i=Oi(i),i.model||(i.model=s=>s?i.view+":"+s:i.view);const t={view:i.view,model:i.model},e=Yy(XS(t,"start")),n=Yy(XS(t,"end"));return s=>{s.on(`element:${i.view}-start`,e,{priority:i.converterPriority||"normal"}),s.on(`element:${i.view}-end`,n,{priority:i.converterPriority||"normal"});const o=Sa.low,r=Sa.highest,a=Sa.get(i.converterPriority)/r;s.on("element",c$(t),{priority:o+a})}}function c$(i){return(t,e,n)=>{const s=`data-${i.view}`;if(!n.consumable.test(e.viewItem,{attributes:s+"-end-after"})&&!n.consumable.test(e.viewItem,{attributes:s+"-start-after"})&&!n.consumable.test(e.viewItem,{attributes:s+"-end-before"})&&!n.consumable.test(e.viewItem,{attributes:s+"-start-before"}))return;e.modelRange||Object.assign(e,n.convertChildren(e.viewItem,e.modelCursor)),n.consumable.consume(e.viewItem,{attributes:s+"-end-after"})&&o(e.modelRange.end,e.viewItem.getAttribute(s+"-end-after").split(",")),n.consumable.consume(e.viewItem,{attributes:s+"-start-after"})&&o(e.modelRange.end,e.viewItem.getAttribute(s+"-start-after").split(",")),n.consumable.consume(e.viewItem,{attributes:s+"-end-before"})&&o(e.modelRange.start,e.viewItem.getAttribute(s+"-end-before").split(",")),n.consumable.consume(e.viewItem,{attributes:s+"-start-before"})&&o(e.modelRange.start,e.viewItem.getAttribute(s+"-start-before").split(","));function o(r,a){for(const l of a){const u=i.model(l,n),h=n.writer.createElement("$marker",{"data-name":u});n.writer.insert(h,r),e.modelCursor.isEqual(r)?e.modelCursor=e.modelCursor.getShiftedBy(1):e.modelCursor=e.modelCursor._getTransformedByInsertion(r,1),e.modelRange=e.modelRange._getTransformedByInsertion(r,1)[0]}}}}function U0(i){return typeof i=="string"?i:typeof i=="object"&&typeof i.name=="string"?i.name:null}function Yy(i){const t=new Ts(i.view);return(e,n,s)=>{const o=t.match(n.viewItem);if(!o)return;const r=o.match;if(r.name=!0,!s.consumable.test(n.viewItem,r))return;const a=u$(i.model,n.viewItem,s);a&&s.safeInsert(a,n.modelCursor)&&(s.consumable.consume(n.viewItem,r),s.convertChildren(n.viewItem,a),s.updateConversionResult(a,n))}}function u$(i,t,e){return i instanceof Function?i(t,e):e.writer.createElement(i)}function d$(i){typeof i.view=="string"&&(i.view={key:i.view});const t=i.view.key,e=typeof i.view.value>"u"?/[\s\S]*/:i.view.value;let n;return t=="class"||t=="style"?n={[t=="class"?"classes":"styles"]:e}:n={attributes:{[t]:e}},i.view.name&&(n.name=i.view.name),i.view=n,t}function cV(i,t=null){const e=t===null?!0:o=>o.getAttribute(t),n=typeof i.model!="object"?i.model:i.model.key,s=typeof i.model!="object"||typeof i.model.value>"u"?e:i.model.value;i.model={key:n,value:s}}function uV(i,t){const e=new Ts(i.view);return(n,s,o)=>{if(!s.modelRange&&t)return;const r=e.match(s.viewItem);if(!r||(h$(i.view,s.viewItem)?r.match.name=!0:delete r.match.name,!o.consumable.test(s.viewItem,r.match)))return;const a=i.model.key,l=typeof i.model.value=="function"?i.model.value(s.viewItem,o,s):i.model.value;if(l===null)return;s.modelRange||Object.assign(s,o.convertChildren(s.viewItem,s.modelCursor)),f$(s.modelRange,{key:a,value:l},t,o)&&(o.consumable.test(s.viewItem,{name:!0})&&(r.match.name=!0),o.consumable.consume(s.viewItem,r.match))}}function h$(i,t){const e=typeof i=="function"?i(t):i;return typeof e=="object"&&!U0(e)?!1:!e.classes&&!e.attributes&&!e.styles}function f$(i,t,e,n){let s=!1;for(const o of Array.from(i.getItems({shallow:e})))n.schema.checkAttribute(o,t.key)&&(s=!0,!o.hasAttribute(t.key)&&n.writer.setAttribute(t.key,t.value,o));return s}function m$(i){return(t,e)=>{const n=typeof i=="string"?i:i(t,e);return e.writer.createElement("$marker",{"data-name":n})}}function XS(i,t){const e=(n,s)=>{const o=n.getAttribute("name"),r=i.model(o,s);return s.writer.createElement("$marker",{"data-name":r})};return{view:`${i.view}-${t}`,model:e}}function g$(i){i.document.registerPostFixer(t=>p$(t,i))}function p$(i,t){const e=t.document.selection,n=t.schema,s=[];let o=!1;for(const r of e.getRanges()){const a=dV(r,n);a&&!a.isEqual(r)?(s.push(a),o=!0):s.push(r)}return o&&i.setSelection(y$(s),{backward:e.isBackward}),!1}function dV(i,t){return i.isCollapsed?b$(i,t):_$(i,t)}function b$(i,t){const e=i.start,n=t.getNearestSelectionRange(e);if(!n){const o=e.getAncestors().reverse().find(r=>t.isObject(r));return o?Z._createOn(o):null}if(!n.isCollapsed)return n;const s=n.start;return e.isEqual(s)?null:new Z(s)}function _$(i,t){const{start:e,end:n}=i,s=t.checkChild(e,"$text"),o=t.checkChild(n,"$text"),r=t.getLimitElement(e),a=t.getLimitElement(n);if(r===a){if(s&&o)return null;if(w$(e,n,t)){const m=e.nodeAfter&&t.isSelectable(e.nodeAfter)?null:t.getNearestSelectionRange(e,"forward"),v=n.nodeBefore&&t.isSelectable(n.nodeBefore)?null:t.getNearestSelectionRange(n,"backward"),C=m?m.start:e,x=v?v.end:n;return new Z(C,x)}}const l=r&&!r.is("rootElement"),u=a&&!a.is("rootElement");if(l||u){const h=e.nodeAfter&&n.nodeBefore&&e.nodeAfter.parent===n.nodeBefore.parent,m=l&&(!h||!eA(e.nodeAfter,t)),p=u&&(!h||!eA(n.nodeBefore,t));let v=e,C=n;return m&&(v=re._createBefore(QS(r,t))),p&&(C=re._createAfter(QS(a,t))),new Z(v,C)}return null}function QS(i,t){let e=i,n=e;for(;t.isLimit(n)&&n.parent;)e=n,n=n.parent;return e}function w$(i,t,e){const n=i.nodeAfter&&!e.isLimit(i.nodeAfter)||e.checkChild(i,"$text"),s=t.nodeBefore&&!e.isLimit(t.nodeBefore)||e.checkChild(t,"$text");return n||s}function y$(i){const t=[...i],e=new Set;let n=1;for(;n<t.length;){const o=t[n],r=t.slice(0,n);for(const[a,l]of r.entries())if(!e.has(a)){if(o.isEqual(l))e.add(a);else if(o.isIntersecting(l)){e.add(a),e.add(n);const u=o.getJoined(l);t.push(u)}}n++}return t.filter((o,r)=>!e.has(r))}function eA(i,t){return i&&t.isSelectable(i)}class v$ extends _t(){constructor(e,n){super();_(this,"model");_(this,"view");_(this,"mapper");_(this,"downcastDispatcher");this.model=e,this.view=new rq(n),this.mapper=new j5,this.downcastDispatcher=new K5({mapper:this.mapper,schema:e.schema});const s=this.model.document,o=s.selection,r=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(s,"change",()=>{this.view.change(a=>{this.downcastDispatcher.convertChanges(s.differ,r,a),this.downcastDispatcher.convertSelection(o,r,a)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",s$(this.model,this.mapper)),this.listenTo(this.view.document,"beforeinput",C$(this.mapper,this.model.schema,this.view),{priority:"high"}),this.downcastDispatcher.on("insert:$text",J5(),{priority:"lowest"}),this.downcastDispatcher.on("insert",X5(),{priority:"lowest"}),this.downcastDispatcher.on("remove",kq(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",Aq()),this.downcastDispatcher.on("selection",Eq(),{priority:"low"}),this.downcastDispatcher.on("selection",Sq(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(a=>{if(a.rootName=="$graveyard")return null;const l=new N5(this.view.document,a.name);return l.rootName=a.rootName,this.mapper.bindElements(a,l),l})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(e){const n=typeof e=="string"?e:e.name,s=this.model.markers.get(n);if(!s)throw new V("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:n});this.model.change(()=>{this.model.markers._refresh(s)})}reconvertItem(e){this.model.change(()=>{this.model.document.differ._refreshItem(e)})}}function C$(i,t,e){return(n,s)=>{if(!(e.document.isComposing&&!Se.isAndroid))for(let o=0;o<s.targetRanges.length;o++){const r=s.targetRanges[o],a=i.toModelRange(r),l=dV(a,t);!l||l.isEqual(a)||(s.targetRanges[o]=i.toViewRange(l))}}}class T$ extends _t(){constructor(){super();_(this,"_sourceDefinitions",{});_(this,"_attributeProperties",Object.create(null));_(this,"_customChildChecks",new Map);_(this,"_customAttributeChecks",new Map);_(this,"_genericCheckSymbol",Symbol("$generic"));_(this,"_compiledDefinitions");this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,n)=>{n[0]=new kr(n[0])},{priority:"highest"}),this.on("checkChild",(e,n)=>{n[0]=new kr(n[0]),n[1]=this.getDefinition(n[1])},{priority:"highest"})}register(e,n){if(this._sourceDefinitions[e])throw new V("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},n)],this._clearCache()}extend(e,n){if(!this._sourceDefinitions[e])throw new V("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},n)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let n;return typeof e=="string"?n=e:"is"in e&&(e.is("$text")||e.is("$textProxy"))?n="$text":n=e.name,this.getDefinitions()[n]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){const n=this.getDefinition(e);return!!(n&&n.isBlock)}isLimit(e){const n=this.getDefinition(e);return n?!!(n.isLimit||n.isObject):!1}isObject(e){const n=this.getDefinition(e);return n?!!(n.isObject||n.isLimit&&n.isSelectable&&n.isContent):!1}isInline(e){const n=this.getDefinition(e);return!!(n&&n.isInline)}isSelectable(e){const n=this.getDefinition(e);return n?!!(n.isSelectable||n.isObject):!1}isContent(e){const n=this.getDefinition(e);return n?!!(n.isContent||n.isObject):!1}checkChild(e,n){return n?this._checkContextMatch(e,n):!1}checkAttribute(e,n){const s=this.getDefinition(e.last);if(!s)return!1;const o=this._evaluateAttributeChecks(e,n);return o!==void 0?o:s.allowAttributes.includes(n)}checkMerge(e,n){if(e instanceof re){const s=e.nodeBefore,o=e.nodeAfter;if(!(s instanceof Rt))throw new V("schema-check-merge-no-element-before",this);if(!(o instanceof Rt))throw new V("schema-check-merge-no-element-after",this);return this.checkMerge(s,o)}if(this.isLimit(e)||this.isLimit(n))return!1;for(const s of n.getChildren())if(!this.checkChild(e,s))return!1;return!0}addChildCheck(e,n){const s=n!==void 0?n:this._genericCheckSymbol,o=this._customChildChecks.get(s)||[];o.push(e),this._customChildChecks.set(s,o)}addAttributeCheck(e,n){const s=n!==void 0?n:this._genericCheckSymbol,o=this._customAttributeChecks.get(s)||[];o.push(e),this._customAttributeChecks.set(s,o)}setAttributeProperties(e,n){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),n)}getAttributeProperties(e){return this._attributeProperties[e]||Object.create(null)}getLimitElement(e){let n;for(e instanceof re?n=e.parent:n=(e instanceof Z?[e]:Array.from(e.getRanges())).reduce((o,r)=>{const a=r.getCommonAncestor();return o?o.getCommonAncestor(a,{includeSelf:!0}):a},null);!this.isLimit(n)&&n.parent;)n=n.parent;return n}checkAttributeInSelection(e,n){if(e.isCollapsed){const o=[...e.getFirstPosition().getAncestors(),new Lt("",e.getAttributes())];return this.checkAttribute(o,n)}else{const s=e.getRanges();for(const o of s)for(const r of o)if(this.checkAttribute(r.item,n))return!0}return!1}*getValidRanges(e,n){e=F$(e);for(const s of e)yield*this._getValidRangesForRange(s,n)}getNearestSelectionRange(e,n="both"){if(e.root.rootName=="$graveyard")return null;if(this.checkChild(e,"$text"))return new Z(e);let s,o;const r=e.getAncestors().reverse().find(a=>this.isLimit(a))||e.root;(n=="both"||n=="backward")&&(s=new Eo({boundaries:Z._createIn(r),startPosition:e,direction:"backward"})),(n=="both"||n=="forward")&&(o=new Eo({boundaries:Z._createIn(r),startPosition:e}));for(const a of B$(s,o)){const l=a.walker==s?"elementEnd":"elementStart",u=a.value;if(u.type==l&&this.isObject(u.item))return Z._createOn(u.item);if(this.checkChild(u.nextPosition,"$text"))return new Z(u.nextPosition)}return null}findAllowedParent(e,n){let s=e.parent;for(;s;){if(this.checkChild(s,n))return s;if(this.isLimit(s))return null;s=s.parent}return null}setAllowedAttributes(e,n,s){const o=s.model;for(const[r,a]of Object.entries(n))o.schema.checkAttribute(e,r)&&s.setAttribute(r,a,e)}removeDisallowedAttributes(e,n){for(const s of e)if(s.is("$text"))tA(this,s,n);else{const r=Z._createIn(s).getPositions();for(const a of r){const l=a.nodeBefore||a.parent;tA(this,l,n)}}}getAttributesWithProperty(e,n,s){const o={};for(const[r,a]of e.getAttributes()){const l=this.getAttributeProperties(r);l[n]!==void 0&&(s===void 0||s===l[n])&&(o[r]=a)}return o}createContext(e){return new kr(e)}_clearCache(){this._compiledDefinitions=null}_compile(){const e={},n=this._sourceDefinitions,s=Object.keys(n);for(const r of s)e[r]=x$(n[r],r);const o=Object.values(e);for(const r of o)k$(e,r),E$(e,r),S$(e,r),A$(e,r);for(const r of o)R$(e,r);for(const r of o)I$(e,r);for(const r of o)P$(e,r);for(const r of o)V$(e,r);for(const r of o)N$(e,r);this._compiledDefinitions=M$(e)}_checkContextMatch(e,n){const s=e.last;let o=this._evaluateChildChecks(e,n);if(o=o!==void 0?o:n.allowIn.includes(s.name),!o)return!1;const r=this.getDefinition(s),a=e.trimLast();return r?a.length==0?!0:this._checkContextMatch(a,r):!1}_evaluateChildChecks(e,n){const s=this._customChildChecks.get(this._genericCheckSymbol)||[],o=this._customChildChecks.get(n.name)||[];for(const r of[...s,...o]){const a=r(e,n);if(a!==void 0)return a}}_evaluateAttributeChecks(e,n){const s=this._customAttributeChecks.get(this._genericCheckSymbol)||[],o=this._customAttributeChecks.get(n)||[];for(const r of[...s,...o]){const a=r(e,n);if(a!==void 0)return a}}*_getValidRangesForRange(e,n){let s=e.start,o=e.start;for(const r of e.getItems({shallow:!0}))r.is("element")&&(yield*this._getValidRangesForRange(Z._createIn(r),n)),this.checkAttribute(r,n)||(s.isEqual(o)||(yield new Z(s,o)),s=re._createAfter(r)),o=re._createAfter(r);s.isEqual(o)||(yield new Z(s,o))}findOptimalInsertionRange(e,n){const s=e.getSelectedElement();if(s&&this.isObject(s)&&!this.isInline(s))return n=="before"||n=="after"?new Z(re._createAt(s,n)):Z._createOn(s);const o=Ln(e.getSelectedBlocks());if(!o)return new Z(e.focus);if(o.isEmpty)return new Z(re._createAt(o,0));const r=re._createAfter(o);return e.focus.isTouching(r)?new Z(r):new Z(re._createBefore(o))}}class kr{constructor(t){_(this,"_items");if(t instanceof kr)return t;let e;typeof t=="string"?e=[t]:Array.isArray(t)?e=t:e=t.getAncestors({includeSelf:!0}),this._items=e.map(L$)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(t){const e=new kr([t]);return e._items=[...this._items,...e._items],e}trimLast(){const t=new kr([]);return t._items=this._items.slice(0,-1),t}getItem(t){return this._items[t]}*getNames(){yield*this._items.map(t=>t.name)}endsWith(t){return Array.from(this.getNames()).join(" ").endsWith(t)}startsWith(t){return Array.from(this.getNames()).join(" ").startsWith(t)}}function x$(i,t){const e={name:t,allowIn:new Set,allowChildren:new Set,disallowIn:new Set,disallowChildren:new Set,allowContentOf:new Set,allowWhere:new Set,allowAttributes:new Set,disallowAttributes:new Set,allowAttributesOf:new Set,inheritTypesFrom:new Set};return D$(i,e),Ns(i,e,"allowIn"),Ns(i,e,"allowChildren"),Ns(i,e,"disallowIn"),Ns(i,e,"disallowChildren"),Ns(i,e,"allowContentOf"),Ns(i,e,"allowWhere"),Ns(i,e,"allowAttributes"),Ns(i,e,"disallowAttributes"),Ns(i,e,"allowAttributesOf"),Ns(i,e,"inheritTypesFrom"),O$(i,e),e}function k$(i,t){for(const e of t.allowIn){const n=i[e];n?n.allowChildren.add(t.name):t.allowIn.delete(e)}}function E$(i,t){for(const e of t.allowChildren){const n=i[e];n?n.allowIn.add(t.name):t.allowChildren.delete(e)}}function S$(i,t){for(const e of t.disallowIn){const n=i[e];n?n.disallowChildren.add(t.name):t.disallowIn.delete(e)}}function A$(i,t){for(const e of t.disallowChildren){const n=i[e];n?n.disallowIn.add(t.name):t.disallowChildren.delete(e)}}function R$(i,t){for(const e of t.disallowChildren)t.allowChildren.delete(e);for(const e of t.disallowIn)t.allowIn.delete(e);for(const e of t.disallowAttributes)t.allowAttributes.delete(e)}function I$(i,t){for(const e of t.allowContentOf){const n=i[e];n&&(n.disallowChildren.forEach(s=>{t.allowChildren.has(s)||(t.disallowChildren.add(s),i[s].disallowIn.add(t.name))}),n.allowChildren.forEach(s=>{t.disallowChildren.has(s)||(t.allowChildren.add(s),i[s].allowIn.add(t.name))}))}}function P$(i,t){for(const e of t.allowWhere){const n=i[e];n&&(n.disallowIn.forEach(s=>{t.allowIn.has(s)||(t.disallowIn.add(s),i[s].disallowChildren.add(t.name))}),n.allowIn.forEach(s=>{t.disallowIn.has(s)||(t.allowIn.add(s),i[s].allowChildren.add(t.name))}))}}function M$(i){const t={};for(const e of Object.values(i))t[e.name]={name:e.name,isBlock:!!e.isBlock,isContent:!!e.isContent,isInline:!!e.isInline,isLimit:!!e.isLimit,isObject:!!e.isObject,isSelectable:!!e.isSelectable,allowIn:Array.from(e.allowIn).filter(n=>!!i[n]),allowChildren:Array.from(e.allowChildren).filter(n=>!!i[n]),allowAttributes:Array.from(e.allowAttributes)};return t}function V$(i,t){for(const e of t.allowAttributesOf){const n=i[e];if(!n)return;n.allowAttributes.forEach(s=>{t.disallowAttributes.has(s)||t.allowAttributes.add(s)})}}function N$(i,t){for(const e of t.inheritTypesFrom){const n=i[e];if(n){const s=Object.keys(n).filter(o=>o.startsWith("is"));for(const o of s)o in t||(t[o]=n[o])}}}function D$(i,t){for(const e of i){const n=Object.keys(e).filter(s=>s.startsWith("is"));for(const s of n)t[s]=!!e[s]}}function Ns(i,t,e){for(const n of i){let s=n[e];typeof s=="string"&&(s=[s]),Array.isArray(s)&&s.forEach(o=>t[e].add(o))}}function O$(i,t){for(const e of i){const n=e.inheritAllFrom;n&&(t.allowContentOf.add(n),t.allowWhere.add(n),t.allowAttributesOf.add(n),t.inheritTypesFrom.add(n))}}function L$(i){return typeof i=="string"||i.is("documentFragment")?{name:typeof i=="string"?i:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:i.is("element")?i.name:"$text",*getAttributeKeys(){yield*i.getAttributeKeys()},getAttribute(t){return i.getAttribute(t)}}}function*B$(i,t){let e=!1;for(;!e;){if(e=!0,i){const n=i.next();n.done||(e=!1,yield{walker:i,value:n.value})}if(t){const n=t.next();n.done||(e=!1,yield{walker:t,value:n.value})}}}function*F$(i){for(const t of i)yield*t.getMinimalFlatRanges()}function tA(i,t,e){for(const n of t.getAttributeKeys())i.checkAttribute(t,n)||e.removeAttribute(n,t)}class U$ extends Tt(){constructor(e){super();_(this,"conversionApi");_(this,"_splitParts",new Map);_(this,"_cursorParents",new Map);_(this,"_modelCursor",null);_(this,"_emptyElementsToKeep",new Set);this.conversionApi={...e,consumable:null,writer:null,store:null,convertItem:(n,s)=>this._convertItem(n,s),convertChildren:(n,s)=>this._convertChildren(n,s),safeInsert:(n,s)=>this._safeInsert(n,s),updateConversionResult:(n,s)=>this._updateConversionResult(n,s),splitToAllowedParent:(n,s)=>this._splitToAllowedParent(n,s),getSplitParts:n=>this._getSplitParts(n),keepEmptyElement:n=>this._keepEmptyElement(n)}}convert(e,n,s=["$root"]){this.fire("viewCleanup",e),this._modelCursor=H$(s,n),this.conversionApi.writer=n,this.conversionApi.consumable=xg.createFrom(e),this.conversionApi.store={};const{modelRange:o}=this._convertItem(e,this._modelCursor),r=n.createDocumentFragment();if(o){this._removeEmptyElements();const a=this._modelCursor.parent,l=a._removeChildren(0,a.childCount);r._insertChild(0,l),r.markers=z$(r,n)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,r}_convertItem(e,n){const s={viewItem:e,modelCursor:n,modelRange:null};if(e.is("element")?this.fire(`element:${e.name}`,s,this.conversionApi):e.is("$text")?this.fire("text",s,this.conversionApi):this.fire("documentFragment",s,this.conversionApi),s.modelRange&&!(s.modelRange instanceof Z))throw new V("view-conversion-dispatcher-incorrect-result",this);return{modelRange:s.modelRange,modelCursor:s.modelCursor}}_convertChildren(e,n){let s=n.is("position")?n:re._createAt(n,0);const o=new Z(s);for(const r of Array.from(e.getChildren())){const a=this._convertItem(r,s);a.modelRange instanceof Z&&(o.end=a.modelRange.end,s=a.modelCursor)}return{modelRange:o,modelCursor:s}}_safeInsert(e,n){const s=this._splitToAllowedParent(e,n);return s?(this.conversionApi.writer.insert(e,s.position),!0):!1}_updateConversionResult(e,n){const s=this._getSplitParts(e),o=this.conversionApi.writer;n.modelRange||(n.modelRange=o.createRange(o.createPositionBefore(e),o.createPositionAfter(s[s.length-1])));const r=this._cursorParents.get(e);r?n.modelCursor=o.createPositionAt(r,0):n.modelCursor=n.modelRange.end}_splitToAllowedParent(e,n){const{schema:s,writer:o}=this.conversionApi;let r=s.findAllowedParent(n,e);if(r){if(r===n.parent)return{position:n};this._modelCursor.parent.getAncestors().includes(r)&&(r=null)}if(!r)return rV(n,e,s)?{position:aV(n,o)}:null;const a=this.conversionApi.writer.split(n,r),l=[];for(const h of a.range.getWalker())if(h.type=="elementEnd")l.push(h.item);else{const m=l.pop(),p=h.item;this._registerSplitPair(m,p)}const u=a.range.end.parent;return this._cursorParents.set(e,u),{position:a.position,cursorParent:u}}_registerSplitPair(e,n){this._splitParts.has(e)||this._splitParts.set(e,[e]);const s=this._splitParts.get(e);this._splitParts.set(n,s),s.push(n)}_getSplitParts(e){let n;return this._splitParts.has(e)?n=this._splitParts.get(e):n=[e],n}_keepEmptyElement(e){this._emptyElementsToKeep.add(e)}_removeEmptyElements(){const e=new Map;for(const n of this._splitParts.keys())if(n.isEmpty&&!this._emptyElementsToKeep.has(n)){const s=e.get(n.parent)||[];s.push(n),this._splitParts.delete(n),e.set(n.parent,s)}for(const[n,s]of e)n._removeChildrenArray(s);e.size&&this._removeEmptyElements()}}function z$(i,t){const e=new Set,n=new Map,s=Z._createIn(i).getItems();for(const o of s)o.is("element","$marker")&&e.add(o);for(const o of e){const r=o.getAttribute("data-name"),a=t.createPositionBefore(o);n.has(r)?n.get(r).end=a.clone():n.set(r,new Z(a.clone())),t.remove(o)}return n}function H$(i,t){let e;for(const n of new kr(i)){const s={};for(const r of n.getAttributeKeys())s[r]=n.getAttribute(r);const o=t.createElement(n.name,s);e&&t.insert(o,e),e=re._createAt(o,0)}return e}class W${getHtml(t){const n=de.document.implementation.createHTMLDocument("").createElement("div");return n.appendChild(t),n.innerHTML}}class q${constructor(t){_(this,"domParser");_(this,"domConverter");_(this,"htmlWriter");_(this,"skipComments",!0);this.domParser=new DOMParser,this.domConverter=new Ap(t,{renderingMode:"data"}),this.htmlWriter=new W$}toData(t){const e=this.domConverter.viewToDom(t);return this.htmlWriter.getHtml(e)}toView(t){const e=this._toDom(t);return this.domConverter.domToView(e,{skipComments:this.skipComments})}registerRawContentMatcher(t){this.domConverter.registerRawContentMatcher(t)}useFillerType(t){this.domConverter.blockFillerMode=t=="marked"?"markedNbsp":"nbsp"}_toDom(t){/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(t.trim().slice(0,1e4))||(t=`<body>${t}</body>`);const e=this.domParser.parseFromString(t,"text/html"),n=e.createDocumentFragment(),s=e.body.childNodes;for(;s.length>0;)n.appendChild(s[0]);return n}}class $$ extends Tt(){constructor(e,n){super();_(this,"model");_(this,"mapper");_(this,"downcastDispatcher");_(this,"upcastDispatcher");_(this,"viewDocument");_(this,"stylesProcessor");_(this,"htmlProcessor");_(this,"processor");_(this,"_viewWriter");this.model=e,this.mapper=new j5,this.downcastDispatcher=new K5({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",J5(),{priority:"lowest"}),this.downcastDispatcher.on("insert",X5(),{priority:"lowest"}),this.upcastDispatcher=new U$({schema:e.schema}),this.viewDocument=new Ep(n),this.stylesProcessor=n,this.htmlProcessor=new q$(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new L5(this.viewDocument),this.upcastDispatcher.on("text",i$(),{priority:"lowest"}),this.upcastDispatcher.on("element",JS(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",JS(),{priority:"lowest"}),_t().prototype.decorate.call(this,"init"),_t().prototype.decorate.call(this,"set"),_t().prototype.decorate.call(this,"get"),_t().prototype.decorate.call(this,"toView"),_t().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},oV)},{priority:"lowest"})}get(e={}){const{rootName:n="main",trim:s="empty"}=e;if(!this._checkIfRootsExists([n]))throw new V("datacontroller-get-non-existent-root",this);const o=this.model.document.getRoot(n);return o.isAttached()||Ze("datacontroller-get-detached-root",this),s==="empty"&&!this.model.hasContent(o,{ignoreWhitespaces:!0})?"":this.stringify(o,e)}stringify(e,n={}){const s=this.toView(e,n);return this.processor.toData(s)}toView(e,n={}){const s=this.viewDocument,o=this._viewWriter;this.mapper.clearBindings();const r=Z._createIn(e),a=new Ra(s);this.mapper.bindElements(e,a);const l=e.is("documentFragment")?e.markers:G$(e);return this.downcastDispatcher.convert(r,l,o,n),a}init(e){if(this.model.document.version)throw new V("datacontroller-init-document-not-empty",this);let n={};if(typeof e=="string"?n.main=e:n=e,!this._checkIfRootsExists(Object.keys(n)))throw new V("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},s=>{for(const o of Object.keys(n)){const r=this.model.document.getRoot(o);s.insert(this.parse(n[o],r),r,0)}}),Promise.resolve()}set(e,n={}){let s={};if(typeof e=="string"?s.main=e:s=e,!this._checkIfRootsExists(Object.keys(s)))throw new V("datacontroller-set-non-existent-root",this);this.model.enqueueChange(n.batchType||{},o=>{o.setSelection(null),o.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const r of Object.keys(s)){const a=this.model.document.getRoot(r);o.remove(o.createRangeIn(a)),o.insert(this.parse(s[r],a),a,0)}})}parse(e,n="$root"){const s=this.processor.toView(e);return this.toModel(s,n)}toModel(e,n="$root"){return this.model.change(s=>this.upcastDispatcher.convert(e,s,n))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(const n of e)if(!this.model.document.getRoot(n))return!1;return!0}}function G$(i){const t=[],e=i.root.document;if(!e)return new Map;const n=Z._createIn(i);for(const s of e.model.markers){const o=s.getRange(),r=o.isCollapsed,a=o.start.isEqual(n.start)||o.end.isEqual(n.end);if(r&&a)t.push([s.name,o]);else{const l=n.getIntersection(o);l&&t.push([s.name,l])}}return t.sort(([s,o],[r,a])=>{if(o.end.compareWith(a.start)!=="after")return 1;if(o.start.compareWith(a.end)!=="before")return-1;switch(o.start.compareWith(a.start)){case"before":return 1;case"after":return-1;default:switch(o.end.compareWith(a.end)){case"before":return 1;case"after":return-1;default:return r.localeCompare(s)}}}),new Map(t)}class j${constructor(t,e){_(this,"_helpers",new Map);_(this,"_downcast");_(this,"_upcast");this._downcast=bn(t),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=bn(e),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(t,e){const n=this._downcast.includes(e);if(!this._upcast.includes(e)&&!n)throw new V("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:t,dispatchers:[e],isDowncast:n})}for(t){if(!this._helpers.has(t))throw new V("conversion-for-unknown-group",this);return this._helpers.get(t)}elementToElement(t){this.for("downcast").elementToElement(t);for(const{model:e,view:n}of Bw(t))this.for("upcast").elementToElement({model:e,view:n,converterPriority:t.converterPriority})}attributeToElement(t){this.for("downcast").attributeToElement(t);for(const{model:e,view:n}of Bw(t))this.for("upcast").elementToAttribute({view:n,model:e,converterPriority:t.converterPriority})}attributeToAttribute(t){this.for("downcast").attributeToAttribute(t);for(const{model:e,view:n}of Bw(t))this.for("upcast").attributeToAttribute({view:n,model:e})}_createConversionHelpers({name:t,dispatchers:e,isDowncast:n}){if(this._helpers.has(t))throw new V("conversion-group-exists",this);const s=n?new xq(e):new n$(e);this._helpers.set(t,s)}}function*Bw(i){if(i.model.values)for(const t of i.model.values){const e={key:i.model.key,value:t},n=i.view[t],s=i.upcastAlso?i.upcastAlso[t]:void 0;yield*nA(e,n,s)}else yield*nA(i.model,i.view,i.upcastAlso)}function*nA(i,t,e){if(yield{model:i,view:t},e)for(const n of bn(e))yield{model:i,view:n}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Bi{constructor(t){_(this,"baseVersion");_(this,"isDocumentOperation");_(this,"batch");this.baseVersion=t,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const t=Object.assign({},this);return t.__className=this.constructor.className,delete t.batch,delete t.isDocumentOperation,t}static get className(){return"Operation"}static fromJSON(t,e){return new this(t.baseVersion)}}function z0(i,t){const e=fV(t),n=e.reduce((r,a)=>r+a.offsetSize,0),s=i.parent;eh(i);const o=i.index;return s._insertChild(o,e),Qd(s,o+e.length),Qd(s,o),new Z(i,i.getShiftedBy(n))}function hV(i){if(!i.isFlat)throw new V("operation-utils-remove-range-not-flat",this);const t=i.start.parent;eh(i.start),eh(i.end);const e=t._removeChildren(i.start.index,i.end.index-i.start.index);return Qd(t,i.start.index),e}function Xd(i,t){if(!i.isFlat)throw new V("operation-utils-move-range-not-flat",this);const e=hV(i);return t=t._getTransformedByDeletion(i.start,i.end.offset-i.start.offset),z0(t,e)}function K$(i,t,e){eh(i.start),eh(i.end);for(const n of i.getItems({shallow:!0})){const s=n.is("$textProxy")?n.textNode:n;e!==null?s._setAttribute(t,e):s._removeAttribute(t),Qd(s.parent,s.index)}Qd(i.end.parent,i.end.index)}function fV(i){const t=[];function e(n){if(typeof n=="string")t.push(new Lt(n));else if(n instanceof bs)t.push(new Lt(n.data,n.getAttributes()));else if(n instanceof $a)t.push(n);else if(Li(n))for(const s of n)e(s)}e(i);for(let n=1;n<t.length;n++){const s=t[n],o=t[n-1];s instanceof Lt&&o instanceof Lt&&mV(s,o)&&(t.splice(n-1,2,new Lt(o.data+s.data,o.getAttributes())),n--)}return t}function Qd(i,t){const e=i.getChild(t-1),n=i.getChild(t);if(e&&n&&e.is("$text")&&n.is("$text")&&mV(e,n)){const s=new Lt(e.data+n.data,e.getAttributes());i._removeChildren(t-1,2),i._insertChild(t-1,s)}}function eh(i){const t=i.textNode,e=i.parent;if(t){const n=i.offset-t.startOffset,s=t.index;e._removeChildren(s,1);const o=new Lt(t.data.substr(0,n),t.getAttributes()),r=new Lt(t.data.substr(n),t.getAttributes());e._insertChild(s,[o,r])}}function mV(i,t){const e=i.getAttributes(),n=t.getAttributes();for(const s of e){if(s[1]!==t.getAttribute(s[0]))return!1;n.next()}return n.next().done}class ht extends Bi{constructor(e,n,s,o){super(o);_(this,"sourcePosition");_(this,"howMany");_(this,"targetPosition");this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=n,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[Z._createFromPositionAndShift(this.sourcePosition,this.howMany),Z._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new ht(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new ht(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,n=this.targetPosition.parent,s=this.sourcePosition.offset,o=this.targetPosition.offset;if(s+this.howMany>e.maxOffset)throw new V("move-operation-nodes-do-not-exist",this);if(e===n&&s<o&&o<s+this.howMany)throw new V("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&$n(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const r=this.sourcePosition.path.length-1;if(this.targetPosition.path[r]>=s&&this.targetPosition.path[r]<s+this.howMany)throw new V("move-operation-node-into-itself",this)}}_execute(){Xd(Z._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,n){const s=re.fromJSON(e.sourcePosition,n),o=re.fromJSON(e.targetPosition,n);return new this(s,e.howMany,o,e.baseVersion)}}class kn extends Bi{constructor(e,n,s){super(s);_(this,"position");_(this,"nodes");_(this,"shouldReceiveAttributes");this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new Sd(fV(n)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const e=new Sd([...this.nodes].map(s=>s._clone(!0))),n=new kn(this.position,e,this.baseVersion);return n.shouldReceiveAttributes=this.shouldReceiveAttributes,n}getReversed(){const e=this.position.root.document.graveyard,n=new re(e,[0]);return new ht(this.position,this.nodes.maxOffset,n,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new V("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new Sd([...e].map(n=>n._clone(!0))),z0(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,n){const s=[];for(const r of e.nodes)r.name?s.push(Rt.fromJSON(r)):s.push(Lt.fromJSON(r));const o=new kn(re.fromJSON(e.position,n),s,e.baseVersion);return o.shouldReceiveAttributes=e.shouldReceiveAttributes,o}}class It extends Bi{constructor(e,n,s,o,r){super(r);_(this,"splitPosition");_(this,"howMany");_(this,"insertionPosition");_(this,"graveyardPosition");this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=n,this.insertionPosition=s,this.graveyardPosition=o?o.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new re(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Z(this.splitPosition,e)}get affectedSelectable(){const e=[Z._createFromPositionAndShift(this.splitPosition,0),Z._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(Z._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new It(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,n=new re(e,[0]);return new Xt(this.moveTargetPosition,this.howMany,this.splitPosition,n,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,n=this.splitPosition.offset;if(!e||e.maxOffset<n)throw new V("split-operation-position-invalid",this);if(e.parent){if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new V("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new V("split-operation-graveyard-position-invalid",this)}else throw new V("split-operation-split-in-root",this)}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)Xd(Z._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const s=e._clone();z0(this.insertionPosition,s)}const n=new Z(re._createAt(e,this.splitPosition.offset),re._createAt(e,e.maxOffset));Xd(n,this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const n=e.path.slice(0,-1);return n[n.length-1]++,new re(e.root,n,"toPrevious")}static fromJSON(e,n){const s=re.fromJSON(e.splitPosition,n),o=re.fromJSON(e.insertionPosition,n),r=e.graveyardPosition?re.fromJSON(e.graveyardPosition,n):null;return new this(s,e.howMany,o,r,e.baseVersion)}}class Xt extends Bi{constructor(e,n,s,o,r){super(r);_(this,"sourcePosition");_(this,"howMany");_(this,"targetPosition");_(this,"graveyardPosition");this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=n,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=o.clone()}get type(){return"merge"}get deletionPosition(){return new re(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Z(this.sourcePosition,e)}get affectedSelectable(){const e=this.sourcePosition.parent;return[Z._createOn(e),Z._createFromPositionAndShift(this.targetPosition,0),Z._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new Xt(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),n=this.sourcePosition.path.slice(0,-1),s=new re(this.sourcePosition.root,n)._getTransformedByMergeOperation(this);return new It(e,this.howMany,s,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,n=this.targetPosition.parent;if(e.parent)if(n.parent){if(this.howMany!=e.maxOffset)throw new V("merge-operation-how-many-invalid",this)}else throw new V("merge-operation-target-position-invalid",this);else throw new V("merge-operation-source-position-invalid",this)}_execute(){const e=this.sourcePosition.parent,n=Z._createIn(e);Xd(n,this.targetPosition),Xd(Z._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,n){const s=re.fromJSON(e.sourcePosition,n),o=re.fromJSON(e.targetPosition,n),r=re.fromJSON(e.graveyardPosition,n);return new this(s,e.howMany,o,r,e.baseVersion)}}class ni extends Bi{constructor(e,n,s,o,r,a){super(a);_(this,"name");_(this,"oldRange");_(this,"newRange");_(this,"affectsData");_(this,"_markers");this.name=e,this.oldRange=n?n.clone():null,this.newRange=s?s.clone():null,this.affectsData=r,this._markers=o}get type(){return"marker"}get affectedSelectable(){const e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new ni(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new ni(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,n){return new ni(e.name,e.oldRange?Z.fromJSON(e.oldRange,n):null,e.newRange?Z.fromJSON(e.newRange,n):null,n.model.markers,e.affectsData,e.baseVersion)}}class rn extends Bi{constructor(e,n,s,o,r){super(r);_(this,"range");_(this,"key");_(this,"oldValue");_(this,"newValue");this.range=e.clone(),this.key=n,this.oldValue=s===void 0?null:s,this.newValue=o===void 0?null:o}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new rn(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new rn(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new V("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!wg(e.getAttribute(this.key),this.oldValue))throw new V("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new V("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){wg(this.oldValue,this.newValue)||K$(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,n){return new rn(Z.fromJSON(e.range,n),e.key,e.oldValue,e.newValue,e.baseVersion)}}class pn extends Bi{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new pn(this.baseVersion)}getReversed(){return new pn(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class Ci extends Bi{constructor(e,n,s,o){super(o);_(this,"position");_(this,"oldName");_(this,"newName");this.position=e,this.position.stickiness="toNext",this.oldName=n,this.newName=s}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new Ci(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Ci(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(e instanceof Rt){if(e.name!==this.oldName)throw new V("rename-operation-wrong-name",this)}else throw new V("rename-operation-wrong-position",this)}_execute(){const e=this.position.nodeAfter;e.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,n){return new Ci(re.fromJSON(e.position,n),e.oldName,e.newName,e.baseVersion)}}class Io extends Bi{constructor(e,n,s,o,r){super(r);_(this,"root");_(this,"key");_(this,"oldValue");_(this,"newValue");this.root=e,this.key=n,this.oldValue=s===void 0?null:s,this.newValue=o===void 0?null:o}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new Io(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Io(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new V("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new V("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new V("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,n){if(!n.getRoot(e.root))throw new V("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new Io(n.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}class Ws extends Bi{constructor(e,n,s,o,r){super(r);_(this,"rootName");_(this,"elementName");_(this,"isAdd");_(this,"_document");if(this.rootName=e,this.elementName=n,this.isAdd=s,this._document=o,!this._document.getRoot(this.rootName)){const a=this._document.createRoot(this.elementName,this.rootName);a._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new Ws(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new Ws(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,n){return new Ws(e.rootName,e.elementName,e.isAdd,n,e.baseVersion)}}const cs={};cs[rn.className]=rn;cs[kn.className]=kn;cs[ni.className]=ni;cs[ht.className]=ht;cs[pn.className]=pn;cs[Bi.className]=Bi;cs[Ci.className]=Ci;cs[Io.className]=Io;cs[Ws.className]=Ws;cs[It.className]=It;cs[Xt.className]=Xt;class Z${static fromJSON(t,e){return cs[t.__className].fromJSON(t,e)}}const Jy=new Map;function at(i,t,e){let n=Jy.get(i);n||(n=new Map,Jy.set(i,n)),n.set(t,e)}function Y$(i,t){const e=Jy.get(i);return e&&e.has(t)?e.get(t):J$}function J$(i){return[i]}function iA(i,t,e={}){const n=Y$(i.constructor,t.constructor);try{return i=i.clone(),n(i,t,e)}catch(s){throw s}}function X$(i,t,e){i=i.slice(),t=t.slice();const n=new Q$(e.document,e.useRelations,e.forceWeakRemove);n.setOriginalOperations(i),n.setOriginalOperations(t);const s=n.originalOperations;if(i.length==0||t.length==0)return{operationsA:i,operationsB:t,originalOperations:s};const o=new WeakMap;for(const l of i)o.set(l,0);const r={nextBaseVersionA:i[i.length-1].baseVersion+1,nextBaseVersionB:t[t.length-1].baseVersion+1,originalOperationsACount:i.length,originalOperationsBCount:t.length};let a=0;for(;a<i.length;){const l=i[a],u=o.get(l);if(u==t.length){a++;continue}const h=t[u],m=iA(l,h,n.getContext(l,h,!0)),p=iA(h,l,n.getContext(h,l,!1));n.updateRelation(l,h),n.setOriginalOperations(m,l),n.setOriginalOperations(p,h);for(const v of m)o.set(v,u+p.length);i.splice(a,1,...m),t.splice(u,1,...p)}return oA(i),oA(t),sA(i,r.nextBaseVersionB),sA(t,r.nextBaseVersionA),{operationsA:i,operationsB:t,originalOperations:s}}class Q${constructor(t,e,n=!1){_(this,"originalOperations");_(this,"_history");_(this,"_useRelations");_(this,"_forceWeakRemove");_(this,"_relations");this.originalOperations=new Map,this._history=t.history,this._useRelations=e,this._forceWeakRemove=!!n,this._relations=new Map}setOriginalOperations(t,e=null){const n=e?this.originalOperations.get(e):null;for(const s of t)this.originalOperations.set(s,n||s)}updateRelation(t,e){if(t instanceof ht)e instanceof Xt?t.targetPosition.isEqual(e.sourcePosition)||e.movedRange.containsPosition(t.targetPosition)?this._setRelation(t,e,"insertAtSource"):t.targetPosition.isEqual(e.deletionPosition)?this._setRelation(t,e,"insertBetween"):t.targetPosition.isAfter(e.sourcePosition)&&this._setRelation(t,e,"moveTargetAfter"):e instanceof ht&&(t.targetPosition.isEqual(e.sourcePosition)||t.targetPosition.isBefore(e.sourcePosition)?this._setRelation(t,e,"insertBefore"):this._setRelation(t,e,"insertAfter"));else if(t instanceof It){if(e instanceof Xt)t.splitPosition.isBefore(e.sourcePosition)&&this._setRelation(t,e,"splitBefore");else if(e instanceof ht)if(t.splitPosition.isEqual(e.sourcePosition)||t.splitPosition.isBefore(e.sourcePosition))this._setRelation(t,e,"splitBefore");else{const n=Z._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.splitPosition)){const s=n.end.offset-t.splitPosition.offset,o=t.splitPosition.offset-n.start.offset;this._setRelation(t,e,{howMany:s,offset:o})}}}else if(t instanceof Xt)e instanceof Xt?(t.targetPosition.isEqual(e.sourcePosition)||this._setRelation(t,e,"mergeTargetNotMoved"),t.sourcePosition.isEqual(e.targetPosition)&&this._setRelation(t,e,"mergeSourceNotMoved"),t.sourcePosition.isEqual(e.sourcePosition)&&this._setRelation(t,e,"mergeSameElement")):e instanceof It?t.sourcePosition.isEqual(e.splitPosition)&&this._setRelation(t,e,"splitAtSource"):e instanceof ht&&e.howMany>0&&(t.sourcePosition.isEqual(e.sourcePosition.getShiftedBy(e.howMany))&&this._setRelation(t,e,"mergeSourceAffected"),t.targetPosition.isEqual(e.sourcePosition)&&this._setRelation(t,e,"mergeTargetWasBefore"));else if(t instanceof ni){const n=t.newRange;if(!n)return;if(e instanceof Xt){const s=n.start.isEqual(e.targetPosition),o=n.start.isEqual(e.deletionPosition),r=n.end.isEqual(e.deletionPosition),a=n.end.isEqual(e.sourcePosition);(s||o||r||a)&&this._setRelation(t,e,{wasInLeftElement:s,wasStartBeforeMergedElement:o,wasEndBeforeMergedElement:r,wasInRightElement:a})}}}getContext(t,e,n){return{aIsStrong:n,aWasUndone:this._wasUndone(t),bWasUndone:this._wasUndone(e),abRelation:this._useRelations?this._getRelation(t,e):null,baRelation:this._useRelations?this._getRelation(e,t):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(t){const e=this.originalOperations.get(t);return e.wasUndone||this._history.isUndoneOperation(e)}_getRelation(t,e){const n=this.originalOperations.get(e),s=this._history.getUndoneOperation(n);if(!s)return null;const o=this.originalOperations.get(t),r=this._relations.get(o);return r&&r.get(s)||null}_setRelation(t,e,n){const s=this.originalOperations.get(t),o=this.originalOperations.get(e);let r=this._relations.get(s);r||(r=new Map,this._relations.set(s,r)),r.set(o,n)}}function sA(i,t){for(const e of i)e.baseVersion=t++}function oA(i){const t=new Map;for(let e=0;e<i.length;e++){const n=i[e];n instanceof ni&&(n.baseVersion!==-1?t.set(n.name,{op:n,ranges:n.newRange?[n.newRange]:[]}):(n.newRange&&t.get(n.name).ranges.push(n.newRange),i.splice(e,1),e--))}for(const{op:e,ranges:n}of t.values())n.length?e.newRange=Z._createFromRanges(n):e.newRange=null}at(rn,rn,(i,t,e)=>{if(i.key===t.key&&i.range.start.hasSameParentAs(t.range.start)){const n=i.range.getDifference(t.range).map(o=>new rn(o,i.key,i.oldValue,i.newValue,0)),s=i.range.getIntersection(t.range);return s&&e.aIsStrong&&n.push(new rn(s,t.key,t.newValue,i.newValue,0)),n.length==0?[new pn(0)]:n}else return[i]});at(rn,kn,(i,t)=>{if(i.range.start.hasSameParentAs(t.position)&&i.range.containsPosition(t.position)){const n=i.range._getTransformedByInsertion(t.position,t.howMany,!t.shouldReceiveAttributes).map(s=>new rn(s,i.key,i.oldValue,i.newValue,i.baseVersion));if(t.shouldReceiveAttributes){const s=gV(t,i.key,i.oldValue);s&&n.unshift(s)}return n}return i.range=i.range._getTransformedByInsertion(t.position,t.howMany,!1)[0],[i]});function gV(i,t,e){const s=i.nodes.getNode(0).getAttribute(t);if(s==e)return null;const o=new Z(i.position,i.position.getShiftedBy(i.howMany));return new rn(o,t,s,e,0)}at(rn,Xt,(i,t)=>{const e=[];i.range.start.hasSameParentAs(t.deletionPosition)&&(i.range.containsPosition(t.deletionPosition)||i.range.start.isEqual(t.deletionPosition))&&e.push(Z._createFromPositionAndShift(t.graveyardPosition,1));const n=i.range._getTransformedByMergeOperation(t);return n.isCollapsed||e.push(n),e.map(s=>new rn(s,i.key,i.oldValue,i.newValue,i.baseVersion))});at(rn,ht,(i,t)=>eG(i.range,t).map(n=>new rn(n,i.key,i.oldValue,i.newValue,i.baseVersion)));function eG(i,t){const e=Z._createFromPositionAndShift(t.sourcePosition,t.howMany);let n=null,s=[];e.containsRange(i,!0)?n=i:i.start.hasSameParentAs(e.start)?(s=i.getDifference(e),n=i.getIntersection(e)):s=[i];const o=[];for(let r of s){r=r._getTransformedByDeletion(t.sourcePosition,t.howMany);const a=t.getMovedRangeStart(),l=r.start.hasSameParentAs(a),u=r._getTransformedByInsertion(a,t.howMany,l);o.push(...u)}return n&&o.push(n._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,!1)[0]),o}at(rn,It,(i,t)=>{if(i.range.end.isEqual(t.insertionPosition))return t.graveyardPosition||i.range.end.offset++,[i];if(i.range.start.hasSameParentAs(t.splitPosition)&&i.range.containsPosition(t.splitPosition)){const e=i.clone();return e.range=new Z(t.moveTargetPosition.clone(),i.range.end._getCombined(t.splitPosition,t.moveTargetPosition)),i.range.end=t.splitPosition.clone(),i.range.end.stickiness="toPrevious",[i,e]}return i.range=i.range._getTransformedBySplitOperation(t),[i]});at(kn,rn,(i,t)=>{const e=[i];if(i.shouldReceiveAttributes&&i.position.hasSameParentAs(t.range.start)&&t.range.containsPosition(i.position)){const n=gV(i,t.key,t.newValue);n&&e.push(n)}return e});at(kn,kn,(i,t,e)=>i.position.isEqual(t.position)&&e.aIsStrong?[i]:(i.position=i.position._getTransformedByInsertOperation(t),[i]));at(kn,ht,(i,t)=>(i.position=i.position._getTransformedByMoveOperation(t),[i]));at(kn,It,(i,t)=>(i.position=i.position._getTransformedBySplitOperation(t),[i]));at(kn,Xt,(i,t)=>(i.position=i.position._getTransformedByMergeOperation(t),[i]));at(ni,kn,(i,t)=>(i.oldRange&&(i.oldRange=i.oldRange._getTransformedByInsertOperation(t)[0]),i.newRange&&(i.newRange=i.newRange._getTransformedByInsertOperation(t)[0]),[i]));at(ni,ni,(i,t,e)=>{if(i.name==t.name)if(e.aIsStrong)i.oldRange=t.newRange?t.newRange.clone():null;else return[new pn(0)];return[i]});at(ni,Xt,(i,t)=>(i.oldRange&&(i.oldRange=i.oldRange._getTransformedByMergeOperation(t)),i.newRange&&(i.newRange=i.newRange._getTransformedByMergeOperation(t)),[i]));at(ni,ht,(i,t)=>{const e=[i];if(i.oldRange&&(i.oldRange=Z._createFromRanges(i.oldRange._getTransformedByMoveOperation(t))),i.newRange){const n=i.newRange._getTransformedByMoveOperation(t);i.newRange=n[0];for(let s=1;s<n.length;s++){const o=i.clone();o.oldRange=null,o.newRange=n[s],o.baseVersion=-1,e.push(o)}}return e});at(ni,It,(i,t,e)=>{if(i.oldRange&&(i.oldRange=i.oldRange._getTransformedBySplitOperation(t)),i.newRange){if(e.abRelation){const n=i.newRange._getTransformedBySplitOperation(t);return i.newRange.start.isEqual(t.splitPosition)?e.abRelation.wasStartBeforeMergedElement?i.newRange.start=re._createAt(t.insertionPosition):e.abRelation.wasInLeftElement?i.newRange.start=re._createAt(i.newRange.start):i.newRange.start=re._createAt(t.moveTargetPosition):i.newRange.start=n.start,i.newRange.end.isEqual(t.splitPosition)?i.newRange.end.isEqual(t.splitPosition)&&e.abRelation.wasEndBeforeMergedElement?i.newRange.end=re._createAt(t.insertionPosition):e.abRelation.wasInRightElement?i.newRange.end=re._createAt(t.moveTargetPosition):i.newRange.end=re._createAt(i.newRange.end):i.newRange.end=n.end,[i]}i.newRange=i.newRange._getTransformedBySplitOperation(t)}return[i]});at(Xt,kn,(i,t)=>(i.sourcePosition.hasSameParentAs(t.position)&&(i.howMany+=t.howMany),i.sourcePosition=i.sourcePosition._getTransformedByInsertOperation(t),i.targetPosition=i.targetPosition._getTransformedByInsertOperation(t),[i]));at(Xt,Xt,(i,t,e)=>{if(i.sourcePosition.isEqual(t.sourcePosition)&&i.targetPosition.isEqual(t.targetPosition))if(e.bWasUndone){const n=t.graveyardPosition.path.slice();return n.push(0),i.sourcePosition=new re(t.graveyardPosition.root,n),i.howMany=0,[i]}else return[new pn(0)];if(i.sourcePosition.isEqual(t.sourcePosition)&&!i.targetPosition.isEqual(t.targetPosition)&&!e.bWasUndone&&e.abRelation!="splitAtSource"){const n=i.targetPosition.root.rootName=="$graveyard",s=t.targetPosition.root.rootName=="$graveyard";if(s&&!n||!(n&&!s)&&e.aIsStrong){const l=t.targetPosition._getTransformedByMergeOperation(t),u=i.targetPosition._getTransformedByMergeOperation(t);return[new ht(l,i.howMany,u,0)]}else return[new pn(0)]}return i.sourcePosition.hasSameParentAs(t.targetPosition)&&(i.howMany+=t.howMany),i.sourcePosition=i.sourcePosition._getTransformedByMergeOperation(t),i.targetPosition=i.targetPosition._getTransformedByMergeOperation(t),(!i.graveyardPosition.isEqual(t.graveyardPosition)||!e.aIsStrong)&&(i.graveyardPosition=i.graveyardPosition._getTransformedByMergeOperation(t)),[i]});at(Xt,ht,(i,t,e)=>{const n=Z._createFromPositionAndShift(t.sourcePosition,t.howMany);return t.type=="remove"&&!e.bWasUndone&&i.deletionPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(i.sourcePosition)?[new pn(0)]:(t.sourcePosition.getShiftedBy(t.howMany).isEqual(i.sourcePosition)?i.sourcePosition.stickiness="toNone":t.targetPosition.isEqual(i.sourcePosition)&&e.abRelation=="mergeSourceAffected"?i.sourcePosition.stickiness="toNext":t.sourcePosition.isEqual(i.targetPosition)?(i.targetPosition.stickiness="toNone",i.howMany-=t.howMany):t.targetPosition.isEqual(i.targetPosition)&&e.abRelation=="mergeTargetWasBefore"?(i.targetPosition.stickiness="toPrevious",i.howMany+=t.howMany):(i.sourcePosition.hasSameParentAs(t.targetPosition)&&(i.howMany+=t.howMany),i.sourcePosition.hasSameParentAs(t.sourcePosition)&&(i.howMany-=t.howMany)),i.sourcePosition=i.sourcePosition._getTransformedByMoveOperation(t),i.targetPosition=i.targetPosition._getTransformedByMoveOperation(t),i.sourcePosition.stickiness="toPrevious",i.targetPosition.stickiness="toNext",i.graveyardPosition.isEqual(t.targetPosition)||(i.graveyardPosition=i.graveyardPosition._getTransformedByMoveOperation(t)),[i])});at(Xt,It,(i,t,e)=>{if(t.graveyardPosition&&(i.graveyardPosition=i.graveyardPosition._getTransformedByDeletion(t.graveyardPosition,1),i.deletionPosition.isEqual(t.graveyardPosition)&&(i.howMany=t.howMany)),i.targetPosition.isEqual(t.splitPosition)&&(t.graveyardPosition&&i.deletionPosition.isEqual(t.graveyardPosition)||e.abRelation=="mergeTargetNotMoved"))return i.sourcePosition=i.sourcePosition._getTransformedBySplitOperation(t),[i];if(i.sourcePosition.isEqual(t.splitPosition)){if(e.abRelation=="mergeSourceNotMoved")return i.howMany=0,i.targetPosition=i.targetPosition._getTransformedBySplitOperation(t),[i];if(e.abRelation=="mergeSameElement"||i.sourcePosition.offset>0)return i.sourcePosition=t.moveTargetPosition.clone(),i.targetPosition=i.targetPosition._getTransformedBySplitOperation(t),[i]}return i.sourcePosition.hasSameParentAs(t.splitPosition)&&(i.howMany=t.splitPosition.offset),i.sourcePosition=i.sourcePosition._getTransformedBySplitOperation(t),i.targetPosition=i.targetPosition._getTransformedBySplitOperation(t),[i]});at(ht,kn,(i,t)=>{const n=Z._createFromPositionAndShift(i.sourcePosition,i.howMany)._getTransformedByInsertOperation(t,!1)[0];return i.sourcePosition=n.start,i.howMany=n.end.offset-n.start.offset,i.targetPosition.isEqual(t.position)||(i.targetPosition=i.targetPosition._getTransformedByInsertOperation(t)),[i]});at(ht,ht,(i,t,e)=>{const n=Z._createFromPositionAndShift(i.sourcePosition,i.howMany),s=Z._createFromPositionAndShift(t.sourcePosition,t.howMany);let o=e.aIsStrong,r=!e.aIsStrong;e.abRelation=="insertBefore"||e.baRelation=="insertAfter"?r=!0:(e.abRelation=="insertAfter"||e.baRelation=="insertBefore")&&(r=!1);let a;if(i.targetPosition.isEqual(t.targetPosition)&&r?a=i.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany):a=i.targetPosition._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),rA(i,t)&&rA(t,i))return[t.getReversed()];if(n.containsPosition(t.targetPosition)&&n.containsRange(s,!0))return n.start=n.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),n.end=n.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),cc([n],a);if(s.containsPosition(i.targetPosition)&&s.containsRange(n,!0))return n.start=n.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),n.end=n.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),cc([n],a);const h=$n(i.sourcePosition.getParentPath(),t.sourcePosition.getParentPath());if(h=="prefix"||h=="extension")return n.start=n.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),n.end=n.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),cc([n],a);i.type=="remove"&&t.type!="remove"&&!e.aWasUndone&&!e.forceWeakRemove?o=!0:i.type!="remove"&&t.type=="remove"&&!e.bWasUndone&&!e.forceWeakRemove&&(o=!1);const m=[],p=n.getDifference(s);for(const C of p){C.start=C.start._getTransformedByDeletion(t.sourcePosition,t.howMany),C.end=C.end._getTransformedByDeletion(t.sourcePosition,t.howMany);const x=$n(C.start.getParentPath(),t.getMovedRangeStart().getParentPath())=="same",k=C._getTransformedByInsertion(t.getMovedRangeStart(),t.howMany,x);m.push(...k)}const v=n.getIntersection(s);return v!==null&&o&&(v.start=v.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),v.end=v.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),m.length===0?m.push(v):m.length==1?s.start.isBefore(n.start)||s.start.isEqual(n.start)?m.unshift(v):m.push(v):m.splice(1,0,v)),m.length===0?[new pn(i.baseVersion)]:cc(m,a)});at(ht,It,(i,t,e)=>{let n=i.targetPosition.clone();(!i.targetPosition.isEqual(t.insertionPosition)||!t.graveyardPosition||e.abRelation=="moveTargetAfter")&&(n=i.targetPosition._getTransformedBySplitOperation(t));const s=Z._createFromPositionAndShift(i.sourcePosition,i.howMany);if(s.end.isEqual(t.insertionPosition))return t.graveyardPosition||i.howMany++,i.targetPosition=n,[i];if(s.start.hasSameParentAs(t.splitPosition)&&s.containsPosition(t.splitPosition)){let a=new Z(t.splitPosition,s.end);a=a._getTransformedBySplitOperation(t);const l=[new Z(s.start,t.splitPosition),a];return cc(l,n)}i.targetPosition.isEqual(t.splitPosition)&&e.abRelation=="insertAtSource"&&(n=t.moveTargetPosition),i.targetPosition.isEqual(t.insertionPosition)&&e.abRelation=="insertBetween"&&(n=i.targetPosition);const r=[s._getTransformedBySplitOperation(t)];if(t.graveyardPosition){const a=s.start.isEqual(t.graveyardPosition)||s.containsPosition(t.graveyardPosition);i.howMany>1&&a&&!e.aWasUndone&&r.push(Z._createFromPositionAndShift(t.insertionPosition,1))}return cc(r,n)});at(ht,Xt,(i,t,e)=>{const n=Z._createFromPositionAndShift(i.sourcePosition,i.howMany);if(t.deletionPosition.hasSameParentAs(i.sourcePosition)&&n.containsPosition(t.sourcePosition)){if(i.type=="remove"&&!e.forceWeakRemove){if(!e.aWasUndone){const r=[];let a=t.graveyardPosition.clone(),l=t.targetPosition._getTransformedByMergeOperation(t);const u=i.targetPosition.getTransformedByOperation(t);i.howMany>1&&(r.push(new ht(i.sourcePosition,i.howMany-1,u,0)),a=a._getTransformedByMove(i.sourcePosition,u,i.howMany-1),l=l._getTransformedByMove(i.sourcePosition,u,i.howMany-1));const h=t.deletionPosition._getCombined(i.sourcePosition,u),m=new ht(a,1,h,0),p=m.getMovedRangeStart().path.slice();p.push(0);const v=new re(m.targetPosition.root,p);l=l._getTransformedByMove(a,h,1);const C=new ht(l,t.howMany,v,0);return r.push(m),r.push(C),r}}else if(i.howMany==1)return e.bWasUndone?(i.sourcePosition=t.graveyardPosition.clone(),i.targetPosition=i.targetPosition._getTransformedByMergeOperation(t),[i]):[new pn(0)]}const o=Z._createFromPositionAndShift(i.sourcePosition,i.howMany)._getTransformedByMergeOperation(t);return i.sourcePosition=o.start,i.howMany=o.end.offset-o.start.offset,i.targetPosition=i.targetPosition._getTransformedByMergeOperation(t),[i]});at(Ci,kn,(i,t)=>(i.position=i.position._getTransformedByInsertOperation(t),[i]));at(Ci,Xt,(i,t)=>i.position.isEqual(t.deletionPosition)?(i.position=t.graveyardPosition.clone(),i.position.stickiness="toNext",[i]):(i.position=i.position._getTransformedByMergeOperation(t),[i]));at(Ci,ht,(i,t)=>(i.position=i.position._getTransformedByMoveOperation(t),[i]));at(Ci,Ci,(i,t,e)=>{if(i.position.isEqual(t.position))if(e.aIsStrong)i.oldName=t.newName;else return[new pn(0)];return[i]});at(Ci,It,(i,t)=>{const e=i.position.path,n=t.splitPosition.getParentPath();if($n(e,n)=="same"&&!t.graveyardPosition){const s=new Ci(i.position.getShiftedBy(1),i.oldName,i.newName,0);return[i,s]}return i.position=i.position._getTransformedBySplitOperation(t),[i]});at(Io,Io,(i,t,e)=>{if(i.root===t.root&&i.key===t.key){if(!e.aIsStrong||i.newValue===t.newValue)return[new pn(0)];i.oldValue=t.newValue}return[i]});at(Ws,Ws,(i,t)=>i.rootName===t.rootName&&i.isAdd===t.isAdd?[new pn(0)]:[i]);at(It,kn,(i,t)=>(i.splitPosition.hasSameParentAs(t.position)&&i.splitPosition.offset<t.position.offset&&(i.howMany+=t.howMany),i.splitPosition=i.splitPosition._getTransformedByInsertOperation(t),i.insertionPosition=i.insertionPosition._getTransformedByInsertOperation(t),[i]));at(It,Xt,(i,t,e)=>{if(!i.graveyardPosition&&!e.bWasUndone&&i.splitPosition.hasSameParentAs(t.sourcePosition)){const n=t.graveyardPosition.path.slice();n.push(0);const s=new re(t.graveyardPosition.root,n),o=It.getInsertionPosition(new re(t.graveyardPosition.root,n)),r=new It(s,0,o,null,0);return i.splitPosition=i.splitPosition._getTransformedByMergeOperation(t),i.insertionPosition=It.getInsertionPosition(i.splitPosition),i.graveyardPosition=r.insertionPosition.clone(),i.graveyardPosition.stickiness="toNext",[r,i]}return i.splitPosition.hasSameParentAs(t.deletionPosition)&&!i.splitPosition.isAfter(t.deletionPosition)&&i.howMany--,i.splitPosition.hasSameParentAs(t.targetPosition)&&(i.howMany+=t.howMany),i.splitPosition=i.splitPosition._getTransformedByMergeOperation(t),i.insertionPosition=It.getInsertionPosition(i.splitPosition),i.graveyardPosition&&(i.graveyardPosition=i.graveyardPosition._getTransformedByMergeOperation(t)),[i]});at(It,ht,(i,t,e)=>{const n=Z._createFromPositionAndShift(t.sourcePosition,t.howMany);if(i.graveyardPosition){const o=n.start.isEqual(i.graveyardPosition)||n.containsPosition(i.graveyardPosition);if(!e.bWasUndone&&o){const r=i.splitPosition._getTransformedByMoveOperation(t),a=i.graveyardPosition._getTransformedByMoveOperation(t),l=a.path.slice();l.push(0);const u=new re(a.root,l);return[new ht(r,i.howMany,u,0)]}i.graveyardPosition=i.graveyardPosition._getTransformedByMoveOperation(t)}const s=i.splitPosition.isEqual(t.targetPosition);if(s&&(e.baRelation=="insertAtSource"||e.abRelation=="splitBefore"))return i.howMany+=t.howMany,i.splitPosition=i.splitPosition._getTransformedByDeletion(t.sourcePosition,t.howMany),i.insertionPosition=It.getInsertionPosition(i.splitPosition),[i];if(s&&e.abRelation&&e.abRelation.howMany){const{howMany:o,offset:r}=e.abRelation;return i.howMany+=o,i.splitPosition=i.splitPosition.getShiftedBy(r),[i]}if(i.splitPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(i.splitPosition)){const o=t.howMany-(i.splitPosition.offset-t.sourcePosition.offset);return i.howMany-=o,i.splitPosition.hasSameParentAs(t.targetPosition)&&i.splitPosition.offset<t.targetPosition.offset&&(i.howMany+=t.howMany),i.splitPosition=t.sourcePosition.clone(),i.insertionPosition=It.getInsertionPosition(i.splitPosition),[i]}return t.sourcePosition.isEqual(t.targetPosition)||(i.splitPosition.hasSameParentAs(t.sourcePosition)&&i.splitPosition.offset<=t.sourcePosition.offset&&(i.howMany-=t.howMany),i.splitPosition.hasSameParentAs(t.targetPosition)&&i.splitPosition.offset<t.targetPosition.offset&&(i.howMany+=t.howMany)),i.splitPosition.stickiness="toNone",i.splitPosition=i.splitPosition._getTransformedByMoveOperation(t),i.splitPosition.stickiness="toNext",i.graveyardPosition?i.insertionPosition=i.insertionPosition._getTransformedByMoveOperation(t):i.insertionPosition=It.getInsertionPosition(i.splitPosition),[i]});at(It,It,(i,t,e)=>{if(i.splitPosition.isEqual(t.splitPosition)){if(!i.graveyardPosition&&!t.graveyardPosition)return[new pn(0)];if(i.graveyardPosition&&t.graveyardPosition&&i.graveyardPosition.isEqual(t.graveyardPosition))return[new pn(0)];if(e.abRelation=="splitBefore")return i.howMany=0,i.graveyardPosition=i.graveyardPosition._getTransformedBySplitOperation(t),[i]}if(i.graveyardPosition&&t.graveyardPosition&&i.graveyardPosition.isEqual(t.graveyardPosition)){const n=i.splitPosition.root.rootName=="$graveyard",s=t.splitPosition.root.rootName=="$graveyard";if(s&&!n||!(n&&!s)&&e.aIsStrong){const l=[];return t.howMany&&l.push(new ht(t.moveTargetPosition,t.howMany,t.splitPosition,0)),i.howMany&&l.push(new ht(i.splitPosition,i.howMany,i.moveTargetPosition,0)),l}else return[new pn(0)]}if(i.graveyardPosition&&(i.graveyardPosition=i.graveyardPosition._getTransformedBySplitOperation(t)),i.splitPosition.isEqual(t.insertionPosition)&&e.abRelation=="splitBefore")return i.howMany++,[i];if(t.splitPosition.isEqual(i.insertionPosition)&&e.baRelation=="splitBefore"){const n=t.insertionPosition.path.slice();n.push(0);const s=new re(t.insertionPosition.root,n),o=new ht(i.insertionPosition,1,s,0);return[i,o]}return i.splitPosition.hasSameParentAs(t.splitPosition)&&i.splitPosition.offset<t.splitPosition.offset&&(i.howMany-=t.howMany),i.splitPosition=i.splitPosition._getTransformedBySplitOperation(t),i.insertionPosition=It.getInsertionPosition(i.splitPosition),[i]});function rA(i,t){return i.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany)===null}function cc(i,t){const e=[];for(let n=0;n<i.length;n++){const s=i[n],o=new ht(s.start,s.end.offset-s.start.offset,t,0);e.push(o);for(let r=n+1;r<i.length;r++)i[r]=i[r]._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)[0];t=t._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)}return e}class zt extends Tt(re){constructor(t,e,n="toNone"){if(super(t,e,n),!this.root.is("rootElement"))throw new V("model-liveposition-root-not-rootelement",t);tG.call(this)}detach(){this.stopListening()}toPosition(){return new re(this.root,this.path.slice(),this.stickiness)}static fromPosition(t,e){return new this(t.root,t.path.slice(),e||t.stickiness)}}zt.prototype.is=function(i){return i==="livePosition"||i==="model:livePosition"||i=="position"||i==="model:position"};function tG(){this.listenTo(this.root.document.model,"applyOperation",(i,t)=>{const e=t[0];e.isDocumentOperation&&nG.call(this,e)},{priority:"low"})}function nG(i){const t=this.getTransformedByOperation(i);if(!this.isEqual(t)){const e=this.toPosition();this.path=t.path,this.root=t.root,this.fire("change",e)}}class ql{constructor(t={}){_(this,"operations");_(this,"isUndoable");_(this,"isLocal");_(this,"isUndo");_(this,"isTyping");typeof t=="string"&&(t=t==="transparent"?{isUndoable:!1}:{},Ze("batch-constructor-deprecated-string-type"));const{isUndoable:e=!0,isLocal:n=!0,isUndo:s=!1,isTyping:o=!1}=t;this.operations=[],this.isUndoable=e,this.isLocal=n,this.isUndo=s,this.isTyping=o}get type(){return Ze("batch-type-deprecated"),"default"}get baseVersion(){for(const t of this.operations)if(t.baseVersion!==null)return t.baseVersion;return null}addOperation(t){return t.isDocumentOperation&&(t.batch=this,this.operations.push(t)),t}}const Od=class Od{constructor(t){_(this,"_markerCollection");_(this,"_changesInElement",new Map);_(this,"_elementsSnapshots",new Map);_(this,"_elementChildrenSnapshots",new Map);_(this,"_elementState",new Map);_(this,"_changedMarkers",new Map);_(this,"_changedRoots",new Map);_(this,"_changeCount",0);_(this,"_cachedChanges",null);_(this,"_cachedChangesWithGraveyard",null);_(this,"_refreshedItems",new Set);this._markerCollection=t}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(t){const e=t;switch(e.type){case"insert":{if(this._isInInsertedElement(e.position.parent))return;this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const n of e.range.getItems({shallow:!0}))this._isInInsertedElement(n.parent)||this._markAttribute(n);break}case"remove":case"move":case"reinsert":{if(e.sourcePosition.isEqual(e.targetPosition)||e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition))return;const n=this._isInInsertedElement(e.sourcePosition.parent),s=this._isInInsertedElement(e.targetPosition.parent);n||this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany),s||this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);const o=Z._createFromPositionAndShift(e.sourcePosition,e.howMany);for(const r of o.getItems({shallow:!0}))this._setElementState(r,"move");break}case"rename":{if(this._isInInsertedElement(e.position.parent))return;this._markRemove(e.position.parent,e.position.offset,1),this._markInsert(e.position.parent,e.position.offset,1);const n=Z._createFromPositionAndShift(e.position,1);for(const s of this._markerCollection.getMarkersIntersectingRange(n)){const o=s.getData();this.bufferMarkerChange(s.name,o,o)}this._setElementState(e.position.nodeAfter,"rename");break}case"split":{const n=e.splitPosition.parent;if(!this._isInInsertedElement(n)){this._markRemove(n,e.splitPosition.offset,e.howMany);const s=Z._createFromPositionAndShift(e.splitPosition,e.howMany);for(const o of s.getItems({shallow:!0}))this._setElementState(o,"move")}this._isInInsertedElement(e.insertionPosition.parent)||this._markInsert(e.insertionPosition.parent,e.insertionPosition.offset,1),e.graveyardPosition&&(this._markRemove(e.graveyardPosition.parent,e.graveyardPosition.offset,1),this._setElementState(e.graveyardPosition.nodeAfter,"move"));break}case"merge":{const n=e.sourcePosition.parent;this._isInInsertedElement(n.parent)||this._markRemove(n.parent,n.startOffset,1);const s=e.graveyardPosition.parent;this._markInsert(s,e.graveyardPosition.offset,1),this._setElementState(n,"move");const o=e.targetPosition.parent;if(!this._isInInsertedElement(o)){this._markInsert(o,e.targetPosition.offset,n.maxOffset);const r=Z._createFromPositionAndShift(e.sourcePosition,e.howMany);for(const a of r.getItems({shallow:!0}))this._setElementState(a,"move")}break}case"detachRoot":case"addRoot":{const n=e.affectedSelectable;if(!n._isLoaded||n.isAttached()==e.isAdd)return;this._bufferRootStateChange(e.rootName,e.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!e.root._isLoaded)return;const n=e.root.rootName;this._bufferRootAttributeChange(n,e.key,e.oldValue,e.newValue);break}}this._cachedChanges=null}bufferMarkerChange(t,e,n){e.range&&e.range.root.is("rootElement")&&!e.range.root._isLoaded&&(e.range=null),n.range&&n.range.root.is("rootElement")&&!n.range.root._isLoaded&&(n.range=null);let s=this._changedMarkers.get(t);s?s.newMarkerData=n:(s={newMarkerData:n,oldMarkerData:e},this._changedMarkers.set(t,s)),s.oldMarkerData.range==null&&n.range==null&&this._changedMarkers.delete(t)}getMarkersToRemove(){const t=[];for(const[e,n]of this._changedMarkers)n.oldMarkerData.range!=null&&t.push({name:e,range:n.oldMarkerData.range});return t}getMarkersToAdd(){const t=[];for(const[e,n]of this._changedMarkers)n.newMarkerData.range!=null&&t.push({name:e,range:n.newMarkerData.range});return t}getChangedMarkers(){return Array.from(this._changedMarkers).map(([t,e])=>({name:t,data:{oldRange:e.oldMarkerData.range,newRange:e.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(const{newMarkerData:t,oldMarkerData:e}of this._changedMarkers.values()){if(t.affectsData!==e.affectsData)return!0;if(t.affectsData){const n=t.range&&!e.range,s=!t.range&&e.range,o=t.range&&e.range&&!t.range.isEqual(e.range);if(n||s||o)return!0}}return!1}getChanges(t={}){if(this._cachedChanges)return t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let e=[];for(const n of this._changesInElement.keys()){const s=this._changesInElement.get(n).sort((h,m)=>h.offset===m.offset?h.type!=m.type?h.type=="remove"?-1:1:0:h.offset<m.offset?-1:1),o=this._elementChildrenSnapshots.get(n),r=lA(n.getChildren()),a=iG(o.length,s);let l=0,u=0;for(const h of a)if(h==="i"){const m=this._getDiffActionForNode(r[l].node,"insert"),p=this._elementsSnapshots.get(r[l].node),v=this._getInsertDiff(n,l,m,r[l],p);e.push(v),l++}else if(h==="r"){const m=this._getDiffActionForNode(o[u].node,"remove"),p=this._getRemoveDiff(n,l,m,o[u]);e.push(p),u++}else if(h==="a"){const m=o[u].attributes,p=r[l].attributes;let v;if(r[l].name=="$text")v=new Z(re._createAt(n,l),re._createAt(n,l+1));else{const x=n.offsetToIndex(l);v=new Z(re._createAt(n,l),re._createAt(n.getChild(x),0))}const C=this._getAttributesDiff(v,m,p);e.push(...C),l++,u++}else l++,u++}e.sort((n,s)=>n.position.root!=s.position.root?n.position.root.rootName<s.position.root.rootName?-1:1:n.position.isEqual(s.position)?n.changeCount-s.changeCount:n.position.isBefore(s.position)?-1:1);for(let n=1,s=0;n<e.length;n++){const o=e[s],r=e[n],a=o.type=="remove"&&r.type=="remove"&&o.name=="$text"&&r.name=="$text"&&o.position.isEqual(r.position),l=o.type=="insert"&&r.type=="insert"&&o.name=="$text"&&r.name=="$text"&&o.position.parent==r.position.parent&&o.position.offset+o.length==r.position.offset,u=o.type=="attribute"&&r.type=="attribute"&&o.position.parent==r.position.parent&&o.range.isFlat&&r.range.isFlat&&o.position.offset+o.length==r.position.offset&&o.attributeKey==r.attributeKey&&o.attributeOldValue==r.attributeOldValue&&o.attributeNewValue==r.attributeNewValue;a||l||u?(o.length++,u&&(o.range.end=o.range.end.getShiftedBy(1)),e[n]=null):s=n}e=e.filter(n=>n);for(const n of e)delete n.changeCount,n.type=="attribute"&&(delete n.position,delete n.length);return this._changeCount=0,this._cachedChangesWithGraveyard=e,this._cachedChanges=e.filter(sG),t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(t=>{const e={...t};return e.state!==void 0&&delete e.attributes,e})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementChildrenSnapshots.clear(),this._elementsSnapshots.clear(),this._elementState.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems.clear(),this._cachedChanges=null}_refreshItem(t){if(this._isInInsertedElement(t.parent))return;this._markRemove(t.parent,t.startOffset,t.offsetSize),this._markInsert(t.parent,t.startOffset,t.offsetSize),this._refreshedItems.add(t),this._setElementState(t,"refresh");const e=Z._createOn(t);for(const n of this._markerCollection.getMarkersIntersectingRange(e)){const s=n.getData();this.bufferMarkerChange(n.name,s,s)}this._cachedChanges=null}_bufferRootLoad(t){if(t.isAttached()){this._bufferRootStateChange(t.rootName,!0),this._markInsert(t,0,t.maxOffset);for(const e of t.getAttributeKeys())this._bufferRootAttributeChange(t.rootName,e,null,t.getAttribute(e));for(const e of this._markerCollection)if(e.getRange().root==t){const n=e.getData();this.bufferMarkerChange(e.name,{...n,range:null},n)}}}_bufferRootStateChange(t,e){if(!this._changedRoots.has(t)){this._changedRoots.set(t,{name:t,state:e?"attached":"detached"});return}const n=this._changedRoots.get(t);n.state!==void 0?(delete n.state,n.attributes===void 0&&this._changedRoots.delete(t)):n.state=e?"attached":"detached"}_bufferRootAttributeChange(t,e,n,s){const o=this._changedRoots.get(t)||{name:t},r=o.attributes||{};if(r[e]){const a=r[e];s===a.oldValue?delete r[e]:a.newValue=s}else r[e]={oldValue:n,newValue:s};Object.entries(r).length===0?(delete o.attributes,o.state===void 0&&this._changedRoots.delete(t)):(o.attributes=r,this._changedRoots.set(t,o))}_markInsert(t,e,n){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const s={type:"insert",offset:e,howMany:n,count:this._changeCount++};this._markChange(t,s)}_markRemove(t,e,n){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const s={type:"remove",offset:e,howMany:n,count:this._changeCount++};this._markChange(t,s),this._removeAllNestedChanges(t,e,n)}_markAttribute(t){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const e={type:"attribute",offset:t.startOffset,howMany:t.offsetSize,count:this._changeCount++};this._markChange(t.parent,e)}_markChange(t,e){this._makeSnapshots(t);const n=this._getChangesForElement(t);this._handleChange(e,n),n.push(e);for(let s=0;s<n.length;s++)n[s].howMany<1&&(n.splice(s,1),s--)}_setElementState(t,e){if(!t.is("element"))return;const n=Od._statesPriority.indexOf(this._elementState.get(t));Od._statesPriority.indexOf(e)>n&&this._elementState.set(t,e)}_getDiffActionForNode(t,e){if(!t.is("element")||!this._elementsSnapshots.has(t))return e;const n=this._elementState.get(t);return!n||n=="move"?e:n}_getChangesForElement(t){let e;return this._changesInElement.has(t)?e=this._changesInElement.get(t):(e=[],this._changesInElement.set(t,e)),e}_makeSnapshots(t){if(this._elementChildrenSnapshots.has(t))return;const e=lA(t.getChildren());this._elementChildrenSnapshots.set(t,e);for(const n of e)this._elementsSnapshots.set(n.node,n)}_handleChange(t,e){t.nodesToHandle=t.howMany;for(const n of e){const s=t.offset+t.howMany,o=n.offset+n.howMany;if(t.type=="insert"&&(n.type=="insert"&&(t.offset<=n.offset?n.offset+=t.howMany:t.offset<o&&(n.howMany+=t.nodesToHandle,t.nodesToHandle=0)),n.type=="remove"&&t.offset<n.offset&&(n.offset+=t.howMany),n.type=="attribute")){if(t.offset<=n.offset)n.offset+=t.howMany;else if(t.offset<o){const r=n.howMany;n.howMany=t.offset-n.offset,e.unshift({type:"attribute",offset:s,howMany:r-n.howMany,count:this._changeCount++})}}if(t.type=="remove"){if(n.type=="insert"){if(s<=n.offset)n.offset-=t.howMany;else if(s<=o)if(t.offset<n.offset){const r=s-n.offset;n.offset=t.offset,n.howMany-=r,t.nodesToHandle-=r}else n.howMany-=t.nodesToHandle,t.nodesToHandle=0;else if(t.offset<=n.offset)t.nodesToHandle-=n.howMany,n.howMany=0;else if(t.offset<o){const r=o-t.offset;n.howMany-=r,t.nodesToHandle-=r}}if(n.type=="remove"&&(s<=n.offset?n.offset-=t.howMany:t.offset<n.offset&&(t.nodesToHandle+=n.howMany,n.howMany=0)),n.type=="attribute"){if(s<=n.offset)n.offset-=t.howMany;else if(t.offset<n.offset){const r=s-n.offset;n.offset=t.offset,n.howMany-=r}else if(t.offset<o)if(s<=o){const r=n.howMany;n.howMany=t.offset-n.offset;const a=r-n.howMany-t.nodesToHandle;e.unshift({type:"attribute",offset:t.offset,howMany:a,count:this._changeCount++})}else n.howMany-=o-t.offset}}if(t.type=="attribute"){if(n.type=="insert")if(t.offset<n.offset&&s>n.offset){if(s>o){const r={type:"attribute",offset:o,howMany:s-o,count:this._changeCount++};this._handleChange(r,e),e.push(r)}t.nodesToHandle=n.offset-t.offset,t.howMany=t.nodesToHandle}else t.offset>=n.offset&&t.offset<o&&(s>o?(t.nodesToHandle=s-o,t.offset=o):t.nodesToHandle=0);if(n.type=="remove"&&t.offset<n.offset&&s>n.offset){const r={type:"attribute",offset:n.offset,howMany:s-n.offset,count:this._changeCount++};this._handleChange(r,e),e.push(r),t.nodesToHandle=n.offset-t.offset,t.howMany=t.nodesToHandle}n.type=="attribute"&&(t.offset>=n.offset&&s<=o?(t.nodesToHandle=0,t.howMany=0,t.offset=0):t.offset<=n.offset&&s>=o&&(n.howMany=0))}}t.howMany=t.nodesToHandle,delete t.nodesToHandle}_getInsertDiff(t,e,n,s,o){const r={type:"insert",position:re._createAt(t,e),name:s.name,attributes:new Map(s.attributes),length:1,changeCount:this._changeCount++,action:n};return n!="insert"&&o&&(r.before={name:o.name,attributes:new Map(o.attributes)}),r}_getRemoveDiff(t,e,n,s){return{type:"remove",action:n,position:re._createAt(t,e),name:s.name,attributes:new Map(s.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(t,e,n){const s=[];n=new Map(n);for(const[o,r]of e){const a=n.has(o)?n.get(o):null;a!==r&&s.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:o,attributeOldValue:r,attributeNewValue:a,changeCount:this._changeCount++}),n.delete(o)}for(const[o,r]of n)s.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:o,attributeOldValue:null,attributeNewValue:r,changeCount:this._changeCount++});return s}_isInInsertedElement(t){const e=t.parent;if(!e)return!1;const n=this._changesInElement.get(e),s=t.startOffset;if(n){for(const o of n)if(o.type=="insert"&&s>=o.offset&&s<o.offset+o.howMany)return!0}return this._isInInsertedElement(e)}_removeAllNestedChanges(t,e,n){const s=new Z(re._createAt(t,e),re._createAt(t,e+n));for(const o of s.getItems({shallow:!0}))o.is("element")&&(this._changesInElement.delete(o),this._removeAllNestedChanges(o,0,o.maxOffset))}};_(Od,"_statesPriority",[void 0,"refresh","rename","move"]);let Xy=Od;function aA(i){return{node:i,name:i.is("$text")?"$text":i.name,attributes:new Map(i.getAttributes())}}function lA(i){const t=[];for(const e of i)if(e.is("$text"))for(let n=0;n<e.data.length;++n)t.push(aA(e));else t.push(aA(e));return t}function iG(i,t){const e=[];let n=0,s=0;for(const o of t){if(o.offset>n){for(let r=0;r<o.offset-n;r++)e.push("e");s+=o.offset-n}if(o.type=="insert"){for(let r=0;r<o.howMany;r++)e.push("i");n=o.offset+o.howMany}else if(o.type=="remove"){for(let r=0;r<o.howMany;r++)e.push("r");n=o.offset,s+=o.howMany}else{if(o.howMany>1500)for(let r=0;r<o.howMany;r++)e.push("a");else e.push(..."a".repeat(o.howMany).split(""));n=o.offset+o.howMany,s+=o.howMany}}if(s<i)for(let o=0;o<i-s-n;o++)e.push("e");return e}function sG(i){const t="position"in i&&i.position.root.rootName=="$graveyard",e="range"in i&&i.range.root.rootName=="$graveyard";return!t&&!e}class oG{constructor(){_(this,"_operations",[]);_(this,"_undoPairs",new Map);_(this,"_undoneOperations",new Set);_(this,"_baseVersionToOperationIndex",new Map);_(this,"_version",0);_(this,"_gaps",new Map)}get version(){return this._version}set version(t){this._operations.length&&t>this._version+1&&this._gaps.set(this._version,t),this._version=t}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(t){if(t.baseVersion!==this.version)throw new V("model-document-history-addoperation-incorrect-version",this,{operation:t,historyVersion:this.version});this._operations.push(t),this._version++,this._baseVersionToOperationIndex.set(t.baseVersion,this._operations.length-1)}getOperations(t,e=this.version){if(!this._operations.length)return[];const n=this._operations[0];t===void 0&&(t=n.baseVersion);let s=e-1;for(const[a,l]of this._gaps)t>a&&t<l&&(t=l),s>a&&s<l&&(s=a-1);if(s<n.baseVersion||t>this.lastOperation.baseVersion)return[];let o=this._baseVersionToOperationIndex.get(t);o===void 0&&(o=0);let r=this._baseVersionToOperationIndex.get(s);return r===void 0&&(r=this._operations.length-1),this._operations.slice(o,r+1)}getOperation(t){const e=this._baseVersionToOperationIndex.get(t);if(e!==void 0)return this._operations[e]}setOperationAsUndone(t,e){this._undoPairs.set(e,t),this._undoneOperations.add(t)}isUndoingOperation(t){return this._undoPairs.has(t)}isUndoneOperation(t){return this._undoneOperations.has(t)}getUndoneOperation(t){return this._undoPairs.get(t)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}class Sg extends Rt{constructor(e,n,s="main"){super(n);_(this,"rootName");_(this,"_document");_(this,"_isAttached",!0);_(this,"_isLoaded",!0);this._document=e,this.rootName=s}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}Sg.prototype.is=function(i,t){return t?t===this.name&&(i==="rootElement"||i==="model:rootElement"||i==="element"||i==="model:element"):i==="rootElement"||i==="model:rootElement"||i==="element"||i==="model:element"||i==="node"||i==="model:node"};const cA="$graveyard";class rG extends Tt(){constructor(e){super();_(this,"model");_(this,"history");_(this,"selection");_(this,"roots");_(this,"differ");_(this,"isReadOnly");_(this,"_postFixers");_(this,"_hasSelectionChangedFromTheLastChangeBlock");this.model=e,this.history=new oG,this.selection=new xs(this),this.roots=new En({idProperty:"rootName"}),this.differ=new Xy(e.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",cA),this.listenTo(e,"applyOperation",(n,s)=>{const o=s[0];o.isDocumentOperation&&this.differ.bufferOperation(o)},{priority:"high"}),this.listenTo(e,"applyOperation",(n,s)=>{const o=s[0];o.isDocumentOperation&&this.history.addOperation(o)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(n,s,o,r,a)=>{const l={...s.getData(),range:r};this.differ.bufferMarkerChange(s.name,a,l),o===null&&s.on("change",(u,h)=>{const m=s.getData();this.differ.bufferMarkerChange(s.name,{...m,range:h},m)})}),this.registerPostFixer(n=>{let s=!1;for(const o of this.roots)!o.isAttached()&&!o.isEmpty&&(n.remove(n.createRangeIn(o)),s=!0);for(const o of this.model.markers)o.getRange().root.isAttached()||(n.removeMarker(o),s=!0);return s})}get version(){return this.history.version}set version(e){this.history.version=e}get graveyard(){return this.getRoot(cA)}createRoot(e="$root",n="main"){if(this.roots.get(n))throw new V("model-document-createroot-name-exists",this,{name:n});const s=new Sg(this,e,n);return this.roots.add(s),s}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(e=!1){return this.getRoots(e).map(n=>n.rootName)}getRoots(e=!1){return this.roots.filter(n=>n!=this.graveyard&&(e||n.isAttached())&&n._isLoaded)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){const e=p0(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const e=this.getRoots();return e.length?e[0]:this.graveyard}_getDefaultRange(){const e=this._getDefaultRoot(),n=this.model,s=n.schema,o=n.createPositionFromPath(e,[0]);return s.getNearestSelectionRange(o)||n.createRange(o)}_validateSelectionRange(e){return e.start.isValid()&&e.end.isValid()&&uA(e.start)&&uA(e.end)}_callPostFixers(e){let n=!1;do for(const s of this._postFixers)if(this.selection.refresh(),n=s(e),n)break;while(n)}}function uA(i){const t=i.textNode;if(t){const e=t.data,n=i.offset-t.startOffset;return!P0(e,n)&&!M0(e,n)}return!0}class aG extends Tt(){constructor(){super(...arguments);_(this,"_markers",new Map)}[Symbol.iterator](){return this._markers.values()}has(e){const n=e instanceof ec?e.name:e;return this._markers.has(n)}get(e){return this._markers.get(e)||null}_set(e,n,s=!1,o=!1){const r=e instanceof ec?e.name:e;if(r.includes(","))throw new V("markercollection-incorrect-marker-name",this);const a=this._markers.get(r);if(a){const h=a.getData(),m=a.getRange();let p=!1;return m.isEqual(n)||(a._attachLiveRange(ei.fromRange(n)),p=!0),s!=a.managedUsingOperations&&(a._managedUsingOperations=s,p=!0),typeof o=="boolean"&&o!=a.affectsData&&(a._affectsData=o,p=!0),p&&this.fire(`update:${r}`,a,m,n,h),a}const l=ei.fromRange(n),u=new ec(r,l,s,o);return this._markers.set(r,u),this.fire(`update:${r}`,u,null,n,{...u.getData(),range:null}),u}_remove(e){const n=e instanceof ec?e.name:e,s=this._markers.get(n);return s?(this._markers.delete(n),this.fire(`update:${n}`,s,s.getRange(),null,s.getData()),this._destroyMarker(s),!0):!1}_refresh(e){const n=e instanceof ec?e.name:e,s=this._markers.get(n);if(!s)throw new V("markercollection-refresh-marker-not-exists",this);const o=s.getRange();this.fire(`update:${n}`,s,o,o,s.getData())}*getMarkersAtPosition(e){for(const n of this)n.getRange().containsPosition(e)&&(yield n)}*getMarkersIntersectingRange(e){for(const n of this)n.getRange().getIntersection(e)!==null&&(yield n)}destroy(){for(const e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(const n of this._markers.values())n.name.startsWith(e+":")&&(yield n)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}}class ec extends Tt(Ur){constructor(e,n,s,o){super();_(this,"name");_(this,"_managedUsingOperations");_(this,"_affectsData");_(this,"_liveRange");this.name=e,this._liveRange=this._attachLiveRange(n),this._managedUsingOperations=s,this._affectsData=o}get managedUsingOperations(){if(!this._liveRange)throw new V("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new V("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new V("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new V("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new V("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}ec.prototype.is=function(i){return i==="marker"||i==="model:marker"};class lG extends Bi{constructor(e,n){super(null);_(this,"sourcePosition");_(this,"howMany");this.sourcePosition=e.clone(),this.howMany=n}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new V("detach-operation-on-document-node",this)}_execute(){hV(Z._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class Bs extends Ur{constructor(e){super();_(this,"markers",new Map);_(this,"_children",new Sd);e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let n=this;for(const s of e)n=n.getChildAtOffset(s);return n}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const n of this._children)e.push(n.toJSON());return e}static fromJSON(e){const n=[];for(const s of e)s.name?n.push(Rt.fromJSON(s)):n.push(Lt.fromJSON(s));return new Bs(n)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,n){const s=cG(n);for(const o of s)o.parent!==null&&o._remove(),o.parent=this;this._children._insertNodes(e,s)}_removeChildren(e,n=1){const s=this._children._removeNodes(e,n);for(const o of s)o.parent=null;return s}_removeChildrenArray(e){this._children._removeNodesArray(e);for(const n of e)n.parent=null}}Bs.prototype.is=function(i){return i==="documentFragment"||i==="model:documentFragment"};function cG(i){return typeof i=="string"?[new Lt(i)]:(Li(i)||(i=[i]),Array.from(i).map(t=>typeof t=="string"?new Lt(t):t instanceof bs?new Lt(t.data,t.getAttributes()):t))}class uG{constructor(t,e){_(this,"model");_(this,"batch");this.model=t,this.batch=e}createText(t,e){return new Lt(t,e)}createElement(t,e){return new Rt(t,e)}createDocumentFragment(){return new Bs}cloneElement(t,e=!0){return t._clone(e)}insert(t,e,n=0){if(this._assertWriterUsedCorrectly(),t instanceof Lt&&t.data=="")return;const s=re._createAt(e,n);if(t.parent)if(fA(t.root,s.root)){this.move(Z._createOn(t),s);return}else{if(t.root.document)throw new V("model-writer-insert-forbidden-move",this);this.remove(t)}const o=s.root.document?s.root.document.version:null,r=t instanceof Bs?t._removeChildren(0,t.childCount):t,a=new kn(s,r,o);if(t instanceof Lt&&(a.shouldReceiveAttributes=!0),this.batch.addOperation(a),this.model.applyOperation(a),t instanceof Bs)for(const[l,u]of t.markers){const h=re._createAt(u.root,0),p={range:new Z(u.start._getCombined(h,s),u.end._getCombined(h,s)),usingOperation:!0,affectsData:!0};this.model.markers.has(l)?this.updateMarker(l,p):this.addMarker(l,p)}}insertText(t,e,n,s){e instanceof Bs||e instanceof Rt||e instanceof re?this.insert(this.createText(t),e,n):this.insert(this.createText(t,e),n,s)}insertElement(t,e,n,s){e instanceof Bs||e instanceof Rt||e instanceof re?this.insert(this.createElement(t),e,n):this.insert(this.createElement(t,e),n,s)}append(t,e){this.insert(t,e,"end")}appendText(t,e,n){e instanceof Bs||e instanceof Rt?this.insert(this.createText(t),e,"end"):this.insert(this.createText(t,e),n,"end")}appendElement(t,e,n){e instanceof Bs||e instanceof Rt?this.insert(this.createElement(t),e,"end"):this.insert(this.createElement(t,e),n,"end")}setAttribute(t,e,n){if(this._assertWriterUsedCorrectly(),n instanceof Z){const s=n.getMinimalFlatRanges();for(const o of s)dA(this,t,e,o)}else hA(this,t,e,n)}setAttributes(t,e){for(const[n,s]of Cs(t))this.setAttribute(n,s,e)}removeAttribute(t,e){if(this._assertWriterUsedCorrectly(),e instanceof Z){const n=e.getMinimalFlatRanges();for(const s of n)dA(this,t,null,s)}else hA(this,t,null,e)}clearAttributes(t){this._assertWriterUsedCorrectly();const e=n=>{for(const s of n.getAttributeKeys())this.removeAttribute(s,n)};if(!(t instanceof Z))e(t);else for(const n of t.getItems())e(n)}move(t,e,n){if(this._assertWriterUsedCorrectly(),!(t instanceof Z))throw new V("writer-move-invalid-range",this);if(!t.isFlat)throw new V("writer-move-range-not-flat",this);const s=re._createAt(e,n);if(s.isEqual(t.start))return;if(this._addOperationForAffectedMarkers("move",t),!fA(t.root,s.root))throw new V("writer-move-different-document",this);const o=t.root.document?t.root.document.version:null,r=new ht(t.start,t.end.offset-t.start.offset,s,o);this.batch.addOperation(r),this.model.applyOperation(r)}remove(t){this._assertWriterUsedCorrectly();const n=(t instanceof Z?t:Z._createOn(t)).getMinimalFlatRanges().reverse();for(const s of n)this._addOperationForAffectedMarkers("move",s),dG(s.start,s.end.offset-s.start.offset,this.batch,this.model)}merge(t){this._assertWriterUsedCorrectly();const e=t.nodeBefore,n=t.nodeAfter;if(this._addOperationForAffectedMarkers("merge",t),!(e instanceof Rt))throw new V("writer-merge-no-element-before",this);if(!(n instanceof Rt))throw new V("writer-merge-no-element-after",this);t.root.document?this._merge(t):this._mergeDetached(t)}createPositionFromPath(t,e,n){return this.model.createPositionFromPath(t,e,n)}createPositionAt(t,e){return this.model.createPositionAt(t,e)}createPositionAfter(t){return this.model.createPositionAfter(t)}createPositionBefore(t){return this.model.createPositionBefore(t)}createRange(t,e){return this.model.createRange(t,e)}createRangeIn(t){return this.model.createRangeIn(t)}createRangeOn(t){return this.model.createRangeOn(t)}createSelection(...t){return this.model.createSelection(...t)}_mergeDetached(t){const e=t.nodeBefore,n=t.nodeAfter;this.move(Z._createIn(n),re._createAt(e,"end")),this.remove(n)}_merge(t){const e=re._createAt(t.nodeBefore,"end"),n=re._createAt(t.nodeAfter,0),s=t.root.document.graveyard,o=new re(s,[0]),r=t.root.document.version,a=new Xt(n,t.nodeAfter.maxOffset,e,o,r);this.batch.addOperation(a),this.model.applyOperation(a)}rename(t,e){if(this._assertWriterUsedCorrectly(),!(t instanceof Rt))throw new V("writer-rename-not-element-instance",this);const n=t.root.document?t.root.document.version:null,s=new Ci(re._createBefore(t),t.name,e,n);this.batch.addOperation(s),this.model.applyOperation(s)}split(t,e){this._assertWriterUsedCorrectly();let n=t.parent;if(!n.parent)throw new V("writer-split-element-no-parent",this);if(e||(e=n.parent),!t.parent.getAncestors({includeSelf:!0}).includes(e))throw new V("writer-split-invalid-limit-element",this);let s,o;do{const r=n.root.document?n.root.document.version:null,a=n.maxOffset-t.offset,l=It.getInsertionPosition(t),u=new It(t,a,l,null,r);this.batch.addOperation(u),this.model.applyOperation(u),!s&&!o&&(s=n,o=t.parent.nextSibling),t=this.createPositionAfter(t.parent),n=t.parent}while(n!==e);return{position:t,range:new Z(re._createAt(s,"end"),re._createAt(o,0))}}wrap(t,e){if(this._assertWriterUsedCorrectly(),!t.isFlat)throw new V("writer-wrap-range-not-flat",this);const n=e instanceof Rt?e:new Rt(e);if(n.childCount>0)throw new V("writer-wrap-element-not-empty",this);if(n.parent!==null)throw new V("writer-wrap-element-attached",this);this.insert(n,t.start);const s=new Z(t.start.getShiftedBy(1),t.end.getShiftedBy(1));this.move(s,re._createAt(n,0))}unwrap(t){if(this._assertWriterUsedCorrectly(),t.parent===null)throw new V("writer-unwrap-element-no-parent",this);this.move(Z._createIn(t),this.createPositionAfter(t)),this.remove(t)}addMarker(t,e){if(this._assertWriterUsedCorrectly(),!e||typeof e.usingOperation!="boolean")throw new V("writer-addmarker-no-usingoperation",this);const n=e.usingOperation,s=e.range,o=e.affectsData===void 0?!1:e.affectsData;if(this.model.markers.has(t))throw new V("writer-addmarker-marker-exists",this);if(!s)throw new V("writer-addmarker-no-range",this);return n?(Yu(this,t,null,s,o),this.model.markers.get(t)):this.model.markers._set(t,s,n,o)}updateMarker(t,e){this._assertWriterUsedCorrectly();const n=typeof t=="string"?t:t.name,s=this.model.markers.get(n);if(!s)throw new V("writer-updatemarker-marker-not-exists",this);if(!e){Ze("writer-updatemarker-reconvert-using-editingcontroller",{markerName:n}),this.model.markers._refresh(s);return}const o=typeof e.usingOperation=="boolean",r=typeof e.affectsData=="boolean",a=r?e.affectsData:s.affectsData;if(!o&&!e.range&&!r)throw new V("writer-updatemarker-wrong-options",this);const l=s.getRange(),u=e.range?e.range:l;if(o&&e.usingOperation!==s.managedUsingOperations){e.usingOperation?Yu(this,n,null,u,a):(Yu(this,n,l,null,a),this.model.markers._set(n,u,void 0,a));return}s.managedUsingOperations?Yu(this,n,l,u,a):this.model.markers._set(n,u,void 0,a)}removeMarker(t){this._assertWriterUsedCorrectly();const e=typeof t=="string"?t:t.name;if(!this.model.markers.has(e))throw new V("writer-removemarker-no-marker",this);const n=this.model.markers.get(e);if(!n.managedUsingOperations){this.model.markers._remove(e);return}const s=n.getRange();Yu(this,e,s,null,n.affectsData)}addRoot(t,e="$root"){this._assertWriterUsedCorrectly();const n=this.model.document.getRoot(t);if(n&&n.isAttached())throw new V("writer-addroot-root-exists",this);const s=this.model.document,o=new Ws(t,e,!0,s,s.version);return this.batch.addOperation(o),this.model.applyOperation(o),this.model.document.getRoot(t)}detachRoot(t){this._assertWriterUsedCorrectly();const e=typeof t=="string"?this.model.document.getRoot(t):t;if(!e||!e.isAttached())throw new V("writer-detachroot-no-root",this);for(const o of this.model.markers)o.getRange().root===e&&this.removeMarker(o);for(const o of e.getAttributeKeys())this.removeAttribute(o,e);this.remove(this.createRangeIn(e));const n=this.model.document,s=new Ws(e.rootName,e.name,!1,n,n.version);this.batch.addOperation(s),this.model.applyOperation(s)}setSelection(...t){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...t)}setSelectionFocus(t,e){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(t,e)}setSelectionAttribute(t,e){if(this._assertWriterUsedCorrectly(),typeof t=="string")this._setSelectionAttribute(t,e);else for(const[n,s]of Cs(t))this._setSelectionAttribute(n,s)}removeSelectionAttribute(t){if(this._assertWriterUsedCorrectly(),typeof t=="string")this._removeSelectionAttribute(t);else for(const e of t)this._removeSelectionAttribute(e)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(t){this.model.document.selection._restoreGravity(t)}_setSelectionAttribute(t,e){const n=this.model.document.selection;if(n.isCollapsed&&n.anchor.parent.isEmpty){const s=xs._getStoreAttributeKey(t);this.setAttribute(s,e,n.anchor.parent)}n._setAttribute(t,e)}_removeSelectionAttribute(t){const e=this.model.document.selection;if(e.isCollapsed&&e.anchor.parent.isEmpty){const n=xs._getStoreAttributeKey(t);this.removeAttribute(n,e.anchor.parent)}e._removeAttribute(t)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new V("writer-incorrect-use",this)}_addOperationForAffectedMarkers(t,e){for(const n of this.model.markers){if(!n.managedUsingOperations)continue;const s=n.getRange();let o=!1;if(t==="move"){const r=e;o=r.containsPosition(s.start)||r.start.isEqual(s.start)||r.containsPosition(s.end)||r.end.isEqual(s.end)}else{const r=e,a=r.nodeBefore,l=r.nodeAfter,u=s.start.parent==a&&s.start.isAtEnd,h=s.end.parent==l&&s.end.offset==0,m=s.end.nodeAfter==l,p=s.start.nodeAfter==l;o=u||h||m||p}o&&this.updateMarker(n.name,{range:s})}}}function dA(i,t,e,n){const s=i.model,o=s.document;let r=n.start,a,l,u;for(const m of n.getWalker({shallow:!0}))u=m.item.getAttribute(t),a&&l!=u&&(l!=e&&h(),r=a),a=m.nextPosition,l=u;a instanceof re&&a!=r&&l!=e&&h();function h(){const m=new Z(r,a),p=m.root.document?o.version:null,v=new rn(m,t,l,e,p);i.batch.addOperation(v),s.applyOperation(v)}}function hA(i,t,e,n){const s=i.model,o=s.document,r=n.getAttribute(t);let a,l;if(r!=e){if(n.root===n){const h=n.document?o.version:null;l=new Io(n,t,r,e,h)}else{a=new Z(re._createBefore(n),i.createPositionAfter(n));const h=a.root.document?o.version:null;l=new rn(a,t,r,e,h)}i.batch.addOperation(l),s.applyOperation(l)}}function Yu(i,t,e,n,s){const o=i.model,r=o.document,a=new ni(t,e,n,o.markers,!!s,r.version);i.batch.addOperation(a),o.applyOperation(a)}function dG(i,t,e,n){let s;if(i.root.document){const o=n.document,r=new re(o.graveyard,[0]);s=new ht(i,t,r,o.version)}else s=new lG(i,t);e.addOperation(s),n.applyOperation(s)}function fA(i,t){return i===t||i instanceof Sg&&t instanceof Sg}function hG(i,t,e={}){if(t.isCollapsed)return;const n=t.getFirstRange();if(n.root.rootName=="$graveyard")return;const s=i.schema;i.change(o=>{if(!e.doNotResetEntireContent&&vG(s,t)){yG(o,t);return}const r={};if(!e.doNotAutoparagraph){const u=t.getSelectedElement();u&&Object.assign(r,s.getAttributesWithProperty(u,"copyOnReplace",!0))}let a,l;e.doNotFixSelection?(a=zt.fromPosition(n.start,"toPrevious"),l=zt.fromPosition(n.end,"toNext")):[a,l]=fG(n),a.isTouching(l)||o.remove(o.createRange(a,l)),e.leaveUnmerged||(gG(o,a,l),s.removeDisallowedAttributes(a.parent.getChildren(),o)),wV(o,t,a),!e.doNotAutoparagraph&&_G(s,a)&&_V(o,a,t,r),a.detach(),l.detach()})}function fG(i){const t=i.root.document.model,e=i.start;let n=i.end;if(t.hasContent(i,{ignoreMarkers:!0})){const s=mG(n);if(s&&n.isTouching(t.createPositionAt(s,0))){const o=t.createSelection(i);t.modifySelection(o,{direction:"backward"});const r=o.getLastPosition(),a=t.createRange(r,n);t.hasContent(a,{ignoreMarkers:!0})||(n=r)}}return[zt.fromPosition(e,"toPrevious"),zt.fromPosition(n,"toNext")]}function mG(i){const t=i.parent,e=t.root.document.model.schema,n=t.getAncestors({parentFirst:!0,includeSelf:!0});for(const s of n){if(e.isLimit(s))return null;if(e.isBlock(s))return s}}function gG(i,t,e){const n=i.model;if(!H0(i.model.schema,t,e))return;const[s,o]=bG(t,e);!s||!o||(!n.hasContent(s,{ignoreMarkers:!0})&&n.hasContent(o,{ignoreMarkers:!0})?bV(i,t,e,s.parent):pV(i,t,e,s.parent))}function pV(i,t,e,n){const s=t.parent,o=e.parent;if(!(s==n||o==n)){for(t=i.createPositionAfter(s),e=i.createPositionBefore(o),e.isEqual(t)||i.insert(o,t),i.merge(t);e.parent.isEmpty;){const r=e.parent;e=i.createPositionBefore(r),i.remove(r)}H0(i.model.schema,t,e)&&pV(i,t,e,n)}}function bV(i,t,e,n){const s=t.parent,o=e.parent;if(!(s==n||o==n)){for(t=i.createPositionAfter(s),e=i.createPositionBefore(o),e.isEqual(t)||i.insert(s,e);t.parent.isEmpty;){const r=t.parent;t=i.createPositionBefore(r),i.remove(r)}e=i.createPositionBefore(o),pG(i,e),H0(i.model.schema,t,e)&&bV(i,t,e,n)}}function pG(i,t){const e=t.nodeBefore,n=t.nodeAfter;e.name!=n.name&&i.rename(e,n.name),i.clearAttributes(e),i.setAttributes(Object.fromEntries(n.getAttributes()),e),i.merge(t)}function H0(i,t,e){const n=t.parent,s=e.parent;return n==s||i.isLimit(n)||i.isLimit(s)?!1:wG(t,e,i)}function bG(i,t){const e=i.getAncestors(),n=t.getAncestors();let s=0;for(;e[s]&&e[s]==n[s];)s++;return[e[s],n[s]]}function _G(i,t){const e=i.checkChild(t,"$text"),n=i.checkChild(t,"paragraph");return!e&&n}function wG(i,t,e){const n=new Z(i,t);for(const s of n.getWalker())if(e.isLimit(s.item))return!1;return!0}function _V(i,t,e,n={}){const s=i.createElement("paragraph");i.model.schema.setAllowedAttributes(s,n,i),i.insert(s,t),wV(i,e,i.createPositionAt(s,0))}function yG(i,t){const e=i.model.schema.getLimitElement(t);i.remove(i.createRangeIn(e)),_V(i,i.createPositionAt(e,0),t)}function vG(i,t){const e=i.getLimitElement(t);if(!t.containsEntireContent(e))return!1;const n=t.getFirstRange();return n.start.parent==n.end.parent?!1:i.checkChild(e,"paragraph")}function wV(i,t,e){t instanceof xs?i.setSelection(e):t.setTo(e)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function CG(i,t){return i.change(e=>{const n=e.createDocumentFragment(),s=t.getFirstRange();if(!s||s.isCollapsed)return n;const o=s.start.root,r=s.start.getCommonPath(s.end),a=o.getNodeByPath(r);let l;s.start.parent==s.end.parent?l=s:l=e.createRange(e.createPositionAt(a,s.start.path[r.length]),e.createPositionAt(a,s.end.path[r.length]+1));const u=l.end.offset-l.start.offset;for(const h of l.getItems({shallow:!0}))h.is("$textProxy")?e.appendText(h.data,h.getAttributes(),n):e.append(e.cloneElement(h,!0),n);if(l!=s){const h=s._getTransformedByMove(l.start,e.createPositionAt(n,0),u)[0],m=e.createRange(e.createPositionAt(n,0),h.start),p=e.createRange(h.end,e.createPositionAt(n,"end"));mA(p,e),mA(m,e)}return n})}function mA(i,t){const e=[];Array.from(i.getItems({direction:"backward"})).map(n=>t.createRangeOn(n)).filter(n=>(n.start.isAfter(i.start)||n.start.isEqual(i.start))&&(n.end.isBefore(i.end)||n.end.isEqual(i.end))).forEach(n=>{e.push(n.start.parent),t.remove(n)}),e.forEach(n=>{let s=n;for(;s.parent&&s.isEmpty;){const o=t.createRangeOn(s);s=s.parent,t.remove(o)}})}function TG(i,t,e){return i.change(n=>{const s=e||i.document.selection;s.isCollapsed||i.deleteContent(s,{doNotAutoparagraph:!0});const o=new xG(i,n,s.anchor),r=[];let a;if(t.is("documentFragment")){if(t.markers.size){const h=[];for(const[m,p]of t.markers){const{start:v,end:C}=p,x=v.isEqual(C);h.push({position:v,name:m,isCollapsed:x},{position:C,name:m,isCollapsed:x})}h.sort(({position:m},{position:p})=>m.isBefore(p)?1:-1);for(const{position:m,name:p,isCollapsed:v}of h){let C=null,x=null;const k=m.parent===t&&m.isAtStart,S=m.parent===t&&m.isAtEnd;!k&&!S?(C=n.createElement("$marker"),n.insert(C,m)):v&&(x=k?"start":"end"),r.push({name:p,element:C,collapsed:x})}}a=t.getChildren()}else a=[t];o.handleNodes(a);let l=o.getSelectionRange();if(t.is("documentFragment")&&r.length){const h=l?ei.fromRange(l):null,m={};for(let p=r.length-1;p>=0;p--){const{name:v,element:C,collapsed:x}=r[p],k=!m[v];if(k&&(m[v]=[]),C){const S=n.createPositionAt(C,"before");m[v].push(S),n.remove(C)}else{const S=o.getAffectedRange();if(!S){x&&m[v].push(o.position);continue}x?m[v].push(S[x]):m[v].push(k?S.start:S.end)}}for(const[p,[v,C]]of Object.entries(m))v&&C&&v.root===C.root&&v.root.document&&!n.model.markers.has(p)&&n.addMarker(p,{usingOperation:!0,affectsData:!0,range:new Z(v,C)});h&&(l=h.toRange(),h.detach())}/* istanbul ignore else -- @preserve */l&&(s instanceof xs?n.setSelection(l):s.setTo(l));const u=o.getAffectedRange()||i.createRange(s.anchor);return o.destroy(),u})}class xG{constructor(t,e,n){_(this,"model");_(this,"writer");_(this,"position");_(this,"canMergeWith");_(this,"schema");_(this,"_documentFragment");_(this,"_documentFragmentPosition");_(this,"_firstNode",null);_(this,"_lastNode",null);_(this,"_lastAutoParagraph",null);_(this,"_filterAttributesOf",[]);_(this,"_affectedStart",null);_(this,"_affectedEnd",null);_(this,"_nodeToSelect",null);this.model=t,this.writer=e,this.position=n,this.canMergeWith=new Set([this.position.parent]),this.schema=t.schema,this._documentFragment=e.createDocumentFragment(),this._documentFragmentPosition=e.createPositionAt(this._documentFragment,0)}handleNodes(t){for(const e of Array.from(t))this._handleNode(e);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(t){const e=this.writer.createPositionAfter(this._lastNode),n=this.writer.createPositionAfter(t);if(n.isAfter(e)){this._lastNode=t;/* istanbul ignore if -- @preserve */if(this.position.parent!=t||!this.position.isAtEnd)throw new V("insertcontent-invalid-insertion-position",this);this.position=n,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?Z._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new Z(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(t){if(!this._checkAndSplitToAllowedPosition(t)){this.schema.isObject(t)||this._handleDisallowedNode(t);return}this._appendToFragment(t),this._firstNode||(this._firstNode=t),this._lastNode=t}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const t=zt.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=t.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=t.toPosition(),t.detach()}_handleDisallowedNode(t){t.is("element")&&this.handleNodes(t.getChildren())}_appendToFragment(t){/* istanbul ignore if -- @preserve */if(!this.schema.checkChild(this.position,t))throw new V("insertcontent-wrong-position",this,{node:t,position:this.position});this.writer.insert(t,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(t.offsetSize),this.schema.isObject(t)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=t:this._nodeToSelect=null,this._filterAttributesOf.push(t)}_setAffectedBoundaries(t){this._affectedStart||(this._affectedStart=zt.fromPosition(t,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(t))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=zt.fromPosition(t,"toNext"))}_mergeOnLeft(){const t=this._firstNode;if(!(t instanceof Rt)||!this._canMergeLeft(t))return;const e=zt._createBefore(t);e.stickiness="toNext";const n=zt.fromPosition(this.position,"toNext");this._affectedStart.isEqual(e)&&(this._affectedStart.detach(),this._affectedStart=zt._createAt(e.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=zt._createAt(e.nodeBefore,"end","toNext")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}_mergeOnRight(){const t=this._lastNode;if(!(t instanceof Rt)||!this._canMergeRight(t))return;const e=zt._createAfter(t);e.stickiness="toNext";/* istanbul ignore if -- @preserve */if(!this.position.isEqual(e))throw new V("insertcontent-invalid-insertion-position",this);this.position=re._createAt(e.nodeBefore,"end");const n=zt.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(e)&&(this._affectedEnd.detach(),this._affectedEnd=zt._createAt(e.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=zt._createAt(e.nodeBefore,0,"toPrevious")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}_canMergeLeft(t){const e=t.previousSibling;return e instanceof Rt&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(e,t)}_canMergeRight(t){const e=t.nextSibling;return e instanceof Rt&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(t,e)}_insertAutoParagraph(){this._insertPartialFragment();const t=this.writer.createElement("paragraph");this.writer.insert(t,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=t,this.position=this.writer.createPositionAt(t,0)}_checkAndSplitToAllowedPosition(t){const e=this._getAllowedIn(this.position.parent,t);if(!e)return!1;for(e!=this.position.parent&&this._insertPartialFragment();e!=this.position.parent;)if(this.position.isAtStart){const n=this.position.parent;this.position=this.writer.createPositionBefore(n),n.isEmpty&&n.parent===e&&this.writer.remove(n)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const n=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=n,this.canMergeWith.add(this.position.nodeAfter)}return this.schema.checkChild(this.position.parent,t)||this._insertAutoParagraph(),!0}_getAllowedIn(t,e){return this.schema.checkChild(t,e)||this.schema.checkChild(t,"paragraph")&&this.schema.checkChild("paragraph",e)?t:this.schema.isLimit(t)?null:this._getAllowedIn(t.parent,e)}}function kG(i,t,e,n={}){if(!i.schema.isObject(t))throw new V("insertobject-element-not-an-object",i,{object:t});const s=e||i.document.selection;let o=s;n.findOptimalPosition&&i.schema.isBlock(t)&&(o=i.createSelection(i.schema.findOptimalInsertionRange(s,n.findOptimalPosition)));const r=Ln(s.getSelectedBlocks()),a={};return r&&Object.assign(a,i.schema.getAttributesWithProperty(r,"copyOnReplace",!0)),i.change(l=>{o.isCollapsed||i.deleteContent(o,{doNotAutoparagraph:!0});let u=t;const h=o.anchor.parent;!i.schema.checkChild(h,t)&&i.schema.checkChild(h,"paragraph")&&i.schema.checkChild("paragraph",t)&&(u=l.createElement("paragraph"),l.insert(t,u)),i.schema.setAllowedAttributes(u,a,l);const m=i.insertContent(u,o);return m.isCollapsed||n.setSelection&&EG(l,t,n.setSelection,a),m})}function EG(i,t,e,n){const s=i.model;if(e=="on"){i.setSelection(t,"on");return}if(e!="after")throw new V("insertobject-invalid-place-parameter-value",s);let o=t.nextSibling;if(s.schema.isInline(t)){i.setSelection(t,"after");return}!(o&&s.schema.checkChild(o,"$text"))&&s.schema.checkChild(t.parent,"paragraph")&&(o=i.createElement("paragraph"),s.schema.setAllowedAttributes(o,n,i),s.insertContent(o,i.createPositionAfter(t))),o&&i.setSelection(o,0)}const SG=' ,.?!:;"-()';function AG(i,t,e={}){const n=i.schema,s=e.direction!="backward",o=e.unit?e.unit:"character",r=!!e.treatEmojiAsSingleUnit,a=t.focus,l=new Eo({boundaries:MG(a,s),singleCharacters:!0,direction:s?"forward":"backward"}),u={walker:l,schema:n,isForward:s,unit:o,treatEmojiAsSingleUnit:r};let h;for(;h=l.next();){if(h.done)return;const m=RG(u,h.value);if(m){t instanceof xs?i.change(p=>{p.setSelectionFocus(m)}):t.setFocus(m);return}}}function RG(i,t){const{isForward:e,walker:n,unit:s,schema:o,treatEmojiAsSingleUnit:r}=i,{type:a,item:l,nextPosition:u}=t;if(a=="text")return i.unit==="word"?PG(n,e):IG(n,s,r);if(a==(e?"elementStart":"elementEnd")){if(o.isSelectable(l))return re._createAt(l,e?"after":"before");if(o.checkChild(u,"$text"))return u}else{if(o.isLimit(l)){n.skip(()=>!0);return}if(o.checkChild(u,"$text"))return u}}function IG(i,t,e){const n=i.position.textNode;if(n){const s=n.data;let o=i.position.offset-n.startOffset;for(;P0(s,o)||t=="character"&&M0(s,o)||e&&M5(s,o);)i.next(),o=i.position.offset-n.startOffset}return i.position}function PG(i,t){let e=i.position.textNode;for(e||(e=t?i.position.nodeAfter:i.position.nodeBefore);e&&e.is("$text");){const n=i.position.offset-e.startOffset;if(NG(e,n,t))e=t?i.position.nodeAfter:i.position.nodeBefore;else{if(VG(e.data,n,t))break;i.next()}}return i.position}function MG(i,t){const e=i.root,n=re._createAt(e,t?"end":0);return t?new Z(i,n):new Z(n,i)}function VG(i,t,e){const n=t+(e?0:-1);return SG.includes(i.charAt(n))}function NG(i,t,e){return t===(e?i.offsetSize:0)}let DG=class extends _t(){constructor(){super();_(this,"markers");_(this,"document");_(this,"schema");_(this,"_pendingChanges");_(this,"_currentWriter");this.markers=new aG,this.document=new rG(this),this.schema=new T$,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(e=>this.decorate(e)),this.on("applyOperation",(e,n)=>{n[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(()=>!0,"$marker"),g$(this),this.document.registerPostFixer(oV),this.on("insertContent",(e,[n,s])=>{e.return=TG(this,n,s)}),this.on("insertObject",(e,[n,s,o])=>{e.return=kG(this,n,s,o)}),this.on("canEditAt",e=>{const n=!this.document.isReadOnly;e.return=n,n||e.stop()})}change(e){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new ql,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(n){/* istanbul ignore next -- @preserve */V.rethrowUnexpectedError(n,this)}}enqueueChange(e,n){try{e?typeof e=="function"?(n=e,e=new ql):e instanceof ql||(e=new ql(e)):e=new ql,this._pendingChanges.push({batch:e,callback:n}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(s){/* istanbul ignore next -- @preserve */V.rethrowUnexpectedError(s,this)}}applyOperation(e){e._execute()}insertContent(e,n,s,...o){const r=Fw(n,s);return this.fire("insertContent",[e,r,s,...o])}insertObject(e,n,s,o,...r){const a=Fw(n,s);return this.fire("insertObject",[e,a,o,o,...r])}deleteContent(e,n){hG(this,e,n)}modifySelection(e,n){AG(this,e,n)}getSelectedContent(e){return CG(this,e)}hasContent(e,n={}){const s=e instanceof Z?e:Z._createIn(e);if(s.isCollapsed)return!1;const{ignoreWhitespaces:o=!1,ignoreMarkers:r=!1}=n;if(!r){for(const a of this.markers.getMarkersIntersectingRange(s))if(a.affectsData)return!0}for(const a of s.getItems())if(this.schema.isContent(a))if(a.is("$textProxy"))if(o){if(a.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(e){const n=Fw(e);return this.fire("canEditAt",[n])}createPositionFromPath(e,n,s){return new re(e,n,s)}createPositionAt(e,n){return re._createAt(e,n)}createPositionAfter(e){return re._createAfter(e)}createPositionBefore(e){return re._createBefore(e)}createRange(e,n){return new Z(e,n)}createRangeIn(e){return Z._createIn(e)}createRangeOn(e){return Z._createOn(e)}createSelection(...e){return new Vi(...e)}createBatch(e){return new ql(e)}createOperationFromJSON(e){return Z$.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const e=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const n=this._pendingChanges[0].batch;this._currentWriter=new uG(this,n);const s=this._pendingChanges[0].callback(this._currentWriter);e.push(s),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return e}};function Fw(i,t){if(i)return i instanceof Vi||i instanceof xs?i:i instanceof $a?t||t===0?new Vi(i,t):i.is("rootElement")?new Vi(i,"in"):new Vi(i,"on"):new Vi(i)}class OG extends Bo{constructor(){super(...arguments);_(this,"domEventType","click")}onDomEvent(e){this.fire(e.type,e)}}class Rp extends Bo{constructor(){super(...arguments);_(this,"domEventType",["mousedown","mouseup","mouseover","mouseout"])}onDomEvent(e){this.fire(e.type,e)}}class LG extends Bo{constructor(){super(...arguments);_(this,"domEventType",["touchstart","touchend","touchmove"])}onDomEvent(e){this.fire(e.type,e)}}class Fo{constructor(t){_(this,"document");this.document=t}createDocumentFragment(t){return new Ra(this.document,t)}createElement(t,e,n){return new No(this.document,t,e,n)}createText(t){return new Dn(this.document,t)}clone(t,e=!1){return t._clone(e)}appendChild(t,e){return e._appendChild(t)}insertChild(t,e,n){return n._insertChild(t,e)}removeChildren(t,e,n){return n._removeChildren(t,e)}remove(t){const e=t.parent;return e?this.removeChildren(e.getChildIndex(t),1,e):[]}replace(t,e){const n=t.parent;if(n){const s=n.getChildIndex(t);return this.removeChildren(s,1,n),this.insertChild(s,e,n),!0}return!1}unwrapElement(t){const e=t.parent;if(e){const n=e.getChildIndex(t);this.remove(t),this.insertChild(n,t.getChildren(),e)}}rename(t,e){const n=new No(this.document,t,e.getAttributes(),e.getChildren());return this.replace(e,n)?n:null}setAttribute(t,e,n){n._setAttribute(t,e)}removeAttribute(t,e){e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,n){zs(t)&&n===void 0?e._setStyle(t):n._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,n){n._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}createPositionAt(t,e){return ge._createAt(t,e)}createPositionAfter(t){return ge._createAfter(t)}createPositionBefore(t){return ge._createBefore(t)}createRange(t,e){return new Ke(t,e)}createRangeOn(t){return Ke._createOn(t)}createRangeIn(t){return Ke._createIn(t)}createSelection(...t){return new Ro(...t)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const BG=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,FG=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,UG=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,zG=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,HG=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,WG=/\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi,qG=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function yV(i){return i.startsWith("#")?BG.test(i):i.startsWith("rgb")?FG.test(i)||UG.test(i):i.startsWith("hsl")?zG.test(i)||HG.test(i):qG.has(i.toLowerCase())}const $G=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"];function GG(i){return $G.includes(i)}const jG=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function Ip(i){return jG.test(i)}const KG=/^[+-]?[0-9]*([.][0-9]+)?%$/;function vV(i){return KG.test(i)}const ZG=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function YG(i){return ZG.includes(i)}const JG=["center","top","bottom","left","right"];function XG(i){return JG.includes(i)}const QG=["fixed","scroll","local"];function ej(i){return QG.includes(i)}const tj=/^url\(/;function nj(i){return tj.test(i)}function Ad(i=""){if(i==="")return{top:void 0,right:void 0,bottom:void 0,left:void 0};const t=W0(i),e=t[0],n=t[2]||e,s=t[1]||e,o=t[3]||s;return{top:e,bottom:n,right:s,left:o}}function Rd(i){return t=>{const{top:e,right:n,bottom:s,left:o}=t,r=[];return[e,n,o,s].every(a=>!!a)?r.push([i,ij(t)]):(e&&r.push([i+"-top",e]),n&&r.push([i+"-right",n]),s&&r.push([i+"-bottom",s]),o&&r.push([i+"-left",o])),r}}function ij({top:i,right:t,bottom:e,left:n}){const s=[];return n!==t?s.push(i,t,e,n):e!==i?s.push(i,t,e):t!==i?s.push(i,t):s.push(i),s.join(" ")}function CV(i){return t=>({path:i,value:Ad(t)})}function W0(i){const t=i.trim().slice(0,1500).matchAll(WG);return Array.from(t).map(e=>e[0])}function q0(i){i.setNormalizer("background",sj()),i.setNormalizer("background-color",oj()),i.setReducer("background",rj()),i.setStyleRelation("background",["background-color"])}function sj(){return i=>{const t={},e=W0(i);for(const n of e)YG(n)?(t.repeat=t.repeat||[],t.repeat.push(n)):XG(n)?(t.position=t.position||[],t.position.push(n)):ej(n)?t.attachment=n:yV(n)?t.color=n:nj(n)&&(t.image=n);return{path:"background",value:t}}}function oj(){return i=>({path:"background.color",value:i})}function rj(){return i=>{const t=[];return t.push(["background-color",i.color]),t}}function TV(i){i.setNormalizer("border",aj()),i.setNormalizer("border-top",hm("top")),i.setNormalizer("border-right",hm("right")),i.setNormalizer("border-bottom",hm("bottom")),i.setNormalizer("border-left",hm("left")),i.setNormalizer("border-color",Uw("color")),i.setNormalizer("border-width",Uw("width")),i.setNormalizer("border-style",Uw("style")),i.setNormalizer("border-top-color",Zi("color","top")),i.setNormalizer("border-top-style",Zi("style","top")),i.setNormalizer("border-top-width",Zi("width","top")),i.setNormalizer("border-right-color",Zi("color","right")),i.setNormalizer("border-right-style",Zi("style","right")),i.setNormalizer("border-right-width",Zi("width","right")),i.setNormalizer("border-bottom-color",Zi("color","bottom")),i.setNormalizer("border-bottom-style",Zi("style","bottom")),i.setNormalizer("border-bottom-width",Zi("width","bottom")),i.setNormalizer("border-left-color",Zi("color","left")),i.setNormalizer("border-left-style",Zi("style","left")),i.setNormalizer("border-left-width",Zi("width","left")),i.setExtractor("border-top",fm("top")),i.setExtractor("border-right",fm("right")),i.setExtractor("border-bottom",fm("bottom")),i.setExtractor("border-left",fm("left")),i.setExtractor("border-top-color","border.color.top"),i.setExtractor("border-right-color","border.color.right"),i.setExtractor("border-bottom-color","border.color.bottom"),i.setExtractor("border-left-color","border.color.left"),i.setExtractor("border-top-width","border.width.top"),i.setExtractor("border-right-width","border.width.right"),i.setExtractor("border-bottom-width","border.width.bottom"),i.setExtractor("border-left-width","border.width.left"),i.setExtractor("border-top-style","border.style.top"),i.setExtractor("border-right-style","border.style.right"),i.setExtractor("border-bottom-style","border.style.bottom"),i.setExtractor("border-left-style","border.style.left"),i.setReducer("border-color",Rd("border-color")),i.setReducer("border-style",Rd("border-style")),i.setReducer("border-width",Rd("border-width")),i.setReducer("border-top",mm("top")),i.setReducer("border-right",mm("right")),i.setReducer("border-bottom",mm("bottom")),i.setReducer("border-left",mm("left")),i.setReducer("border",cj()),i.setStyleRelation("border",["border-color","border-style","border-width","border-top","border-right","border-bottom","border-left","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width"]),i.setStyleRelation("border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]),i.setStyleRelation("border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]),i.setStyleRelation("border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]),i.setStyleRelation("border-top",["border-top-color","border-top-style","border-top-width"]),i.setStyleRelation("border-right",["border-right-color","border-right-style","border-right-width"]),i.setStyleRelation("border-bottom",["border-bottom-color","border-bottom-style","border-bottom-width"]),i.setStyleRelation("border-left",["border-left-color","border-left-style","border-left-width"])}function aj(){return i=>{const{color:t,style:e,width:n}=xV(i);return{path:"border",value:{color:Ad(t),style:Ad(e),width:Ad(n)}}}}function hm(i){return t=>{const{color:e,style:n,width:s}=xV(t),o={};return e!==void 0&&(o.color={[i]:e}),n!==void 0&&(o.style={[i]:n}),s!==void 0&&(o.width={[i]:s}),{path:"border",value:o}}}function Uw(i){return t=>({path:"border",value:lj(t,i)})}function lj(i,t){return{[t]:Ad(i)}}function Zi(i,t){return e=>({path:"border",value:{[i]:{[t]:e}}})}function fm(i){return(t,e)=>{if(e.border)return hd(e.border,i)}}function hd(i,t){const e={};return i.width&&i.width[t]&&(e.width=i.width[t]),i.style&&i.style[t]&&(e.style=i.style[t]),i.color&&i.color[t]&&(e.color=i.color[t]),e}function xV(i){const t={},e=W0(i);for(const n of e)Ip(n)||/thin|medium|thick/.test(n)?t.width=n:GG(n)?t.style=n:t.color=n;return t}function cj(){return t=>{const e=hd(t,"top"),n=hd(t,"right"),s=hd(t,"bottom"),o=hd(t,"left"),r=[e,n,s,o],a={width:i(r,"width"),style:i(r,"style"),color:i(r,"color")},l=tc(a,"all");return l.length?l:[...Object.entries(a).reduce((h,[m,p])=>(p&&(h.push([`border-${m}`,p]),r.forEach(v=>delete v[m])),h),[]),...tc(e,"top"),...tc(n,"right"),...tc(s,"bottom"),...tc(o,"left")]};function i(t,e){return t.map(n=>n[e]).reduce((n,s)=>n==s?n:null)}}function mm(i){return t=>tc(t,i)}function tc(i,t){const e=[];if(i&&i.width&&e.push("width"),i&&i.style&&e.push("style"),i&&i.color&&e.push("color"),e.length==3){const n=e.map(s=>i[s]).join(" ");return[t=="all"?["border",n]:[`border-${t}`,n]]}return t=="all"?[]:e.map(n=>[`border-${t}-${n}`,i[n]])}function uj(i){i.setNormalizer("margin",CV("margin")),i.setNormalizer("margin-top",t=>({path:"margin.top",value:t})),i.setNormalizer("margin-right",t=>({path:"margin.right",value:t})),i.setNormalizer("margin-bottom",t=>({path:"margin.bottom",value:t})),i.setNormalizer("margin-left",t=>({path:"margin.left",value:t})),i.setReducer("margin",Rd("margin")),i.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"])}function dj(i){i.setNormalizer("padding",CV("padding")),i.setNormalizer("padding-top",t=>({path:"padding.top",value:t})),i.setNormalizer("padding-right",t=>({path:"padding.right",value:t})),i.setNormalizer("padding-bottom",t=>({path:"padding.bottom",value:t})),i.setNormalizer("padding-left",t=>({path:"padding.left",value:t})),i.setReducer("padding",Rd("padding")),i.setStyleRelation("padding",["padding-top","padding-right","padding-bottom","padding-left"])}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class kV{constructor(t){_(this,"crashes",[]);_(this,"state","initializing");_(this,"_crashNumberLimit");_(this,"_now",Date.now);_(this,"_minimumNonErrorTimePeriod");_(this,"_boundErrorHandler");_(this,"_listeners");if(this.crashes=[],this._crashNumberLimit=typeof t.crashNumberLimit=="number"?t.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof t.minimumNonErrorTimePeriod=="number"?t.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=e=>{const n="error"in e?e.error:e.reason;n instanceof Error&&this._handleError(n,e)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(t,e){this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)}off(t,e){this._listeners[t]=this._listeners[t].filter(n=>n!==e)}_fire(t,...e){const n=this._listeners[t]||[];for(const s of n)s.apply(this,[null,...e])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(t,e){if(this._shouldReactToError(t)){this.crashes.push({message:t.message,stack:t.stack,filename:e instanceof ErrorEvent?e.filename:void 0,lineno:e instanceof ErrorEvent?e.lineno:void 0,colno:e instanceof ErrorEvent?e.colno:void 0,date:this._now()});const n=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:t,causesRestart:n}),n?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(t){return t.is&&t.is("CKEditorError")&&t.context!==void 0&&t.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(t)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;const t=this.crashes[this.crashes.length-1].date,e=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(t-e)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Qy(i,t=new Set){const e=[i],n=new Set;let s=0;for(;e.length>s;){const o=e[s++];if(!(n.has(o)||!hj(o)||t.has(o)))if(n.add(o),Symbol.iterator in o)try{for(const r of o)e.push(r)}catch{}else for(const r in o)r!=="defaultValue"&&e.push(o[r])}return n}function hj(i){const t=Object.prototype.toString.call(i),e=typeof i;return!(e==="number"||e==="boolean"||e==="string"||e==="symbol"||e==="function"||t==="[object Date]"||t==="[object RegExp]"||t==="[object Module]"||i===void 0||i===null||i._watchdogExcluded||i instanceof EventTarget||i instanceof Event)}function EV(i,t,e=new Set){if(i===t&&fj(i))return!0;const n=Qy(i,e),s=Qy(t,e);for(const o of n)if(s.has(o))return!0;return!1}function fj(i){return typeof i=="object"&&i!==null}class SV extends kV{constructor(e,n={}){super(n);_(this,"_editor",null);_(this,"_lifecyclePromise",null);_(this,"_throttledSave");_(this,"_data");_(this,"_lastDocumentVersion");_(this,"_elementOrData");_(this,"_initUsingData",!0);_(this,"_editables",{});_(this,"_config");_(this,"_excludedProps");this._throttledSave=vc(this._save.bind(this),typeof n.saveInterval=="number"?n.saveInterval:5e3),e&&(this._creator=(s,o)=>e.create(s,o)),this._destructor=s=>s.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{const e={},n=[],s=this._config.rootsAttributes||{},o={};for(const[a,l]of Object.entries(this._data.roots))l.isLoaded?(e[a]="",o[a]=s[a]||{}):n.push(a);const r={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:n,rootsAttributes:o,_watchdogInitialData:this._data};return delete r.initialData,r.extraPlugins.push(mj),this._initUsingData?this.create(e,r,r.context):Pr(this._elementOrData)?this.create(this._elementOrData,r,r.context):this.create(this._editables,r,r.context)}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,n=this._config,s){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=e,this._initUsingData=typeof e=="string"||Object.keys(e).length>0&&typeof Object.values(e)[0]=="string",this._config=this._cloneEditorConfiguration(n)||{},this._config.context=s,this._creator(e,this._config))).then(o=>{this._editor=o,o.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=o.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const e=this._editor;return this._editor=null,e.model.document.off("change:data",this._throttledSave),this._destructor(e)})}_save(){const e=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=e}catch(n){console.error(n,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){const e=this._editor,n=e.model.document.roots.filter(l=>l.isAttached()&&l.rootName!="$graveyard"),{plugins:s}=e,o=s.has("CommentsRepository")&&s.get("CommentsRepository"),r=s.has("TrackChanges")&&s.get("TrackChanges"),a={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};n.forEach(l=>{a.roots[l.rootName]={content:JSON.stringify(Array.from(l.getChildren())),attributes:JSON.stringify(Array.from(l.getAttributes())),isLoaded:l._isLoaded}});for(const l of e.model.markers)l._affectsData&&(a.markers[l.name]={rangeJSON:l.getRange().toJSON(),usingOperation:l._managedUsingOperations,affectsData:l._affectsData});return o&&(a.commentThreads=JSON.stringify(o.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),r&&(a.suggestions=JSON.stringify(r.getSuggestions({toJSON:!0,skipNotAttached:!0}))),a}_getEditables(){const e={};for(const n of this.editor.model.document.getRootNames()){const s=this.editor.ui.getEditableElement(n);s&&(e[n]=s)}return e}_isErrorComingFromThisItem(e){return EV(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return Tp(e,(n,s)=>{if(Pr(n)||s==="context")return n})}}class mj{constructor(t){_(this,"editor");_(this,"_data");this.editor=t,this._data=t.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",t=>{t.stop(),this.editor.model.enqueueChange({isUndoable:!1},e=>{this._restoreCollaborationData(),this._restoreEditorData(e)}),this.editor.data.fire("ready")},{priority:999})}_createNode(t,e){if("name"in e){const n=t.createElement(e.name,e.attributes);if(e.children)for(const s of e.children)n._appendChild(this._createNode(t,s));return n}else return t.createText(e.data,e.attributes)}_restoreEditorData(t){const e=this.editor;Object.entries(this._data.roots).forEach(([n,{content:s,attributes:o}])=>{const r=JSON.parse(s),a=JSON.parse(o),l=e.model.document.getRoot(n);for(const[u,h]of a)t.setAttribute(u,h,l);for(const u of r){const h=this._createNode(t,u);t.insert(h,l,"end")}}),Object.entries(this._data.markers).forEach(([n,s])=>{const{document:o}=e.model,{rangeJSON:{start:r,end:a},...l}=s,u=o.getRoot(r.root),h=t.createPositionFromPath(u,r.path,r.stickiness),m=t.createPositionFromPath(u,a.path,a.stickiness),p=t.createRange(h,m);t.addMarker(n,{range:p,...l})})}_restoreCollaborationData(){const t=JSON.parse(this._data.commentThreads),e=JSON.parse(this._data.suggestions);t.forEach(n=>{const s=this.editor.config.get("collaboration.channelId"),o=this.editor.plugins.get("CommentsRepository");o.hasCommentThread(n.threadId)&&o.getCommentThread(n.threadId).remove(),o.addCommentThread({channelId:s,...n})}),e.forEach(n=>{const s=this.editor.plugins.get("TrackChangesEditing");if(s.hasSuggestion(n.id)){const o=s.getSuggestion(n.id);o.attributes=n.attributes}else s.addSuggestionData(n)})}}const Id=Symbol("MainQueueId");class gj extends kV{constructor(e,n={}){super(n);_(this,"_watchdogs",new Map);_(this,"_watchdogConfig");_(this,"_context",null);_(this,"_contextProps",new Set);_(this,"_actionQueues",new pj);_(this,"_contextConfig");_(this,"_item");this._watchdogConfig=n,this._creator=s=>e.create(s),this._destructor=s=>s.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}get context(){return this._context}create(e={}){return this._actionQueues.enqueue(Id,()=>(this._contextConfig=e,this._create()))}getItem(e){return this._getWatchdog(e)._item}getItemState(e){return this._getWatchdog(e).state}add(e){const n=gA(e);return Promise.all(n.map(s=>this._actionQueues.enqueue(s.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let o;if(this._watchdogs.has(s.id))throw new Error(`Item with the given id is already added: '${s.id}'.`);if(s.type==="editor")return o=new SV(null,this._watchdogConfig),o.setCreator(s.creator),o._setExcludedProperties(this._contextProps),s.destructor&&o.setDestructor(s.destructor),this._watchdogs.set(s.id,o),o.on("error",(r,{error:a,causesRestart:l})=>{this._fire("itemError",{itemId:s.id,error:a}),l&&this._actionQueues.enqueue(s.id,()=>new Promise(u=>{const h=()=>{o.off("restart",h),this._fire("itemRestart",{itemId:s.id}),u()};o.on("restart",h)}))}),o.create(s.sourceElementOrData,s.config,this._context);throw new Error(`Not supported item type: '${s.type}'.`)})))}remove(e){const n=gA(e);return Promise.all(n.map(s=>this._actionQueues.enqueue(s,()=>{const o=this._getWatchdog(s);return this._watchdogs.delete(s),o.destroy()})))}destroy(){return this._actionQueues.enqueue(Id,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(Id,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(e=>{console.error("An error happened during destroying the context or items.",e)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(e=>(this._context=e,this._contextProps=Qy(this._context),Promise.all(Array.from(this._watchdogs.values()).map(n=>(n._setExcludedProperties(this._contextProps),n.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const e=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(n=>n.destroy())).then(()=>this._destructor(e))})}_getWatchdog(e){const n=this._watchdogs.get(e);if(!n)throw new Error(`Item with the given id was not registered: ${e}.`);return n}_isErrorComingFromThisItem(e){for(const n of this._watchdogs.values())if(n._isErrorComingFromThisItem(e))return!1;return EV(this._context,e.context)}}class pj{constructor(){_(this,"_onEmptyCallbacks",[]);_(this,"_queues",new Map);_(this,"_activeActions",0)}onEmpty(t){this._onEmptyCallbacks.push(t)}enqueue(t,e){const n=t===Id;this._activeActions++,this._queues.get(t)||this._queues.set(t,Promise.resolve());const o=(n?Promise.all(this._queues.values()):Promise.all([this._queues.get(Id),this._queues.get(t)])).then(e),r=o.catch(()=>{});return this._queues.set(t,r),o.finally(()=>{this._activeActions--,this._queues.get(t)===r&&this._activeActions===0&&this._onEmptyCallbacks.forEach(a=>a())})}}function gA(i){return Array.isArray(i)?i:[i]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class te extends _t(){constructor(e){super();_(this,"editor");_(this,"_disableStack",new Set);this.editor=e,this.set("isEnabled",!0)}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",pA,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",pA),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}function pA(i){i.return=!1,i.stop()}class $e extends _t(){constructor(e){super();_(this,"editor");_(this,"_isEnabledBasedOnSelection");_(this,"_affectsData");_(this,"_disableStack");this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(e,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",n=>{if(!this.affectsData)return;const s=e.model.document.selection,r=!(s.getFirstPosition().root.rootName=="$graveyard")&&e.model.canEditAt(s);(e.isReadOnly||this._isEnabledBasedOnSelection&&!r)&&(n.return=!1,n.stop())},{priority:"highest"}),this.on("execute",n=>{this.isEnabled||n.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(e){this._affectsData=e}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",bA,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",bA),this.refresh())}execute(...e){}destroy(){this.stopListening()}}function bA(i){i.return=!1,i.stop()}class _A extends $e{constructor(){super(...arguments);_(this,"_childCommandsDefinitions",[])}refresh(){}execute(...e){const n=this._getFirstEnabledCommand();return!!n&&n.execute(e)}registerChildCommand(e,n={}){u5(this._childCommandsDefinitions,{command:e,priority:n.priority||"normal"}),e.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){const e=this._childCommandsDefinitions.find(({command:n})=>n.isEnabled);return e&&e.command}}class AV extends Tt(){constructor(e,n=[],s=[]){super();_(this,"_context");_(this,"_plugins",new Map);_(this,"_availablePlugins");_(this,"_contextPlugins");this._context=e,this._availablePlugins=new Map;for(const o of n)o.pluginName&&this._availablePlugins.set(o.pluginName,o);this._contextPlugins=new Map;for(const[o,r]of s)this._contextPlugins.set(o,r),this._contextPlugins.set(r,o),o.pluginName&&this._availablePlugins.set(o.pluginName,o)}*[Symbol.iterator](){for(const e of this._plugins)typeof e[0]=="function"&&(yield e)}get(e){const n=this._plugins.get(e);if(!n){let s=e;throw typeof e=="function"&&(s=e.pluginName||e.name),new V("plugincollection-plugin-not-loaded",this._context,{plugin:s})}return n}has(e){return this._plugins.has(e)}init(e,n=[],s=[]){const o=this,r=this._context;C(e),k(e);const a=e.filter(F=>!p(F,n)),l=[...x(a)];Y(l,s);const u=O(l);return D(u,"init").then(()=>D(u,"afterInit")).then(()=>u);function h(F){return typeof F=="function"}function m(F){return h(F)&&!!F.isContextPlugin}function p(F,j){return j.some(U=>U===F||v(F)===U||v(U)===F)}function v(F){return h(F)?F.pluginName||F.name:F}function C(F,j=new Set){F.forEach(U=>{h(U)&&(j.has(U)||(j.add(U),U.pluginName&&!o._availablePlugins.has(U.pluginName)&&o._availablePlugins.set(U.pluginName,U),U.requires&&C(U.requires,j)))})}function x(F,j=new Set){return F.map(U=>h(U)?U:o._availablePlugins.get(U)).reduce((U,X)=>j.has(X)?U:(j.add(X),X.requires&&(k(X.requires,X),x(X.requires,j).forEach(ae=>U.add(ae))),U.add(X)),new Set)}function k(F,j=null){F.map(U=>h(U)?U:o._availablePlugins.get(U)||U).forEach(U=>{S(U,j),I(U,j),P(U,j)})}function S(F,j){if(!h(F))throw j?new V("plugincollection-soft-required",r,{missingPlugin:F,requiredBy:v(j)}):new V("plugincollection-plugin-not-found",r,{plugin:F})}function I(F,j){if(m(j)&&!m(F))throw new V("plugincollection-context-required",r,{plugin:v(F),requiredBy:v(j)})}function P(F,j){if(j&&p(F,n))throw new V("plugincollection-required",r,{plugin:v(F),requiredBy:v(j)})}function O(F){return F.map(j=>{let U=o._contextPlugins.get(j);return U=U||new j(r),o._add(j,U),U})}function D(F,j){return F.reduce((U,X)=>!X[j]||o._contextPlugins.has(X)?U:U.then(X[j].bind(X)),Promise.resolve())}function Y(F,j){for(const U of j){if(typeof U!="function")throw new V("plugincollection-replace-plugin-invalid-type",null,{pluginItem:U});const X=U.pluginName;if(!X)throw new V("plugincollection-replace-plugin-missing-name",null,{pluginItem:U});if(U.requires&&U.requires.length)throw new V("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:X});const ae=o._availablePlugins.get(X);if(!ae)throw new V("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:X});const me=F.indexOf(ae);if(me===-1){if(o._contextPlugins.has(ae))return;throw new V("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:X})}if(ae.requires&&ae.requires.length)throw new V("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:X});F.splice(me,1,U),o._availablePlugins.set(X,U)}}}destroy(){const e=[];for(const[,n]of this)typeof n.destroy=="function"&&!this._contextPlugins.has(n)&&e.push(n.destroy());return Promise.all(e)}_add(e,n){this._plugins.set(e,n);const s=e.pluginName;if(s){if(this._plugins.has(s))throw new V("plugincollection-plugin-name-conflict",null,{pluginName:s,plugin1:this._plugins.get(s).constructor,plugin2:e});this._plugins.set(s,n)}}}class Ag{constructor(t){_(this,"config");_(this,"plugins");_(this,"locale");_(this,"t");_(this,"editors");_(this,"_contextOwner",null);const{translations:e,...n}=t||{};this.config=new w5(n,this.constructor.defaultConfig);const s=this.constructor.builtinPlugins;this.config.define("plugins",s),this.plugins=new AV(this,s);const o=this.config.get("language")||{};this.locale=new JH({uiLanguage:typeof o=="string"?o:o.ui,contentLanguage:this.config.get("language.content"),translations:e}),this.t=this.locale.t,this.editors=new En}initPlugins(){const t=this.config.get("plugins")||[],e=this.config.get("substitutePlugins")||[];for(const n of t.concat(e)){if(typeof n!="function")throw new V("context-initplugins-constructor-only",null,{Plugin:n});if(n.isContextPlugin!==!0)throw new V("context-initplugins-invalid-plugin",null,{Plugin:n})}return this.plugins.init(t,[],e)}destroy(){return Promise.all(Array.from(this.editors,t=>t.destroy())).then(()=>this.plugins.destroy())}_addEditor(t,e){if(this._contextOwner)throw new V("context-addeditor-private-context");this.editors.add(t),e&&(this._contextOwner=t)}_removeEditor(t){return this.editors.has(t)&&this.editors.remove(t),this._contextOwner===t?this.destroy():Promise.resolve()}_getEditorConfig(){const t={};for(const e of this.config.names())["plugins","removePlugins","extraPlugins"].includes(e)||(t[e]=this.config.get(e));return t}static create(t){return new Promise(e=>{const n=new this(t);e(n.initPlugins().then(()=>n))})}}_(Ag,"defaultConfig"),_(Ag,"builtinPlugins");class RV extends _t(){constructor(e){super();_(this,"context");this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}class bj{constructor(){_(this,"_commands");this._commands=new Map}add(t,e){this._commands.set(t,e)}get(t){return this._commands.get(t)}execute(t,...e){const n=this.get(t);if(!n)throw new V("commandcollection-command-not-found",this,{commandName:t});return n.execute(...e)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const t of this.commands())t.destroy()}}class _j extends Dt{constructor(e){super();_(this,"editor");this.editor=e}set(e,n,s={}){if(typeof n=="string"){const o=n;n=(r,a)=>{this.editor.execute(o),a()}}super.set(e,n,s)}}const zw="contentEditing",wA="common";class wj{constructor(t){_(this,"keystrokeInfos",new Map);_(this,"_editor");this._editor=t;const e=t.config.get("menuBar.isVisible"),n=t.locale.t;this.addKeystrokeInfoCategory({id:zw,label:n("Content editing keystrokes"),description:n("These keyboard shortcuts allow for quick access to content editing features.")});const s=[{label:n("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:n("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:n("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:n("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:n("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:n("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];e&&s.push({label:n("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:n("User interface and content navigation keystrokes"),description:n("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:s}]})}addKeystrokeInfoCategory({id:t,label:e,description:n,groups:s}){this.keystrokeInfos.set(t,{id:t,label:e,description:n,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:t,id:wA}),s&&s.forEach(o=>{this.addKeystrokeInfoGroup({categoryId:t,...o})})}addKeystrokeInfoGroup({categoryId:t=zw,id:e,label:n,keystrokes:s}){const o=this.keystrokeInfos.get(t);if(!o)throw new V("accessibility-unknown-keystroke-info-category",this._editor,{groupId:e,categoryId:t});o.groups.set(e,{id:e,label:n,keystrokes:s||[]})}addKeystrokeInfos({categoryId:t=zw,groupId:e=wA,keystrokes:n}){if(!this.keystrokeInfos.has(t))throw new V("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:t,keystrokes:n});const s=this.keystrokeInfos.get(t);if(!s.groups.has(e))throw new V("accessibility-unknown-keystroke-info-group",this._editor,{groupId:e,categoryId:t,keystrokes:n});s.groups.get(e).keystrokes.push(...n)}}function yj(i){return{sessionId:kj(),pageSessionId:Ej(),hostname:window.location.hostname,version:globalThis.CKEDITOR_VERSION,type:vj(i),plugins:Cj(i.plugins),distribution:Tj(),env:xj(),integration:Object.create(null),menuBar:{isVisible:!!i.config.get("menuBar.isVisible")},language:{ui:i.locale.uiLanguage,content:i.locale.contentLanguage},toolbar:{main:Hw(i.config.get("toolbar")),block:Hw(i.config.get("blockToolbar")),balloon:Hw(i.config.get("balloonToolbar"))}}}function vj(i){return Object.getPrototypeOf(i).constructor.editorName}function Cj(i){return Array.from(i).filter(([t])=>!!t.pluginName).map(([t])=>{const{pluginName:e,isContextPlugin:n,isOfficialPlugin:s,isPremiumPlugin:o}=t;return{isContext:!!n,isOfficial:!!s,isPremium:!!o,name:e}})}function Hw(i){if(!i)return;const t=Array.isArray(i)?{items:i}:i,e=o(t.items||[]);return{isMultiline:e.includes("-"),shouldNotGroupWhenFull:!!t.shouldNotGroupWhenFull,items:s(e)};function s(r){return r.filter(a=>a!=="|"&&a!=="-")}function o(r){return r.flatMap(a=>typeof a=="string"?[a]:o(a.items))}}function Tj(){return{channel:window[Symbol.for("cke distribution")]||"sh"}}function xj(){let i="unknown",t="unknown";return Se.isMac?i="mac":Se.isWindows?i="windows":Se.isiOS?i="ios":Se.isAndroid&&(i="android"),Se.isGecko?t="gecko":Se.isBlink?t="blink":Se.isSafari&&(t="safari"),{os:i,browser:t}}function kj(){return localStorage.getItem("__ckeditor-session-id")||localStorage.setItem("__ckeditor-session-id",si()),localStorage.getItem("__ckeditor-session-id")}function Ej(){return de.window.CKEDITOR_PAGE_SESSION_ID=de.window.CKEDITOR_PAGE_SESSION_ID||si(),de.window.CKEDITOR_PAGE_SESSION_ID}var pa;let Sj=(pa=class extends _t(){constructor(e={}){super();_(this,"accessibility");_(this,"commands");_(this,"config");_(this,"conversion");_(this,"data");_(this,"editing");_(this,"locale");_(this,"model");_(this,"plugins");_(this,"keystrokes");_(this,"t");_(this,"_context");_(this,"_readOnlyLocks");if("sanitizeHtml"in e)throw new V("editor-config-sanitizehtml-not-supported");const n=this.constructor,{translations:s,...o}=n.defaultConfig||{},{translations:r=s,...a}=e,l=e.language||o.language;this._context=e.context||new Ag({language:l,translations:r}),this._context._addEditor(this,!e.context);const u=Array.from(n.builtinPlugins||[]);this.config=new w5(a,o),this.config.define("plugins",u),this.config.define(this._context._getEditorConfig()),m(this.config),this.plugins=new AV(this,u,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new bj,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new DG,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const h=new wW;this.data=new $$(this.model,h),this.editing=new v$(this.model,h),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new j$([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new _j(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new wj(this),p(this);function m(v){let C=v.get("licenseKey");if(!C&&window.CKEDITOR_GLOBAL_LICENSE_KEY&&(C=window.CKEDITOR_GLOBAL_LICENSE_KEY,v.set("licenseKey",C)),!C)throw new V("license-key-missing")}function p(v){const C=v.config.get("licenseKey"),x=window[Symbol.for("cke distribution")]||"sh";function k(X){v.enableReadOnlyMode(Symbol("invalidLicense")),v._showLicenseError(X)}function S(X){const ae=X.split(".");return ae.length!=3?null:ae[1]}function I(X){return["exp","jti","vc"].every(me=>me in X)}function P(X){return Object.getOwnPropertyNames(X).sort().filter(Ae=>Ae!="vc"&&X[Ae]!=null).map(Ae=>X[Ae])}function O(X){const{hostname:ae}=new URL(window.location.href);if(X.includes(ae))return!0;const me=ae.split(".");return X.filter(Ae=>Ae.includes("*")).map(Ae=>Ae.split(".")).filter(Ae=>Ae.length<=me.length).map(Ae=>Array(me.length-Ae.length).fill(Ae[0]==="*"?"*":"").concat(Ae)).some(Ae=>me.every((ze,we)=>Ae[we]===ze||Ae[we]==="*"))}function D(X){const ae=X[0].toUpperCase()+X.slice(1),me=X==="evaluation"?"an":"a";console.info(`%cCKEditor 5 ${ae} License`,"color: #ffffff; background: #743CCD; font-size: 14px; padding: 4px 8px; border-radius: 4px;"),console.warn(`⚠️ You are using ${me} ${X} license of CKEditor 5${X==="trial"?" which is for evaluation purposes only":""}. For production usage, please obtain a production license at https://portal.ckeditor.com/`)}if(C=="GPL"){x=="cloud"&&k("distributionChannel");return}const Y=S(C);if(!Y){k("invalid");return}const F=I0(Y);if(!F){k("invalid");return}if(!I(F)){k("invalid");return}if(F.distributionChannel&&!bn(F.distributionChannel).includes(x)){k("distributionChannel");return}if(nW(P(F))!=F.vc.toLowerCase()){k("invalid");return}if(new Date(F.exp*1e3)<uH){k("expired");return}const U=F.licensedHosts;if(U&&U.length>0&&!O(U)){k("domainLimit");return}if(["evaluation","trial"].includes(F.licenseType)&&F.exp*1e3<Date.now()){k("expired");return}if(["development","evaluation","trial"].includes(F.licenseType)){const{licenseType:X}=F;window.CKEDITOR_WARNING_SUPPRESSIONS=window.CKEDITOR_WARNING_SUPPRESSIONS||{},window.CKEDITOR_WARNING_SUPPRESSIONS[X]||(D(X),window.CKEDITOR_WARNING_SUPPRESSIONS[X]=!0)}if(["evaluation","trial"].includes(F.licenseType)){const X=F.licenseType,ae=setTimeout(()=>{k(`${X}Limit`)},6e5);v.on("destroy",()=>{clearTimeout(ae)})}F.usageEndpoint&&v.once("ready",()=>{const X={requestId:si(),requestTime:Math.round(Date.now()/1e3),license:C,editor:Aj(v)};v._sendUsageRequest(F.usageEndpoint,X).then(ae=>{const{status:me,message:Ae}=ae;Ae&&console.warn(Ae),me!="ok"&&k("usageLimit")},()=>{lH("license-key-validation-endpoint-not-reachable",{url:F.usageEndpoint})})},{priority:"high"})}}static get editorName(){return"Editor"}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(e){throw new V("editor-isreadonly-has-no-setter")}enableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new V("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)||(this._readOnlyLocks.add(e),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new V("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)&&(this._readOnlyLocks.delete(e),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(e){this.data.set(e)}getData(e){return this.data.get(e)}initPlugins(){const e=this.config,n=e.get("plugins"),s=e.get("removePlugins")||[],o=e.get("extraPlugins")||[],r=e.get("substitutePlugins")||[];return this.plugins.init(n.concat(o),s,r)}destroy(){let e=Promise.resolve();return this.state=="initializing"&&(e=new Promise(n=>this.once("ready",n))),e.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(e,...n){try{return this.commands.execute(e,...n)}catch(s){/* istanbul ignore next -- @preserve */V.rethrowUnexpectedError(s,this)}}focus(){this.editing.view.focus()}static create(...e){throw new Error("This is an abstract method.")}_showLicenseError(e,n){setTimeout(()=>{if(e=="invalid")throw new V("invalid-license-key");if(e=="expired")throw new V("license-key-expired");if(e=="domainLimit")throw new V("license-key-domain-limit");if(e=="featureNotAllowed")throw new V("license-key-plugin-not-allowed",null,{pluginName:n});if(e=="evaluationLimit")throw new V("license-key-evaluation-limit");if(e=="trialLimit")throw new V("license-key-trial-limit");if(e=="developmentLimit")throw new V("license-key-development-limit");if(e=="usageLimit")throw new V("license-key-usage-limit");if(e=="distributionChannel")throw new V("license-key-invalid-distribution-channel")},0),this._showLicenseError=()=>{}}async _sendUsageRequest(e,n){const s=new Headers({"Content-Type":"application/json"}),o=await fetch(new URL(e),{method:"POST",headers:s,body:JSON.stringify(n)});if(!o.ok)throw new Error(`HTTP Response: ${o.status}`);return o.json()}},_(pa,"defaultConfig"),_(pa,"builtinPlugins"),_(pa,"Context",Ag),_(pa,"EditorWatchdog",SV),_(pa,"ContextWatchdog",gj),pa);function Aj(i){const t=yj(i);function e(n,s){if(Ir(t,n)!==void 0)throw new V("editor-usage-data-path-already-set",{path:n});o5(t,n,s)}return i.fire("collectUsageData",{setUsageData:e}),t}function Rj(i){if(!yg(i.updateSourceElement))throw new V("attachtoform-missing-elementapi-interface",i);const t=i.sourceElement;if(Ij(t)&&t.form){let e;const n=t.form,s=()=>i.updateSourceElement();yg(n.submit)&&(e=n.submit,n.submit=()=>{s(),e.apply(n)}),n.addEventListener("submit",s),i.on("destroy",()=>{n.removeEventListener("submit",s),e&&(n.submit=e)})}}function Ij(i){return!!i&&i.tagName.toLowerCase()==="textarea"}function ev(i){class t extends i{constructor(){super(...arguments);_(this,"sourceElement")}updateSourceElement(s){if(!this.sourceElement)throw new V("editor-missing-sourceelement",this);const o=this.config.get("updateSourceElementOnDestroy"),r=this.sourceElement instanceof HTMLTextAreaElement;if(!o&&!r){CS(this.sourceElement,"");return}const a=typeof s=="string"?s:this.data.get();CS(this.sourceElement,a)}}return t}ev.updateSourceElement=ev(Object).prototype.updateSourceElement;class Rg extends RV{constructor(){super(...arguments);_(this,"_actions")}static get pluginName(){return"PendingActions"}static get isOfficialPlugin(){return!0}init(){this.set("hasAny",!1),this._actions=new En({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if(typeof e!="string")throw new V("pendingactions-add-invalid-message",this);const n=new(_t());return n.set("message",e),this._actions.add(n),this.hasAny=!0,n}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let Pj=class extends _t(){constructor(){super();_(this,"total");_(this,"_reader");_(this,"_data");const e=new window.FileReader;this._reader=e,this._data=void 0,this.set("loaded",0),e.onprogress=n=>{this.loaded=n.loaded}}get error(){return this._reader.error}get data(){return this._data}read(e){const n=this._reader;return this.total=e.size,new Promise((s,o)=>{n.onload=()=>{const r=n.result;this._data=r,s(r)},n.onerror=()=>{o("error")},n.onabort=()=>{o("aborted")},this._reader.readAsDataURL(e)})}abort(){this._reader.abort()}};class Tr extends te{constructor(){super(...arguments);_(this,"loaders",new En);_(this,"_loadersMap",new Map);_(this,"_pendingAction",null)}static get pluginName(){return"FileRepository"}static get isOfficialPlugin(){return!0}static get requires(){return[Rg]}init(){this.loaders.on("change",()=>this._updatePendingAction()),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(e,n)=>n?e/n*100:0)}getLoader(e){return this._loadersMap.get(e)||null}createLoader(e){if(!this.createUploadAdapter)return Ze("filerepository-no-upload-adapter"),null;const n=new yA(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(n),this._loadersMap.set(e,n),e instanceof Promise&&n.file.then(s=>{this._loadersMap.set(s,n)}).catch(()=>{}),n.on("change:uploaded",()=>{let s=0;for(const o of this.loaders)s+=o.uploaded;this.uploaded=s}),n.on("change:uploadTotal",()=>{let s=0;for(const o of this.loaders)o.uploadTotal&&(s+=o.uploadTotal);this.uploadTotal=s}),n}destroyLoader(e){const n=e instanceof yA?e:this.getLoader(e);n._destroy(),this.loaders.remove(n),this._loadersMap.forEach((s,o)=>{s===n&&this._loadersMap.delete(o)})}_updatePendingAction(){const e=this.editor.plugins.get(Rg);if(this.loaders.length){if(!this._pendingAction){const n=this.editor.t,s=o=>`${n("Upload in progress")} ${parseInt(o)}%.`;this._pendingAction=e.add(s(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",s)}}else e.remove(this._pendingAction),this._pendingAction=null}}class yA extends _t(){constructor(e,n){super();_(this,"id");_(this,"_filePromiseWrapper");_(this,"_adapter");_(this,"_reader");this.id=si(),this._filePromiseWrapper=this._createFilePromiseWrapper(e),this._adapter=n(this),this._reader=new Pj,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(s,o)=>o?s/o*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(e=>this._filePromiseWrapper?e:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new V("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(e=>this._reader.read(e)).then(e=>{if(this.status!=="reading")throw this.status;return this.status="idle",e}).catch(e=>{throw e==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:e)})}upload(){if(this.status!="idle")throw new V("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(e=>(this.uploadResponse=e,this.status="idle",e)).catch(e=>{throw this.status==="aborted"?"aborted":(this.status="error",e)})}abort(){const e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?e=="reading"?this._reader.abort():e=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(e){const n={};return n.promise=new Promise((s,o)=>{n.rejecter=o,n.isFulfilled=!1,e.then(r=>{n.isFulfilled=!0,s(r)}).catch(r=>{n.isFulfilled=!0,o(r)})}),n}}class Mj extends te{static get requires(){return[Tr]}static get pluginName(){return"Base64UploadAdapter"}static get isOfficialPlugin(){return!0}init(){this.editor.plugins.get(Tr).createUploadAdapter=t=>new Vj(t)}}let Vj=class{constructor(t){_(this,"loader");_(this,"reader");this.loader=t}upload(){return new Promise((t,e)=>{const n=this.reader=new window.FileReader;n.addEventListener("load",()=>{t({default:n.result})}),n.addEventListener("error",s=>{e(s)}),n.addEventListener("abort",()=>{e()}),this.loader.file.then(s=>{n.readAsDataURL(s)})})}abort(){this.reader.abort()}};/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */var vA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103V9.125Z"/><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z"/></svg>',Nj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',IV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',PV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',$0='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',Dj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',MV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',Oj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',VV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',Sh='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',NV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',Pp='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',Lj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>',Bj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>',Fj='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>',Uj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',Mp='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>',zj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M8.5 8.25a1.25 1.25 0 1 1-2.499.001A1.25 1.25 0 0 1 8.5 8.25Z"/><path clip-rule="evenodd" d="M14 8.25a1.25 1.25 0 1 1-2.499.001A1.25 1.25 0 0 1 14 8.25Z"/><path clip-rule="evenodd" d="M7.127 12.088a.75.75 0 1 0-1.254.824C6.88 14.444 8.423 15.25 10 15.25c1.578 0 3.12-.805 4.127-2.338a.75.75 0 0 0-1.254-.824C12.13 13.221 11.048 13.75 10 13.75c-1.047 0-2.13-.529-2.873-1.662Z"/><path d="M10 19a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm0-1.5a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z"/></svg>',Hj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',Wj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>',qj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>',CA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>',TA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>',$j='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1l4.16-4.482ZM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1h15.6Zm-5.655 6a2.128 2.128 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7Z"/></svg>',Gj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a2.97 2.97 0 0 1-.414-.287 2.998 2.998 0 0 1-1.055-2.03 3.003 3.003 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.134 2.134 0 0 0-1.875-.978Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/></svg>',jj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.401 5.401 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023c.449.131.887.32 1.307.573l.058.033c.046.028.09.057.135.086V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.118 2.118 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978Z"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.647.647 0 0 0-.096.492.664.664 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.741 1.741 0 0 1 2.478-.463 1.869 1.869 0 0 1 .476 2.55.637.637 0 0 0-.071.5.646.646 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.228 3.228 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.626.626 0 0 0 .092-.475.638.638 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.741 1.741 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.647.647 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.609.609 0 0 0-.845.17Z"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236l1.268-1.907Z"/></svg>',Kj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',xA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',Zj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>',DV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>',Yj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.68 13.74h-.001l4.209 4.208a1 1 0 1 0 1.414-1.414l-4.267-4.268a6 6 0 1 0-1.355 1.474ZM13 9a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/></svg>',Jj='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>',Xj='<svg viewBox="0 0 22 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.587 1.5c-.612 0-.601-.029-.601.551v14.84c0 .59-.01.559.591.559h18.846c.602 0 .591.03.591-.56V2.052c0-.58.01-.55-.591-.55H1.587Zm.701.971h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-14.24 1h13.008v12H4.467l.029-12Zm-2.208 1h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003l-.029 1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h.974v1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Z"/><path d="M8.374 6.648a.399.399 0 0 1 .395-.4.402.402 0 0 1 .2.049l5.148 2.824a.4.4 0 0 1 0 .7l-5.148 2.824a.403.403 0 0 1-.595-.35V6.648Z"/></svg>',OV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>',Ig='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',Qj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',G0='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',Pg='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',LV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',BV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',FV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',eK='<svg xmlns="http://www.w3.org/2000/svg" xmlns:v="https://vecta.io/nano" viewBox="0 0 20 20"><path d="M.95 1.43a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h.75v6.3H.95a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-.65h1.932l1.539-1.5H5v-.95a.95.95 0 0 0-.95-.95H3.2v-6.3h.85A.95.95 0 0 0 5 5.48v-.55h10v.55a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-3.1a.95.95 0 0 0-.95-.95h-3.1a.95.95 0 0 0-.95.95v1.05H5V2.38a.95.95 0 0 0-.95-.95H.95zm.55 3.5v-2h2v2h-2zm0 9.3v2h2v-2h-2zm15-11.3v2h2v-2h-2z"/><path d="M8.139 20.004v-2.388l7.045-7.048 2.391 2.391-7.046 7.046h-2.39zm11.421-9.101a.64.64 0 0 1-.138.206l-1.165 1.168-2.391-2.391 1.167-1.163a.63.63 0 0 1 .206-.138.635.635 0 0 1 .243-.049.63.63 0 0 1 .449.187l1.491 1.488c.059.059.108.129.138.206s.049.16.049.243a.6.6 0 0 1-.049.243z"/></svg>',tK='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',nK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2ZM13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7h11Z"/></svg>',iK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2ZM10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9h8Z"/></svg>',sK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2ZM7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11h5Z"/></svg>',kA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>',oK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',rK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',aK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',lK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',Ga='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',cK=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`,EA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',uK='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',dK='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>',hK=`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.734 6.375H1.75a.75.75 0 0 1 0-1.5h1.984a2.626 2.626 0 0 1 5.032 0h9.48a.75.75 0 0 1 0 1.5h-9.48a2.626 2.626 0 0 1-5.032 0Zm1.141-.75a1.375 1.375 0 1 1 2.75 0 1.375 1.375 0 0 1-2.75 0ZM16.263 14.625h1.983a.75.75 0 0 1 0 1.5h-1.983a2.626 2.626 0 0 1-5.033 0H1.75a.75.75 0 0 1 0-1.5h9.48a2.626 2.626 0 0 1 5.033 0Zm-1.142.75a1.375 1.375 0 1 1-2.75 0 1.375 1.375 0 0 1 2.75 0Z"/></svg>
`,fK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.105 18-.17 1H2.5A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1h15A1.5 1.5 0 0 1 19 2.5v9.975l-.85-.124-.15-.302V8h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5h3.105zM2 12h5V8H2v4zm10-4H8v4h4V8zM2 2v5h5V2H2zm0 16h5v-5H2v5zM13 7h5V2h-5v5zM8 2v5h4V2H8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM13 6a1 1 0 0 1 1 1v3.172a2.047 2.047 0 0 0-.293.443l-.858 1.736-1.916.28-.151.027A1.976 1.976 0 0 0 9.315 14H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm-1 2H8v4h4V8z"/></svg>',mK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',gK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>',pK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8 2v5h4V2h1v5h5v1h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5H7v-5H2v-1h5V8H2V7h5V2h1zm4 6H8v4h4V8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM17 1a2 2 0 0 1 2 2v9.475l-.85-.124-.857-1.736a2.048 2.048 0 0 0-.292-.44L17 3H3v14h7.808l.402.392L10.935 19H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14z"/></svg>',bK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',SA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.5v3h4v-3H3Zm0 4v3h4v-3H3Zm0 4v3h4v-3H3Zm5 3h4v-3H8v3Zm5 0h4v-3h-4v3Zm4-4v-3h-4v3h4Zm0-4v-3h-4v3h4Zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13.5Zm-6.5-4v-3H8v3h4Zm0-4v-3H8v3h4Z"/></svg>',_K='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1H3.035Zm10.453 2.61a1.885 1.885 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.903 1.903 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598ZM7.463 8.163a.611.611 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.628.628 0 0 0-.417-.185Zm6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.618.618 0 0 0-.42-.165ZM.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.908.908 0 0 0-.912-.912H.91ZM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516L3.668 13Zm4.947 0h1.801v4.3h2.7v1.4h-4.5V13h-.001Zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9V13h-.001Zm-8.517 1.457-.614 2.059h1.262l-.648-2.059Z"/></svg>',wK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',j0='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',yK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>',AA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',vK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>',Ww,RA;function UV(){return RA||(RA=1,Ww={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),Ww}var CK=UV();const IA=op(CK);var PA={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function MA(i){var t,e=[],n=1,s;if(typeof i=="string")if(IA[i])e=IA[i].slice(),s="rgb";else if(i==="transparent")n=0,s="rgb",e=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(i)){var o=i.slice(1),r=o.length,a=r<=4;n=1,a?(e=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],r===4&&(n=parseInt(o[3]+o[3],16)/255)):(e=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],r===8&&(n=parseInt(o[6]+o[7],16)/255)),e[0]||(e[0]=0),e[1]||(e[1]=0),e[2]||(e[2]=0),s="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(i)){var l=t[1],u=l==="rgb",o=l.replace(/a$/,"");s=o;var r=o==="cmyk"?4:o==="gray"?1:3;e=t[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(p,v){if(/%$/.test(p))return v===r?parseFloat(p)/100:o==="rgb"?parseFloat(p)*255/100:parseFloat(p);if(o[v]==="h"){if(/deg$/.test(p))return parseFloat(p);if(PA[p]!==void 0)return PA[p]}return parseFloat(p)}),l===o&&e.push(1),n=u||e[r]===void 0?1:e[r],e=e.slice(0,r)}else i.length>10&&/[0-9](?:\s|\/)/.test(i)&&(e=i.match(/([0-9]+)/g).map(function(h){return parseFloat(h)}),s=i.match(/([a-z])/ig).join("").toLowerCase());else isNaN(i)?Array.isArray(i)||i.length?(e=[i[0],i[1],i[2]],s="rgb",n=i.length===4?i[3]:1):i instanceof Object&&(i.r!=null||i.red!=null||i.R!=null?(s="rgb",e=[i.r||i.red||i.R||0,i.g||i.green||i.G||0,i.b||i.blue||i.B||0]):(s="hsl",e=[i.h||i.hue||i.H||0,i.s||i.saturation||i.S||0,i.l||i.lightness||i.L||i.b||i.brightness]),n=i.a||i.alpha||i.opacity||1,i.opacity!=null&&(n/=100)):(s="rgb",e=[i>>>16,(i&65280)>>>8,i&255]);return{space:s,values:e,alpha:n}}var qw,VA;function zV(){if(VA)return qw;VA=1;const i=UV(),t={};for(const s of Object.keys(i))t[i[s]]=s;const e={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};qw=e;for(const s of Object.keys(e)){if(!("channels"in e[s]))throw new Error("missing channels property: "+s);if(!("labels"in e[s]))throw new Error("missing channel labels property: "+s);if(e[s].labels.length!==e[s].channels)throw new Error("channel and label counts mismatch: "+s);const{channels:o,labels:r}=e[s];delete e[s].channels,delete e[s].labels,Object.defineProperty(e[s],"channels",{value:o}),Object.defineProperty(e[s],"labels",{value:r})}e.rgb.hsl=function(s){const o=s[0]/255,r=s[1]/255,a=s[2]/255,l=Math.min(o,r,a),u=Math.max(o,r,a),h=u-l;let m,p;u===l?m=0:o===u?m=(r-a)/h:r===u?m=2+(a-o)/h:a===u&&(m=4+(o-r)/h),m=Math.min(m*60,360),m<0&&(m+=360);const v=(l+u)/2;return u===l?p=0:v<=.5?p=h/(u+l):p=h/(2-u-l),[m,p*100,v*100]},e.rgb.hsv=function(s){let o,r,a,l,u;const h=s[0]/255,m=s[1]/255,p=s[2]/255,v=Math.max(h,m,p),C=v-Math.min(h,m,p),x=function(k){return(v-k)/6/C+1/2};return C===0?(l=0,u=0):(u=C/v,o=x(h),r=x(m),a=x(p),h===v?l=a-r:m===v?l=1/3+o-a:p===v&&(l=2/3+r-o),l<0?l+=1:l>1&&(l-=1)),[l*360,u*100,v*100]},e.rgb.hwb=function(s){const o=s[0],r=s[1];let a=s[2];const l=e.rgb.hsl(s)[0],u=1/255*Math.min(o,Math.min(r,a));return a=1-1/255*Math.max(o,Math.max(r,a)),[l,u*100,a*100]},e.rgb.cmyk=function(s){const o=s[0]/255,r=s[1]/255,a=s[2]/255,l=Math.min(1-o,1-r,1-a),u=(1-o-l)/(1-l)||0,h=(1-r-l)/(1-l)||0,m=(1-a-l)/(1-l)||0;return[u*100,h*100,m*100,l*100]};function n(s,o){return(s[0]-o[0])**2+(s[1]-o[1])**2+(s[2]-o[2])**2}return e.rgb.keyword=function(s){const o=t[s];if(o)return o;let r=1/0,a;for(const l of Object.keys(i)){const u=i[l],h=n(s,u);h<r&&(r=h,a=l)}return a},e.keyword.rgb=function(s){return i[s]},e.rgb.xyz=function(s){let o=s[0]/255,r=s[1]/255,a=s[2]/255;o=o>.04045?((o+.055)/1.055)**2.4:o/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,a=a>.04045?((a+.055)/1.055)**2.4:a/12.92;const l=o*.4124+r*.3576+a*.1805,u=o*.2126+r*.7152+a*.0722,h=o*.0193+r*.1192+a*.9505;return[l*100,u*100,h*100]},e.rgb.lab=function(s){const o=e.rgb.xyz(s);let r=o[0],a=o[1],l=o[2];r/=95.047,a/=100,l/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,a=a>.008856?a**(1/3):7.787*a+16/116,l=l>.008856?l**(1/3):7.787*l+16/116;const u=116*a-16,h=500*(r-a),m=200*(a-l);return[u,h,m]},e.hsl.rgb=function(s){const o=s[0]/360,r=s[1]/100,a=s[2]/100;let l,u,h;if(r===0)return h=a*255,[h,h,h];a<.5?l=a*(1+r):l=a+r-a*r;const m=2*a-l,p=[0,0,0];for(let v=0;v<3;v++)u=o+1/3*-(v-1),u<0&&u++,u>1&&u--,6*u<1?h=m+(l-m)*6*u:2*u<1?h=l:3*u<2?h=m+(l-m)*(2/3-u)*6:h=m,p[v]=h*255;return p},e.hsl.hsv=function(s){const o=s[0];let r=s[1]/100,a=s[2]/100,l=r;const u=Math.max(a,.01);a*=2,r*=a<=1?a:2-a,l*=u<=1?u:2-u;const h=(a+r)/2,m=a===0?2*l/(u+l):2*r/(a+r);return[o,m*100,h*100]},e.hsv.rgb=function(s){const o=s[0]/60,r=s[1]/100;let a=s[2]/100;const l=Math.floor(o)%6,u=o-Math.floor(o),h=255*a*(1-r),m=255*a*(1-r*u),p=255*a*(1-r*(1-u));switch(a*=255,l){case 0:return[a,p,h];case 1:return[m,a,h];case 2:return[h,a,p];case 3:return[h,m,a];case 4:return[p,h,a];case 5:return[a,h,m]}},e.hsv.hsl=function(s){const o=s[0],r=s[1]/100,a=s[2]/100,l=Math.max(a,.01);let u,h;h=(2-r)*a;const m=(2-r)*l;return u=r*l,u/=m<=1?m:2-m,u=u||0,h/=2,[o,u*100,h*100]},e.hwb.rgb=function(s){const o=s[0]/360;let r=s[1]/100,a=s[2]/100;const l=r+a;let u;l>1&&(r/=l,a/=l);const h=Math.floor(6*o),m=1-a;u=6*o-h,(h&1)!==0&&(u=1-u);const p=r+u*(m-r);let v,C,x;switch(h){default:case 6:case 0:v=m,C=p,x=r;break;case 1:v=p,C=m,x=r;break;case 2:v=r,C=m,x=p;break;case 3:v=r,C=p,x=m;break;case 4:v=p,C=r,x=m;break;case 5:v=m,C=r,x=p;break}return[v*255,C*255,x*255]},e.cmyk.rgb=function(s){const o=s[0]/100,r=s[1]/100,a=s[2]/100,l=s[3]/100,u=1-Math.min(1,o*(1-l)+l),h=1-Math.min(1,r*(1-l)+l),m=1-Math.min(1,a*(1-l)+l);return[u*255,h*255,m*255]},e.xyz.rgb=function(s){const o=s[0]/100,r=s[1]/100,a=s[2]/100;let l,u,h;return l=o*3.2406+r*-1.5372+a*-.4986,u=o*-.9689+r*1.8758+a*.0415,h=o*.0557+r*-.204+a*1.057,l=l>.0031308?1.055*l**(1/2.4)-.055:l*12.92,u=u>.0031308?1.055*u**(1/2.4)-.055:u*12.92,h=h>.0031308?1.055*h**(1/2.4)-.055:h*12.92,l=Math.min(Math.max(0,l),1),u=Math.min(Math.max(0,u),1),h=Math.min(Math.max(0,h),1),[l*255,u*255,h*255]},e.xyz.lab=function(s){let o=s[0],r=s[1],a=s[2];o/=95.047,r/=100,a/=108.883,o=o>.008856?o**(1/3):7.787*o+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,a=a>.008856?a**(1/3):7.787*a+16/116;const l=116*r-16,u=500*(o-r),h=200*(r-a);return[l,u,h]},e.lab.xyz=function(s){const o=s[0],r=s[1],a=s[2];let l,u,h;u=(o+16)/116,l=r/500+u,h=u-a/200;const m=u**3,p=l**3,v=h**3;return u=m>.008856?m:(u-16/116)/7.787,l=p>.008856?p:(l-16/116)/7.787,h=v>.008856?v:(h-16/116)/7.787,l*=95.047,u*=100,h*=108.883,[l,u,h]},e.lab.lch=function(s){const o=s[0],r=s[1],a=s[2];let l;l=Math.atan2(a,r)*360/2/Math.PI,l<0&&(l+=360);const h=Math.sqrt(r*r+a*a);return[o,h,l]},e.lch.lab=function(s){const o=s[0],r=s[1],l=s[2]/360*2*Math.PI,u=r*Math.cos(l),h=r*Math.sin(l);return[o,u,h]},e.rgb.ansi16=function(s,o=null){const[r,a,l]=s;let u=o===null?e.rgb.hsv(s)[2]:o;if(u=Math.round(u/50),u===0)return 30;let h=30+(Math.round(l/255)<<2|Math.round(a/255)<<1|Math.round(r/255));return u===2&&(h+=60),h},e.hsv.ansi16=function(s){return e.rgb.ansi16(e.hsv.rgb(s),s[2])},e.rgb.ansi256=function(s){const o=s[0],r=s[1],a=s[2];return o===r&&r===a?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(r/255*5)+Math.round(a/255*5)},e.ansi16.rgb=function(s){let o=s%10;if(o===0||o===7)return s>50&&(o+=3.5),o=o/10.5*255,[o,o,o];const r=(~~(s>50)+1)*.5,a=(o&1)*r*255,l=(o>>1&1)*r*255,u=(o>>2&1)*r*255;return[a,l,u]},e.ansi256.rgb=function(s){if(s>=232){const u=(s-232)*10+8;return[u,u,u]}s-=16;let o;const r=Math.floor(s/36)/5*255,a=Math.floor((o=s%36)/6)/5*255,l=o%6/5*255;return[r,a,l]},e.rgb.hex=function(s){const r=(((Math.round(s[0])&255)<<16)+((Math.round(s[1])&255)<<8)+(Math.round(s[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r},e.hex.rgb=function(s){const o=s.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!o)return[0,0,0];let r=o[0];o[0].length===3&&(r=r.split("").map(m=>m+m).join(""));const a=parseInt(r,16),l=a>>16&255,u=a>>8&255,h=a&255;return[l,u,h]},e.rgb.hcg=function(s){const o=s[0]/255,r=s[1]/255,a=s[2]/255,l=Math.max(Math.max(o,r),a),u=Math.min(Math.min(o,r),a),h=l-u;let m,p;return h<1?m=u/(1-h):m=0,h<=0?p=0:l===o?p=(r-a)/h%6:l===r?p=2+(a-o)/h:p=4+(o-r)/h,p/=6,p%=1,[p*360,h*100,m*100]},e.hsl.hcg=function(s){const o=s[1]/100,r=s[2]/100,a=r<.5?2*o*r:2*o*(1-r);let l=0;return a<1&&(l=(r-.5*a)/(1-a)),[s[0],a*100,l*100]},e.hsv.hcg=function(s){const o=s[1]/100,r=s[2]/100,a=o*r;let l=0;return a<1&&(l=(r-a)/(1-a)),[s[0],a*100,l*100]},e.hcg.rgb=function(s){const o=s[0]/360,r=s[1]/100,a=s[2]/100;if(r===0)return[a*255,a*255,a*255];const l=[0,0,0],u=o%1*6,h=u%1,m=1-h;let p=0;switch(Math.floor(u)){case 0:l[0]=1,l[1]=h,l[2]=0;break;case 1:l[0]=m,l[1]=1,l[2]=0;break;case 2:l[0]=0,l[1]=1,l[2]=h;break;case 3:l[0]=0,l[1]=m,l[2]=1;break;case 4:l[0]=h,l[1]=0,l[2]=1;break;default:l[0]=1,l[1]=0,l[2]=m}return p=(1-r)*a,[(r*l[0]+p)*255,(r*l[1]+p)*255,(r*l[2]+p)*255]},e.hcg.hsv=function(s){const o=s[1]/100,r=s[2]/100,a=o+r*(1-o);let l=0;return a>0&&(l=o/a),[s[0],l*100,a*100]},e.hcg.hsl=function(s){const o=s[1]/100,a=s[2]/100*(1-o)+.5*o;let l=0;return a>0&&a<.5?l=o/(2*a):a>=.5&&a<1&&(l=o/(2*(1-a))),[s[0],l*100,a*100]},e.hcg.hwb=function(s){const o=s[1]/100,r=s[2]/100,a=o+r*(1-o);return[s[0],(a-o)*100,(1-a)*100]},e.hwb.hcg=function(s){const o=s[1]/100,a=1-s[2]/100,l=a-o;let u=0;return l<1&&(u=(a-l)/(1-l)),[s[0],l*100,u*100]},e.apple.rgb=function(s){return[s[0]/65535*255,s[1]/65535*255,s[2]/65535*255]},e.rgb.apple=function(s){return[s[0]/255*65535,s[1]/255*65535,s[2]/255*65535]},e.gray.rgb=function(s){return[s[0]/100*255,s[0]/100*255,s[0]/100*255]},e.gray.hsl=function(s){return[0,0,s[0]]},e.gray.hsv=e.gray.hsl,e.gray.hwb=function(s){return[0,100,s[0]]},e.gray.cmyk=function(s){return[0,0,0,s[0]]},e.gray.lab=function(s){return[s[0],0,0]},e.gray.hex=function(s){const o=Math.round(s[0]/100*255)&255,a=((o<<16)+(o<<8)+o).toString(16).toUpperCase();return"000000".substring(a.length)+a},e.rgb.gray=function(s){return[(s[0]+s[1]+s[2])/3/255*100]},qw}var $w,NA;function TK(){if(NA)return $w;NA=1;const i=zV();function t(){const o={},r=Object.keys(i);for(let a=r.length,l=0;l<a;l++)o[r[l]]={distance:-1,parent:null};return o}function e(o){const r=t(),a=[o];for(r[o].distance=0;a.length;){const l=a.pop(),u=Object.keys(i[l]);for(let h=u.length,m=0;m<h;m++){const p=u[m],v=r[p];v.distance===-1&&(v.distance=r[l].distance+1,v.parent=l,a.unshift(p))}}return r}function n(o,r){return function(a){return r(o(a))}}function s(o,r){const a=[r[o].parent,o];let l=i[r[o].parent][o],u=r[o].parent;for(;r[u].parent;)a.unshift(r[u].parent),l=n(i[r[u].parent][u],l),u=r[u].parent;return l.conversion=a,l}return $w=function(o){const r=e(o),a={},l=Object.keys(r);for(let u=l.length,h=0;h<u;h++){const m=l[h];r[m].parent!==null&&(a[m]=s(m,r))}return a},$w}var Gw,DA;function xK(){if(DA)return Gw;DA=1;const i=zV(),t=TK(),e={},n=Object.keys(i);function s(r){const a=function(...l){const u=l[0];return u==null?u:(u.length>1&&(l=u),r(l))};return"conversion"in r&&(a.conversion=r.conversion),a}function o(r){const a=function(...l){const u=l[0];if(u==null)return u;u.length>1&&(l=u);const h=r(l);if(typeof h=="object")for(let m=h.length,p=0;p<m;p++)h[p]=Math.round(h[p]);return h};return"conversion"in r&&(a.conversion=r.conversion),a}return n.forEach(r=>{e[r]={},Object.defineProperty(e[r],"channels",{value:i[r].channels}),Object.defineProperty(e[r],"labels",{value:i[r].labels});const a=t(r);Object.keys(a).forEach(u=>{const h=a[u];e[r][u]=o(h),e[r][u].raw=s(h)})}),Gw=e,Gw}var HV=xK();const kK=op(HV),WV=GB({__proto__:null,default:kK},[HV]),th=(i,t=0,e=1)=>i>e?e:i<t?t:i,Nn=(i,t=0,e=Math.pow(10,t))=>Math.round(e*i)/e,EK=i=>PK(tv(i)),tv=i=>(i[0]==="#"&&(i=i.substring(1)),i.length<6?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?Nn(parseInt(i[3]+i[3],16)/255,2):1}:{r:parseInt(i.substring(0,2),16),g:parseInt(i.substring(2,4),16),b:parseInt(i.substring(4,6),16),a:i.length===8?Nn(parseInt(i.substring(6,8),16)/255,2):1}),SK=i=>IK(RK(i)),AK=({h:i,s:t,v:e,a:n})=>{const s=(200-t)*e/100;return{h:Nn(i),s:Nn(s>0&&s<200?t*e/100/(s<=100?s:200-s)*100:0),l:Nn(s/2),a:Nn(n,2)}},nv=i=>{const{h:t,s:e,l:n}=AK(i);return`hsl(${t}, ${e}%, ${n}%)`},RK=({h:i,s:t,v:e,a:n})=>{i=i/360*6,t=t/100,e=e/100;const s=Math.floor(i),o=e*(1-t),r=e*(1-(i-s)*t),a=e*(1-(1-i+s)*t),l=s%6;return{r:Nn([e,r,o,o,a,e][l]*255),g:Nn([a,e,e,r,o,o][l]*255),b:Nn([o,o,a,e,e,r][l]*255),a:Nn(n,2)}},gm=i=>{const t=i.toString(16);return t.length<2?"0"+t:t},IK=({r:i,g:t,b:e,a:n})=>{const s=n<1?gm(Nn(n*255)):"";return"#"+gm(i)+gm(t)+gm(e)+s},PK=({r:i,g:t,b:e,a:n})=>{const s=Math.max(i,t,e),o=s-Math.min(i,t,e),r=o?s===i?(t-e)/o:s===t?2+(e-i)/o:4+(i-t)/o:0;return{h:Nn(60*(r<0?r+6:r)),s:Nn(s?o/s*100:0),v:Nn(s/255*100),a:n}},qV=(i,t)=>{if(i===t)return!0;for(const e in i)if(i[e]!==t[e])return!1;return!0},MK=(i,t)=>i.toLowerCase()===t.toLowerCase()?!0:qV(tv(i),tv(t)),OA={},$V=i=>{let t=OA[i];return t||(t=document.createElement("template"),t.innerHTML=i,OA[i]=t),t},K0=(i,t,e)=>{i.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:e}))};let bc=!1;const iv=i=>"touches"in i,VK=i=>bc&&!iv(i)?!1:(bc||(bc=iv(i)),!0),LA=(i,t)=>{const e=iv(t)?t.touches[0]:t,n=i.el.getBoundingClientRect();K0(i.el,"move",i.getMove({x:th((e.pageX-(n.left+window.pageXOffset))/n.width),y:th((e.pageY-(n.top+window.pageYOffset))/n.height)}))},NK=(i,t)=>{const e=t.keyCode;e>40||i.xy&&e<37||e<33||(t.preventDefault(),K0(i.el,"move",i.getMove({x:e===39?.01:e===37?-.01:e===34?.05:e===33?-.05:e===35?1:e===36?-1:0,y:e===40?.01:e===38?-.01:0},!0)))};class GV{constructor(t,e,n,s){const o=$V(`<div role="slider" tabindex="0" part="${e}" ${n}><div part="${e}-pointer"></div></div>`);t.appendChild(o.content.cloneNode(!0));const r=t.querySelector(`[part=${e}]`);r.addEventListener("mousedown",this),r.addEventListener("touchstart",this),r.addEventListener("keydown",this),this.el=r,this.xy=s,this.nodes=[r.firstChild,r]}set dragging(t){const e=t?document.addEventListener:document.removeEventListener;e(bc?"touchmove":"mousemove",this),e(bc?"touchend":"mouseup",this)}handleEvent(t){switch(t.type){case"mousedown":case"touchstart":if(t.preventDefault(),!VK(t)||!bc&&t.button!=0)return;this.el.focus(),LA(this,t),this.dragging=!0;break;case"mousemove":case"touchmove":t.preventDefault(),LA(this,t);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":NK(this,t);break}}style(t){t.forEach((e,n)=>{for(const s in e)this.nodes[n].style.setProperty(s,e[s])})}}class DK extends GV{constructor(t){super(t,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:t}){this.h=t,this.style([{left:`${t/360*100}%`,color:nv({h:t,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${Nn(t)}`)}getMove(t,e){return{h:e?th(this.h+t.x*360,0,360):360*t.x}}}class OK extends GV{constructor(t){super(t,"saturation",'aria-label="Color"',!0)}update(t){this.hsva=t,this.style([{top:`${100-t.v}%`,left:`${t.s}%`,color:nv(t)},{"background-color":nv({h:t.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${Nn(t.s)}%, Brightness ${Nn(t.v)}%`)}getMove(t,e){return{s:e?th(this.hsva.s+t.x*100,0,100):t.x*100,v:e?th(this.hsva.v-t.y*100,0,100):Math.round(100-t.y*100)}}}const LK=':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',BK="[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}",FK="[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}",pm=Symbol("same"),jw=Symbol("color"),BA=Symbol("hsva"),Kw=Symbol("update"),FA=Symbol("parts"),UA=Symbol("css"),zA=Symbol("sliders");class UK extends HTMLElement{static get observedAttributes(){return["color"]}get[UA](){return[LK,BK,FK]}get[zA](){return[OK,DK]}get color(){return this[jw]}set color(t){if(!this[pm](t)){const e=this.colorModel.toHsva(t);this[Kw](e),this[jw]=t}}constructor(){super();const t=$V(`<style>${this[UA].join("")}</style>`),e=this.attachShadow({mode:"open"});e.appendChild(t.content.cloneNode(!0)),e.addEventListener("move",this),this[FA]=this[zA].map(n=>new n(e))}connectedCallback(){if(this.hasOwnProperty("color")){const t=this.color;delete this.color,this.color=t}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(t,e,n){const s=this.colorModel.fromAttr(n);this[pm](s)||(this.color=s)}handleEvent(t){const e=this[BA],n={...e,...t.detail};this[Kw](n);let s;!qV(n,e)&&!this[pm](s=this.colorModel.fromHsva(n))&&(this[jw]=s,K0(this,"color-changed",{value:s}))}[pm](t){return this.color&&this.colorModel.equal(t,this.color)}[Kw](t){this[BA]=t,this[FA].forEach(e=>e.update(t))}}const zK={defaultColor:"#000",toHsva:EK,fromHsva:({h:i,s:t,v:e})=>SK({h:i,s:t,v:e,a:1}),equal:MK,fromAttr:i=>i};class HK extends UK{get colorModel(){return zK}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Sn extends En{constructor(e=[]){super(e,{idProperty:"viewUid"});_(this,"_parentElement");this.on("add",(n,s,o)=>{this._renderViewIntoCollectionParent(s,o)}),this.on("remove",(n,s)=>{s.element&&this._parentElement&&s.element.remove()}),this._parentElement=null}destroy(){this.map(e=>e.destroy())}setParent(e){this._parentElement=e;for(const n of this)this._renderViewIntoCollectionParent(n)}delegate(...e){if(!e.length||!WK(e))throw new V("ui-viewcollection-delegate-wrong-events",this);return{to:n=>{for(const s of this)for(const o of e)s.delegate(o).to(n);this.on("add",(s,o)=>{for(const r of e)o.delegate(r).to(n)}),this.on("remove",(s,o)=>{for(const r of e)o.stopDelegating(r,n)})}}}_renderViewIntoCollectionParent(e,n){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[n])}remove(e){return super.remove(e)}}function WK(i){return i.every(t=>typeof t=="string")}const qK="http://www.w3.org/1999/xhtml";class Ti extends Tt(){constructor(e){super();_(this,"ns");_(this,"tag");_(this,"text");_(this,"attributes");_(this,"children");_(this,"eventListeners");_(this,"_isRendered");_(this,"_revertData");Object.assign(this,WA(HA(e))),this._isRendered=!1,this._revertData=null}render(){const e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData=GA(),this._renderNode({node:e,intoFragment:!1,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new V("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){function*e(n){if(n.children)for(const s of n.children)Mg(s)?yield s:Z0(s)&&(yield*e(s))}yield*e(this)}static bind(e,n){return{to(s,o){return new $K({eventNameOrFunction:s,attribute:s,observable:e,emitter:n,callback:o})},if(s,o,r){return new jV({observable:e,emitter:n,attribute:s,valueIfTrue:o,callback:r})}}}static extend(e,n){if(e._isRendered)throw new V("template-extend-render",[this,e]);JV(e,WA(HA(n)))}_renderNode(e){let n;if(e.node?n=this.tag&&this.text:n=this.tag?this.text:!this.text,n)throw new V("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let n=e.node;return n||(n=e.node=document.createElementNS(this.ns||qK,this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),n}_renderText(e){let n=e.node;return n?e.revertData.text=n.textContent:n=e.node=document.createTextNode(""),$m(this.text)?this._bindToObservable({schema:this.text,updater:jK(n),data:e}):n.textContent=this.text.join(""),n}_renderAttributes(e){if(!this.attributes)return;const n=e.node,s=e.revertData;for(const o in this.attributes){const r=n.getAttribute(o),a=this.attributes[o];s&&(s.attributes[o]=r);const l=$A(a)?a[0].ns:null;if($m(a)){const u=$A(a)?a[0].value:a;s&&jA(o)&&u.unshift(r),this._bindToObservable({schema:u,updater:KK(n,o,l),data:e})}else if(o=="style"&&typeof a[0]!="string")this._renderStyleAttribute(a[0],e);else{s&&r&&jA(o)&&a.unshift(r);const u=a.map(h=>h&&(h.value||h)).reduce((h,m)=>h.concat(m),[]).reduce(YV,"");Tc(u)||n.setAttributeNS(l,o,u)}}}_renderStyleAttribute(e,n){const s=n.node;for(const o in e){const r=e[o];$m(r)?this._bindToObservable({schema:[r],updater:ZK(s,o),data:n}):s.style[o]=r}}_renderElementChildren(e){const n=e.node,s=e.intoFragment?document.createDocumentFragment():n,o=e.isApplying;let r=0;for(const a of this.children)if(Y0(a)){if(!o){a.setParent(n);for(const l of a)s.appendChild(l.element)}}else if(Mg(a))o||(a.isRendered||a.render(),s.appendChild(a.element));else if(Mr(a))s.appendChild(a);else if(o){const l=e.revertData,u=GA();l.children.push(u),a._renderNode({intoFragment:!1,node:s.childNodes[r++],isApplying:!0,revertData:u})}else s.appendChild(a.render());e.intoFragment&&n.appendChild(s)}_setUpListeners(e){if(this.eventListeners)for(const n in this.eventListeners){const s=this.eventListeners[n].map(o=>{const[r,a]=n.split("@");return o.activateDomEventListener(r,a,e)});e.revertData&&e.revertData.bindings.push(s)}}_bindToObservable({schema:e,updater:n,data:s}){const o=s.revertData;KV(e,n,s);const r=e.filter(a=>!Tc(a)).filter(a=>a.observable).map(a=>a.activateAttributeListener(e,n,s));o&&o.bindings.push(r)}_revertTemplateFromNode(e,n){for(const o of n.bindings)for(const r of o)r();if(n.text){e.textContent=n.text;return}const s=e;for(const o in n.attributes){const r=n.attributes[o];r===null?s.removeAttribute(o):s.setAttribute(o,r)}for(let o=0;o<n.children.length;++o)this._revertTemplateFromNode(s.childNodes[o],n.children[o])}}class Ah{constructor(t){_(this,"attribute");_(this,"observable");_(this,"emitter");_(this,"callback");this.attribute=t.attribute,this.observable=t.observable,this.emitter=t.emitter,this.callback=t.callback}getValue(t){const e=this.observable[this.attribute];return this.callback?this.callback(e,t):e}activateAttributeListener(t,e,n){const s=()=>KV(t,e,n);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,s),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,s)}}}class $K extends Ah{constructor(e){super(e);_(this,"eventNameOrFunction");this.eventNameOrFunction=e.eventNameOrFunction}activateDomEventListener(e,n,s){const o=(r,a)=>{(!n||a.target.matches(n))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(a):this.observable.fire(this.eventNameOrFunction,a))};return this.emitter.listenTo(s.node,e,o),()=>{this.emitter.stopListening(s.node,e,o)}}}class jV extends Ah{constructor(e){super(e);_(this,"valueIfTrue");this.valueIfTrue=e.valueIfTrue}getValue(e){const n=super.getValue(e);return Tc(n)?!1:this.valueIfTrue||!0}}function $m(i){return i?(i.value&&(i=i.value),Array.isArray(i)?i.some($m):i instanceof Ah):!1}function GK(i,t){return i.map(e=>e instanceof Ah?e.getValue(t):e)}function KV(i,t,{node:e}){const n=GK(i,e);let s;i.length==1&&i[0]instanceof jV?s=n[0]:s=n.reduce(YV,""),Tc(s)?t.remove():t.set(s)}function jK(i){return{set(t){i.textContent=t},remove(){i.textContent=""}}}function KK(i,t,e){return{set(n){i.setAttributeNS(e,t,n)},remove(){i.removeAttributeNS(e,t)}}}function ZK(i,t){return{set(e){i.style[t]=e},remove(){i.style[t]=null}}}function HA(i){return Tp(i,e=>{if(e&&(e instanceof Ah||Z0(e)||Mg(e)||Y0(e)))return e})}function WA(i){if(typeof i=="string"?i=XK(i):i.text&&QK(i),i.on&&(i.eventListeners=JK(i.on),delete i.on),!i.text){i.attributes&&YK(i.attributes);const t=[];if(i.children)if(Y0(i.children))t.push(i.children);else for(const e of i.children)Z0(e)||Mg(e)||Mr(e)?t.push(e):t.push(new Ti(e));i.children=t}return i}function YK(i){for(const t in i)i[t].value&&(i[t].value=bn(i[t].value)),ZV(i,t)}function JK(i){for(const t in i)ZV(i,t);return i}function XK(i){return{text:[i]}}function QK(i){i.text=bn(i.text)}function ZV(i,t){i[t]=bn(i[t])}function YV(i,t){return Tc(t)?i:Tc(i)?t:`${i} ${t}`}function qA(i,t){for(const e in t)i[e]?i[e].push(...t[e]):i[e]=t[e]}function JV(i,t){if(t.attributes&&(i.attributes||(i.attributes={}),qA(i.attributes,t.attributes)),t.eventListeners&&(i.eventListeners||(i.eventListeners={}),qA(i.eventListeners,t.eventListeners)),t.text&&i.text.push(...t.text),t.children&&t.children.length){if(i.children.length!=t.children.length)throw new V("ui-template-extend-children-mismatch",i);let e=0;for(const n of t.children)JV(i.children[e++],n)}}function Tc(i){return!i&&i!==0}function Mg(i){return i instanceof fe}function Z0(i){return i instanceof Ti}function Y0(i){return i instanceof Sn}function $A(i){return is(i[0])&&i[0].ns}function GA(){return{children:[],bindings:[],attributes:{}}}function jA(i){return i=="class"||i=="style"}class fe extends Yn(_t()){constructor(e){super();_(this,"element");_(this,"isRendered");_(this,"locale");_(this,"t");_(this,"template");_(this,"_viewCollections");_(this,"_unboundChildren");_(this,"_bindTemplate");this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new En,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(n,s)=>{s.locale=e,s.t=e&&e.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Ti.bind(this,this)}createCollection(e){const n=new Sn(e);return this._viewCollections.add(n),n}registerChild(e){Li(e)||(e=[e]);for(const n of e)this._unboundChildren.add(n)}deregisterChild(e){Li(e)||(e=[e]);for(const n of e)this._unboundChildren.remove(n)}setTemplate(e){this.template=new Ti(e)}extendTemplate(e){Ti.extend(this.template,e)}render(){if(this.isRendered)throw new V("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(e=>e.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Uo({emitter:i,activator:t,callback:e,contextElements:n,listenerOptions:s}){i.listenTo(document,"mousedown",(o,r)=>{if(!t())return;const a=typeof r.composedPath=="function"?r.composedPath():[],l=typeof n=="function"?n():n;for(const u of l)if(u.contains(r.target)||a.includes(u))return;e()},s)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function nh(i){class t extends i{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...n){super(...n),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function zr({view:i}){i.listenTo(i.element,"submit",(t,e)=>{e.preventDefault(),i.fire("submit")},{useCapture:!0})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function J0({keystrokeHandler:i,focusTracker:t,gridItems:e,numberOfColumns:n,uiLanguageDirection:s}){const o=typeof n=="number"?()=>n:n;i.set("arrowright",r((u,h)=>s==="rtl"?l(u,h.length):a(u,h.length))),i.set("arrowleft",r((u,h)=>s==="rtl"?a(u,h.length):l(u,h.length))),i.set("arrowup",r((u,h)=>{let m=u-o();return m<0&&(m=u+o()*Math.floor(h.length/o()),m>h.length-1&&(m-=o())),m})),i.set("arrowdown",r((u,h)=>{let m=u+o();return m>h.length-1&&(m=u%o()),m}));function r(u){return h=>{const m=e.find(C=>C.element===t.focusedElement),p=e.getIndex(m),v=u(p,e);e.get(v).focus(),h.stopPropagation(),h.preventDefault()}}function a(u,h){return u===h-1?0:u+1}function l(u,h){return u===0?h-1:u-1}}const ep=class ep extends fe{constructor(){super();const t=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",t.if("isVisible","ck-hidden",e=>!e),"ck-reset_all-excluded",t.if("isColorInherited","ck-icon_inherit-color")],viewBox:t.to("viewBox"),"aria-hidden":!0}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const e=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg");if(!e)throw new V("ui-iconview-invalid-svg",this);const n=e.getAttribute("viewBox");n&&(this.viewBox=n);for(const{name:s,value:o}of Array.from(e.attributes))ep.presentationalAttributeNames.includes(s)&&this.element.setAttribute(s,o);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;e.childNodes.length>0;)this.element.appendChild(e.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(t=>{t.style.fill=this.fillColor})}};_(ep,"presentationalAttributeNames",["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"]);let os=ep;class XV extends fe{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const t=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:t.to("style"),id:t.to("id")},children:[{text:t.to("text")}]})}}class ke extends fe{constructor(e,n=new XV){super(e);_(this,"children");_(this,"labelView");_(this,"iconView");_(this,"keystrokeView");_(this,"_focusDelayed",null);const s=this.bindTemplate,o=si();this.set("_ariaPressed",!1),this.set("_ariaChecked",!1),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${o}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(n),this.iconView=new os,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.iconView.bind("content").to(this,"icon"),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const r={tag:"button",attributes:{class:["ck","ck-button",s.to("class"),s.if("isEnabled","ck-disabled",a=>!a),s.if("isVisible","ck-hidden",a=>!a),s.to("isOn",a=>a?"ck-on":"ck-off"),s.if("withText","ck-button_with-text"),s.if("withKeystroke","ck-button_with-keystroke")],role:s.to("role"),type:s.to("type",a=>a||"button"),tabindex:s.to("tabindex"),"aria-checked":s.to("_ariaChecked"),"aria-pressed":s.to("_ariaPressed"),"aria-label":s.to("ariaLabel"),"aria-labelledby":s.to("ariaLabelledBy"),"aria-disabled":s.if("isEnabled",!0,a=>!a),"data-cke-tooltip-text":s.to("_tooltipString"),"data-cke-tooltip-position":s.to("tooltipPosition")},children:this.children,on:{click:s.to(a=>{this.isEnabled?this.fire("execute"):a.preventDefault()})}};this.bind("_ariaPressed").to(this,"isOn",this,"isToggleable",this,"role",(a,l,u)=>!l||KA(u)?!1:String(!!a)),this.bind("_ariaChecked").to(this,"isOn",this,"isToggleable",this,"role",(a,l,u)=>!l||!KA(u)?!1:String(!!a)),Se.isSafari&&(this._focusDelayed||(this._focusDelayed=R0(()=>this.focus(),0)),r.on.mousedown=s.to(()=>{this._focusDelayed()}),r.on.mouseup=s.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(r)}render(){super.render(),this.icon&&this.children.add(this.iconView),this.on("change:icon",(e,n,s,o)=>{s&&!o?this.children.add(this.iconView,0):!s&&o&&this.children.remove(this.iconView)}),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(e){return e.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),e}_createKeystrokeView(){const e=new fe;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",n=>Tg(n))}]}),e}_getTooltipString(e,n,s){return e?typeof e=="string"?e:(s&&(s=Tg(s)),e instanceof Function?e(n,s):`${n}${s?` (${s})`:""}`):""}}function KA(i){switch(i){case"radio":case"checkbox":case"option":case"switch":case"menuitemcheckbox":case"menuitemradio":return!0;default:return!1}}class zo extends fe{constructor(e,n={}){super(e);_(this,"children");_(this,"iconView");const s=this.bindTemplate;this.set("label",n.label||""),this.set("class",n.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",s.to("class")]},children:this.children}),n.icon&&(this.iconView=new os,this.iconView.content=n.icon,this.children.add(this.iconView));const o=new fe(e);o.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:s.to("label")}]}),this.children.add(o)}}class cn extends Tt(){constructor(e){super();_(this,"focusables");_(this,"focusTracker");_(this,"keystrokeHandler");_(this,"actions");if(this.focusables=e.focusables,this.focusTracker=e.focusTracker,this.keystrokeHandler=e.keystrokeHandler,this.actions=e.actions,e.actions&&e.keystrokeHandler)for(const n in e.actions){let s=e.actions[n];typeof s=="string"&&(s=[s]);for(const o of s)e.keystrokeHandler.set(o,(r,a)=>{this[n](),a()},e.keystrokeHandlerOptions)}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(Zw)||null}get last(){return this.focusables.filter(Zw).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let e=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((n,s)=>{const o=n.element===this.focusTracker.focusedElement;return o&&(e=s),o}),e)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const e=this.next;if(e&&this.focusables.getIndex(e)===this.current){this.fire("forwardCycle");return}e===this.first?this.fire("forwardCycle"):this._focus(e,1)}focusPrevious(){const e=this.previous;if(e&&this.focusables.getIndex(e)===this.current){this.fire("backwardCycle");return}e===this.last?this.fire("backwardCycle"):this._focus(e,-1)}chain(e){const n=()=>this.current===null?null:this.focusables.get(this.current);this.listenTo(e,"forwardCycle",s=>{const o=n();this.focusNext(),o!==n()&&s.stop()},{priority:"low"}),this.listenTo(e,"backwardCycle",s=>{const o=n();this.focusPrevious(),o!==n()&&s.stop()},{priority:"low"})}unchain(e){this.stopListening(e)}_focus(e,n){e&&this.focusTracker.focusedElement!==e.element&&e.focus(n)}_getDomFocusableItem(e){const n=this.focusables.length;if(!n)return null;const s=this.current;if(s===null)return this[e===1?"first":"last"];let o=this.focusables.get(s),r=(s+n+e)%n;do{const a=this.focusables.get(r);if(Zw(a)){o=a;break}r=(r+n+e)%n}while(r!==s);return o}}function Zw(i){return Dc(i)&&Vo(i.element)}function Dc(i){return"focus"in i&&typeof i.focus=="function"}function QV(i){return Dc(i)&&"focusCycler"in i&&i.focusCycler instanceof cn}function eZ(i){class t extends i{constructor(...s){super(...s);_(this,"_onDragBound",this._onDrag.bind(this));_(this,"_onDragEndBound",this._onDragEnd.bind(this));_(this,"_lastDraggingCoordinates",{x:0,y:0});this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(de.document,"mouseup",this._onDragEndBound),this.listenTo(de.document,"touchend",this._onDragEndBound),this.listenTo(de.document,"mousemove",this._onDragBound),this.listenTo(de.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(de.document,"mouseup",this._onDragEndBound),this.stopListening(de.document,"touchend",this._onDragEndBound),this.stopListening(de.document,"mousemove",this._onDragBound),this.stopListening(de.document,"touchmove",this._onDragBound)}_onDragStart(s,o){if(!this._isHandleElementPressed(o))return;this._attachDragListeners();let r=0,a=0;o instanceof MouseEvent?(r=o.clientX,a=o.clientY):(r=o.touches[0].clientX,a=o.touches[0].clientY),this._lastDraggingCoordinates={x:r,y:a},this.isDragging=!0}_onDrag(s,o){if(!this.isDragging){this._detachDragListeners();return}let r=0,a=0;o instanceof MouseEvent?(r=o.clientX,a=o.clientY):(r=o.touches[0].clientX,a=o.touches[0].clientY),o.preventDefault(),this.fire("drag",{deltaX:Math.round(r-this._lastDraggingCoordinates.x),deltaY:Math.round(a-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:r,y:a}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(s){return this.dragHandleElement?this.dragHandleElement===s.target||s.target instanceof HTMLElement&&this.dragHandleElement.contains(s.target):!1}}return t}class tZ extends fe{constructor(e){super(e);_(this,"children");_(this,"keystrokes");_(this,"focusCycler");_(this,"_focusTracker");_(this,"_focusables");this.children=this.createCollection(),this.keystrokes=new Dt,this._focusTracker=new wt,this._focusables=new Sn,this.focusCycler=new cn({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(e){for(const n of e){const s=new ke(this.locale);let o;s.on("execute",()=>n.onExecute()),n.onCreate&&n.onCreate(s);for(o in n)o!="onExecute"&&o!="onCreate"&&s.set(o,n[o]);this.children.add(s)}this._updateFocusCyclableItems()}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(e=>{this._focusables.add(e),this._focusTracker.add(e.element)})}}class nZ extends fe{constructor(e){super(e);_(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}}const ms={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},ZA=Nc("px"),tp=class tp extends eZ(fe){constructor(e,{getCurrentDomRoot:n,getViewportOffset:s,keystrokeHandlerOptions:o}){super(e);_(this,"parts");_(this,"headerView");_(this,"closeButtonView");_(this,"actionsView");_(this,"contentView");_(this,"keystrokes");_(this,"focusTracker");_(this,"wasMoved",!1);_(this,"_getCurrentDomRoot");_(this,"_getViewportOffset");_(this,"_focusables");_(this,"_focusCycler");const r=this.bindTemplate,a=e.t;this.set("className",""),this.set("ariaLabel",a("Editor dialog")),this.set("isModal",!1),this.set("position",ms.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=n,this._getViewportOffset=s,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new Dt,this.focusTracker=new wt,this._focusables=new Sn,this._focusCycler=new cn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"},keystrokeHandlerOptions:o}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",r.if("isModal","ck-dialog-overlay__transparent",l=>!l),r.if("_isVisible","ck-hidden",l=>!l)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",r.if("isModal","ck-dialog_modal"),r.to("className")],role:"dialog","aria-label":r.to("ariaLabel"),style:{top:r.to("_top",l=>ZA(l)),left:r.to("_left",l=>ZA(l)),visibility:r.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(e,n)=>{e.defaultPrevented||(this.fire("close",{source:"escKeyPress"}),n())}),this.on("drag",(e,{deltaX:n,deltaY:s})=>{this.wasMoved=!0,this.moveBy(n,s)}),this.listenTo(de.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(de.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(e,n,s)=>{s&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView&&!this.isModal?this.headerView.element:null}setupParts({icon:e,title:n,hasCloseButton:s=!0,content:o,actionButtons:r}){n&&(this.headerView=new zo(this.locale,{icon:e}),s&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=n,this.ariaLabel=n,this.parts.add(this.headerView,0)),o&&(o instanceof fe&&(o=[o]),this.contentView=new nZ(this.locale),this.contentView.children.addMany(o),this.parts.add(this.contentView)),r&&(this.actionsView=new tZ(this.locale),this.actionsView.setButtons(r),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(e,n){const s=this._getViewportRect(),o=this._getDialogRect();e+o.width>s.right&&(e=s.right-o.width),e<s.left&&(e=s.left),n<s.top&&(n=s.top),this._moveTo(e,n)}_moveTo(e,n){this._left=e,this._top=n}moveBy(e,n){this.moveTo(this._left+e,this._top+n)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;const e=this._getViewportRect();let n=this.position,s;this._getCurrentDomRoot()?s=this._getVisibleDomRootRect(e):n=ms.SCREEN_CENTER;const o=tp.defaultOffset,r=this._getDialogRect();switch(n){case ms.EDITOR_TOP_SIDE:{if(s){const a=this.locale.contentLanguageDirection==="ltr"?s.right-r.width-o:s.left+o;this.moveTo(a,s.top+o)}else this._moveOffScreen();break}case ms.EDITOR_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-r.width/2),Math.round(s.top+s.height/2-r.height/2)):this._moveOffScreen();break}case ms.SCREEN_CENTER:{this.moveTo(Math.round((e.width-r.width)/2),Math.round((e.height-r.height)/2));break}case ms.EDITOR_TOP_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-r.width/2),s.top+o):this._moveOffScreen();break}case ms.EDITOR_BOTTOM_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-r.width/2),s.bottom-r.height-o):this._moveOffScreen();break}case ms.EDITOR_ABOVE_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-r.width/2),s.top-r.height-o):this._moveOffScreen();break}case ms.EDITOR_BELOW_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-r.width/2),s.bottom+o):this._moveOffScreen();break}}}_getVisibleDomRootRect(e){let n=new Pe(this._getCurrentDomRoot()).getVisible();if(n){if(n=e.getIntersection(n),!n)return null}else return null;return n}_getDialogRect(){return new Pe(this.element.firstElementChild)}_getViewportRect(){const e=new Pe(de.window);if(this.isModal)return e;const n={top:0,bottom:0,left:0,right:0,...this._getViewportOffset()};return e.top+=n.top,e.height-=n.top,e.bottom-=n.bottom,e.height-=n.bottom,e.left+=n.left,e.right-=n.right,e.width-=n.left+n.right,e}_updateFocusCyclableItems(){const e=[];if(this.contentView)for(const n of this.contentView.children)Dc(n)&&e.push(n);this.actionsView&&e.push(this.actionsView),this.closeButtonView&&e.push(this.closeButtonView),e.forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element),QV(n)&&this._focusCycler.chain(n.focusCycler)})}_createCloseButton(){const e=new ke(this.locale),n=this.locale.t;return e.set({label:n("Close"),tooltip:!0,icon:Sh}),e.on("execute",()=>this.fire("close",{source:"closeButton"})),e}};_(tp,"defaultOffset",15);let ih=tp;const gs=class gs extends te{constructor(e){super(e);_(this,"view");_(this,"_onHide");const n=e.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set({id:null,isOpen:!1}),e.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:n("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}static get pluginName(){return"Dialog"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),gs._visibleDialogPlugin===this&&this._unlockBodyScroll()}_initShowHideListeners(){this.on("show",(e,n)=>{this._show(n)}),this.on("show",(e,n)=>{n.onShow&&n.onShow(this)},{priority:"low"}),this.on("hide",()=>{gs._visibleDialogPlugin&&gs._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){const e=this.editor;e.keystrokes.set("Ctrl+F6",(n,s)=>{!this.isOpen||this.view.isModal||(this.view.focusTracker.isFocused?e.editing.view.focus():this.view.focus(),s())})}_initMultiRootIntegration(){const e=this.editor.model;e.document.on("change:data",()=>{if(!this.view)return;const n=e.document.differ.getChangedRoots();for(const s of n)s.state&&this.view.updatePosition()})}show(e){this.hide(),this.fire(`show:${e.id}`,e)}_show({id:e,icon:n,title:s,hasCloseButton:o=!0,content:r,actionButtons:a,className:l,isModal:u,position:h,onHide:m,keystrokeHandlerOptions:p}){const v=this.editor;this.view=new ih(v.locale,{getCurrentDomRoot:()=>v.editing.view.getDomRoot(v.model.document.selection.anchor.root.rootName),getViewportOffset:()=>v.ui.viewportOffset,keystrokeHandlerOptions:p});const C=this.view;C.on("close",()=>{this.hide()}),v.ui.view.body.add(C),v.keystrokes.listenTo(C.element),h||(h=u?ms.SCREEN_CENTER:ms.EDITOR_CENTER),u&&this._lockBodyScroll(),C.set({position:h,_isVisible:!0,className:l,isModal:u}),C.setupParts({icon:n,title:s,hasCloseButton:o,content:r,actionButtons:a}),this.id=e,m&&(this._onHide=m),this.isOpen=!0,gs._visibleDialogPlugin=this}hide(){gs._visibleDialogPlugin&&gs._visibleDialogPlugin.fire(`hide:${gs._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;const e=this.editor,n=this.view;n.isModal&&this._unlockBodyScroll(),n.contentView&&n.contentView.reset(),e.ui.view.body.remove(n),e.ui.focusTracker.remove(n.element),e.keystrokes.stopListening(n.element),n.destroy(),e.editing.view.focus(),this.id=null,this.isOpen=!1,gs._visibleDialogPlugin=null}_lockBodyScroll(){document.documentElement.classList.add("ck-dialog-scroll-locked")}_unlockBodyScroll(){document.documentElement.classList.remove("ck-dialog-scroll-locked")}};_(gs,"_visibleDialogPlugin");let xc=gs;class Oc extends ke{constructor(e,n=new XV){super(e,n);_(this,"_checkIconHolderView",new iZ);this.set({hasCheckSpace:!1,_hasCheck:this.isToggleable});const s=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-list-item-button",s.if("isToggleable","ck-list-item-button_toggleable")]}}),this.bind("_hasCheck").to(this,"hasCheckSpace",this,"isToggleable",(o,r)=>o||r)}render(){super.render(),this._hasCheck&&this.children.add(this._checkIconHolderView,0),this._watchCheckIconHolderMount()}_watchCheckIconHolderMount(){this._checkIconHolderView.bind("isOn").to(this,"isOn",e=>this.isToggleable&&e),this.on("change:_hasCheck",(e,n,s)=>{const{children:o,_checkIconHolderView:r}=this;s?o.add(r,0):o.remove(r)})}}class iZ extends fe{constructor(){super();_(this,"children");_(this,"_checkIconView",this._createCheckIconView());const e=this.bindTemplate;this.children=this.createCollection(),this.set("isOn",!1),this.setTemplate({tag:"span",children:this.children,attributes:{class:["ck","ck-list-item-button__check-holder",e.to("isOn",n=>n?"ck-on":"ck-off")]}})}render(){super.render(),this.isOn&&this.children.add(this._checkIconView,0),this._watchCheckIconMount()}_watchCheckIconMount(){this.on("change:isOn",(e,n,s)=>{const{children:o,_checkIconView:r}=this;s&&!o.has(r)?o.add(r):!s&&o.has(r)&&o.remove(r)})}_createCheckIconView(){const e=new os;return e.content=Pp,e.extendTemplate({attributes:{class:"ck-list-item-button__check-icon"}}),e}}class Jn extends Oc{constructor(t){super(t),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}class Qi extends fe{constructor(e){super(e);_(this,"id");this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${si()}`;const n=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:n.to("for")},children:[{text:n.to("text")}]})}}class sZ extends fe{constructor(t,e){super(t);const n=t.t,s=new Qi;s.text=n("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":s.id,role:"document",tabindex:-1},children:[ps(document,"p",{},n("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(e.values())),s]})}focus(){this.element.focus()}_createCategories(t){return t.map(e=>{const n=[ps(document,"h3",{},e.label),...Array.from(e.groups.values()).map(s=>this._createGroup(s)).flat()];return e.description&&n.splice(1,0,ps(document,"p",{},e.description)),ps(document,"section",{},n)})}_createGroup(t){const e=t.keystrokes.sort((s,o)=>s.label.localeCompare(o.label)).map(s=>this._createGroupRow(s)).flat(),n=[ps(document,"dl",{},e)];return t.label&&n.unshift(ps(document,"h4",{},t.label)),n}_createGroupRow(t){const e=this.locale.t,n=ps(document,"dt"),s=ps(document,"dd"),o=rZ(t.keystroke),r=[];for(const a of o)r.push(a.map(oZ).join(""));return n.innerHTML=t.label,s.innerHTML=r.join(", ")+(t.mayRequireFn&&Se.isMac?` ${e("(may require <kbd>Fn</kbd>)")}`:""),[n,s]}}function oZ(i){return Tg(i).split("+").map(t=>`<kbd>${t}</kbd>`).join("+")}function rZ(i){return typeof i=="string"?[[i]]:typeof i[0]=="string"?[i]:i}class aZ extends te{constructor(){super(...arguments);_(this,"contentView",null)}static get requires(){return[xc]}static get pluginName(){return"AccessibilityHelp"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.locale.t;e.ui.componentFactory.add("accessibilityHelp",()=>{const s=this._createButton(ke);return s.set({tooltip:!0,withText:!1,label:n("Accessibility help")}),s}),e.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{const s=this._createButton(Jn);return s.label=n("Accessibility"),s}),e.keystrokes.set("Alt+0",(s,o)=>{this._toggleDialog(),o()}),this._setupRootLabels()}_createButton(e){const n=this.editor,s=n.plugins.get("Dialog"),o=n.locale,r=new e(o);return r.set({keystroke:"Alt+0",icon:vA,isToggleable:!0}),r.on("execute",()=>this._toggleDialog()),r.bind("isOn").to(s,"id",a=>a==="accessibilityHelp"),r}_setupRootLabels(){const e=this.editor,n=e.editing.view,s=e.t;e.ui.on("ready",()=>{n.change(r=>{for(const a of n.document.roots)o(r,a)}),e.on("addRoot",(r,a)=>{const l=e.editing.view.document.getRoot(a.rootName);n.change(u=>o(u,l))},{priority:"low"})});function o(r,a){const u=[a.getAttribute("aria-label"),s("Press %0 for help.",[Tg("Alt+0")])].filter(h=>h).join(". ");r.setAttribute("aria-label",u,a)}}_toggleDialog(){const e=this.editor,n=e.plugins.get("Dialog"),s=e.locale.t;this.contentView||(this.contentView=new sZ(e.locale,e.accessibility.keystrokeInfos)),n.id==="accessibilityHelp"?n.hide():n.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:s("Accessibility help"),icon:vA,hasCloseButton:!0,content:this.contentView})}}const Ji=class Ji extends Sn{constructor(e,n=[]){super(n);_(this,"locale");_(this,"_bodyCollectionContainer");this.locale=e}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new Ti({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection,role:"application"},children:this}).render(),(!Ji._bodyWrapper||!Ji._bodyWrapper.isConnected)&&(Ji._bodyWrapper=ps(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(Ji._bodyWrapper)),Ji._bodyWrapper.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove(),Ji._bodyWrapper&&!Ji._bodyWrapper.childElementCount&&(Ji._bodyWrapper.remove(),delete Ji._bodyWrapper)}};_(Ji,"_bodyWrapper");let sv=Ji;class Vp extends ke{constructor(e){super(e);_(this,"toggleSwitchView");this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const e=new fe;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}}class YA extends eN(ke){}class lZ extends eN(Oc){}function eN(i){class t extends i{constructor(...s){super(...s);_(this,"buttonView");_(this,"_fileInputView");this.buttonView=this,this._fileInputView=new cZ(this.locale),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}return t}class cZ extends fe{constructor(t){super(t),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const e=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:e.to("acceptedType"),multiple:e.to("allowMultipleFiles")},on:{change:e.to(()=>{var n,s;(s=(n=this.element)==null?void 0:n.files)!=null&&s.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}class uZ extends fe{constructor(e,n){super(e);_(this,"buttonView");_(this,"children");const s=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),n&&this.children.addMany(n),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",s.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:s.if("isCollapsed","hidden"),"aria-labelledby":s.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}focus(){this.buttonView.focus()}_createButtonView(){const e=new ke(this.locale),n=e.bindTemplate;return e.set({withText:!0,icon:Mp}),e.extendTemplate({attributes:{"aria-expanded":n.to("isOn",s=>String(s))}}),e.bind("label").to(this),e.bind("isOn").to(this,"isCollapsed",s=>!s),e.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),e}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function sh(i,t){const e=i.t,n={Black:e("Black"),"Dim grey":e("Dim grey"),Grey:e("Grey"),"Light grey":e("Light grey"),White:e("White"),Red:e("Red"),Orange:e("Orange"),Yellow:e("Yellow"),"Light green":e("Light green"),Green:e("Green"),Aquamarine:e("Aquamarine"),Turquoise:e("Turquoise"),"Light blue":e("Light blue"),Blue:e("Blue"),Purple:e("Purple")};return t.map(s=>{const o=n[s.label];return o&&o!=s.label&&(s.label=o),s})}function oh(i){return i.map(dZ).filter(t=>!!t)}function dZ(i){return typeof i=="string"?{model:i,label:i,hasBorder:!1,view:{name:"span",styles:{color:i}}}:{model:i.color,label:i.label||i.color,hasBorder:i.hasBorder===void 0?!1:i.hasBorder,view:{name:"span",styles:{color:`${i.color}`}}}}class tN extends ke{constructor(t){super(t);const e=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon=Bj,this.extendTemplate({attributes:{style:{backgroundColor:e.to("color",n=>Se.isMediaForcedColors?null:n)},class:["ck","ck-color-grid__tile",e.if("hasBorder","ck-color-selector__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}class JA extends fe{constructor(e,n){super(e);_(this,"columns");_(this,"items");_(this,"focusTracker");_(this,"keystrokes");const s=n&&n.colorDefinitions?n.colorDefinitions:[];this.columns=(n==null?void 0:n.columns)||5;const o={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new wt,this.keystrokes=new Dt,this.items.on("add",(r,a)=>{a.isOn=a.color===this.selectedColor}),s.forEach(r=>{const a=new tN;a.set({color:r.color,label:r.label,tooltip:!0,hasBorder:r.options.hasBorder}),a.on("execute",()=>{this.fire("execute",{value:r.color,hasBorder:r.options.hasBorder,label:r.label})}),this.items.add(a)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:o}}),this.on("change:selectedColor",(r,a,l)=>{for(const u of this.items)u.isOn=u.color===l})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){var e;super.render();for(const n of this.items)this.focusTracker.add(n.element);this.items.on("add",(n,s)=>{this.focusTracker.add(s.element)}),this.items.on("remove",(n,s)=>{this.focusTracker.remove(s.element)}),this.keystrokes.listenTo(this.element),J0({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:(e=this.locale)==null?void 0:e.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function nN(i,t){if(!i)return"";const e=iN(i);if(!e)return"";if(e.space===t)return i;if(!gZ(e))return"";const s=WV[e.space][t];if(!s)return"";const o=s(e.space==="hex"?e.hexValue:e.values);return mZ(o,t)}function hZ(i){if(!i)return"";const t=iN(i);return t?t.space==="hex"?t.hexValue:nN(i,"hex"):"#000"}function fZ(i,t){customElements.get(i)===void 0&&customElements.define(i,t)}function mZ(i,t){switch(t){case"hex":return`#${i}`;case"rgb":return`rgb(${i[0]}, ${i[1]}, ${i[2]})`;case"hsl":return`hsl(${i[0]}, ${i[1]}%, ${i[2]}%)`;case"hwb":return`hwb(${i[0]}, ${i[1]}, ${i[2]})`;case"lab":return`lab(${i[0]}% ${i[1]} ${i[2]})`;case"lch":return`lch(${i[0]}% ${i[1]} ${i[2]})`;default:return""}}function iN(i){if(i.startsWith("#")){const e=MA(i);return{space:"hex",values:e.values,hexValue:i,alpha:e.alpha}}const t=MA(i);return t.space?t:null}function gZ(i){return Object.keys(WV).includes(i.space)}class sn extends fe{constructor(e,n){super(e);_(this,"fieldView");_(this,"labelView");_(this,"statusView");_(this,"fieldWrapperChildren");const s=`ck-labeled-field-view-${si()}`,o=`ck-labeled-field-view-status-${si()}`;this.fieldView=n(this,s,o),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(s),this.statusView=this._createStatusView(o),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(a,l)=>a||l);const r=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",r.to("class"),r.if("isEnabled","ck-disabled",a=>!a),r.if("isEmpty","ck-labeled-field-view_empty"),r.if("isFocused","ck-labeled-field-view_focused"),r.if("placeholder","ck-labeled-field-view_placeholder"),r.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(e){const n=new Qi(this.locale);return n.for=e,n.bind("text").to(this,"label"),n}_createStatusView(e){const n=new fe(this.locale),s=this.bindTemplate;return n.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",s.if("errorText","ck-labeled-field-view__status_error"),s.if("_statusText","ck-hidden",o=>!o)],id:e,role:s.if("errorText","alert")},children:[{text:s.to("_statusText")}]}),n}focus(e){this.fieldView.focus(e)}}class pZ extends fe{constructor(e){super(e);_(this,"focusTracker");this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new wt,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const n=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",n.if("isFocused","ck-input_focused"),n.if("isEmpty","ck-input-text_empty"),n.if("hasError","ck-error")],id:n.to("id"),placeholder:n.to("placeholder"),tabindex:n.to("tabIndex"),readonly:n.to("isReadOnly"),"aria-invalid":n.if("hasError",!0),"aria-describedby":n.to("ariaDescribedById"),"aria-label":n.to("ariaLabel")},on:{input:n.to((...s)=>{this.fire("input",...s),this._updateIsEmpty()}),change:n.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(e,n,s)=>{this._setDomElementValue(s),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=bZ(this.element)}_setDomElementValue(e){this.element.value=!e&&e!==0?"":e}}function bZ(i){return!i.value}class sN extends pZ{constructor(t){super(t),this.set("inputMode","text");const e=this.bindTemplate;this.extendTemplate({attributes:{inputmode:e.to("inputMode")}})}}class oN extends sN{constructor(t){super(t),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}class _Z extends sN{constructor(t,{min:e,max:n,step:s}={}){super(t);const o=this.bindTemplate;this.set("min",e),this.set("max",n),this.set("step",s),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:o.to("min"),max:o.to("max"),step:o.to("step")}})}}class wZ extends fe{constructor(e){super(e);_(this,"children");const n=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",n.to("position",s=>`ck-dropdown__panel_${s}`),n.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:n.to(s=>{s.target.tagName.toLocaleLowerCase()!=="input"&&s.preventDefault()})}})}focus(){if(this.children.length){const e=this.children.first;typeof e.focus=="function"?e.focus():Ze("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const e=this.children.last;typeof e.focusLast=="function"?e.focusLast():e.focus()}}}const hc=class hc extends fe{constructor(e,n,s){super(e);_(this,"buttonView");_(this,"panelView");_(this,"focusTracker");_(this,"keystrokes");_(this,"listView");_(this,"toolbarView");_(this,"menuView");const o=this.bindTemplate;this.buttonView=n,this.panelView=s,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Dt,this.focusTracker=new wt,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",o.to("class"),o.if("isEnabled","ck-disabled",r=>!r)],id:o.to("id"),"aria-describedby":o.to("ariaDescribedById")},children:[n,s]}),n.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":o.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(n,s,o)=>{if(o)if(this.panelPosition==="auto"){const r=hc._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=r?r.name:this._defaultPanelPositionName}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const e=(n,s)=>{this.isOpen&&(this.isOpen=!1,s())};this.keystrokes.set("arrowdown",(n,s)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,s())}),this.keystrokes.set("arrowright",(n,s)=>{this.isOpen&&s()}),this.keystrokes.set("arrowleft",e),this.keystrokes.set("esc",e)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:e,north:n,southEast:s,southWest:o,northEast:r,northWest:a,southMiddleEast:l,southMiddleWest:u,northMiddleEast:h,northMiddleWest:m}=hc.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[s,o,l,u,e,r,a,h,m,n]:[o,s,u,l,e,a,r,m,h,n]}get _defaultPanelPositionName(){return this.locale.uiLanguageDirection==="rtl"?"sw":"se"}};_(hc,"defaultPanelPositions",{south:(e,n)=>({top:e.bottom,left:e.left-(n.width-e.width)/2,name:"s"}),southEast:e=>({top:e.bottom,left:e.left,name:"se"}),southWest:(e,n)=>({top:e.bottom,left:e.left-n.width+e.width,name:"sw"}),southMiddleEast:(e,n)=>({top:e.bottom,left:e.left-(n.width-e.width)/4,name:"sme"}),southMiddleWest:(e,n)=>({top:e.bottom,left:e.left-(n.width-e.width)*3/4,name:"smw"}),north:(e,n)=>({top:e.top-n.height,left:e.left-(n.width-e.width)/2,name:"n"}),northEast:(e,n)=>({top:e.top-n.height,left:e.left,name:"ne"}),northWest:(e,n)=>({top:e.top-n.height,left:e.left-n.width+e.width,name:"nw"}),northMiddleEast:(e,n)=>({top:e.top-n.height,left:e.left-(n.width-e.width)/4,name:"nme"}),northMiddleWest:(e,n)=>({top:e.top-n.height,left:e.left-(n.width-e.width)*3/4,name:"nmw"})}),_(hc,"_getOptimalPosition",k0);let ov=hc;class rN extends ke{constructor(e){super(e);_(this,"arrowView");this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",n=>String(n))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new os;return e.content=Mp,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}}class rs extends fe{constructor(e){super(e);_(this,"children");const n=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",n.if("isVisible","ck-hidden",s=>!s)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}}class X0 extends fe{constructor(t){super(t),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}class Gm extends fe{constructor(e,n=new Qi){super(e);_(this,"labelView");_(this,"items");_(this,"children");const s=this.bindTemplate,o=new ja(e);this.set({label:"",isVisible:!0}),this.labelView=n,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,o]),o.set({role:"group",ariaLabelledBy:n.id}),o.focusTracker.destroy(),o.keystrokes.destroy(),this.items=o.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",s.if("isVisible","ck-hidden",r=>!r)]},children:this.children})}focus(){if(this.items){const e=this.items.find(n=>!(n instanceof X0));e&&e.focus()}}}class ja extends fe{constructor(e){super(e);_(this,"focusables");_(this,"items");_(this,"focusTracker");_(this,"keystrokes");_(this,"_focusCycler");_(this,"_listItemGroupToChangeListeners",new WeakMap);const n=this.bindTemplate;this.focusables=new Sn,this.items=this.createCollection(),this.focusTracker=new wt,this.keystrokes=new Dt,this._focusCycler=new cn({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:n.to("role"),"aria-label":n.to("ariaLabel"),"aria-labelledby":n.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(const e of this.items)e instanceof Gm?this._registerFocusableItemsGroup(e):e instanceof rs&&this._registerFocusableListItem(e);this.items.on("change",(e,n)=>{for(const s of n.removed)s instanceof Gm?this._deregisterFocusableItemsGroup(s):s instanceof rs&&this._deregisterFocusableListItem(s);for(const s of Array.from(n.added).reverse())s instanceof Gm?this._registerFocusableItemsGroup(s,n.index):this._registerFocusableListItem(s,n.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(e,n){this.focusTracker.add(e.element),this.focusables.add(e,n)}_deregisterFocusableListItem(e){this.focusTracker.remove(e.element),this.focusables.remove(e)}_getOnGroupItemsChangeCallback(e){return(n,s)=>{for(const o of s.removed)this._deregisterFocusableListItem(o);for(const o of Array.from(s.added).reverse())this._registerFocusableListItem(o,this.items.getIndex(e)+s.index)}}_registerFocusableItemsGroup(e,n){Array.from(e.items).forEach((o,r)=>{const a=typeof n<"u"?n+r:void 0;this._registerFocusableListItem(o,a)});const s=this._getOnGroupItemsChangeCallback(e);this._listItemGroupToChangeListeners.set(e,s),e.items.on("change",s)}_deregisterFocusableItemsGroup(e){for(const n of e.items)this._deregisterFocusableListItem(n);e.items.off("change",this._listItemGroupToChangeListeners.get(e)),this._listItemGroupToChangeListeners.delete(e)}}const XA=Nc("px"),yZ={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}},Mi=class Mi extends fe{constructor(e){super(e);_(this,"content");_(this,"_pinWhenIsVisibleCallback");_(this,"_resizeObserver");const n=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this._resizeObserver=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",n.to("position",s=>`ck-balloon-panel_${s}`),n.if("isVisible","ck-balloon-panel_visible"),n.if("withArrow","ck-balloon-panel_with-arrow"),n.to("class")],style:{top:n.to("top",XA),left:n.to("left",XA)}},children:this.content})}destroy(){this.hide(),super.destroy()}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(e){const n=jm(e.target);if(n&&!Vo(n))return!1;this.show();const s=Mi.defaultPositions,o=Object.assign({},{element:this.element,positions:[s.southArrowNorth,s.southArrowNorthMiddleWest,s.southArrowNorthMiddleEast,s.southArrowNorthWest,s.southArrowNorthEast,s.northArrowSouth,s.northArrowSouthMiddleWest,s.northArrowSouthMiddleEast,s.northArrowSouthWest,s.northArrowSouthEast,s.viewportStickyNorth],limiter:de.document.body,fitInViewport:!0},e),r=Mi._getOptimalPosition(o)||yZ,a=parseInt(r.left),l=parseInt(r.top),u=r.name,h=r.config||{},{withArrow:m=!0}=h;return this.top=l,this.left=a,this.position=u,this.withArrow=m,!0}pin(e){this.unpin(),this._startPinning(e)&&(this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(e):this._stopPinning()},this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback))}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(e){if(!this.attachTo(e))return!1;let n=jm(e.target);const s=e.limiter?jm(e.limiter):de.document.body;if(this.listenTo(de.document,"scroll",(o,r)=>{const a=r.target,l=n&&a.contains(n),u=s&&a.contains(s);(l||u||!n||!s)&&this.attachTo(e)},{useCapture:!0}),this.listenTo(de.window,"resize",()=>{this.attachTo(e)}),!this._resizeObserver&&(n&&$t(n)&&(n=n.parentElement),n)){const o=()=>{Vo(n)||this.unpin()};this._resizeObserver=new x0(n,o)}return!0}_stopPinning(){this.stopListening(de.document,"scroll"),this.stopListening(de.window,"resize"),this._resizeObserver&&(this._resizeObserver.destroy(),this._resizeObserver=null)}static generatePositions(e={}){const{sideOffset:n=Mi.arrowSideOffset,heightOffset:s=Mi.arrowHeightOffset,stickyVerticalOffset:o=Mi.stickyVerticalOffset,config:r}=e;return{northWestArrowSouthWest:(u,h)=>({top:a(u,h),left:u.left-n,name:"arrow_sw",...r&&{config:r}}),northWestArrowSouthMiddleWest:(u,h)=>({top:a(u,h),left:u.left-h.width*.25-n,name:"arrow_smw",...r&&{config:r}}),northWestArrowSouth:(u,h)=>({top:a(u,h),left:u.left-h.width/2,name:"arrow_s",...r&&{config:r}}),northWestArrowSouthMiddleEast:(u,h)=>({top:a(u,h),left:u.left-h.width*.75+n,name:"arrow_sme",...r&&{config:r}}),northWestArrowSouthEast:(u,h)=>({top:a(u,h),left:u.left-h.width+n,name:"arrow_se",...r&&{config:r}}),northArrowSouthWest:(u,h)=>({top:a(u,h),left:u.left+u.width/2-n,name:"arrow_sw",...r&&{config:r}}),northArrowSouthMiddleWest:(u,h)=>({top:a(u,h),left:u.left+u.width/2-h.width*.25-n,name:"arrow_smw",...r&&{config:r}}),northArrowSouth:(u,h)=>({top:a(u,h),left:u.left+u.width/2-h.width/2,name:"arrow_s",...r&&{config:r}}),northArrowSouthMiddleEast:(u,h)=>({top:a(u,h),left:u.left+u.width/2-h.width*.75+n,name:"arrow_sme",...r&&{config:r}}),northArrowSouthEast:(u,h)=>({top:a(u,h),left:u.left+u.width/2-h.width+n,name:"arrow_se",...r&&{config:r}}),northEastArrowSouthWest:(u,h)=>({top:a(u,h),left:u.right-n,name:"arrow_sw",...r&&{config:r}}),northEastArrowSouthMiddleWest:(u,h)=>({top:a(u,h),left:u.right-h.width*.25-n,name:"arrow_smw",...r&&{config:r}}),northEastArrowSouth:(u,h)=>({top:a(u,h),left:u.right-h.width/2,name:"arrow_s",...r&&{config:r}}),northEastArrowSouthMiddleEast:(u,h)=>({top:a(u,h),left:u.right-h.width*.75+n,name:"arrow_sme",...r&&{config:r}}),northEastArrowSouthEast:(u,h)=>({top:a(u,h),left:u.right-h.width+n,name:"arrow_se",...r&&{config:r}}),southWestArrowNorthWest:u=>({top:l(u),left:u.left-n,name:"arrow_nw",...r&&{config:r}}),southWestArrowNorthMiddleWest:(u,h)=>({top:l(u),left:u.left-h.width*.25-n,name:"arrow_nmw",...r&&{config:r}}),southWestArrowNorth:(u,h)=>({top:l(u),left:u.left-h.width/2,name:"arrow_n",...r&&{config:r}}),southWestArrowNorthMiddleEast:(u,h)=>({top:l(u),left:u.left-h.width*.75+n,name:"arrow_nme",...r&&{config:r}}),southWestArrowNorthEast:(u,h)=>({top:l(u),left:u.left-h.width+n,name:"arrow_ne",...r&&{config:r}}),southArrowNorthWest:u=>({top:l(u),left:u.left+u.width/2-n,name:"arrow_nw",...r&&{config:r}}),southArrowNorthMiddleWest:(u,h)=>({top:l(u),left:u.left+u.width/2-h.width*.25-n,name:"arrow_nmw",...r&&{config:r}}),southArrowNorth:(u,h)=>({top:l(u),left:u.left+u.width/2-h.width/2,name:"arrow_n",...r&&{config:r}}),southArrowNorthMiddleEast:(u,h)=>({top:l(u),left:u.left+u.width/2-h.width*.75+n,name:"arrow_nme",...r&&{config:r}}),southArrowNorthEast:(u,h)=>({top:l(u),left:u.left+u.width/2-h.width+n,name:"arrow_ne",...r&&{config:r}}),southEastArrowNorthWest:u=>({top:l(u),left:u.right-n,name:"arrow_nw",...r&&{config:r}}),southEastArrowNorthMiddleWest:(u,h)=>({top:l(u),left:u.right-h.width*.25-n,name:"arrow_nmw",...r&&{config:r}}),southEastArrowNorth:(u,h)=>({top:l(u),left:u.right-h.width/2,name:"arrow_n",...r&&{config:r}}),southEastArrowNorthMiddleEast:(u,h)=>({top:l(u),left:u.right-h.width*.75+n,name:"arrow_nme",...r&&{config:r}}),southEastArrowNorthEast:(u,h)=>({top:l(u),left:u.right-h.width+n,name:"arrow_ne",...r&&{config:r}}),westArrowEast:(u,h)=>({top:u.top+u.height/2-h.height/2,left:u.left-h.width-s,name:"arrow_e",...r&&{config:r}}),eastArrowWest:(u,h)=>({top:u.top+u.height/2-h.height/2,left:u.right+s,name:"arrow_w",...r&&{config:r}}),viewportStickyNorth:(u,h,m)=>{const p=new Pe(de.document.body).getIntersection(m.getVisible());if(!p)return null;const v=p.getVisible();return!u.getIntersection(v)||!(v.top-u.top-o<h.height&&v.bottom-u.bottom<h.height)?null:{top:v.top+o,left:u.left+u.width/2-h.width/2,name:"arrowless",config:{withArrow:!1,...r}}}};function a(u,h){return u.top-h.height-s}function l(u){return u.bottom+s}}};_(Mi,"arrowSideOffset",25),_(Mi,"arrowHeightOffset",10),_(Mi,"stickyVerticalOffset",20),_(Mi,"_getOptimalPosition",k0),_(Mi,"defaultPositions",Mi.generatePositions());let Qn=Mi;function jm(i){return Pr(i)?i:xp(i)?i.commonAncestorContainer:typeof i=="function"?jm(i()):null}class aN extends fe{constructor(t){super(t),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class vZ extends fe{constructor(t){super(t),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function CZ(i){return i.bindTemplate.to(t=>{t.target===i.element&&t.preventDefault()})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function lN(i){if(Array.isArray(i))return{items:i,removeItems:[]};const t={items:[],removeItems:[]};return i?{...t,...i}:t}const TZ={alignLeft:$0,bold:VV,importExport:Kj,paragraph:oK,plus:lK,text:wK,threeVerticalDots:j0,pilcrow:aK,dragIndicator:Uj};class Da extends fe{constructor(e,n){super(e);_(this,"options");_(this,"items");_(this,"focusTracker");_(this,"keystrokes");_(this,"itemsView");_(this,"children");_(this,"focusables");_(this,"_focusCycler");_(this,"_behavior");const s=this.bindTemplate,o=this.t;this.options=n||{},this.set("ariaLabel",o("Editor toolbar")),this.set("maxWidth","auto"),this.set("role","toolbar"),this.set("isGrouping",!!this.options.shouldGroupWhenFull),this.items=this.createCollection(),this.focusTracker=new wt,this.keystrokes=new Dt,this.set("class",void 0),this.set("isCompact",!1),this.set("isVertical",!1),this.itemsView=new xZ(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const r=e.uiLanguageDirection==="rtl";this._focusCycler=new cn({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[r?"arrowright":"arrowleft","arrowup"],focusNext:[r?"arrowleft":"arrowright","arrowdown"]}});const a=["ck","ck-toolbar",s.to("class"),s.if("isCompact","ck-toolbar_compact"),s.if("isGrouping","ck-toolbar_grouping"),s.if("isVertical","ck-toolbar_vertical")];this.options.shouldGroupWhenFull&&this.options.isFloating&&a.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:a,role:s.to("role"),"aria-label":s.to("ariaLabel"),style:{maxWidth:s.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:CZ(this)}}),this._behavior=this.options.shouldGroupWhenFull?new e2(this):new QA(this)}render(){super.render(),this.focusTracker.add(this.element);for(const e of this.items)this.focusTracker.add(e);this.items.on("add",(e,n)=>{this.focusTracker.add(n)}),this.items.on("remove",(e,n)=>{this.focusTracker.remove(n)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,n,s){this.items.addMany(this._buildItemsFromConfig(e,n,s))}switchBehavior(e){this._behavior.type!==e&&(this._behavior.destroy(),this.itemsView.children.clear(),this.focusables.clear(),e==="dynamic"?(this._behavior=new e2(this),this._behavior.render(this),this._behavior.refreshItems()):(this._behavior=new QA(this),this._behavior.render(this)))}_buildItemsFromConfig(e,n,s){const o=lN(e),r=s||o.removeItems;return this._cleanItemsConfiguration(o.items,n,r).map(l=>is(l)?this._createNestedToolbarDropdown(l,n,r):l==="|"?new aN:l==="-"?new vZ:n.create(l)).filter(l=>!!l)}_cleanItemsConfiguration(e,n,s){const o=e.filter((r,a,l)=>r==="|"?!0:s.indexOf(r)!==-1?!1:r==="-"?this.options.shouldGroupWhenFull?(Ze("toolbarview-line-break-ignored-when-grouping-items",l),!1):!0:!is(r)&&!n.has(r)?(Ze("toolbarview-item-unavailable",{item:r}),!1):!0);return this._cleanSeparatorsAndLineBreaks(o)}_cleanSeparatorsAndLineBreaks(e){const n=a=>a!=="-"&&a!=="|",s=e.length,o=e.findIndex(n);if(o===-1)return[];const r=s-e.slice().reverse().findIndex(n);return e.slice(o,r).filter((a,l,u)=>n(a)?!0:!(l>0&&u[l-1]===a))}_createNestedToolbarDropdown(e,n,s){let{label:o,icon:r,items:a,tooltip:l=!0,withText:u=!1}=e;if(a=this._cleanItemsConfiguration(a,n,s),!a.length)return null;const h=this.locale,m=ii(h);return o||Ze("toolbarview-nested-toolbar-dropdown-missing-label",e),m.class="ck-toolbar__nested-toolbar-dropdown",m.buttonView.set({label:o,tooltip:l,withText:!!u}),r!==!1?m.buttonView.icon=TZ[r]||r||j0:m.buttonView.withText=!0,Dp(m,()=>m.toolbarView._buildItemsFromConfig(a,n,s)),m}}class xZ extends fe{constructor(e){super(e);_(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class QA{constructor(t){_(this,"type","static");t.isGrouping=!1,t.itemsView.children.bindTo(t.items).using(e=>e),t.focusables.bindTo(t.items).using(e=>Dc(e)?e:null)}render(){}destroy(){}}class e2{constructor(t){_(this,"type","dynamic");_(this,"view");_(this,"viewChildren");_(this,"viewFocusables");_(this,"viewItemsView");_(this,"viewFocusTracker");_(this,"viewLocale");_(this,"ungroupedItems");_(this,"groupedItems");_(this,"groupedItemsDropdown");_(this,"resizeObserver",null);_(this,"cachedPadding",null);_(this,"shouldUpdateGroupingOnNextResize",!1);_(this,"viewElement");this.view=t,this.viewChildren=t.children,this.viewFocusables=t.focusables,this.viewItemsView=t.itemsView,this.viewFocusTracker=t.focusTracker,this.viewLocale=t.locale,this.view.isGrouping=!0,this.ungroupedItems=t.createCollection(),this.groupedItems=t.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),t.itemsView.children.bindTo(this.ungroupedItems).using(e=>e),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),t.children.on("change",this._updateFocusCyclableItems.bind(this)),t.items.on("change",(e,n)=>{const s=n.index,o=Array.from(n.added);for(const r of n.removed)s>=this.ungroupedItems.length?this.groupedItems.remove(r):this.ungroupedItems.remove(r);for(let r=s;r<s+o.length;r++){const a=o[r-s];r>this.ungroupedItems.length?this.groupedItems.add(a,r-this.ungroupedItems.length):this.ungroupedItems.add(a,r)}this._updateGrouping()})}render(t){this.viewElement=t.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(t)}destroy(){this.groupedItemsDropdown.destroy(),this.viewChildren.length>1&&(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last)),this.resizeObserver.destroy()}refreshItems(){const t=this.view;if(t.items.length){for(let e=0;e<t.items.length;e++){const n=[...t.items][e];this.ungroupedItems.add(n,e)}this._updateGrouping()}}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!Vo(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}const t=this.groupedItems.length;let e;for(;this._areItemsOverflowing;)this._groupLastItem(),e=!0;if(!e&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==t&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const t=this.viewElement,e=this.viewLocale.uiLanguageDirection,n=new Pe(t.lastChild),s=new Pe(t);if(!this.cachedPadding){const o=de.window.getComputedStyle(t),r=e==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(o[r])}return e==="ltr"?n.right>s.right-this.cachedPadding:n.left<s.left+this.cachedPadding}_enableGroupingOnResize(){let t;this.resizeObserver=new x0(this.viewElement,e=>{(!t||t!==e.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),t=e.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(t){t.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new aN),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const t=this.viewLocale,e=t.t,n=ii(t);return n.class="ck-toolbar__grouped-dropdown",n.panelPosition=t.uiLanguageDirection==="ltr"?"sw":"se",Dp(n,this.groupedItems),n.buttonView.set({label:e("Show more items"),tooltip:!0,tooltipPosition:t.uiLanguageDirection==="rtl"?"se":"sw",icon:j0}),n}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(t=>{Dc(t)&&this.viewFocusables.add(t)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}class Np extends fe{constructor(e,n){super(e);_(this,"children");_(this,"actionView");_(this,"arrowView");_(this,"keystrokes");_(this,"focusTracker");const s=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(n),this.arrowView=this._createArrowView(),this.keystrokes=new Dt,this.focusTracker=new wt,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",s.to("class"),s.if("isVisible","ck-hidden",o=>!o),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(e,n)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),n())}),this.keystrokes.set("arrowleft",(e,n)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),n())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(e){const n=e||new ke;return e||n.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),n.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),n.delegate("execute").to(this),n}_createArrowView(){const e=new ke,n=e.bindTemplate;return e.icon=Mp,e.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":n.to("isOn"),"aria-haspopup":!0,"aria-expanded":n.to("isOn",s=>String(s))}}),e.bind("isEnabled").to(this),e.bind("label").to(this),e.bind("tooltip").to(this),e.delegate("execute").to(this,"open"),e}}function ii(i,t=rN){const e=typeof t=="function"?new t(i):t,n=new wZ(i),s=new ov(i,e,n);return e.bind("isEnabled").to(s),e instanceof Np?e.arrowView.bind("isOn").to(s,"isOpen"):e.bind("isOn").to(s,"isOpen"),kZ(s),s}function Dp(i,t,e={}){i.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),i.isOpen?t2(i,t,e):i.once("change:isOpen",()=>t2(i,t,e),{priority:"highest"}),e.enableActiveItemFocusOnDropdownOpen&&Q0(i,()=>i.toolbarView.items.find(n=>n.isOn))}function t2(i,t,e){const n=i.locale,s=n.t,o=i.toolbarView=new Da(n),r=typeof t=="function"?t():t;o.ariaLabel=e.ariaLabel||s("Dropdown toolbar"),e.maxWidth&&(o.maxWidth=e.maxWidth),e.class&&(o.class=e.class),e.isCompact&&(o.isCompact=e.isCompact),e.isVertical&&(o.isVertical=!0),r instanceof Sn?o.items.bindTo(r).using(a=>a):o.items.addMany(r),i.panelView.children.add(o),i.focusTracker.add(o),o.items.delegate("execute").to(i)}function Ka(i,t,e={}){i.isOpen?n2(i,t,e):i.once("change:isOpen",()=>n2(i,t,e),{priority:"highest"}),Q0(i,()=>i.listView.items.find(n=>n instanceof rs?n.children.first.isOn:!1))}function n2(i,t,e){const n=i.locale,s=i.listView=new ja(n),o=typeof t=="function"?t():t;s.ariaLabel=e.ariaLabel,s.role=e.role,uN(i,s.items,o,n),i.panelView.children.add(s),s.items.delegate("execute").to(i)}function Q0(i,t){i.on("change:isOpen",()=>{if(!i.isOpen)return;const e=t();e&&(typeof e.focus=="function"?e.focus():Ze("ui-dropdown-focus-child-on-open-child-missing-focus",{view:e}))},{priority:Sa.low-10})}function kZ(i){EZ(i),SZ(i),AZ(i),RZ(i),IZ(i),PZ(i)}function EZ(i){Uo({emitter:i,activator:()=>i.isRendered&&i.isOpen,callback:()=>{i.isOpen=!1},contextElements:()=>[i.element,...cN(i.focusTracker).filter(t=>!i.element.contains(t))]})}function cN(i){return[...i.elements,...i.externalViews.flatMap(t=>cN(t.focusTracker))]}function SZ(i){i.on("execute",t=>{t.source instanceof Vp||(i.isOpen=!1)})}function AZ(i){i.focusTracker.on("change:isFocused",(t,e,n)=>{n||!i.isOpen||(i.isOpen=!1)})}function RZ(i){i.keystrokes.set("arrowdown",(t,e)=>{i.isOpen&&(i.panelView.focus(),e())}),i.keystrokes.set("arrowup",(t,e)=>{i.isOpen&&(i.panelView.focusLast(),e())})}function IZ(i){i.on("change:isOpen",(t,e,n)=>{if(n)return;i.focusTracker.elements.some(o=>o.contains(de.document.activeElement))&&i.buttonView.focus()})}function PZ(i){i.on("change:isOpen",(t,e,n)=>{n&&i.panelView.focus()},{priority:"low"})}function uN(i,t,e,n){MZ(t),t.bindTo(e).using(s=>{if(s.type==="separator")return new X0(n);if(s.type==="group"){const o=new Gm(n);return o.set({label:s.label}),uN(i,o.items,s.items,n),o.items.delegate("execute").to(i),o}else if(s.type==="button"||s.type==="switchbutton"){const o=s.model.role==="menuitemcheckbox"||s.model.role==="menuitemradio",r=new rs(n);let a;return s.type==="button"?(a=new Oc(n),a.set({isToggleable:o})):a=new Vp(n),a.bind(...Object.keys(s.model)).to(s.model),a.delegate("execute").to(r),r.children.add(a),r}return null})}function MZ(i){let t=0;const e=o=>!(o instanceof rs)||!(o.children.first instanceof Oc)?null:o.children.first,n=o=>{const r=e(o);return!r||!r.isToggleable?null:r},s=o=>{for(const r of i){const a=e(r);a&&(a.hasCheckSpace=o)}};i.on("change",(o,r)=>{const a=t>0;for(const u of r.removed)n(u)&&t--;for(const u of r.added){const h=e(u);h&&(h.isToggleable&&t++,h.hasCheckSpace=t>0)}const l=t>0;a!==l&&s(l)})}const ti=(i,t,e)=>{const n=new oN(i.locale);return n.set({id:t,ariaDescribedById:e}),n.bind("isReadOnly").to(i,"isEnabled",s=>!s),n.bind("hasError").to(i,"errorText",s=>!!s),n.on("input",()=>{i.errorText=null}),i.bind("isEmpty","isFocused","placeholder").to(n),n},VZ=(i,t,e)=>{const n=new _Z(i.locale);return n.set({id:t,ariaDescribedById:e,inputMode:"numeric"}),n.bind("isReadOnly").to(i,"isEnabled",s=>!s),n.bind("hasError").to(i,"errorText",s=>!!s),n.on("input",()=>{i.errorText=null}),i.bind("isEmpty","isFocused","placeholder").to(n),n},dN=(i,t,e)=>{const n=ii(i.locale);return n.set({id:t,ariaDescribedById:e}),n.bind("isEnabled").to(i),n},NZ=150;class DZ extends fe{constructor(e,n={}){super(e);_(this,"hexInputRow");_(this,"_debounceColorPickerEvent");_(this,"_config");this.set({color:"",_hexColor:""}),this.hexInputRow=this._createInputRow();const s=this.createCollection();n.hideInput||s.add(this.hexInputRow),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker"],tabindex:-1},children:s}),this._config=n,this._debounceColorPickerEvent=ss(o=>{this.set("color",o),this.fire("colorSelected",{color:this.color})},NZ,{leading:!0}),this.on("set:color",(o,r,a)=>{o.return=nN(a,this._config.format||"hsl")}),this.on("change:color",()=>{this._hexColor=Yw(this.color)}),this.on("change:_hexColor",()=>{document.activeElement!==this.picker&&this.picker.setAttribute("color",this._hexColor),Yw(this.color)!=Yw(this._hexColor)&&(this.color=this._hexColor)})}render(){if(super.render(),fZ("hex-color-picker",HK),this.picker=de.document.createElement("hex-color-picker"),this.picker.setAttribute("class","hex-color-picker"),this.picker.setAttribute("tabindex","-1"),this._createSlidersView(),this.element){this.hexInputRow.element?this.element.insertBefore(this.picker,this.hexInputRow.element):this.element.appendChild(this.picker);const e=document.createElement("style");e.textContent='[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}',this.picker.shadowRoot.appendChild(e)}this.picker.addEventListener("color-changed",e=>{const n=e.detail.value;this._debounceColorPickerEvent(n)})}focus(){/* istanbul ignore next -- @preserve */!this._config.hideInput&&(Se.isGecko||Se.isiOS||Se.isSafari||Se.isBlink)&&this.hexInputRow.children.get(1).focus(),this.slidersView.first.focus()}_createSlidersView(){const s=[...this.picker.shadowRoot.children].filter(o=>o.getAttribute("role")==="slider").map(o=>new OZ(o));this.slidersView=this.createCollection(),s.forEach(o=>{this.slidersView.add(o)})}_createInputRow(){const e=this._createColorInput();return new BZ(this.locale,e)}_createColorInput(){const e=new sn(this.locale,ti),{t:n}=this.locale;return e.set({label:n("HEX"),class:"color-picker-hex-input"}),e.fieldView.bind("value").to(this,"_hexColor",s=>e.isFocused?e.fieldView.value:s.startsWith("#")?s.substring(1):s),e.fieldView.on("input",()=>{const s=e.fieldView.element.value;if(s){const o=hN(s);o&&this._debounceColorPickerEvent(o)}}),e}isValid(){const{t:e}=this.locale;return this._config.hideInput?!0:(this.resetValidationStatus(),this.hexInputRow.getParsedColor()?!0:(this.hexInputRow.inputView.errorText=e('Please enter a valid color (e.g. "ff0000").'),!1))}resetValidationStatus(){this.hexInputRow.inputView.errorText=null}}function Yw(i){let t=hZ(i);return t||(t="#000"),t.length===4&&(t="#"+[t[1],t[1],t[2],t[2],t[3],t[3]].join("")),t.toLowerCase()}class OZ extends fe{constructor(t){super(),this.element=t}focus(){this.element.focus()}}class LZ extends fe{constructor(t){super(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__hash-view"]},children:"#"})}}class BZ extends fe{constructor(e,n){super(e);_(this,"children");_(this,"inputView");this.inputView=n,this.children=this.createCollection([new LZ,this.inputView]),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__row"]},children:this.children})}getParsedColor(){return hN(this.inputView.fieldView.element.value)}}function hN(i){if(!i)return null;const t=i.trim().replace(/^#/,"");return![3,4,6,8].includes(t.length)||!/^(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})$/.test(t)?null:`#${t}`}class FZ extends _t(En){constructor(t){super(t),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",this.length===0)})}add(t,e){return this.find(n=>n.color===t.color)?this:super.add(t,e)}hasColor(t){return!!this.find(e=>e.color===t)}}class UZ extends fe{constructor(e,{colors:n,columns:s,removeButtonLabel:o,documentColorsLabel:r,documentColorsCount:a,colorPickerLabel:l,focusTracker:u,focusables:h}){super(e);_(this,"items");_(this,"colorDefinitions");_(this,"focusTracker");_(this,"columns");_(this,"documentColors");_(this,"documentColorsCount");_(this,"staticColorsGrid");_(this,"documentColorsGrid");_(this,"colorPickerButtonView");_(this,"removeColorButtonView");_(this,"_focusables");_(this,"_documentColorsLabel");_(this,"_removeButtonLabel");_(this,"_colorPickerLabel");const m=this.bindTemplate;this.set("isVisible",!0),this.focusTracker=u,this.items=this.createCollection(),this.colorDefinitions=n,this.columns=s,this.documentColors=new FZ,this.documentColorsCount=a,this._focusables=h,this._removeButtonLabel=o,this._colorPickerLabel=l,this._documentColorsLabel=r,this.setTemplate({tag:"div",attributes:{class:["ck-color-grids-fragment",m.if("isVisible","ck-hidden",p=>!p)]},children:this.items}),this.removeColorButtonView=this._createRemoveColorButton(),this.items.add(this.removeColorButtonView)}updateDocumentColors(e,n){const s=e.document,o=this.documentColorsCount;this.documentColors.clear();for(const r of s.getRoots()){const a=e.createRangeIn(r);for(const l of a.getItems())if(l.is("$textProxy")&&l.hasAttribute(n)&&(this._addColorToDocumentColors(l.getAttribute(n)),this.documentColors.length>=o))return}}updateSelectedColors(){const e=this.documentColorsGrid,n=this.staticColorsGrid,s=this.selectedColor;n.selectedColor=s,e&&(e.selectedColor=s)}render(){if(super.render(),this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount){const e=Ti.bind(this.documentColors,this.documentColors),n=new fe(this.locale);n.setTemplate({tag:"span",attributes:{class:["ck","ck-color-grid__label",e.if("isEmpty","ck-hidden")]},children:[{text:this._documentColorsLabel}]}),this.items.add(n),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}this._createColorPickerButton(),this._addColorSelectorElementsToFocusTracker()}focus(){this.removeColorButtonView.focus()}destroy(){super.destroy()}addColorPickerButton(){this.colorPickerButtonView&&(this.items.add(this.colorPickerButtonView),this.focusTracker.add(this.colorPickerButtonView.element),this._focusables.add(this.colorPickerButtonView))}_addColorSelectorElementsToFocusTracker(){this.focusTracker.add(this.removeColorButtonView.element),this._focusables.add(this.removeColorButtonView),this.staticColorsGrid&&(this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid)),this.documentColorsGrid&&(this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid))}_createColorPickerButton(){this.colorPickerButtonView=new ke,this.colorPickerButtonView.set({label:this._colorPickerLabel,withText:!0,icon:Lj,class:"ck-color-selector__color-picker"}),this.colorPickerButtonView.on("execute",()=>{this.fire("colorPicker:show")})}_createRemoveColorButton(){const e=new ke;return e.set({withText:!0,icon:Hj,label:this._removeButtonLabel}),e.class="ck-color-selector__remove-color",e.on("execute",()=>{this.fire("execute",{value:null,source:"removeColorButton"})}),e.render(),e}_createStaticColorsGrid(){const e=new JA(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return e.on("execute",(n,s)=>{this.fire("execute",{value:s.value,source:"staticColorsGrid"})}),e}_createDocumentColorsGrid(){const e=Ti.bind(this.documentColors,this.documentColors),n=new JA(this.locale,{columns:this.columns});return n.extendTemplate({attributes:{class:e.if("isEmpty","ck-hidden")}}),n.items.bindTo(this.documentColors).using(s=>{var r;const o=new tN;return o.set({color:s.color,hasBorder:(r=s.options)==null?void 0:r.hasBorder}),s.label&&o.set({label:s.label,tooltip:!0}),o.on("execute",()=>{this.fire("execute",{value:s.color,source:"documentColorsGrid"})}),o}),this.documentColors.on("change:isEmpty",(s,o,r)=>{r&&(n.selectedColor=null)}),n}_addColorToDocumentColors(e){const n=this.colorDefinitions.find(s=>s.color===e);n?this.documentColors.add(Object.assign({},n)):this.documentColors.add({color:e,label:e,options:{hasBorder:!1}})}}class zZ extends fe{constructor(e,{focusTracker:n,focusables:s,keystrokes:o,colorPickerViewConfig:r}){super(e);_(this,"items");_(this,"colorPickerView");_(this,"saveButtonView");_(this,"cancelButtonView");_(this,"actionBarView");_(this,"focusTracker");_(this,"keystrokes");_(this,"_focusables");_(this,"_colorPickerViewConfig");this.items=this.createCollection(),this.focusTracker=n,this.keystrokes=o,this.set("isVisible",!1),this.set("selectedColor",void 0),this._focusables=s,this._colorPickerViewConfig=r;const a=this.bindTemplate,{saveButtonView:l,cancelButtonView:u}=this._createActionButtons();this.saveButtonView=l,this.cancelButtonView=u,this.actionBarView=this._createActionBarView({saveButtonView:l,cancelButtonView:u}),this.setTemplate({tag:"div",attributes:{class:["ck-color-picker-fragment",a.if("isVisible","ck-hidden",h=>!h)]},children:this.items})}render(){super.render();const e=new DZ(this.locale,{...this._colorPickerViewConfig});this.colorPickerView=e,this.colorPickerView.render(),this.selectedColor&&(e.color=this.selectedColor),this.listenTo(this,"change:selectedColor",(n,s,o)=>{e.color=o}),this.items.add(this.colorPickerView),this.items.add(this.actionBarView),this._addColorPickersElementsToFocusTracker(),this._stopPropagationOnArrowsKeys(),this._executeOnEnterPress(),this._executeUponColorChange()}destroy(){super.destroy()}focus(){this.colorPickerView.focus()}resetValidationStatus(){this.colorPickerView.resetValidationStatus()}_executeOnEnterPress(){this.keystrokes.set("enter",e=>{this.isVisible&&this.focusTracker.focusedElement!==this.cancelButtonView.element&&this.colorPickerView.isValid()&&(this.fire("execute",{value:this.selectedColor}),e.stopPropagation(),e.preventDefault())})}_stopPropagationOnArrowsKeys(){const e=n=>n.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}_addColorPickersElementsToFocusTracker(){for(const n of this.colorPickerView.slidersView)this.focusTracker.add(n.element),this._focusables.add(n);const e=this.colorPickerView.hexInputRow.children.get(1);e.element&&(this.focusTracker.add(e.element),this._focusables.add(e)),this.focusTracker.add(this.saveButtonView.element),this._focusables.add(this.saveButtonView),this.focusTracker.add(this.cancelButtonView.element),this._focusables.add(this.cancelButtonView)}_createActionBarView({saveButtonView:e,cancelButtonView:n}){const s=new fe,o=this.createCollection();return o.add(e),o.add(n),s.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector_action-bar"]},children:o}),s}_createActionButtons(){const e=this.locale,n=e.t,s=new ke(e),o=new ke(e);return s.set({icon:Pp,class:"ck-button-save",type:"button",withText:!1,label:n("Accept")}),o.set({icon:Sh,class:"ck-button-cancel",type:"button",withText:!1,label:n("Cancel")}),s.on("execute",()=>{this.colorPickerView.isValid()&&this.fire("execute",{source:"colorPickerSaveButton",value:this.selectedColor})}),o.on("execute",()=>{this.fire("colorPicker:cancel")}),{saveButtonView:s,cancelButtonView:o}}_executeUponColorChange(){this.colorPickerView.on("colorSelected",(e,n)=>{this.fire("execute",{value:n.color,source:"colorPicker"}),this.set("selectedColor",n.color)})}}class e1 extends fe{constructor(e,{colors:n,columns:s,removeButtonLabel:o,documentColorsLabel:r,documentColorsCount:a,colorPickerLabel:l,colorPickerViewConfig:u}){super(e);_(this,"focusTracker");_(this,"keystrokes");_(this,"items");_(this,"colorGridsFragmentView");_(this,"colorPickerFragmentView");_(this,"_focusCycler");_(this,"_focusables");_(this,"_colorPickerViewConfig");this.items=this.createCollection(),this.focusTracker=new wt,this.keystrokes=new Dt,this._focusables=new Sn,this._colorPickerViewConfig=u,this._focusCycler=new cn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.colorGridsFragmentView=new UZ(e,{colors:n,columns:s,removeButtonLabel:o,documentColorsLabel:r,documentColorsCount:a,colorPickerLabel:l,focusTracker:this.focusTracker,focusables:this._focusables}),this.colorPickerFragmentView=new zZ(e,{focusables:this._focusables,focusTracker:this.focusTracker,keystrokes:this.keystrokes,colorPickerViewConfig:u}),this.set("_isColorGridsFragmentVisible",!0),this.set("_isColorPickerFragmentVisible",!1),this.set("selectedColor",void 0),this.colorGridsFragmentView.bind("isVisible").to(this,"_isColorGridsFragmentVisible"),this.colorPickerFragmentView.bind("isVisible").to(this,"_isColorPickerFragmentVisible"),this.on("change:selectedColor",(h,m,p)=>{this.colorGridsFragmentView.set("selectedColor",p),this.colorPickerFragmentView.set("selectedColor",p)}),this.colorGridsFragmentView.on("change:selectedColor",(h,m,p)=>{this.set("selectedColor",p)}),this.colorPickerFragmentView.on("change:selectedColor",(h,m,p)=>{this.set("selectedColor",p)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector"]},children:this.items})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendUI(){this._appendColorGridsFragment(),this._colorPickerViewConfig&&this._appendColorPickerFragment()}showColorPickerFragment(){!this.colorPickerFragmentView.colorPickerView||this._isColorPickerFragmentVisible||(this._isColorPickerFragmentVisible=!0,this.colorPickerFragmentView.focus(),this.colorPickerFragmentView.resetValidationStatus(),this._isColorGridsFragmentVisible=!1)}showColorGridsFragment(){this._isColorGridsFragmentVisible||(this._isColorGridsFragmentVisible=!0,this.colorGridsFragmentView.focus(),this._isColorPickerFragmentVisible=!1)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}updateDocumentColors(e,n){this.colorGridsFragmentView.updateDocumentColors(e,n)}updateSelectedColors(){this.colorGridsFragmentView.updateSelectedColors()}_appendColorGridsFragment(){this.items.length||(this.items.add(this.colorGridsFragmentView),this.colorGridsFragmentView.delegate("execute").to(this),this.colorGridsFragmentView.delegate("colorPicker:show").to(this))}_appendColorPickerFragment(){this.items.length!==2&&(this.items.add(this.colorPickerFragmentView),this.colorGridsFragmentView.colorPickerButtonView&&this.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{this.showColorPickerFragment()}),this.colorGridsFragmentView.addColorPickerButton(),this.colorPickerFragmentView.delegate("execute").to(this),this.colorPickerFragmentView.delegate("colorPicker:cancel").to(this))}}class HZ{constructor(t){_(this,"editor");_(this,"_components",new Map);this.editor=t}*names(){for(const t of this._components.values())yield t.originalName}add(t,e){this._components.set(Jw(t),{callback:e,originalName:t})}create(t){if(!this.has(t))throw new V("componentfactory-item-missing",this,{name:t});return this._components.get(Jw(t)).callback(this.editor.locale)}has(t){return this._components.has(Jw(t))}}function Jw(i){return String(i).toLowerCase()}const i2="ck-tooltip",Tn=class Tn extends Yn(){constructor(e){super();_(this,"tooltipTextView");_(this,"balloonPanelView");_(this,"_currentElementWithTooltip",null);_(this,"_currentTooltipPosition",null);_(this,"_mutationObserver",null);_(this,"_pinTooltipDebounced");_(this,"_unpinTooltipDebounced");_(this,"_watchdogExcluded");if(Tn._editors.add(e),Tn._instance)return Tn._instance;Tn._instance=this,this.tooltipTextView=new fe(e.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new Qn(e.locale),this.balloonPanelView.class=i2,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=WZ(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=ss(this._pinTooltip,600),this._unpinTooltipDebounced=ss(this._unpinTooltip,400),this.listenTo(de.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(de.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(de.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(de.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(de.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(de.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(e){const n=e.ui.view&&e.ui.view.body;Tn._editors.delete(e),this.stopListening(e.ui),n&&n.has(this.balloonPanelView)&&n.remove(this.balloonPanelView),Tn._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),Tn._instance=null)}static getPositioningFunctions(e){const n=Tn.defaultBalloonPositions;return{s:[n.southArrowNorth,n.southArrowNorthEast,n.southArrowNorthWest],n:[n.northArrowSouth],e:[n.eastArrowWest],w:[n.westArrowEast],sw:[n.southArrowNorthEast],se:[n.southArrowNorthWest]}[e]}_onKeyDown(e,n){n.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),n.stopPropagation())}_onEnterOrFocus(e,{target:n}){const s=Xw(n);if(!s){e.name==="focus"&&this._unpinTooltip();return}if(s===this._currentElementWithTooltip){this._unpinTooltipDebounced.cancel();return}this._unpinTooltip(),e.name==="focus"&&!s.matches(":hover")||s.matches("[data-cke-tooltip-instant]")?this._pinTooltip(s,Qw(s)):this._pinTooltipDebounced(s,Qw(s))}_onLeaveOrBlur(e,{target:n,relatedTarget:s}){if(e.name==="mouseleave"){if(!Pr(n))return;const o=this.balloonPanelView.element,r=o&&(o===s||o.contains(s)),a=!r&&n===o;if(r){this._unpinTooltipDebounced.cancel();return}if(!a&&this._currentElementWithTooltip&&n!==this._currentElementWithTooltip)return;const l=Xw(n),u=Xw(s);(a||l&&l!==u)&&(this._pinTooltipDebounced.cancel(),this._currentElementWithTooltip&&this._currentElementWithTooltip.matches("[data-cke-tooltip-instant]")||l&&l.matches("[data-cke-tooltip-instant]")?this._unpinTooltip():this._unpinTooltipDebounced())}else{if(this._currentElementWithTooltip&&n!==this._currentElementWithTooltip)return;this._pinTooltipDebounced.cancel(),this._unpinTooltipDebounced()}}_onScroll(e,{target:n}){this._currentElementWithTooltip&&(n.contains(this.balloonPanelView.element)&&n.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(e,{text:n,position:s,cssClass:o}){this._unpinTooltip();const r=Ln(Tn._editors.values()).ui.view.body;r.has(this.balloonPanelView)||r.add(this.balloonPanelView),this.tooltipTextView.text=n,this.balloonPanelView.class=[i2,o].filter(a=>a).join(" "),this.balloonPanelView.pin({target:e,positions:Tn.getPositioningFunctions(s)}),this._mutationObserver.attach(e);for(const a of Tn._editors)this.listenTo(a.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=e,this._currentTooltipPosition=s}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const e of Tn._editors)this.stopListening(e.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;const e=Qw(this._currentElementWithTooltip);if(!Vo(this._currentElementWithTooltip)||!e.text){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:Tn.getPositioningFunctions(e.position)})}};_(Tn,"defaultBalloonPositions",Qn.generatePositions({heightOffset:5,sideOffset:13})),_(Tn,"_editors",new Set),_(Tn,"_instance",null);let rv=Tn;function Xw(i){return Pr(i)?i.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function Qw(i){return{text:i.dataset.ckeTooltipText,position:i.dataset.ckeTooltipPosition||"s",cssClass:i.dataset.ckeTooltipClass||""}}function WZ(i){const t=new MutationObserver(()=>{i()});return{attach(e){t.observe(e,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){t.disconnect()}}}const qZ=50,$Z=350;class fN extends Yn(){constructor(e,n={}){super();_(this,"editor");_(this,"_balloonView",null);_(this,"_showBalloonThrottled",vc(()=>this._showBalloon(),50,{leading:!0}));_(this,"_lastFocusedEditableElement",null);_(this,"_balloonClass");this.editor=e,this._balloonClass=n.balloonClass,e.on("ready",()=>this._handleEditorReady())}destroy(){const e=this._balloonView;e&&(e.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const e=this.editor;this._isEnabled()&&e.ui.view&&(e.ui.focusTracker.on("change:isFocused",(n,s,o)=>{this._updateLastFocusedEditableElement(),o?this._showBalloon():this._hideBalloon()}),e.ui.focusTracker.on("change:focusedElement",(n,s,o)=>{this._updateLastFocusedEditableElement(),o&&this._showBalloon()}),e.ui.on("update",()=>{this._showBalloonThrottled()}))}_getNormalizedConfig(){return{side:this.editor.locale.contentLanguageDirection==="ltr"?"right":"left",position:"border",verticalOffset:0,horizontalOffset:5}}_showBalloon(){const e=this._getBalloonAttachOptions();e&&(this._balloonView||(this._balloonView=this._createBalloonView()),this._balloonView.pin(e))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_createBalloonView(){const e=this.editor,n=new Qn,s=this._createBadgeContent();return n.content.add(s),this._balloonClass&&(n.class=this._balloonClass),e.ui.view.body.add(n),n}_getBalloonAttachOptions(){if(!this._lastFocusedEditableElement)return null;const e=this._getNormalizedConfig(),n=e.side==="right"?GZ(this._lastFocusedEditableElement,e):jZ(this._lastFocusedEditableElement,e);return{target:this._lastFocusedEditableElement,positions:[n]}}_updateLastFocusedEditableElement(){const e=this.editor,n=e.ui.focusTracker.isFocused,s=e.ui.focusTracker.focusedElement;if(!n||!s){this._lastFocusedEditableElement=null;return}const o=Array.from(e.ui.getEditableElementsNames()).map(r=>e.ui.getEditableElement(r));o.includes(s)?this._lastFocusedEditableElement=s:this._lastFocusedEditableElement=o[0]}}function GZ(i,t){return mN(i,t,(e,n)=>e.left+e.width-n.width-t.horizontalOffset)}function jZ(i,t){return mN(i,t,e=>e.left+t.horizontalOffset)}function mN(i,t,e){return(n,s)=>{const o=new Pe(i);if(o.width<$Z||o.height<qZ)return null;let r;t.position==="inside"?r=o.bottom-s.height:r=o.bottom-s.height/2,r-=t.verticalOffset;const a=e(o,s),u=n.clone().moveTo(a,r).getIntersection(s.clone().moveTo(a,r)).getVisible();return!u||u.getArea()<s.getArea()?null:{top:r,left:a,name:`position_${t.position}-side_${t.side}`,config:{withArrow:!1}}}}const KZ="Powered by";class ZZ extends fN{constructor(t){super(t,{balloonClass:"ck-powered-by-balloon"})}_isEnabled(){const t=this.editor;if(t.config.get("ui.poweredBy.forceVisible"))return!0;const n=t.config.get("licenseKey");if(n=="GPL")return!0;const s=I0(n.split(".")[1]);return s?!s.whiteLabel:!0}_createBadgeContent(){return new YZ(this.editor.locale,this._getNormalizedConfig().label)}_getNormalizedConfig(){const t=super._getNormalizedConfig(),e=this.editor.config.get("ui.poweredBy")||{},n=e.position||t.position,s=n==="inside"?5:t.verticalOffset;return{position:n,side:e.side||t.side,label:e.label===void 0?KZ:e.label,verticalOffset:e.verticalOffset!==void 0?e.verticalOffset:s,horizontalOffset:e.horizontalOffset!==void 0?e.horizontalOffset:t.horizontalOffset,forceVisible:!!e.forceVisible}}}class YZ extends fe{constructor(t,e){super(t);const n=new os,s=this.bindTemplate;n.set({content:cK,isColorInherited:!1}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/powered-by-ckeditor/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...e?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[e]}]:[],n],on:{dragstart:s.to(o=>o.preventDefault())}}]})}}class JZ extends fN{constructor(e){super(e,{balloonClass:"ck-evaluation-badge-balloon"});_(this,"licenseTypeMessage",{evaluation:"For evaluation purposes only",trial:"For evaluation purposes only",development:"For development purposes only"})}_isEnabled(){const n=this.editor.config.get("licenseKey"),s=s2(n);return!!(s&&this.licenseTypeMessage[s])}_createBadgeContent(){const e=this.editor.config.get("licenseKey"),n=s2(e);return new XZ(this.editor.locale,this.licenseTypeMessage[n])}_getNormalizedConfig(){const e=super._getNormalizedConfig(),n=this.editor.config.get("ui.poweredBy")||{},s=n.position||e.position,o=n.side||e.side;return{position:s,side:o==="left"?"right":"left",verticalOffset:e.verticalOffset,horizontalOffset:e.horizontalOffset}}}class XZ extends fe{constructor(t,e){super(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-evaluation-badge"],"aria-hidden":!0},children:[{tag:"span",attributes:{class:["ck","ck-evaluation-badge__label"]},children:[e]}]})}}function s2(i){if(i=="GPL")return"GPL";const t=I0(i.split(".")[1]);return t?t.licenseType||"production":null}const o2={POLITE:"polite",ASSERTIVE:"assertive"};class QZ{constructor(t){_(this,"editor");_(this,"view");this.editor=t,t.once("ready",()=>{for(const e of Object.values(o2))this.announce("",e)})}announce(t,e=o2.POLITE){const n=this.editor;if(!n.ui.view)return;this.view||(this.view=new eY(n.locale),n.ui.view.body.add(this.view));const{politeness:s,isUnsafeHTML:o}=typeof e=="string"?{politeness:e}:e;let r=this.view.regionViews.find(a=>a.politeness===s);r||(r=new tY(n,s),this.view.regionViews.add(r)),r.announce({announcement:t,isUnsafeHTML:o})}}class eY extends fe{constructor(e){super(e);_(this,"regionViews");this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}}class tY extends fe{constructor(e,n){super(e.locale);_(this,"politeness");_(this,"_domConverter");_(this,"_pruneAnnouncementsInterval");this.setTemplate({tag:"div",attributes:{"aria-live":n,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),e.on("destroy",()=>{this._pruneAnnouncementsInterval!==null&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=n,this._domConverter=e.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:e,isUnsafeHTML:n}){if(!e.trim().length)return;const s=document.createElement("li");n?this._domConverter.setContentOf(s,e):s.innerText=e,this._listElement.appendChild(s)}get _listElement(){return this.element.querySelector("ul")}}class Lc extends rs{constructor(t,e){super(t);const n=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:n.to("mouseenter")}}),this.delegate("mouseenter").to(e)}}const bm=5,$l={toggleMenusAndFocusItemsOnHover(i){i.on("menu:mouseenter",t=>{if(!(!i.isFocusBorderEnabled&&!i.isOpen)){if(i.isOpen)for(const e of i.menus){const n=t.path[0],s=n instanceof Lc&&n.children.first===e;e.isOpen=(t.path.includes(e)||s)&&e.isEnabled}t.source.focus()}})},focusCycleMenusOnArrows(i){const t=i.locale.uiLanguageDirection==="rtl";i.on("menu:arrowright",n=>{e(n.source,t?-1:1)}),i.on("menu:arrowleft",n=>{e(n.source,t?1:-1)});function e(n,s){const o=i.children.getIndex(n),r=n.isOpen,a=i.children.length,l=i.children.get((o+a+s)%a);n.isOpen=!1,r&&(l.isOpen=!0),l.buttonView.focus()}},closeMenusWhenTheBarCloses(i){i.on("change:isOpen",()=>{i.isOpen||i.menus.forEach(t=>{t.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(i){i.on("menu:change:isOpen",(t,e,n)=>{n&&i.menus.filter(s=>t.source.parentMenuView===s.parentMenuView&&t.source!==s&&s.isOpen).forEach(s=>{s.isOpen=!1})})},closeOnClickOutside(i){Uo({emitter:i,activator:()=>i.isOpen,callback:()=>i.close(),contextElements:()=>i.children.map(t=>t.element)})},enableFocusHighlightOnInteraction(i){let t=!1;i.on("change:isOpen",(e,n,s)=>{s||(t||(i.isFocusBorderEnabled=!1),t=!1)}),i.listenTo(i.element,"keydown",()=>{t=!0},{useCapture:!0}),i.listenTo(i.element,"keyup",()=>{t=!1},{useCapture:!0}),i.listenTo(i.element,"focus",()=>{t&&(i.isFocusBorderEnabled=!0)},{useCapture:!0})}},hr={openAndFocusPanelOnArrowDownKey(i){i.keystrokes.set("arrowdown",(t,e)=>{i.isEnabled&&i.focusTracker.focusedElement===i.buttonView.element&&(i.isOpen||(i.isOpen=!0),i.panelView.focus(),e())})},openOnArrowRightKey(i){const t=i.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";i.keystrokes.set(t,(e,n)=>{i.focusTracker.focusedElement!==i.buttonView.element||!i.isEnabled||(i.isOpen||(i.isOpen=!0),i.panelView.focus(),n())})},openOnButtonClick(i){i.buttonView.on("execute",()=>{i.isOpen=!0})},toggleOnButtonClick(i){i.buttonView.on("execute",()=>{i.isOpen=!i.isOpen})},openAndFocusOnEnterKeyPress(i){i.keystrokes.set("enter",(t,e)=>{i.focusTracker.focusedElement===i.buttonView.element&&(i.isOpen=!0,i.panelView.focus(),e())})},closeOnArrowLeftKey(i){const t=i.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";i.keystrokes.set(t,(e,n)=>{i.isOpen&&(i.isOpen=!1,i.focus(),n())})},closeOnEscKey(i){i.keystrokes.set("esc",(t,e)=>{i.isOpen&&(i.isOpen=!1,i.focus(),e())})},closeOnParentClose(i){i.parentMenuView.on("change:isOpen",(t,e,n)=>{!n&&t.source===i.parentMenuView&&(i.isOpen=!1)})}},nY={southEast:i=>({top:i.bottom,left:i.left,name:"se"}),southWest:(i,t)=>({top:i.bottom,left:i.left-t.width+i.width,name:"sw"}),northEast:(i,t)=>({top:i.top-t.height,left:i.left,name:"ne"}),northWest:(i,t)=>({top:i.top-t.height,left:i.left-t.width+i.width,name:"nw"}),eastSouth:i=>({top:i.top,left:i.right-bm,name:"es"}),eastNorth:(i,t)=>({top:i.top-t.height,left:i.right-bm,name:"en"}),westSouth:(i,t)=>({top:i.top,left:i.left-t.width+bm,name:"ws"}),westNorth:(i,t)=>({top:i.top-t.height,left:i.left-t.width+bm,name:"wn"})},iY=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditingEnhanced",items:["menuBar:sourceEditingEnhanced"]},{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"previewMergeFields",items:["menuBar:previewMergeFields"]},{groupId:"fullscreen",items:["menuBar:fullscreen"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:insertImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable","menuBar:insertTableLayout"]},{groupId:"insertInline",items:["menuBar:link","menuBar:bookmark","menuBar:comment","menuBar:insertMergeField","menuBar:emoji"]},{groupId:"insertMinorWidgets",items:["menuBar:mediaEmbed","menuBar:insertTemplate","menuBar:specialCharacters","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:multiLevelList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function sY(i){let t;return!("items"in i)||!i.items?t={items:Oi(iY),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0,...i}:t={items:i.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1,...i},t}function oY({normalizedConfig:i,locale:t,componentFactory:e,extraItems:n}){const s=Oi(i);return r2(i,s,n),rY(i,s),r2(i,s,s.addItems),aY(i,s,e),gN(i,s),lY(s,t),s}function rY(i,t){const e=t.removeItems,n=[];t.items=t.items.filter(({menuId:s})=>e.includes(s)?(n.push(s),!1):!0),Bc(t.items,s=>{s.groups=s.groups.filter(({groupId:o})=>e.includes(o)?(n.push(o),!1):!0);for(const o of s.groups)o.items=o.items.filter(r=>{const a=pN(r);return e.includes(a)?(n.push(a),!1):!0})});for(const s of e)n.includes(s)||Ze("menu-bar-item-could-not-be-removed",{menuBarConfig:i,itemName:s})}function r2(i,t,e){const n=[];if(e.length!=0){for(const s of e){const o=dY(s.position),r=hY(s.position);if(cY(s))if(!r)o==="start"?(t.items.unshift(s.menu),n.push(s)):o==="end"&&(t.items.push(s.menu),n.push(s));else{const a=t.items.findIndex(l=>l.menuId===r);a!=-1?o==="before"?(t.items.splice(a,0,s.menu),n.push(s)):o==="after"&&(t.items.splice(a+1,0,s.menu),n.push(s)):a2(t,s.menu,r,o)&&n.push(s)}else uY(s)?Bc(t.items,a=>{if(a.menuId===r)o==="start"?(a.groups.unshift(s.group),n.push(s)):o==="end"&&(a.groups.push(s.group),n.push(s));else{const l=a.groups.findIndex(u=>u.groupId===r);l!==-1&&(o==="before"?(a.groups.splice(l,0,s.group),n.push(s)):o==="after"&&(a.groups.splice(l+1,0,s.group),n.push(s)))}}):a2(t,s.item,r,o)&&n.push(s)}for(const s of e)n.includes(s)||Ze("menu-bar-item-could-not-be-added",{menuBarConfig:i,addedItemConfig:s})}}function a2(i,t,e,n){let s=!1;return Bc(i.items,o=>{for(const{groupId:r,items:a}of o.groups){if(s)return;if(r===e)n==="start"?(a.unshift(t),s=!0):n==="end"&&(a.push(t),s=!0);else{const l=a.findIndex(u=>pN(u)===e);l!==-1&&(n==="before"?(a.splice(l,0,t),s=!0):n==="after"&&(a.splice(l+1,0,t),s=!0))}}}),s}function aY(i,t,e){Bc(t.items,n=>{for(const s of n.groups)s.items=s.items.filter(o=>{const r=typeof o=="string"&&!e.has(o);return r&&!t.isUsingDefaultConfig&&Ze("menu-bar-item-unavailable",{menuBarConfig:i,parentMenuConfig:Oi(n),componentName:o}),!r})})}function gN(i,t){const e=t.isUsingDefaultConfig;let n=!1;if(t.items=t.items.filter(s=>s.groups.length?!0:(ey(i,s,e),!1)),!t.items.length){ey(i,i,e);return}Bc(t.items,s=>{s.groups=s.groups.filter(o=>o.items.length?!0:(n=!0,!1));for(const o of s.groups)o.items=o.items.filter(r=>bN(r)&&!r.groups.length?(ey(i,r,e),n=!0,!1):!0)}),n&&gN(i,t)}function ey(i,t,e){e||Ze("menu-bar-menu-empty",{menuBarConfig:i,emptyMenuConfig:t})}function lY(i,t){const e=t.t,n={File:e({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:e({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:e({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:e({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:e({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:e({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:e({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:e({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:e({string:"Font",id:"MENU_BAR_MENU_FONT"})};Bc(i.items,s=>{s.label in n&&(s.label=n[s.label])})}function Bc(i,t){if(Array.isArray(i))for(const n of i)e(n);function e(n){t(n);for(const s of n.groups)for(const o of s.items)bN(o)&&e(o)}}function cY(i){return typeof i=="object"&&"menu"in i}function uY(i){return typeof i=="object"&&"group"in i}function dY(i){return i.startsWith("start")?"start":i.startsWith("end")?"end":i.startsWith("after")?"after":"before"}function hY(i){const t=i.match(/^[^:]+:(.+)/);return t?t[1]:null}function pN(i){return typeof i=="string"?i:i.menuId}function bN(i){return typeof i=="object"&&"menuId"in i}class fY extends _t(){constructor(e){super();_(this,"editor");_(this,"componentFactory");_(this,"focusTracker");_(this,"tooltipManager");_(this,"poweredBy");_(this,"evaluationBadge");_(this,"ariaLiveAnnouncer");_(this,"isReady",!1);_(this,"_editableElementsMap",new Map);_(this,"_focusableToolbarDefinitions",[]);_(this,"_extraMenuBarElements",[]);_(this,"_lastFocusedForeignElement",null);_(this,"_domEmitter");const n=e.editing.view;this.editor=e,this.componentFactory=new HZ(e),this.focusTracker=new wt,this.tooltipManager=new rv(e),this.poweredBy=new ZZ(e),this.evaluationBadge=new JZ(e),this.ariaLiveAnnouncer=new QZ(e),this._initViewportOffset(this._readViewportOffsetFromConfig()),this.once("ready",()=>{this._bindBodyCollectionWithFocusTracker(),this.isReady=!0}),this.listenTo(n.document,"layoutChanged",this.update.bind(this)),this.listenTo(n,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking(),this._initVisualViewportSupport()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy(),this.evaluationBadge.destroy();for(const e of this._editableElementsMap.values())e.ckeditorInstance=null,this.editor.keystrokes.stopListening(e);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[],this._domEmitter&&this._domEmitter.stopListening()}setEditableElement(e,n){this._editableElementsMap.set(e,n),n.ckeditorInstance||(n.ckeditorInstance=this.editor),this.focusTracker.add(n);const s=()=>{this.editor.editing.view.getDomRoot(e)||this.editor.keystrokes.listenTo(n)};this.isReady?s():this.once("ready",s)}removeEditableElement(e){const n=this._editableElementsMap.get(e);n&&(this._editableElementsMap.delete(e),this.editor.keystrokes.stopListening(n),this.focusTracker.remove(n),n.ckeditorInstance=null)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(e,n={}){e.isRendered?(this.focusTracker.add(e),this.editor.keystrokes.listenTo(e.element)):e.once("render",()=>{this.focusTracker.add(e),this.editor.keystrokes.listenTo(e.element)}),this._focusableToolbarDefinitions.push({toolbarView:e,options:n})}extendMenuBar(e){this._extraMenuBarElements.push(e)}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}initMenuBar(e){const n=e.element;this.focusTracker.add(n),this.editor.keystrokes.listenTo(n);const s=sY(this.editor.config.get("menuBar")||{});e.fillFromConfig(s,this.componentFactory,this._extraMenuBarElements),this.editor.keystrokes.set("Esc",(o,r)=>{n.contains(this.editor.ui.focusTracker.focusedElement)&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):this.editor.editing.view.focus(),r())}),this.editor.keystrokes.set("Alt+F9",(o,r)=>{n.contains(this.editor.ui.focusTracker.focusedElement)||(this._saveLastFocusedForeignElement(),e.isFocusBorderEnabled=!0,e.focus(),r())})}_readViewportOffsetFromConfig(){const e=this.editor,n=e.config.get("ui.viewportOffset");if(n)return n;const s=e.config.get("toolbar.viewportTopOffset");return s?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:s}):{top:0}}_initFocusTracking(){const e=this.editor;let n;e.keystrokes.set("Alt+F10",(s,o)=>{this._saveLastFocusedForeignElement();const r=this._getCurrentFocusedToolbarDefinition();(!r||!n)&&(n=this._getFocusableCandidateToolbarDefinitions());for(let a=0;a<n.length;a++){const l=n.shift();if(n.push(l),l!==r&&this._focusFocusableCandidateToolbar(l)){r&&r.options.afterBlur&&r.options.afterBlur();break}}o()}),e.keystrokes.set("Esc",(s,o)=>{const r=this._getCurrentFocusedToolbarDefinition();r&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):e.editing.view.focus(),r.options.afterBlur&&r.options.afterBlur(),o())})}_saveLastFocusedForeignElement(){const e=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(e)&&!Array.from(this.editor.editing.view.domRoots.values()).includes(e)&&(this._lastFocusedForeignElement=e)}_getFocusableCandidateToolbarDefinitions(){const e=[];for(const n of this._focusableToolbarDefinitions){const{toolbarView:s,options:o}=n;(Vo(s.element)||o.beforeFocus)&&e.push(n)}return e.sort((n,s)=>l2(n)-l2(s)),e}_getCurrentFocusedToolbarDefinition(){for(const e of this._focusableToolbarDefinitions)if(e.toolbarView.element&&e.toolbarView.element.contains(this.focusTracker.focusedElement))return e;return null}_focusFocusableCandidateToolbar(e){const{toolbarView:n,options:{beforeFocus:s}}=e;return s&&s(),Vo(n.element)?(n.focus(),!0):!1}_handleScrollToTheSelection(e,n){const s={top:0,bottom:0,left:0,right:0,...this.viewportOffset};n.viewportOffset.top+=s.top,n.viewportOffset.bottom+=s.bottom,n.viewportOffset.left+=s.left,n.viewportOffset.right+=s.right}_bindBodyCollectionWithFocusTracker(){const e=this.view.body;for(const n of e)this.focusTracker.add(n.element);e.on("add",(n,s)=>{this.focusTracker.add(s.element)}),e.on("remove",(n,s)=>{this.focusTracker.remove(s.element)})}_initViewportOffset(e){this.on("set:viewportOffset",(n,s,o)=>{const r=this._getVisualViewportTopOffset(o);o.visualTop!==r&&(n.return={...o,visualTop:r})}),this.set("viewportOffset",e)}_initVisualViewportSupport(){if(!de.window.visualViewport)return;const e=()=>{const n=this._getVisualViewportTopOffset(this.viewportOffset);this.viewportOffset.visualTop!==n&&(this.viewportOffset={...this.viewportOffset,visualTop:n})};this._domEmitter=new(Yn()),this._domEmitter.listenTo(de.window.visualViewport,"scroll",e),this._domEmitter.listenTo(de.window.visualViewport,"resize",e)}_getVisualViewportTopOffset(e){const n=qm().top,s=e.top||0;return n>s?0:s-n}}function l2(i){const{toolbarView:t,options:e}=i;let n=10;return Vo(t.element)&&n--,e.isContextual&&(n-=2),n}class mY extends fe{constructor(e){super(e);_(this,"body");_(this,"menuBarView");_(this,"toolbar");this.body=new sv(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}class gY extends mY{constructor(e){super(e);_(this,"top");_(this,"main");_(this,"_voiceLabelView");this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:e.uiLanguageDirection,lang:e.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const e=this.t,n=new Qi;return n.text=e("Rich Text Editor"),n.extendTemplate({attributes:{class:"ck-voice-label"}}),n}}class pY extends fe{constructor(e,n,s){super(e);_(this,"name",null);_(this,"_editingView");_(this,"_editableElement");_(this,"_hasExternalElement");this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=s,this._hasExternalElement=!!this._editableElement,this._editingView=n}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const e=this._editingView;e.isRenderingInProgress?s(this):n(this);function n(o){e.change(r=>{const a=e.document.getRoot(o.name);r.addClass(o.isFocused?"ck-focused":"ck-blurred",a),r.removeClass(o.isFocused?"ck-blurred":"ck-focused",a)})}function s(o){e.once("change:isRenderingInProgress",(r,a,l)=>{l?s(o):n(o)})}}}class bY extends pY{constructor(e,n,s,o={}){super(e,n,s);_(this,"_options");this._options=o,this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const e=this._editingView;e.change(n=>{const s=e.document.getRoot(this.name);n.setAttribute("aria-label",this.getEditableAriaLabel(),s)})}getEditableAriaLabel(){const e=this.locale.t,n=this._options.label,s=this._editableElement,o=this.name;if(typeof n=="string")return n;if(typeof n=="object")return n[o];if(typeof n=="function")return n(this);if(s){const r=s.getAttribute("aria-label");if(r)return r}return e("Rich Text Editor. Editing area: %0",o)}}class Vn extends fe{constructor(e,n={}){super(e);_(this,"children");const s=this.bindTemplate;this.set("class",["ck","ck-form__row",...bn(n.class||[])]),this.children=this.createCollection(),n.children&&n.children.forEach(o=>this.children.add(o)),this.set("_role",null),this.set("_ariaLabelledBy",null),n.labelView&&this.set({_role:"group",_ariaLabelledBy:n.labelView.id}),this.setTemplate({tag:"div",attributes:{class:s.to("class",o=>o.join(" ")),role:s.to("_role"),"aria-labelledby":s.to("_ariaLabelledBy")},children:this.children})}}class c2 extends RV{static get pluginName(){return"Notification"}static get isOfficialPlugin(){return!0}init(){this.on("show:warning",(t,e)=>{window.alert(e.message)},{priority:"lowest"})}showSuccess(t,e={}){this._showNotification({message:t,type:"success",namespace:e.namespace,title:e.title})}showInfo(t,e={}){this._showNotification({message:t,type:"info",namespace:e.namespace,title:e.title})}showWarning(t,e={}){this._showNotification({message:t,type:"warning",namespace:e.namespace,title:e.title})}_showNotification(t){const e=t.namespace?`show:${t.type}:${t.namespace}`:`show:${t.type}`;this.fire(e,{message:t.message,type:t.type,title:t.title||""})}}class Oa extends _t(){constructor(t,e){super(),e&&a5(this,e),t&&this.set(t)}}const _m=Nc("px");class as extends te{constructor(e){super(e);_(this,"positionLimiter");_(this,"visibleStack");_(this,"_viewToStack",new Map);_(this,"_idToStack",new Map);_(this,"_view",null);_(this,"_rotatorView",null);_(this,"_fakePanelsView",null);this.positionLimiter=()=>{const n=this.editor.editing.view,o=n.document.selection.editableElement;return o?n.domConverter.mapViewToDom(o.root):null},this.decorate("getPositionOptions"),this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}static get pluginName(){return"ContextualBalloon"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this._view||this._createPanelView(),this.hasView(e.view))throw new V("contextualballoon-add-view-exist",[this,e]);const n=e.stackId||"main";if(!this._idToStack.has(n)){this._idToStack.set(n,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(n)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||e.singleViewMode)&&this.showStack(n);return}const s=this._idToStack.get(n);e.singleViewMode&&this.showStack(n),s.set(e.view,e),this._viewToStack.set(e.view,s),s===this._visibleStack&&this._showView(e)}remove(e){if(!this.hasView(e))throw new V("contextualballoon-remove-view-not-exist",[this,e]);const n=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(n.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(n.values())[n.size-2])),n.size===1?(this._idToStack.delete(this._getStackId(n)),this._numberOfStacks=this._idToStack.size):n.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition()}getPositionOptions(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&(e.limiter||(e=Object.assign({},e,{limiter:this.positionLimiter})),e=Object.assign({},e,{viewportOffsetConfig:{...this.editor.ui.viewportOffset,top:this.editor.ui.viewportOffset.visualTop}})),e}showStack(e){this.visibleStack=e;const n=this._idToStack.get(e);if(!n)throw new V("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==n&&this._showView(Array.from(n.values()).pop())}_createPanelView(){this._view=new Qn(this.editor.locale),this.editor.ui.view.body.add(this._view),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(e){return Array.from(this._idToStack.entries()).find(s=>s[1]===e)[0]}_showNextStack(){const e=Array.from(this._idToStack.values());let n=e.indexOf(this._visibleStack)+1;e[n]||(n=0),this.showStack(this._getStackId(e[n]))}_showPrevStack(){const e=Array.from(this._idToStack.values());let n=e.indexOf(this._visibleStack)-1;e[n]||(n=e.length-1),this.showStack(this._getStackId(e[n]))}_createRotatorView(){const e=new _Y(this.editor.locale),n=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(s,o)=>!o&&s>1),e.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(s,o)=>{if(o<2)return"";const r=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return n("%0 of %1",[r,o])}),e.buttonNextView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),e.buttonPrevView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),e}_createFakePanelsView(){const e=new wY(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(n,s)=>!s&&n>=2?Math.min(n-1,2):0),e.listenTo(this.view,"change:top",()=>e.updatePosition()),e.listenTo(this.view,"change:left",()=>e.updatePosition()),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:n="",withArrow:s=!0,singleViewMode:o=!1}){this.view.class=n,this.view.withArrow=s,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition(),o&&(this._singleViewMode=!0)}}class _Y extends fe{constructor(e){super(e);_(this,"focusTracker");_(this,"buttonPrevView");_(this,"buttonNextView");_(this,"content");const n=e.t,s=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new wt,this.buttonPrevView=this._createButtonView(n("Previous"),Ga),this.buttonNextView=this._createButtonView(n("Next"),OV),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",s.to("isNavigationVisible",o=>o?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:s.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,n){const s=new ke(this.locale);return s.set({label:e,icon:n,tooltip:!0}),s}}class wY extends fe{constructor(e,n){super(e);_(this,"content");_(this,"_balloonPanelView");const s=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=n,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",s.to("numberOfPanels",o=>o?"":"ck-hidden")],style:{top:s.to("top",_m),left:s.to("left",_m),width:s.to("width",_m),height:s.to("height",_m)}},children:this.content}),this.on("change:numberOfPanels",(o,r,a,l)=>{a>l?this._addPanels(a-l):this._removePanels(l-a),this.updatePosition()})}_addPanels(e){for(;e--;){const n=new fe;n.setTemplate({tag:"div"}),this.content.add(n),this.registerChild(n)}}_removePanels(e){for(;e--;){const n=this.content.last;this.content.remove(n),this.deregisterChild(n),n.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:e,left:n}=this._balloonPanelView,{width:s,height:o}=new Pe(this._balloonPanelView.element);Object.assign(this,{top:e,left:n,width:s,height:o})}}}const Gl=Nc("px");class yY extends fe{constructor(e){super(e);_(this,"content");_(this,"contentPanelElement");_(this,"_contentPanelPlaceholder");const n=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new Ti({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:n.to("isSticky",s=>s?"block":"none"),height:n.to("isSticky",s=>s?Gl(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new Ti({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",n.if("isSticky","ck-sticky-panel__content_sticky"),n.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:n.to("isSticky",s=>s?Gl(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:n.to("_stickyTopOffset",s=>s&&Gl(s)),bottom:n.to("_stickyBottomOffset",s=>s&&Gl(s)),marginLeft:n.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(de.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()}),de.window.visualViewport&&(this.listenTo(de.window.visualViewport,"scroll",()=>{this.checkIfShouldBeSticky()}),this.listenTo(de.window.visualViewport,"resize",()=>{this.checkIfShouldBeSticky()}))}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive){this._unstick();return}const e=new Pe(this.limiterElement);let n=e.getVisible();if(n){const r=new Pe(de.window);r.top+=this.viewportTopOffset,r.height-=this.viewportTopOffset,n=n.getIntersection(r)}const{left:s,top:o}=qm();if(e.moveBy(s,o),n&&n.moveBy(s,o),n&&e.top<n.top)if(this._contentPanelRect.height+this.limiterBottomOffset>n.height){const r=Math.max(e.bottom-n.bottom,0)+this.limiterBottomOffset;this._contentPanelRect.height+r+1<e.height?this._stickToBottomOfLimiter(r):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<e.height?this._stickToTopOfAncestors(n.top):this._unstick();else this._unstick()}_stickToTopOfAncestors(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=e,this._stickyBottomOffset=null,this._marginLeft=Gl(-de.window.scrollX+qm().left)}_stickToBottomOfLimiter(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=e,this._marginLeft=Gl(-de.window.scrollX+qm().left)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new Pe(this.contentPanelElement)}}class vY extends sn{constructor(e,n){const s=e.t,o=Object.assign({},{showResetButton:!0,showIcon:!0,creator:ti},n);super(e,o.creator);_(this,"iconView");_(this,"resetButtonView");_(this,"_viewConfig");this.label=n.label,this._viewConfig=o,this._viewConfig.showIcon&&(this.iconView=new os,this.iconView.content=Yj,this.fieldWrapperChildren.add(this.iconView,0),this.extendTemplate({attributes:{class:"ck-search__query_with-icon"}})),this._viewConfig.showResetButton&&(this.resetButtonView=new ke(e),this.resetButtonView.set({label:s("Clear"),icon:Sh,class:"ck-search__reset",isVisible:!1,tooltip:!0}),this.resetButtonView.on("execute",()=>{this.reset(),this.focus(),this.fire("reset")}),this.resetButtonView.bind("isVisible").to(this.fieldView,"isEmpty",r=>!r),this.fieldWrapperChildren.add(this.resetButtonView),this.extendTemplate({attributes:{class:"ck-search__query_with-reset"}}))}reset(){this.fieldView.reset(),this._viewConfig.showResetButton&&(this.resetButtonView.isVisible=!1)}}class _N extends fe{constructor(){super();const t=this.bindTemplate;this.set({isVisible:!1,primaryText:"",secondaryText:""}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search__info",t.if("isVisible","ck-hidden",e=>!e)],tabindex:-1},children:[{tag:"span",children:[{text:[t.to("primaryText")]}]},{tag:"span",children:[{text:[t.to("secondaryText")]}]}]})}focus(){this.element.focus()}}class CY extends fe{constructor(e){super(e);_(this,"focusTracker");_(this,"children");_(this,"_focusCycler");this.children=this.createCollection(),this.focusTracker=new wt,this.setTemplate({tag:"div",attributes:{class:["ck","ck-search__results"],tabindex:-1},children:this.children}),this._focusCycler=new cn({focusables:this.children,focusTracker:this.focusTracker})}render(){super.render();for(const e of this.children)this.focusTracker.add(e.element)}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}class TY extends fe{constructor(e,n){super(e);_(this,"focusTracker");_(this,"keystrokes");_(this,"resultsView");_(this,"filteredView");_(this,"infoView");_(this,"queryView");_(this,"focusCycler");_(this,"_config");this._config=n,this.filteredView=n.filteredView,this.queryView=this._createSearchTextQueryView(),this.focusTracker=new wt,this.keystrokes=new Dt,this.resultsView=new CY(e),this.children=this.createCollection(),this.focusableChildren=this.createCollection([this.queryView,this.resultsView]),this.set("isEnabled",!0),this.set("resultsCount",0),this.set("totalItemsCount",0),n.infoView&&n.infoView.instance?this.infoView=n.infoView.instance:(this.infoView=new _N,this._enableDefaultInfoViewBehavior(),this.on("render",()=>{this.search("")})),this.resultsView.children.addMany([this.infoView,this.filteredView]),this.focusCycler=new cn({focusables:this.focusableChildren,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.on("search",(s,{resultsCount:o,totalItemsCount:r})=>{this.resultsCount=o,this.totalItemsCount=r}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search",n.class||null],tabindex:"-1"},children:this.children})}render(){super.render(),this.children.addMany([this.queryView,this.resultsView]);const e=n=>n.stopPropagation();for(const n of this.focusableChildren)this.focusTracker.add(n.element);this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}focus(){this.queryView.focus()}reset(){this.queryView.reset(),this.search(""),this.filteredView.element.scrollTo(0,0)}search(e){const n=e?new RegExp(T0(e),"ig"):null,s=this.filteredView.filter(n);this.fire("search",{query:e,...s})}_createSearchTextQueryView(){const e=new vY(this.locale,this._config.queryView);return this.listenTo(e.fieldView,"input",()=>{this.search(e.fieldView.element.value)}),e.on("reset",()=>this.reset()),e.bind("isEnabled").to(this),e}_enableDefaultInfoViewBehavior(){const e=this.locale.t,n=this.infoView;this.on("search",(o,r)=>{if(r.resultsCount)n.set({isVisible:!1});else{const a=this._config.infoView&&this._config.infoView.text;let l,u;r.totalItemsCount?a!=null&&a.notFound?(l=a.notFound.primary,u=a.notFound.secondary):(l=e("No results found"),u=""):a!=null&&a.noSearchableItems?(l=a.noSearchableItems.primary,u=a.noSearchableItems.secondary):(l=e("No searchable items"),u=""),n.set({primaryText:s(l,r),secondaryText:s(u,r),isVisible:!0})}});function s(o,{query:r,resultsCount:a,totalItemsCount:l}){return typeof o=="function"?o(r,a,l):o}}}class xY extends Oc{constructor(e){super(e);_(this,"arrowView");const n=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",s=>String(s)),"data-cke-tooltip-disabled":n.to("isOn")},on:{mouseenter:n.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new os;return e.content=Mp,e.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),e}}class kY extends fe{constructor(e){super(e);_(this,"children");const n=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",n.to("position",s=>`ck-menu-bar__menu__panel_position_${s}`),n.if("isVisible","ck-hidden",s=>!s)],tabindex:"-1"},children:this.children,on:{selectstart:n.to(s=>{s.target.tagName.toLocaleLowerCase()!=="input"&&s.preventDefault()})}})}focus(e=1){this.children.length&&(e===1?this.children.first.focus():this.children.last.focus())}}const np=class np extends fe{constructor(e){super(e);_(this,"buttonView");_(this,"panelView");_(this,"focusTracker");_(this,"keystrokes");const n=this.bindTemplate;this.buttonView=new xY(e),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new kY(e),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Dt,this.focusTracker=new wt,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",n.to("class"),n.if("isEnabled","ck-disabled",s=>!s),n.if("parentMenuView","ck-menu-bar__menu_top-level",s=>!s)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),hr.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(hr.openOnButtonClick(this),hr.openOnArrowRightKey(this),hr.closeOnArrowLeftKey(this),hr.openAndFocusOnEnterKeyPress(this),hr.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),hr.openAndFocusPanelOnArrowDownKey(this),hr.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(e,n)=>{this.fire("arrowright"),n()}),this.keystrokes.set("arrowleft",(e,n)=>{this.fire("arrowleft"),n()})}_repositionPanelOnOpen(){this.on("change:isOpen",(e,n,s)=>{if(!s)return;const o=np._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=o?o.name:this._defaultMenuPositionName})}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:e,southWest:n,northEast:s,northWest:o,westSouth:r,eastSouth:a,westNorth:l,eastNorth:u}=nY;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[a,u,r,l]:[e,n,s,o]:this.parentMenuView?[r,l,a,u]:[n,e,o,s]}get _defaultMenuPositionName(){return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?"es":"se":this.parentMenuView?"ws":"sw"}};_(np,"_getOptimalPosition",k0);let ws=np;class kc extends ja{constructor(t){super(t),this.role="menu",this.items.on("change",this._setItemsCheckSpace.bind(this))}_setItemsCheckSpace(){const t=Array.from(this.items).some(e=>{const n=u2(e);return n&&n.isToggleable});this.items.forEach(e=>{const n=u2(e);n&&(n.hasCheckSpace=t)})}}function u2(i){return i instanceof rs?i.children.map(t=>EY(t)?t.buttonView:t).find(t=>t instanceof Oc):null}function EY(i){return typeof i=="object"&&"buttonView"in i&&i.buttonView instanceof ke}class wN extends lZ{constructor(t){super(t),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}const d2=["mouseenter","arrowleft","arrowright","change:isOpen"];class SY extends fe{constructor(e){super(e);_(this,"children");_(this,"menus",[]);const n=e.t,s=this.bindTemplate;this.set({isOpen:!1,isFocusBorderEnabled:!1}),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar",s.if("isFocusBorderEnabled","ck-menu-bar_focus-border-enabled")],"aria-label":n("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(e,n,s=[]){const o=this.locale,a=oY({normalizedConfig:e,locale:o,componentFactory:n,extraItems:s}).items.map(l=>this._createMenu({componentFactory:n,menuDefinition:l}));this.children.addMany(a)}render(){super.render(),$l.toggleMenusAndFocusItemsOnHover(this),$l.closeMenusWhenTheBarCloses(this),$l.closeMenuWhenAnotherOnTheSameLevelOpens(this),$l.focusCycleMenusOnArrows(this),$l.closeOnClickOutside(this),$l.enableFocusHighlightOnInteraction(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(const e of this.children)e.isOpen=!1}disable(){for(const e of this.children)e.isEnabled=!1}enable(){for(const e of this.children)e.isEnabled=!0}registerMenu(e,n=null){n?(e.delegate(...d2).to(n),e.parentMenuView=n):e.delegate(...d2).to(this,s=>"menu:"+s),e._attachBehaviors(),this.menus.push(e)}_createMenu({componentFactory:e,menuDefinition:n,parentMenuView:s}){const o=this.locale,r=new ws(o);return this.registerMenu(r,s),r.buttonView.set({label:n.label}),r.once("change:isOpen",()=>{const a=new kc(o);a.ariaLabel=n.label,r.panelView.children.add(a),a.items.addMany(this._createMenuItems({menuDefinition:n,parentMenuView:r,componentFactory:e}))}),r}_createMenuItems({menuDefinition:e,parentMenuView:n,componentFactory:s}){const o=this.locale,r=[];for(const a of e.groups){for(const l of a.items){const u=new Lc(o,n);if(is(l))u.children.add(this._createMenu({componentFactory:s,menuDefinition:l,parentMenuView:n}));else{const h=this._createMenuItemContentFromFactory({componentName:l,componentFactory:s,parentMenuView:n});if(!h)continue;u.children.add(h)}r.push(u)}a!==e.groups[e.groups.length-1]&&r.push(new X0(o))}return r}_createMenuItemContentFromFactory({componentName:e,parentMenuView:n,componentFactory:s}){const o=s.create(e);return o instanceof ws||o instanceof Jn||o instanceof wN?(this._registerMenuTree(o,n),o.on("execute",()=>{this.close()}),o):(Ze("menu-bar-component-unsupported",{componentName:e,componentView:o}),null)}_registerMenuTree(e,n){if(!(e instanceof ws)){e.delegate("mouseenter").to(n);return}this.registerMenu(e,n);const s=e.panelView.children.filter(r=>r instanceof kc)[0];if(!s){e.delegate("mouseenter").to(n);return}const o=s.items.filter(r=>r instanceof rs);for(const r of o)this._registerMenuTree(r.children.get(0),e)}_setupIsOpenUpdater(){let e;this.on("menu:change:isOpen",(n,s,o)=>{clearTimeout(e),o?this.isOpen=!0:e=setTimeout(()=>{this.isOpen=Array.from(this.children).some(r=>r.isOpen)},0)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const t1=["left","right","center","justify"];function yN(i){return t1.includes(i)}function vN(i,t){return t.contentLanguageDirection=="rtl"?i==="right":i==="left"}function CN(i){const t=i.map(n=>{let s;return typeof n=="string"?s={name:n}:s=n,s}).filter(n=>{const s=t1.includes(n.name);return s||Ze("alignment-config-name-not-recognized",{option:n}),s}),e=t.filter(n=>!!n.className).length;if(e&&e<t.length)throw new V("alignment-config-classnames-are-missing",{configuredOptions:i});return t.forEach((n,s,o)=>{const r=o.slice(s+1);if(r.some(l=>l.name==n.name))throw new V("alignment-config-name-already-defined",{option:n,configuredOptions:i});if(n.className&&r.some(u=>u.className==n.className))throw new V("alignment-config-classname-already-defined",{option:n,configuredOptions:i})}),t}const n1="alignment";class AY extends $e{refresh(){const e=this.editor.locale,n=Ln(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!n&&this._canBeAligned(n),this.isEnabled&&n.hasAttribute("alignment")?this.value=n.getAttribute("alignment"):this.value=e.contentLanguageDirection==="rtl"?"right":"left"}execute(t={}){const e=this.editor,n=e.locale,s=e.model,o=s.document,r=t.value;s.change(a=>{const l=Array.from(o.selection.getSelectedBlocks()).filter(m=>this._canBeAligned(m)),u=l[0].getAttribute("alignment");vN(r,n)||u===r||!r?RY(l,a):IY(l,a,r)})}_canBeAligned(t){return this.editor.model.schema.checkAttribute(t,n1)}}function RY(i,t){for(const e of i)t.removeAttribute(n1,e)}function IY(i,t,e){for(const n of i)t.setAttribute(n1,e,n)}class PY extends te{static get pluginName(){return"AlignmentEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("alignment",{options:t1.map(e=>({name:e}))})}init(){const t=this.editor,e=t.locale,n=t.model.schema,o=CN(t.config.get("alignment.options")).filter(u=>yN(u.name)&&!vN(u.name,e)),r=o.some(u=>!!u.className);n.extend("$block",{allowAttributes:"alignment"}),t.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),r?t.conversion.attributeToAttribute(DY(o)):t.conversion.for("downcast").attributeToAttribute(MY(o));const a=VY(o);for(const u of a)t.conversion.for("upcast").attributeToAttribute(u);const l=NY(o);for(const u of l)t.conversion.for("upcast").attributeToAttribute(u);t.commands.add("alignment",new AY(t))}}function MY(i){const t={};for(const{name:n}of i)t[n]={key:"style",value:{"text-align":n}};return{model:{key:"alignment",values:i.map(n=>n.name)},view:t}}function VY(i){const t=[];for(const{name:e}of i)t.push({view:{key:"style",value:{"text-align":e}},model:{key:"alignment",value:e}});return t}function NY(i){const t=[];for(const{name:e}of i)t.push({view:{key:"align",value:e},model:{key:"alignment",value:e}});return t}function DY(i){const t={};for(const n of i)t[n.name]={key:"class",value:n.className};return{model:{key:"alignment",values:i.map(n=>n.name)},view:t}}const Ju=new Map([["left",$0],["right",MV],["center",IV],["justify",PV]]);class OY extends te{get localizedOptionTitles(){const t=this.editor.t;return{left:t("Align left"),right:t("Align right"),center:t("Align center"),justify:t("Justify")}}static get pluginName(){return"AlignmentUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=CN(t.config.get("alignment.options"));e.map(n=>n.name).filter(yN).forEach(n=>this._addButton(n)),this._addToolbarDropdown(e),this._addMenuBarMenu(e)}_addButton(t){this.editor.ui.componentFactory.add(`alignment:${t}`,n=>this._createButton(n,t))}_createButton(t,e,n={}){const s=this.editor,o=s.commands.get("alignment"),r=new ke(t);return r.set({label:this.localizedOptionTitles[e],icon:Ju.get(e),tooltip:!0,isToggleable:!0,...n}),r.bind("isEnabled").to(o),r.bind("isOn").to(o,"value",a=>a===e),this.listenTo(r,"execute",()=>{s.execute("alignment",{value:e}),s.editing.view.focus()}),r}_addToolbarDropdown(t){const e=this.editor;e.ui.componentFactory.add("alignment",s=>{const o=ii(s),r=s.uiLanguageDirection==="rtl"?"w":"e",a=s.t;Dp(o,()=>t.map(h=>this._createButton(s,h.name,{tooltipPosition:r})),{enableActiveItemFocusOnDropdownOpen:!0,isVertical:!0,ariaLabel:a("Text alignment toolbar")}),o.buttonView.set({label:a("Text alignment"),tooltip:!0}),o.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const l=s.contentLanguageDirection==="rtl"?Ju.get("right"):Ju.get("left"),u=e.commands.get("alignment");return o.buttonView.bind("icon").to(u,"value",h=>Ju.get(h)||l),o.bind("isEnabled").to(u,"isEnabled"),this.listenTo(o,"execute",()=>{e.editing.view.focus()}),o})}_addMenuBarMenu(t){const e=this.editor;e.ui.componentFactory.add("menuBar:alignment",n=>{const s=e.commands.get("alignment"),o=n.t,r=new ws(n),a=new kc(n);r.bind("isEnabled").to(s),a.set({ariaLabel:o("Text alignment"),role:"menu"}),r.buttonView.set({label:o("Text alignment")});for(const l of t){const u=new Lc(n,r),h=new Jn(n);h.delegate("execute").to(r),h.set({label:this.localizedOptionTitles[l.name],icon:Ju.get(l.name),role:"menuitemcheckbox",isToggleable:!0}),h.on("execute",()=>{e.execute("alignment",{value:l.name}),e.editing.view.focus()}),h.bind("isOn").to(s,"value",m=>m===l.name),h.bind("isEnabled").to(s,"isEnabled"),u.children.add(h),a.items.add(u)}return r.panelView.children.add(a),r})}}class LY extends te{static get requires(){return[PY,OY]}static get pluginName(){return"Alignment"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class TN{constructor(t,e=20){_(this,"model");_(this,"limit");_(this,"_isLocked");_(this,"_size");_(this,"_batch",null);_(this,"_changeCallback");_(this,"_selectionChangeCallback");this.model=t,this._size=0,this.limit=e,this._isLocked=!1,this._changeCallback=(n,s)=>{s.isLocal&&s.isUndoable&&s!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(t){this._size+=t,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(t=!1){(!this.isLocked||t)&&(this._batch=null,this._size=0)}}class BY extends $e{constructor(e,n){super(e);_(this,"_buffer");this._buffer=new TN(e.model,n),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){const n=this.editor.model,s=n.document,o=e.text||"",r=o.length;let a=s.selection;if(e.selection?a=e.selection:e.range&&(a=n.createSelection(e.range)),!n.canEditAt(a))return;const l=e.resultRange;n.enqueueChange(this._buffer.batch,u=>{this._buffer.lock();const h=Array.from(s.selection.getAttributes());n.deleteContent(a),o&&n.insertContent(u.createText(o,h),a),l?u.setSelection(l):a.is("documentSelection")||u.setSelection(a),this._buffer.unlock(),this._buffer.input(r)})}}const xN=["insertText","insertReplacementText"],FY=[...xN,"insertCompositionText"];class UY extends Ks{constructor(e){super(e);_(this,"focusObserver");this.focusObserver=e.getObserver(Eg);const n=Se.isAndroid?FY:xN,s=e.document;s.on("beforeinput",(o,r)=>{if(!this.isEnabled)return;const{data:a,targetRanges:l,inputType:u,domEvent:h,isComposing:m}=r;if(!n.includes(u))return;this.focusObserver.flush();const p=new Mo(s,"insertText");s.fire(p,new Na(e,h,{text:a,selection:e.createSelection(l),isComposing:m})),p.stop.called&&o.stop()}),Se.isAndroid||s.on("compositionend",(o,{data:r,domEvent:a})=>{this.isEnabled&&r&&s.fire("insertText",new Na(e,a,{text:r,isComposing:!0}))},{priority:"low"})}observe(){}stopObserving(){}}class kN extends te{constructor(){super(...arguments);_(this,"_typingQueue")}static get pluginName(){return"Input"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model,s=e.editing.view,o=e.editing.mapper,r=n.document.selection;this._typingQueue=new zY(e),s.addObserver(UY);const a=new BY(e,e.config.get("typing.undoStep")||20);e.commands.add("insertText",a),e.commands.add("input",a),this.listenTo(s.document,"beforeinput",()=>{this._typingQueue.flush("next beforeinput")},{priority:"high"}),this.listenTo(s.document,"insertText",(l,u)=>{const{text:h,selection:m}=u;if(s.document.selection.isFake&&m&&s.document.selection.isSimilar(m)&&u.preventDefault(),!a.isEnabled){u.preventDefault();return}let p;m?p=Array.from(m.getRanges()).map(x=>o.toModelRange(x)):p=Array.from(r.getRanges());let v=h;if(Se.isAndroid){const x=Array.from(p[0].getItems()).reduce((k,S)=>k+(S.is("$textProxy")?S.data:""),"");if(x&&(x.length<=v.length?v.startsWith(x)&&(v=v.substring(x.length),p[0].start=p[0].start.getShiftedBy(x.length)):x.startsWith(v)&&(p[0].start=p[0].start.getShiftedBy(v.length),v="")),v.length==0&&p[0].isCollapsed)return}const C={text:v,selection:n.createSelection(p)};this._typingQueue.push(C,!!u.isComposing),u.domEvent.defaultPrevented&&this._typingQueue.flush("beforeinput default prevented")}),Se.isAndroid?this.listenTo(s.document,"keydown",(l,u)=>{r.isCollapsed||u.keyCode!=229||!s.document.isComposing||h2(n,a)}):this.listenTo(s.document,"compositionstart",()=>{r.isCollapsed||h2(n,a)},{priority:"high"}),this.listenTo(s.document,"mutations",(l,{mutations:u})=>{if(this._typingQueue.hasAffectedElements())for(const{node:h}of u){const m=WY(h,o),p=o.toModelElement(m);if(this._typingQueue.isElementAffected(p)){this._typingQueue.flush("mutations");return}}}),this.listenTo(s.document,"compositionend",()=>{this._typingQueue.flush("before composition end")},{priority:"high"}),this.listenTo(s.document,"compositionend",()=>{this._typingQueue.flush("after composition end");const l=[];if(this._typingQueue.hasAffectedElements())for(const u of this._typingQueue.flushAffectedElements()){const h=o.toViewElement(u);h&&l.push({type:"children",node:h})}(l.length||!Se.isAndroid)&&s.document.fire("mutations",{mutations:l})},{priority:"lowest"})}destroy(){super.destroy(),this._typingQueue.destroy()}}class zY{constructor(t){_(this,"editor");_(this,"flushDebounced",ss(()=>this.flush("timeout"),50));_(this,"_queue",[]);_(this,"_isComposing",!1);_(this,"_affectedElements",new Set);this.editor=t}destroy(){for(this.flushDebounced.cancel(),this._affectedElements.clear();this._queue.length;)this.shift()}get length(){return this._queue.length}push(t,e){const n={text:t.text};if(t.selection){n.selectionRanges=[];for(const s of t.selection.getRanges())n.selectionRanges.push(ei.fromRange(s)),this._affectedElements.add(s.start.parent)}this._queue.push(n),this._isComposing||(this._isComposing=e),this.flushDebounced()}shift(){const t=this._queue.shift(),e={text:t.text};if(t.selectionRanges){const n=t.selectionRanges.map(s=>HY(s)).filter(s=>!!s);n.length&&(e.selection=this.editor.model.createSelection(n))}return e}flush(t){const e=this.editor,n=e.model,s=e.editing.view;if(this.flushDebounced.cancel(),!this._queue.length)return;const r=e.commands.get("insertText").buffer;n.enqueueChange(r.batch,()=>{for(r.lock();this._queue.length;){const a=this.shift();e.execute("insertText",a)}r.unlock(),this._isComposing||this._affectedElements.clear(),this._isComposing=!1}),s.scrollToTheSelection()}isElementAffected(t){return this._affectedElements.has(t)}hasAffectedElements(){return this._affectedElements.size>0}flushAffectedElements(){const t=Array.from(this._affectedElements);return this._affectedElements.clear(),t}}function h2(i,t){if(!t.isEnabled)return;const e=t.buffer;e.lock(),i.enqueueChange(e.batch,()=>{i.deleteContent(i.document.selection)}),e.unlock()}function HY(i){const t=i.toRange();return i.detach(),t.root.rootName=="$graveyard"?null:t}function WY(i,t){let e=i.is("$text")?i.parent:i;for(;!t.toModelElement(e);)e=e.parent;return e}class f2 extends $e{constructor(e,n){super(e);_(this,"direction");_(this,"_buffer");this.direction=n,this._buffer=new TN(e.model,e.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(e={}){const n=this.editor.model,s=n.document;n.enqueueChange(this._buffer.batch,o=>{this._buffer.lock();const r=o.createSelection(e.selection||s.selection);if(!n.canEditAt(r))return;const a=e.sequence||1,l=r.isCollapsed;if(r.isCollapsed&&n.modifySelection(r,{direction:this.direction,unit:e.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(a)){this._replaceEntireContentWithParagraph(o);return}if(this._shouldReplaceFirstBlockWithParagraph(r,a)){this.editor.execute("paragraph",{selection:r});return}if(r.isCollapsed)return;let u=0;r.getFirstRange().getMinimalFlatRanges().forEach(h=>{u+=Hy(h.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),n.deleteContent(r,{doNotResetEntireContent:l,direction:this.direction}),this._buffer.input(u),o.setSelection(r),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;const n=this.editor.model,o=n.document.selection,r=n.schema.getLimitElement(o);if(!(o.isCollapsed&&o.containsEntireContent(r))||!n.schema.checkChild(r,"paragraph"))return!1;const l=r.getChild(0);return!(l&&l.is("element","paragraph"))}_replaceEntireContentWithParagraph(e){const n=this.editor.model,o=n.document.selection,r=n.schema.getLimitElement(o),a=e.createElement("paragraph");e.remove(e.createRangeIn(r)),e.insert(a,r),e.setSelection(a,0)}_shouldReplaceFirstBlockWithParagraph(e,n){const s=this.editor.model;if(n>1||this.direction!="backward"||!e.isCollapsed)return!1;const o=e.getFirstPosition(),r=s.schema.getLimitElement(o),a=r.getChild(0);return!(o.parent!=a||!e.containsEntireContent(a)||!s.schema.checkChild(r,"paragraph")||a.name=="paragraph")}}const qY="character",m2="word",$Y="codePoint",wr="selection",nc="backward",fd="forward",EN={deleteContent:{unit:wr,direction:nc},deleteContentBackward:{unit:$Y,direction:nc},deleteWordBackward:{unit:m2,direction:nc},deleteHardLineBackward:{unit:wr,direction:nc},deleteSoftLineBackward:{unit:wr,direction:nc},deleteContentForward:{unit:qY,direction:fd},deleteWordForward:{unit:m2,direction:fd},deleteHardLineForward:{unit:wr,direction:fd},deleteSoftLineForward:{unit:wr,direction:fd}};class GY extends Ks{constructor(t){super(t);const e=t.document;let n=0;e.on("keydown",()=>{n++}),e.on("keyup",()=>{n=0}),e.on("beforeinput",(s,o)=>{if(!this.isEnabled)return;const{targetRanges:r,domEvent:a,inputType:l}=o,u=EN[l];if(!u)return;const h={direction:u.direction,unit:u.unit,sequence:n};h.unit==wr&&(h.selectionToRemove=t.createSelection(r[0])),l==="deleteContentBackward"&&(Se.isAndroid&&(h.sequence=1),KY(r)&&(h.unit=wr,h.selectionToRemove=t.createSelection(r)));const m=new qa(e,"delete",r[0]);e.fire(m,new Na(t,a,h)),m.stop.called&&s.stop()}),Se.isBlink&&jY(this)}observe(){}stopObserving(){}}function jY(i){const t=i.view,e=t.document;let n=null,s=!1;e.on("keydown",(a,{keyCode:l})=>{n=l,s=!1}),e.on("keyup",(a,{keyCode:l,domEvent:u})=>{const h=e.selection,m=i.isEnabled&&l==n&&o(l)&&!h.isCollapsed&&!s;if(n=null,m){const p=h.getFirstRange(),v=new qa(e,"delete",p),C={unit:wr,direction:r(l),selectionToRemove:h};e.fire(v,new Na(t,u,C))}}),e.on("beforeinput",(a,{inputType:l})=>{const u=EN[l];o(n)&&u&&u.direction==r(n)&&(s=!0)},{priority:"high"}),e.on("beforeinput",(a,{inputType:l,data:u})=>{n==Ue.delete&&l=="insertText"&&u==""&&a.stop()},{priority:"high"});function o(a){return a==Ue.backspace||a==Ue.delete}function r(a){return a==Ue.backspace?nc:fd}}function KY(i){if(i.length!=1||i[0].isCollapsed)return!1;const t=i[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let e=0;for(const{nextPosition:n,item:s}of t){if(n.parent.is("$text")){const o=n.parent.data,r=n.offset;if(P0(o,r)||M0(o,r)||M5(o,r))continue;e++}else(s.is("containerElement")||s.is("emptyElement"))&&e++;if(e>1)return!0}return!1}class Vr extends te{constructor(){super(...arguments);_(this,"_undoOnBackspace")}static get pluginName(){return"Delete"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.editing.view,s=n.document,o=e.model.document;n.addObserver(GY),this._undoOnBackspace=!1;const r=new f2(e,"forward");e.commands.add("deleteForward",r),e.commands.add("forwardDelete",r),e.commands.add("delete",new f2(e,"backward")),this.listenTo(s,"delete",(a,l)=>{s.isComposing||l.preventDefault();const{direction:u,sequence:h,selectionToRemove:m,unit:p}=l,v=u==="forward"?"deleteForward":"delete",C={sequence:h};if(p=="selection"){const x=Array.from(m.getRanges()).map(k=>e.editing.mapper.toModelRange(k));C.selection=e.model.createSelection(x)}else C.unit=p;e.execute(v,C),n.scrollToTheSelection()},{priority:"low"}),this.listenTo(s,"keydown",(a,l)=>{if(s.isComposing||l.keyCode!=Ue.backspace||!o.selection.isCollapsed)return;const u=e.model.schema.getLimitElement(o.selection),h=e.model.createPositionAt(u,0);if(h.isTouching(o.selection.getFirstPosition())){l.preventDefault();const m=e.model.schema.getNearestSelectionRange(h,"forward");if(!m)return;const p=n.createSelection(e.editing.mapper.toViewRange(m)),v=p.getFirstRange(),C=new qa(document,"delete",v),x={unit:"selection",direction:"backward",selectionToRemove:p};s.fire(C,new Na(n,l.domEvent,x))}}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(s,"delete",(a,l)=>{this._undoOnBackspace&&l.direction=="backward"&&l.sequence==1&&l.unit=="codePoint"&&(this._undoOnBackspace=!1,e.execute("undo"),l.preventDefault(),a.stop())},{context:"$capture"}),this.listenTo(o,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}class i1 extends te{static get requires(){return[kN,Vr]}static get pluginName(){return"Typing"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function SN(i,t){let e=i.start;return{text:Array.from(i.getWalker({ignoreElementEnd:!1})).reduce((s,{item:o})=>o.is("$text")||o.is("$textProxy")?s+o.data:(e=t.createPositionAfter(o),""),""),range:t.createRange(e,i.end)}}class s1 extends _t(){constructor(e,n){super();_(this,"model");_(this,"testCallback");_(this,"_hasMatch");this.model=e,this.testCallback=n,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const n=this.model.document;this.listenTo(n.selection,"change:range",(s,{directChange:o})=>{if(o){if(!n.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(n,"change:data",(s,o)=>{o.isUndo||!o.isLocal||this._evaluateTextBeforeSelection("data",{batch:o})})}_evaluateTextBeforeSelection(e,n={}){const s=this.model,r=s.document.selection,a=s.createRange(s.createPositionAt(r.focus.parent,0),r.focus),{text:l,range:u}=SN(a,s),h=this.testCallback(l);if(!h&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!h,h){const m=Object.assign(n,{text:l,range:u});typeof h=="object"&&Object.assign(m,h),this.fire(`matched:${e}`,m)}}}class g2 extends te{constructor(e){super(e);_(this,"attributes");_(this,"_overrideUid");_(this,"_isNextGravityRestorationSkipped",!1);this.attributes=new Set,this._overrideUid=null}static get pluginName(){return"TwoStepCaretMovement"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model,s=e.editing.view,o=e.locale,r=n.document.selection;this.listenTo(s.document,"arrowKey",(a,l)=>{if(!r.isCollapsed||l.shiftKey||l.altKey||l.ctrlKey)return;const u=l.keyCode==Ue.arrowright,h=l.keyCode==Ue.arrowleft;if(!u&&!h)return;const m=o.contentLanguageDirection;let p=!1;m==="ltr"&&u||m==="rtl"&&h?p=this._handleForwardMovement(l):p=this._handleBackwardMovement(l),p===!0&&a.stop()},{context:"$text",priority:"highest"}),this.listenTo(r,"change:range",(a,l)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}this._isGravityOverridden&&(!l.directChange&&Yi(r.getFirstPosition(),this.attributes)||this._restoreGravity())}),this._enableClickingAfterNode(),this._enableInsertContentSelectionAttributesFixer(),this._handleDeleteContentAfterNode()}registerAttribute(e){this.attributes.add(e)}_handleForwardMovement(e){const n=this.attributes,s=this.editor.model,o=s.document.selection,r=o.getFirstPosition();return this._isGravityOverridden||r.isAtStart&&go(o,n)?!1:Yi(r,n)?(e&&Qu(e),go(o,n)&&Yi(r,n,!0)?Xu(s,n):this._overrideGravity(),!0):!1}_handleBackwardMovement(e){const n=this.attributes,s=this.editor.model,o=s.document.selection,r=o.getFirstPosition();return this._isGravityOverridden?(e&&Qu(e),this._restoreGravity(),Yi(r,n,!0)?Xu(s,n):wm(s,n,r),!0):r.isAtStart?go(o,n)?(e&&Qu(e),wm(s,n,r),!0):!1:!go(o,n)&&Yi(r,n,!0)?(e&&Qu(e),wm(s,n,r),!0):p2(r,n)?r.isAtEnd&&!go(o,n)&&Yi(r,n)?(e&&Qu(e),wm(s,n,r),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):!1}_enableClickingAfterNode(){const e=this.editor,n=e.model,s=n.document.selection,o=e.editing.view.document;e.editing.view.addObserver(Rp),e.editing.view.addObserver(LG);let r=!1,a=!1;this.listenTo(o,"touchstart",()=>{a=!1,r=!0}),this.listenTo(o,"mousedown",()=>{a=!0}),this.listenTo(o,"selectionChange",()=>{const l=this.attributes;if(!a&&!r||(a=!1,r=!1,!s.isCollapsed)||!go(s,l))return;const u=s.getFirstPosition();Yi(u,l)&&(u.isAtStart||Yi(u,l,!0)?Xu(n,l):this._isGravityOverridden||this._overrideGravity())})}_enableInsertContentSelectionAttributesFixer(){const n=this.editor.model,s=n.document.selection,o=this.attributes;this.listenTo(n,"insertContent",()=>{const r=s.getFirstPosition();go(s,o)&&Yi(r,o)&&Xu(n,o)},{priority:"low"})}_handleDeleteContentAfterNode(){const e=this.editor,n=e.model,s=n.document.selection,o=e.editing.view;let r=!1,a=!1;this.listenTo(o.document,"delete",(l,u)=>{r=u.direction==="backward"},{priority:"high"}),this.listenTo(n,"deleteContent",()=>{if(!r)return;const l=s.getFirstPosition();a=go(s,this.attributes)&&!p2(l,this.attributes)},{priority:"high"}),this.listenTo(n,"deleteContent",()=>{r&&(r=!1,!a&&e.model.enqueueChange(()=>{const l=s.getFirstPosition();go(s,this.attributes)&&Yi(l,this.attributes)&&(l.isAtStart||Yi(l,this.attributes,!0)?Xu(n,this.attributes):this._isGravityOverridden||this._overrideGravity())}))},{priority:"low"})}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(e=>e.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(e=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function go(i,t){for(const e of t)if(i.hasAttribute(e))return!0;return!1}function wm(i,t,e){const n=e.nodeBefore;i.change(s=>{if(n){const o=[],r=i.schema.isObject(n)&&i.schema.isInline(n);for(const[a,l]of n.getAttributes())i.schema.checkAttribute("$text",a)&&(!r||i.schema.getAttributeProperties(a).copyFromObject!==!1)&&o.push([a,l]);s.setSelectionAttribute(o)}else s.removeSelectionAttribute(t)})}function Xu(i,t){i.change(e=>{e.removeSelectionAttribute(t)})}function Qu(i){i.preventDefault()}function p2(i,t){const e=i.getShiftedBy(-1);return Yi(e,t)}function Yi(i,t,e=!1){const{nodeBefore:n,nodeAfter:s}=i;for(const o of t){const r=n?n.getAttribute(o):void 0,a=s?s.getAttribute(o):void 0;if(!(e&&(r===void 0||a===void 0))&&a!==r)return!0}return!1}const b2={copyright:{from:"(c)",to:"©"},registeredTrademark:{from:"(r)",to:"®"},trademark:{from:"(tm)",to:"™"},oneHalf:{from:/(^|[^/a-z0-9])(1\/2)([^/a-z0-9])$/i,to:[null,"½",null]},oneThird:{from:/(^|[^/a-z0-9])(1\/3)([^/a-z0-9])$/i,to:[null,"⅓",null]},twoThirds:{from:/(^|[^/a-z0-9])(2\/3)([^/a-z0-9])$/i,to:[null,"⅔",null]},oneForth:{from:/(^|[^/a-z0-9])(1\/4)([^/a-z0-9])$/i,to:[null,"¼",null]},threeQuarters:{from:/(^|[^/a-z0-9])(3\/4)([^/a-z0-9])$/i,to:[null,"¾",null]},lessThanOrEqual:{from:"<=",to:"≤"},greaterThanOrEqual:{from:">=",to:"≥"},notEqual:{from:"!=",to:"≠"},arrowLeft:{from:"<-",to:"←"},arrowRight:{from:"->",to:"→"},horizontalEllipsis:{from:"...",to:"…"},enDash:{from:/(^| )(--)( )$/,to:[null,"–",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"—",null]},quotesPrimary:{from:jl('"'),to:[null,"“",null,"”"]},quotesSecondary:{from:jl("'"),to:[null,"‘",null,"’"]},quotesPrimaryEnGb:{from:jl("'"),to:[null,"‘",null,"’"]},quotesSecondaryEnGb:{from:jl('"'),to:[null,"“",null,"”"]},quotesPrimaryPl:{from:jl('"'),to:[null,"„",null,"”"]},quotesSecondaryPl:{from:jl("'"),to:[null,"‚",null,"’"]}},_2={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},ZY=["symbols","mathematical","typography","quotes"];class YY extends te{static get requires(){return["Delete","Input"]}static get pluginName(){return"TextTransformation"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("typing",{transformations:{include:ZY}})}init(){const e=this.editor.model.document.selection;e.on("change:range",()=>{this.isEnabled=!e.anchor.parent.is("element","codeBlock")}),this._enableTransformationWatchers()}_enableTransformationWatchers(){const t=this.editor,e=t.model,n=t.plugins.get("Delete"),s=eJ(t.config.get("typing.transformations")),o=a=>{for(const l of s)if(l.from.test(a))return{normalizedTransformation:l}},r=new s1(t.model,o);r.on("matched:data",(a,l)=>{if(!l.batch.isTyping)return;const{from:u,to:h}=l.normalizedTransformation,m=u.exec(l.text),p=h(m.slice(1)),v=l.range;let C=m.index;e.enqueueChange(x=>{for(let k=1;k<m.length;k++){const S=m[k],I=p[k-1];if(I==null){C+=S.length;continue}const P=v.start.getShiftedBy(C),O=e.createRange(P,P.getShiftedBy(S.length)),D=QY(P);e.insertContent(x.createText(I,D),O),C+=I.length}e.enqueueChange(()=>{n.requestUndoOnBackspace()})})}),r.bind("isEnabled").to(this)}}function JY(i){return typeof i=="string"?new RegExp(`(${T0(i)})$`):i}function XY(i){return typeof i=="string"?()=>[i]:i instanceof Array?()=>i:i}function QY(i){return(i.textNode?i.textNode:i.nodeAfter).getAttributes()}function jl(i){return new RegExp(`(^|\\s)(${i})([^${i}]*)(${i})$`)}function eJ(i){const t=i.extra||[],e=i.remove||[],n=o=>!e.includes(o),s=i.include.concat(t).filter(n);return tJ(s).filter(n).map(o=>typeof o=="string"&&b2[o]?b2[o]:o).filter(o=>typeof o=="object").map(o=>({from:JY(o.from),to:XY(o.to)}))}function tJ(i){const t=new Set;for(const e of i)if(typeof e=="string"&&_2[e])for(const n of _2[e])t.add(n);else t.add(e);return Array.from(t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Op(i,t,e,n){return n.createRange(w2(i,t,e,!0,n),w2(i,t,e,!1,n))}function w2(i,t,e,n,s){let o=i.textNode||(n?i.nodeBefore:i.nodeAfter),r=null;for(;o&&o.getAttribute(t)==e;)r=o,o=n?o.previousSibling:o.nextSibling;return r?s.createPositionAt(r,n?"before":"after"):i}function nJ(i,t,e,n){const s=i.editing.view,o=new Set;s.document.registerPostFixer(r=>{const a=i.model.document.selection;let l=!1;if(a.hasAttribute(t)){const u=Op(a.getFirstPosition(),t,a.getAttribute(t),i.model),h=i.editing.mapper.toViewRange(u);for(const m of h.getItems())m.is("element",e)&&!m.hasClass(n)&&(r.addClass(n,m),o.add(m),l=!0)}return l}),i.conversion.for("editingDowncast").add(r=>{r.on("insert",a,{priority:"highest"}),r.on("remove",a,{priority:"highest"}),r.on("attribute",a,{priority:"highest"}),r.on("selection",a,{priority:"highest"});function a(){s.change(l=>{for(const u of o.values())l.removeClass(n,u),o.delete(u)})}})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function fr(i,t,e,n){let s,o=null;typeof n=="function"?s=n:(o=i.commands.get(n),s=()=>{i.execute(n)}),i.model.document.on("change:data",(r,a)=>{if(o&&!o.isEnabled||!t.isEnabled)return;const l=Ln(i.model.document.selection.getRanges());if(!l.isCollapsed||a.isUndo||!a.isLocal)return;const u=Array.from(i.model.document.differ.getChanges()),h=u[0];if(u.length!=1||h.type!=="insert"||h.name!="$text"||h.length!=1)return;const m=h.position.parent;if(m.is("element","codeBlock")||m.is("element","listItem")&&typeof n!="function"&&!["numberedList","bulletedList","todoList"].includes(n)||o&&o.value===!0)return;const p=m.getChild(0),v=i.model.createRangeOn(p);if(!v.containsRange(l)&&!l.end.isEqual(v.end))return;const C=e.exec(p.data.substr(0,l.end.offset));C&&i.model.enqueueChange(x=>{const k=x.createPositionAt(m,0),S=x.createPositionAt(m,C[0].length),I=new ei(k,S);if(s({match:C})!==!1){x.remove(I);const O=i.model.document.selection.getFirstRange(),D=x.createRangeIn(m);m.isEmpty&&!D.isEqual(O)&&!D.containsRange(O,!0)&&x.remove(m)}I.detach(),i.model.enqueueChange(()=>{i.plugins.get("Delete").requestUndoOnBackspace()})})})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Kl(i,t,e,n){let s,o;e instanceof RegExp?s=e:o=e,o=o||(r=>{let a;const l=[],u=[];for(;(a=s.exec(r))!==null&&!(a&&a.length<4);){let{index:h,"1":m,"2":p,"3":v}=a;const C=m+p+v;h+=a[0].length-C.length;const x=[h,h+m.length],k=[h+m.length+p.length,h+m.length+p.length+v.length];l.push(x),l.push(k),u.push([h+m.length,h+m.length+p.length])}return{remove:l,format:u}}),i.model.document.on("change:data",(r,a)=>{if(a.isUndo||!a.isLocal||!t.isEnabled)return;const l=i.model,u=l.document.selection;if(!u.isCollapsed)return;const h=Array.from(l.document.differ.getChanges()),m=h[0];if(h.length!=1||m.type!=="insert"||m.name!="$text"||m.length!=1)return;const p=u.focus,v=p.parent,{text:C,range:x}=iJ(l.createRange(l.createPositionAt(v,0),p),l),k=o(C),S=y2(x.start,k.format,l),I=y2(x.start,k.remove,l);S.length&&I.length&&l.enqueueChange(P=>{if(n(P,S)!==!1){for(const D of I.reverse())P.remove(D);l.enqueueChange(()=>{i.plugins.get("Delete").requestUndoOnBackspace()})}})})}function y2(i,t,e){return t.filter(n=>n[0]!==void 0&&n[1]!==void 0).map(n=>e.createRange(i.getShiftedBy(n[0]),i.getShiftedBy(n[1])))}function iJ(i,t){let e=i.start;return{text:Array.from(i.getItems()).reduce((s,o)=>!(o.is("$text")||o.is("$textProxy"))||o.getAttribute("code")?(e=t.createPositionAfter(o),""):s+o.data,""),range:t.createRange(e,i.end)}}class sJ extends te{static get requires(){return[Vr]}static get pluginName(){return"Autoformat"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=this.editor.t;this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats(),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Revert autoformatting action"),keystroke:"Backspace"}]})}_addListAutoformats(){const t=this.editor.commands;t.get("bulletedList")&&fr(this.editor,this,/^[*-]\s$/,"bulletedList"),t.get("numberedList")&&fr(this.editor,this,/^1[.|)]\s$/,"numberedList"),t.get("todoList")&&fr(this.editor,this,/^\[\s?\]\s$/,"todoList"),t.get("checkTodoList")&&fr(this.editor,this,/^\[\s?x\s?\]\s$/,()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")})}_addBasicStylesAutoformats(){const t=this.editor.commands;if(t.get("bold")){const e=ym(this.editor,"bold");Kl(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,e),Kl(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,e)}if(t.get("italic")){const e=ym(this.editor,"italic");Kl(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,e),Kl(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,e)}if(t.get("code")){const e=ym(this.editor,"code");Kl(this.editor,this,/(`)([^`]+)(`)$/g,e)}if(t.get("strikethrough")){const e=ym(this.editor,"strikethrough");Kl(this.editor,this,/(~~)([^~]+)(~~)$/g,e)}}_addHeadingAutoformats(){const t=this.editor.commands.get("heading");t&&t.modelElements.filter(e=>e.match(/^heading[1-6]$/)).forEach(e=>{const n=e[7],s=new RegExp(`^(#{${n}})\\s$`);fr(this.editor,this,s,()=>{if(!t.isEnabled||t.value===e)return!1;this.editor.execute("heading",{value:e})})})}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&fr(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const t=this.editor,e=t.model.document.selection;t.commands.get("codeBlock")&&fr(t,this,/^```$/,()=>{if(e.getFirstPosition().parent.is("element","listItem"))return!1;this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0})})}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&fr(this.editor,this,/^---$/,"horizontalLine")}}function ym(i,t){return(e,n)=>{if(!i.commands.get(t).isEnabled)return!1;const o=i.model.schema.getValidRanges(n,t);for(const r of o)e.setAttribute(t,!0,r);e.removeSelectionAttribute(t)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class oJ extends te{constructor(e){super(e);_(this,"adapter");_(this,"_debouncedSave");_(this,"_lastDocumentVersion");_(this,"_savePromise");_(this,"_domEmitter");_(this,"_config");_(this,"_pendingActions");_(this,"_makeImmediateSave");_(this,"_action",null);const n=e.config.get("autosave")||{},s=n.waitingTime||1e3;this.set("state","synchronized"),this._debouncedSave=ss(this._save.bind(this),s),this._lastDocumentVersion=e.model.document.version,this._savePromise=null,this._domEmitter=new(Yn()),this._config=n,this._pendingActions=e.plugins.get(Rg),this._makeImmediateSave=!1}static get pluginName(){return"Autosave"}static get isOfficialPlugin(){return!0}static get requires(){return[Rg]}init(){const e=this.editor,n=e.model.document;this.listenTo(e,"ready",()=>{this.listenTo(n,"change:data",(s,o)=>{this._saveCallbacks.length&&o.isLocal&&(this.state==="synchronized"&&(this.state="waiting",this._setPendingAction()),this.state==="waiting"&&this._debouncedSave())})}),this.listenTo(e,"destroy",()=>this._flush(),{priority:"highest"});/* istanbul ignore next -- @preserve */this._domEmitter.listenTo(window,"beforeunload",(s,o)=>{this._pendingActions.hasAny&&(o.returnValue=this._pendingActions.first.message)})}destroy(){this._domEmitter.stopListening(),super.destroy()}save(){return this._debouncedSave.cancel(),this._save()}_flush(){this._debouncedSave.flush()}_save(){return this._savePromise?(this._makeImmediateSave=this.editor.model.document.version>this._lastDocumentVersion,this._savePromise):(this._setPendingAction(),this.state="saving",this._lastDocumentVersion=this.editor.model.document.version,this._savePromise=Promise.resolve().then(()=>Promise.all(this._saveCallbacks.map(e=>e(this.editor)))).finally(()=>{this._savePromise=null}).then(()=>{if(this._makeImmediateSave)return this._makeImmediateSave=!1,this._save();this.editor.model.document.version>this._lastDocumentVersion?(this.state="waiting",this._debouncedSave()):(this.state="synchronized",this._pendingActions.remove(this._action),this._action=null)}).catch(e=>{throw this.state="error",this.state="saving",this._debouncedSave(),e}),this._savePromise)}_setPendingAction(){const e=this.editor.t;this._action||(this._action=this._pendingActions.add(e("Saving changes")))}get _saveCallbacks(){const e=[];return this.adapter&&this.adapter.save&&e.push(this.adapter.save),this._config.save&&e.push(this._config.save),e}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class o1 extends $e{constructor(e,n){super(e);_(this,"attributeKey");this.attributeKey=n}refresh(){const e=this.editor.model,n=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(n.selection,this.attributeKey)}execute(e={}){const n=this.editor.model,o=n.document.selection,r=e.forceValue===void 0?!this.value:e.forceValue;n.change(a=>{if(o.isCollapsed)r?a.setSelectionAttribute(this.attributeKey,!0):a.removeSelectionAttribute(this.attributeKey);else{const l=n.schema.getValidRanges(o.getRanges(),this.attributeKey);for(const u of l)r?a.setAttribute(this.attributeKey,r,u):a.removeAttribute(this.attributeKey,u)}})}_getValueFromFirstAllowedNode(){const e=this.editor.model,n=e.schema,s=e.document.selection;if(s.isCollapsed)return s.hasAttribute(this.attributeKey);for(const o of s.getRanges())for(const r of o.getItems())if(n.checkAttribute(r,this.attributeKey))return r.hasAttribute(this.attributeKey);return!1}}const Zl="bold";class rJ extends te{static get pluginName(){return"BoldEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:Zl}),t.model.schema.setAttributeProperties(Zl,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:Zl,view:"strong",upcastAlso:["b",n=>{const s=n.getStyle("font-weight");return s&&(s=="bold"||Number(s)>=600)?{name:!0,styles:["font-weight"]}:null}]}),t.commands.add(Zl,new o1(t,Zl)),t.keystrokes.set("CTRL+B",Zl),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Bold text"),keystroke:"CTRL+B"}]})}}function r1({editor:i,commandName:t,plugin:e,icon:n,label:s,keystroke:o}){return r=>{const a=i.commands.get(t),l=new r(i.locale);return l.set({label:s,icon:n,keystroke:o,isToggleable:!0}),l.bind("isEnabled").to(a,"isEnabled"),l.bind("isOn").to(a,"value"),l instanceof Jn?l.set({role:"menuitemcheckbox"}):l.set({tooltip:!0}),e.listenTo(l,"execute",()=>{i.execute(t),i.editing.view.focus()}),l}}const ty="bold";class aJ extends te{static get pluginName(){return"BoldUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=r1({editor:t,commandName:ty,plugin:this,icon:VV,label:e("Bold"),keystroke:"CTRL+B"});t.ui.componentFactory.add(ty,()=>n(ke)),t.ui.componentFactory.add("menuBar:"+ty,()=>n(Jn))}}class lJ extends te{static get requires(){return[rJ,aJ]}static get pluginName(){return"Bold"}static get isOfficialPlugin(){return!0}}const Yl="italic";class cJ extends te{static get pluginName(){return"ItalicEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:Yl}),t.model.schema.setAttributeProperties(Yl,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:Yl,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),t.commands.add(Yl,new o1(t,Yl)),t.keystrokes.set("CTRL+I",Yl),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Italic text"),keystroke:"CTRL+I"}]})}}const ny="italic";class uJ extends te{static get pluginName(){return"ItalicUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=r1({editor:t,commandName:ny,plugin:this,icon:Zj,keystroke:"CTRL+I",label:e("Italic")});t.ui.componentFactory.add(ny,()=>n(ke)),t.ui.componentFactory.add("menuBar:"+ny,()=>n(Jn))}}class dJ extends te{static get requires(){return[cJ,uJ]}static get pluginName(){return"Italic"}static get isOfficialPlugin(){return!0}}const ed="underline";class hJ extends te{static get pluginName(){return"UnderlineEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:ed}),t.model.schema.setAttributeProperties(ed,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:ed,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),t.commands.add(ed,new o1(t,ed)),t.keystrokes.set("CTRL+U","underline"),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Underline text"),keystroke:"CTRL+U"}]})}}const iy="underline";class fJ extends te{static get pluginName(){return"UnderlineUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=r1({editor:t,commandName:iy,plugin:this,icon:yK,label:e("Underline"),keystroke:"CTRL+U"});t.ui.componentFactory.add(iy,()=>n(ke)),t.ui.componentFactory.add("menuBar:"+iy,()=>n(Jn))}}class mJ extends te{static get requires(){return[hJ,fJ]}static get pluginName(){return"Underline"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function*AN(i,t){for(const e of t)e&&i.getAttributeProperties(e[0]).copyOnEnter&&(yield e)}class gJ extends $e{execute(){this.editor.model.change(t=>{this.enterBlock(t),this.fire("afterExecute",{writer:t})})}enterBlock(t){const e=this.editor.model,n=e.document.selection,s=e.schema,o=n.isCollapsed,r=n.getFirstRange(),a=r.start.parent,l=r.end.parent;if(s.isLimit(a)||s.isLimit(l))return!o&&a==l&&e.deleteContent(n),!1;if(o){const u=AN(t.model.schema,n.getAttributes());return v2(t,r.start),t.setSelectionAttribute(u),!0}else{const u=!(r.start.isAtStart&&r.end.isAtEnd),h=a==l;if(e.deleteContent(n,{leaveUnmerged:u}),u){if(h)return v2(t,n.focus),!0;t.setSelection(l,0)}}return!1}}function v2(i,t){i.split(t),i.setSelection(t.parent.nextSibling,0)}const pJ={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class RN extends Ks{constructor(t){super(t);const e=this.document;let n=!1;e.on("keydown",(s,o)=>{n=o.shiftKey}),e.on("beforeinput",(s,o)=>{if(!this.isEnabled)return;let r=o.inputType;Se.isSafari&&n&&r=="insertParagraph"&&(r="insertLineBreak");const a=o.domEvent,l=pJ[r];if(!l)return;const u=new qa(e,"enter",o.targetRanges[0]);e.fire(u,new Na(t,a,{isSoft:l.isSoft})),u.stop.called&&s.stop()})}observe(){}stopObserving(){}}class IN extends te{static get pluginName(){return"Enter"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,n=e.document,s=this.editor.t;e.addObserver(RN),t.commands.add("enter",new gJ(t)),this.listenTo(n,"enter",(o,r)=>{n.isComposing||r.preventDefault(),!r.isSoft&&(t.execute("enter"),e.scrollToTheSelection())},{priority:"low"}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:s("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}}class bJ extends $e{execute(){const t=this.editor.model,e=t.document;t.change(n=>{wJ(t,n,e.selection),this.fire("afterExecute",{writer:n})})}refresh(){const t=this.editor.model,e=t.document;this.isEnabled=_J(t.schema,e.selection)}}function _J(i,t){if(t.rangeCount>1)return!1;const e=t.anchor;if(!e||!i.checkChild(e,"softBreak"))return!1;const n=t.getFirstRange(),s=n.start.parent,o=n.end.parent;return!((av(s,i)||av(o,i))&&s!==o)}function wJ(i,t,e){const n=e.isCollapsed,s=e.getFirstRange(),o=s.start.parent,r=s.end.parent,a=o==r;if(n){const l=AN(i.schema,e.getAttributes());C2(i,t,s.end),t.removeSelectionAttribute(e.getAttributeKeys()),t.setSelectionAttribute(l)}else{const l=!(s.start.isAtStart&&s.end.isAtEnd);i.deleteContent(e,{leaveUnmerged:l}),a?C2(i,t,e.focus):l&&t.setSelection(r,0)}}function C2(i,t,e){const n=t.createElement("softBreak");i.insertContent(n,e),t.setSelection(n,"after")}function av(i,t){return i.is("rootElement")?!1:t.isLimit(i)||av(i.parent,t)}class yJ extends te{static get pluginName(){return"ShiftEnter"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model.schema,n=t.conversion,s=t.editing.view,o=s.document,r=this.editor.t;e.register("softBreak",{allowWhere:"$text",isInline:!0}),n.for("upcast").elementToElement({model:"softBreak",view:"br"}),n.for("downcast").elementToElement({model:"softBreak",view:(a,{writer:l})=>l.createEmptyElement("br")}),s.addObserver(RN),t.commands.add("shiftEnter",new bJ(t)),this.listenTo(o,"enter",(a,l)=>{o.isComposing||l.preventDefault(),l.isSoft&&(t.execute("shiftEnter"),s.scrollToTheSelection())},{priority:"low"}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:r("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class vJ extends Tt(){constructor(){super(...arguments);_(this,"_stack",[])}add(e,n){const s=this._stack,o=s[0];this._insertDescriptor(e);const r=s[0];o!==r&&!sy(o,r)&&this.fire("change:top",{oldDescriptor:o,newDescriptor:r,writer:n})}remove(e,n){const s=this._stack,o=s[0];this._removeDescriptor(e);const r=s[0];o!==r&&!sy(o,r)&&this.fire("change:top",{oldDescriptor:o,newDescriptor:r,writer:n})}_insertDescriptor(e){const n=this._stack,s=n.findIndex(r=>r.id===e.id);if(sy(e,n[s]))return;s>-1&&n.splice(s,1);let o=0;for(;n[o]&&CJ(n[o],e);)o++;n.splice(o,0,e)}_removeDescriptor(e){const n=this._stack,s=n.findIndex(o=>o.id===e);s>-1&&n.splice(s,1)}}function sy(i,t){return i&&t&&i.priority==t.priority&&Vg(i.classes)==Vg(t.classes)}function CJ(i,t){return i.priority>t.priority?!0:i.priority<t.priority?!1:Vg(i.classes)>Vg(t.classes)}function Vg(i){return Array.isArray(i)?i.sort().join(","):i}const TJ="ck-widget",T2="ck-widget_selected";function Jt(i){return i.is("element")?!!i.getCustomProperty("widget"):!1}function a1(i,t,e={}){if(!i.is("containerElement"))throw new V("widget-to-widget-wrong-element-type",null,{element:i});return t.setAttribute("contenteditable","false",i),t.addClass(TJ,i),t.setCustomProperty("widget",!0,i),i.getFillerOffset=AJ,t.setCustomProperty("widgetLabel",[],i),e.label&&EJ(i,e.label),e.hasSelectionHandle&&RJ(i,t),PN(i,t),i}function xJ(i,t,e){if(t.classes&&e.addClass(bn(t.classes),i),t.attributes)for(const n in t.attributes)e.setAttribute(n,t.attributes[n],i)}function kJ(i,t,e){if(t.classes&&e.removeClass(bn(t.classes),i),t.attributes)for(const n in t.attributes)e.removeAttribute(n,i)}function PN(i,t,e=xJ,n=kJ){const s=new vJ;s.on("change:top",(a,l)=>{l.oldDescriptor&&n(i,l.oldDescriptor,l.writer),l.newDescriptor&&e(i,l.newDescriptor,l.writer)});const o=(a,l,u)=>s.add(l,u),r=(a,l,u)=>s.remove(l,u);t.setCustomProperty("addHighlight",o,i),t.setCustomProperty("removeHighlight",r,i)}function EJ(i,t){i.getCustomProperty("widgetLabel").push(t)}function SJ(i){return i.getCustomProperty("widgetLabel").reduce((e,n)=>typeof n=="function"?e?e+". "+n():n():e?e+". "+n:n,"")}function l1(i,t,e={}){return t.addClass(["ck-editor__editable","ck-editor__nested-editable"],i),e.withAriaRole!==!1&&t.setAttribute("role","textbox",i),t.setAttribute("tabindex","-1",i),e.label&&t.setAttribute("aria-label",e.label,i),t.setAttribute("contenteditable",i.isReadOnly?"false":"true",i),i.on("change:isReadOnly",(n,s,o)=>{t.setAttribute("contenteditable",o?"false":"true",i)}),i.on("change:isFocused",(n,s,o)=>{o?t.addClass("ck-editor__nested-editable_focused",i):t.removeClass("ck-editor__nested-editable_focused",i)}),PN(i,t),i}function MN(i,t){const e=i.getSelectedElement();if(e){const n=_r(i);if(n)return t.createRange(t.createPositionAt(e,n))}return t.schema.findOptimalInsertionRange(i)}function AJ(){return null}function RJ(i,t){const e=t.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(n){const s=this.toDomElement(n),o=new os;return o.set("content",Fj),o.render(),s.appendChild(o.element),s});t.insert(t.createPositionAt(i,0),e),t.addClass(["ck-widget_with-selection-handle"],i)}function c1(i){const t=a=>{const{width:l,paddingLeft:u,paddingRight:h}=a.ownerDocument.defaultView.getComputedStyle(a);return parseFloat(l)-(parseFloat(u)||0)-(parseFloat(h)||0)},e=i.parentElement;if(!e)return 0;let n=t(e);const s=5;let o=0,r=e;for(;isNaN(n);){if(r=r.parentElement,++o>s)return 0;n=t(r)}return n}function IJ(i,t=new Pe(i)){const e=c1(i);return e?t.width/e*100:0}const wo="widget-type-around";function ma(i,t,e){return!!i&&Jt(i)&&!e.isInline(t)}function PJ(i){return i.closest(".ck-widget__type-around__button")}function MJ(i){return i.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function VJ(i,t){const e=i.closest(".ck-widget");return t.mapDomToView(e)}function _r(i){return i.getAttribute(wo)}const VN=["before","after"],NJ=new DOMParser().parseFromString(uK,"image/svg+xml").firstChild,x2="ck-widget__type-around_disabled";class DJ extends te{constructor(){super(...arguments);_(this,"_currentFakeCaretModelElement",null)}static get pluginName(){return"WidgetTypeAround"}static get isOfficialPlugin(){return!0}static get requires(){return[IN,Vr]}init(){const e=this.editor,n=e.editing.view;this.on("change:isEnabled",(s,o,r)=>{n.change(a=>{for(const l of n.document.roots)r?a.removeClass(x2,l):a.addClass(x2,l)}),r||e.model.change(a=>{a.removeSelectionAttribute(wo)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(e,n){const s=this.editor,o=s.editing.view,r=s.model.schema.getAttributesWithProperty(e,"copyOnReplace",!0);s.execute("insertParagraph",{position:s.model.createPositionAt(e,n),attributes:r}),o.focus(),o.scrollToTheSelection()}_listenToIfEnabled(e,n,s,o){this.listenTo(e,n,(...r)=>{this.isEnabled&&s(...r)},o)}_insertParagraphAccordingToFakeCaretPosition(){const s=this.editor.model.document.selection,o=_r(s);if(!o)return!1;const r=s.getSelectedElement();return this._insertParagraph(r,o),!0}_enableTypeAroundUIInjection(){const e=this.editor,n=e.model.schema,s=e.locale.t,o={before:s("Insert paragraph before block"),after:s("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(r,a,l)=>{const u=l.mapper.toViewElement(a.item);u&&ma(u,a.item,n)&&(OJ(l.writer,o,u),u.getCustomProperty("widgetLabel").push(()=>this.isEnabled?s("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const e=this.editor,n=e.model,s=n.document.selection,o=n.schema,r=e.editing.view;this._listenToIfEnabled(r.document,"arrowKey",(l,u)=>{this._handleArrowKeyPress(l,u)},{context:[Jt,"$text"],priority:"high"}),this._listenToIfEnabled(s,"change:range",(l,u)=>{u.directChange&&e.model.change(h=>{h.removeSelectionAttribute(wo)})}),this._listenToIfEnabled(n.document,"change:data",()=>{const l=s.getSelectedElement();if(l){const u=e.editing.mapper.toViewElement(l);if(ma(u,l,o))return}e.model.change(u=>{u.removeSelectionAttribute(wo)})}),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",(l,u,h)=>{const m=h.writer;if(this._currentFakeCaretModelElement){const x=h.mapper.toViewElement(this._currentFakeCaretModelElement);x&&(m.removeClass(VN.map(a),x),this._currentFakeCaretModelElement=null)}const p=u.selection.getSelectedElement();if(!p)return;const v=h.mapper.toViewElement(p);if(!ma(v,p,o))return;const C=_r(u.selection);C&&(m.addClass(a(C),v),this._currentFakeCaretModelElement=p)}),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",(l,u,h)=>{h||e.model.change(m=>{m.removeSelectionAttribute(wo)})});function a(l){return`ck-widget_type-around_show-fake-caret_${l}`}}_handleArrowKeyPress(e,n){const s=this.editor,o=s.model,r=o.document.selection,a=o.schema,l=s.editing.view,u=n.keyCode,h=WH(u,s.locale.contentLanguageDirection),m=l.document.selection.getSelectedElement(),p=s.editing.mapper.toModelElement(m);let v;ma(m,p,a)?v=this._handleArrowKeyPressOnSelectedWidget(h):r.isCollapsed?v=this._handleArrowKeyPressWhenSelectionNextToAWidget(h):n.shiftKey||(v=this._handleArrowKeyPressWhenNonCollapsedSelection(h)),v&&(n.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(e){const s=this.editor.model,o=s.document.selection,r=_r(o);return s.change(a=>{if(r){if(!(r===(e?"after":"before")))return a.removeSelectionAttribute(wo),!0}else return a.setSelectionAttribute(wo,e?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(e){const n=this.editor,s=n.model,o=s.schema,r=n.plugins.get("Widget"),a=r._getObjectElementNextToSelection(e),l=n.editing.mapper.toViewElement(a);return ma(l,a,o)?(s.change(u=>{r._setSelectionOverElement(a),u.setSelectionAttribute(wo,e?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(e){const n=this.editor,s=n.model,o=s.schema,r=n.editing.mapper,a=s.document.selection,l=e?a.getLastPosition().nodeBefore:a.getFirstPosition().nodeAfter,u=r.toViewElement(l);return ma(u,l,o)?(s.change(h=>{h.setSelection(l,"on"),h.setSelectionAttribute(wo,e?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){const e=this.editor,n=e.editing.view;this._listenToIfEnabled(n.document,"mousedown",(s,o)=>{const r=PJ(o.domTarget);if(!r)return;const a=MJ(r),l=VJ(r,n.domConverter),u=e.editing.mapper.toModelElement(l);this._insertParagraph(u,a),o.preventDefault(),s.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const e=this.editor,n=e.model.document.selection,s=e.editing.view;this._listenToIfEnabled(s.document,"enter",(o,r)=>{if(o.eventPhase!="atTarget")return;const a=n.getSelectedElement(),l=e.editing.mapper.toViewElement(a),u=e.model.schema;let h;this._insertParagraphAccordingToFakeCaretPosition()?h=!0:ma(l,a,u)&&(this._insertParagraph(a,r.isSoft?"before":"after"),h=!0),h&&(r.preventDefault(),o.stop())},{context:Jt})}_enableInsertingParagraphsOnTypingKeystroke(){const n=this.editor.editing.view.document;this._listenToIfEnabled(n,"insertText",(s,o)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(o.selection=n.selection)},{priority:"high"}),Se.isAndroid?this._listenToIfEnabled(n,"keydown",(s,o)=>{o.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(n,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"highest"})}_enableDeleteIntegration(){const e=this.editor,n=e.editing.view,s=e.model,o=s.schema;this._listenToIfEnabled(n.document,"delete",(r,a)=>{if(r.eventPhase!="atTarget")return;const l=_r(s.document.selection);if(!l)return;const u=a.direction,h=s.document.selection.getSelectedElement(),m=l==="before",p=u=="forward";if(m===p)e.execute("delete",{selection:s.createSelection(h,"on")});else{const C=o.getNearestSelectionRange(s.createPositionAt(h,l),u);if(C)if(!C.isCollapsed)s.change(x=>{x.setSelection(C),e.execute(p?"deleteForward":"delete")});else{const x=s.createSelection(C.start);if(s.modifySelection(x,{direction:u}),!x.focus.isEqual(C.start))s.change(k=>{k.setSelection(C),e.execute(p?"deleteForward":"delete")});else{const k=FJ(o,C.start.parent);s.deleteContent(s.createSelection(k,"on"),{doNotAutoparagraph:!0})}}}a.preventDefault(),r.stop()},{context:Jt})}_enableInsertContentIntegration(){const e=this.editor,n=this.editor.model,s=n.document.selection;this._listenToIfEnabled(e.model,"insertContent",(o,[r,a])=>{if(a&&!a.is("documentSelection"))return;const l=_r(s);if(l)return o.stop(),n.change(u=>{const h=s.getSelectedElement(),m=n.createPositionAt(h,l),p=u.createSelection(m),v=n.insertContent(r,p);return u.setSelection(p),v})},{priority:"high"})}_enableInsertObjectIntegration(){const e=this.editor,s=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"insertObject",(o,r)=>{const[,a,l={}]=r;if(a&&!a.is("documentSelection"))return;const u=_r(s);u&&(l.findOptimalPosition=u,r[3]=l)},{priority:"high"})}_enableDeleteContentIntegration(){const e=this.editor,s=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",(o,[r])=>{if(r&&!r.is("documentSelection"))return;_r(s)&&o.stop()},{priority:"high"})}}function OJ(i,t,e){const n=i.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(s){const o=this.toDomElement(s);return LJ(o,t),BJ(o),o});i.insert(i.createPositionAt(e,"end"),n)}function LJ(i,t){for(const e of VN){const n=new Ti({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${e}`],title:t[e],"aria-hidden":"true"},children:[i.ownerDocument.importNode(NJ,!0)]});i.appendChild(n.render())}}function BJ(i){const t=new Ti({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});i.appendChild(t.render())}function FJ(i,t){let e=t;for(const n of t.getAncestors({parentFirst:!0})){if(n.childCount>1||i.isLimit(n))break;e=n}return e}function UJ(i){const t=i.model;return(e,n)=>{const s=n.keyCode==Ue.arrowup,o=n.keyCode==Ue.arrowdown,r=n.shiftKey,a=t.document.selection;if(!s&&!o)return;const l=o;if(r&&WJ(a,l))return;const u=zJ(i,a,l);if(u){if(u.isCollapsed){if(a.isCollapsed)return;if(r)return}(u.isCollapsed||HJ(i,u,l))&&(t.change(h=>{const m=l?u.end:u.start;if(r){const p=t.createSelection(a.anchor);p.setFocus(m),h.setSelection(p)}else h.setSelection(m)}),e.stop(),n.preventDefault(),n.stopPropagation())}}}function zJ(i,t,e){const n=i.model;if(e){const s=t.isCollapsed?t.focus:t.getLastPosition(),o=k2(n,s,"forward");if(!o)return null;const r=n.createRange(s,o),a=E2(n.schema,r,"backward");return a?n.createRange(s,a):null}else{const s=t.isCollapsed?t.focus:t.getFirstPosition(),o=k2(n,s,"backward");if(!o)return null;const r=n.createRange(o,s),a=E2(n.schema,r,"forward");return a?n.createRange(a,s):null}}function k2(i,t,e){const n=i.schema,s=i.createRangeIn(t.root),o=e=="forward"?"elementStart":"elementEnd";for(const{previousPosition:r,item:a,type:l}of s.getWalker({startPosition:t,direction:e})){if(n.isLimit(a)&&!n.isInline(a))return r;if(l==o&&n.isBlock(a))return null}return null}function E2(i,t,e){const n=e=="backward"?t.end:t.start;if(i.checkChild(n,"$text"))return n;for(const{nextPosition:s}of t.getWalker({direction:e}))if(i.checkChild(s,"$text"))return s;return null}function HJ(i,t,e){const n=i.model,s=i.view.domConverter;if(e){const u=n.createSelection(t.start);n.modifySelection(u),!u.focus.isAtEnd&&!t.start.isEqual(u.focus)&&(t=n.createRange(u.focus,t.end))}const o=i.mapper.toViewRange(t),r=s.viewRangeToDom(o),a=Pe.getDomRangeRects(r);let l;for(const u of a){if(l===void 0){l=Math.round(u.bottom);continue}if(Math.round(u.top)>=l)return!1;l=Math.max(l,Math.round(u.bottom))}return!0}function WJ(i,t){return!i.isCollapsed&&i.isBackward==t}class Rh extends te{constructor(){super(...arguments);_(this,"_previouslySelected",new Set)}static get pluginName(){return"Widget"}static get isOfficialPlugin(){return!0}static get requires(){return[DJ,Vr]}init(){const e=this.editor,n=e.editing.view,s=n.document,o=e.t;this.editor.editing.downcastDispatcher.on("selection",(r,a,l)=>{const u=l.writer,h=a.selection;if(h.isCollapsed)return;const m=h.getSelectedElement();if(!m)return;const p=e.editing.mapper.toViewElement(m);Jt(p)&&l.consumable.consume(h,"selection")&&u.setSelection(u.createRangeOn(p),{fake:!0,label:SJ(p)})}),this.editor.editing.downcastDispatcher.on("selection",(r,a,l)=>{this._clearPreviouslySelectedWidgets(l.writer);const u=l.writer,h=u.document.selection;let m=null;for(const p of h.getRanges())for(const v of p){const C=v.item;Jt(C)&&!GJ(C,m)&&(u.addClass(T2,C),this._previouslySelected.add(C),m=C)}},{priority:"low"}),n.addObserver(Rp),this.listenTo(s,"mousedown",(...r)=>this._onMousedown(...r)),this.listenTo(s,"arrowKey",(...r)=>{this._handleSelectionChangeOnArrowKeyPress(...r)},{context:[Jt,"$text"]}),this.listenTo(s,"arrowKey",(...r)=>{this._preventDefaultOnArrowKeyPress(...r)},{context:"$root"}),this.listenTo(s,"arrowKey",UJ(this.editor.editing),{context:"$text"}),this.listenTo(s,"delete",(r,a)=>{this._handleDelete(a.direction=="forward")&&(a.preventDefault(),r.stop())},{context:"$root"}),this.listenTo(s,"tab",(r,a)=>{r.eventPhase=="atTarget"&&(a.shiftKey||this._selectFirstNestedEditable()&&(a.preventDefault(),r.stop()))},{context:Jt,priority:"low"}),this.listenTo(s,"tab",(r,a)=>{a.shiftKey&&this._selectAncestorWidget()&&(a.preventDefault(),r.stop())},{priority:"low"}),this.listenTo(s,"keydown",(r,a)=>{a.keystroke==Ue.esc&&this._selectAncestorWidget()&&(a.preventDefault(),r.stop())},{priority:"low"}),e.accessibility.addKeystrokeInfoGroup({id:"widget",label:o("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:o("Move focus from an editable area back to the parent widget"),keystroke:"Esc"},{label:o("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:o("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:o("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:o("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(e,n){const s=this.editor,o=s.editing.view,r=o.document;let a=n.target;if(!a)return;if(n.domEvent.detail>=3){this._selectBlockContent(a)&&n.preventDefault();return}if(!Jt(a)){const u=qJ(a);if(!u)return;if(Jt(u))a=u;else{const h=$J(o,n);if(h&&Jt(h))a=h;else return}}Se.isAndroid&&n.preventDefault(),r.isFocused||o.focus();const l=s.editing.mapper.toModelElement(a);this._setSelectionOverElement(l)}_selectBlockContent(e){const n=this.editor,s=n.model,o=n.editing.mapper,r=s.schema,a=o.findMappedViewAncestor(this.editor.editing.view.createPositionAt(e,0)),l=jJ(o.toModelElement(a),s.schema);return l?(s.change(u=>{const h=r.isLimit(l)?null:KJ(u.createPositionAfter(l),r),m=u.createPositionAt(l,0),p=h?u.createPositionAt(h,0):u.createPositionAt(l,"end");u.setSelection(u.createRange(m,p))}),!0):!1}_handleSelectionChangeOnArrowKeyPress(e,n){const s=n.keyCode,o=this.editor.model,r=o.schema,a=o.document.selection,l=a.getSelectedElement(),u=A0(s,this.editor.locale.contentLanguageDirection),h=u=="down"||u=="right",m=u=="up"||u=="down";if(l&&r.isObject(l)){const v=h?a.getLastPosition():a.getFirstPosition(),C=r.getNearestSelectionRange(v,h?"forward":"backward");C&&(o.change(x=>{x.setSelection(C)}),n.preventDefault(),e.stop());return}if(!a.isCollapsed&&!n.shiftKey){const v=a.getFirstPosition(),C=a.getLastPosition(),x=v.nodeAfter,k=C.nodeBefore;(x&&r.isObject(x)||k&&r.isObject(k))&&(o.change(S=>{S.setSelection(h?C:v)}),n.preventDefault(),e.stop());return}if(!a.isCollapsed)return;const p=this._getObjectElementNextToSelection(h);if(p&&r.isObject(p)){if(r.isInline(p)&&m)return;this._setSelectionOverElement(p),n.preventDefault(),e.stop()}}_preventDefaultOnArrowKeyPress(e,n){const s=this.editor.model,o=s.schema,r=s.document.selection.getSelectedElement();r&&o.isObject(r)&&(n.preventDefault(),e.stop())}_handleDelete(e){const s=this.editor.model.document.selection;if(!this.editor.model.canEditAt(s)||!s.isCollapsed)return;const o=this._getObjectElementNextToSelection(e);if(o)return this.editor.model.change(r=>{let a=s.anchor.parent;for(;a.isEmpty;){const l=a;a=l.parent,r.remove(l)}this._setSelectionOverElement(o)}),!0}_setSelectionOverElement(e){this.editor.model.change(n=>{n.setSelection(n.createRangeOn(e))})}_getObjectElementNextToSelection(e){const n=this.editor.model,s=n.schema,o=n.document.selection,r=n.createSelection(o);if(n.modifySelection(r,{direction:e?"forward":"backward"}),r.isEqual(o))return null;const a=e?r.focus.nodeBefore:r.focus.nodeAfter;return a&&s.isObject(a)?a:null}_clearPreviouslySelectedWidgets(e){for(const n of this._previouslySelected)e.removeClass(T2,n);this._previouslySelected.clear()}_selectFirstNestedEditable(){const e=this.editor,s=this.editor.editing.view.document;for(const o of s.selection.getFirstRange().getItems())if(o.is("editableElement")){const r=e.editing.mapper.toModelElement(o);/* istanbul ignore next -- @preserve */if(!r)continue;const a=e.model.createPositionAt(r,0),l=e.model.schema.getNearestSelectionRange(a,"forward");return e.model.change(u=>{u.setSelection(l)}),!0}return!1}_selectAncestorWidget(){const e=this.editor,n=e.editing.mapper,o=e.editing.view.document.selection.getFirstPosition().parent,a=(o.is("$text")?o.parent:o).findAncestor(Jt);if(!a)return!1;const l=n.toModelElement(a);/* istanbul ignore next -- @preserve */return l?(e.model.change(u=>{u.setSelection(l,"on")}),!0):!1}}function qJ(i){let t=i;for(;t;){if(t.is("editableElement")||Jt(t))return t;t=t.parent}return null}function $J(i,t){const e=T5(t.domEvent);let n=null;if(e?n=i.domConverter.domRangeToView(e):n=i.createRange(i.createPositionAt(t.target,0)),!n)return null;const s=n.start;if(!s.parent)return null;let o=s.parent;return s.parent.is("editableElement")&&(s.isAtEnd&&s.nodeBefore?o=s.nodeBefore:s.isAtStart&&s.nodeAfter&&(o=s.nodeAfter)),o.is("$text")?o.parent:o}function GJ(i,t){return t?Array.from(i.getAncestors()).includes(t):!1}function jJ(i,t){for(const e of i.getAncestors({includeSelf:!0,parentFirst:!0})){if(t.checkChild(e,"$text"))return e;if(t.isLimit(e)&&!t.isObject(e))break}return null}function KJ(i,t){const e=new Eo({startPosition:i});for(const{item:n}of e){if(t.isLimit(n)||!n.is("element"))return null;if(t.checkChild(n,"$text"))return n}return null}class Ng extends te{constructor(){super(...arguments);_(this,"_toolbarDefinitions",new Map);_(this,"_balloon")}static get requires(){return[as]}static get pluginName(){return"WidgetToolbarRepository"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(e.plugins.has("BalloonToolbar")){const n=e.plugins.get("BalloonToolbar");this.listenTo(n,"show",s=>{ZJ(e.editing.view.document.selection)&&s.stop()},{priority:"high"})}this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const e of this._toolbarDefinitions.values())e.view.destroy()}register(e,{ariaLabel:n,items:s,getRelatedElement:o,balloonClassName:r="ck-toolbar-container",positions:a}){if(!s.length){Ze("widget-toolbar-no-items",{toolbarId:e});return}const l=this.editor,u=l.t,h=new Da(l.locale);if(h.ariaLabel=n||u("Widget toolbar"),this._toolbarDefinitions.has(e))throw new V("widget-toolbar-duplicated",this,{toolbarId:e});const m={view:h,getRelatedElement:o,balloonClassName:r,itemsConfig:s,positions:a,initialized:!1};l.ui.addToolbar(h,{isContextual:!0,beforeFocus:()=>{const p=o(l.editing.view.document.selection);p&&this._showToolbar(m,p)},afterBlur:()=>{this._hideToolbar(m)}}),this._toolbarDefinitions.set(e,m)}_updateToolbarsVisibility(){let e=0,n=null,s=null;for(const o of this._toolbarDefinitions.values()){const r=o.getRelatedElement(this.editor.editing.view.document.selection);if(!this.isEnabled||!r)this._isToolbarInBalloon(o)&&this._hideToolbar(o);else if(!this.editor.ui.focusTracker.isFocused)this._isToolbarVisible(o)&&this._hideToolbar(o);else{const a=r.getAncestors().length;a>e&&(e=a,n=r,s=o)}}s&&this._showToolbar(s,n)}_hideToolbar(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(e,n){this._isToolbarVisible(e)?S2(this.editor,n,e.positions):this._isToolbarInBalloon(e)||(e.initialized||(e.initialized=!0,e.view.fillFromConfig(e.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:e.view,position:NN(this.editor,n,e.positions),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const s of this._toolbarDefinitions.values())if(this._isToolbarVisible(s)){const o=s.getRelatedElement(this.editor.editing.view.document.selection);S2(this.editor,o,e.positions)}}))}_isToolbarVisible(e){return this._balloon.visibleView===e.view}_isToolbarInBalloon(e){return this._balloon.hasView(e.view)}}function S2(i,t,e){const n=i.plugins.get("ContextualBalloon"),s=NN(i,t,e);n.updatePosition(s)}function NN(i,t,e){const n=i.editing.view,s=Qn.defaultPositions;return{target:n.domConverter.mapViewToDom(t),positions:e||[s.northArrowSouth,s.northArrowSouthWest,s.northArrowSouthEast,s.southArrowNorth,s.southArrowNorthWest,s.southArrowNorthEast,s.viewportStickyNorth]}}function ZJ(i){const t=i.getSelectedElement();return!!(t&&Jt(t))}class YJ extends _t(){constructor(e){super();_(this,"_referenceCoordinates");_(this,"_options");_(this,"_originalWidth");_(this,"_originalHeight");_(this,"_originalWidthPercents");_(this,"_aspectRatio");this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=e,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(e,n,s){const o=new Pe(n);this.activeHandlePosition=QJ(e),this._referenceCoordinates=JJ(n,eX(this.activeHandlePosition)),this._originalWidth=o.width,this._originalHeight=o.height,this._aspectRatio=o.width/o.height;const r=s.style.width;r&&r.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(r):this._originalWidthPercents=IJ(s,o)}update(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight}}function JJ(i,t){const e=new Pe(i),n=t.split("-"),s={x:n[1]=="right"?e.right:e.left,y:n[0]=="bottom"?e.bottom:e.top};return s.x+=i.ownerDocument.defaultView.scrollX,s.y+=i.ownerDocument.defaultView.scrollY,s}function XJ(i){return`ck-widget__resizer__handle-${i}`}function QJ(i){const t=["top-left","top-right","bottom-right","bottom-left"];for(const e of t)if(i.classList.contains(XJ(e)))return e}function eX(i){const t=i.split("-"),e={top:"bottom",bottom:"top",left:"right",right:"left"};return`${e[t[0]]}-${e[t[1]]}`}class tX extends fe{constructor(){super();const t=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",t.to("_viewPosition",e=>e?`ck-orientation-${e}`:"")],style:{display:t.if("_isVisible","none",e=>!e)}},children:[{text:t.to("_label")}]})}_bindToState(t,e){this.bind("_isVisible").to(e,"proposedWidth",e,"proposedHeight",(n,s)=>n!==null&&s!==null),this.bind("_label").to(e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",e,"proposedWidthPercents",(n,s,o)=>t.unit==="px"?`${n}×${s}`:`${o}%`),this.bind("_viewPosition").to(e,"activeHandlePosition",e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",(n,s,o)=>s<50||o<50?"above-center":n)}_dismiss(){this.unbind(),this._isVisible=!1}}class A2 extends _t(){constructor(e){super();_(this,"_state");_(this,"_sizeView");_(this,"_options");_(this,"_viewResizerWrapper",null);_(this,"_initialViewWidth");this._options=e,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(n,s)=>n&&s),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",n=>{!this.state.proposedWidth&&!this.state.proposedWidthPercents&&(this._cleanup(),n.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(n=>{n.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(n=>{n.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const e=this,n=this._options.viewElement;this._options.editor.editing.view.change(o=>{const r=o.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(a){const l=this.toDomElement(a);return e._appendHandles(l),e._appendSizeUI(l),l});o.insert(o.createPositionAt(n,"end"),r),o.addClass("ck-widget_with-resizer",n),this._viewResizerWrapper=r,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(e){this._state=new YJ(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost())}updateSize(e){const n=this._proposeNewSize(e);this._options.editor.editing.view.change(h=>{const m=this._options.unit||"%",p=(m==="%"?n.widthPercents:n.width)+m;h.setStyle("width",p,this._options.viewElement)});const o=this._getHandleHost(),r=new Pe(o),a=Math.round(r.width),l=Math.round(r.height),u=new Pe(o);n.width=Math.round(u.width),n.height=Math.round(u.height),this.redraw(r),this.state.update({...n,handleHostWidth:a,handleHostHeight:l})}commit(){const e=this._options.unit||"%",n=(e==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(n)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(e){const n=this._domResizerWrapper;if(!sX(n))return;const s=n.parentElement,o=this._getHandleHost(),r=this._viewResizerWrapper,a=[r.getStyle("width"),r.getStyle("height"),r.getStyle("left"),r.getStyle("top")];let l;if(s.isSameNode(o)){const u=e||new Pe(o);l=[u.width+"px",u.height+"px",void 0,void 0]}else l=[o.offsetWidth+"px",o.offsetHeight+"px",o.offsetLeft+"px",o.offsetTop+"px"];$n(a,l)!=="same"&&this._options.editor.editing.view.change(u=>{u.setStyle({width:l[0],height:l[1],left:l[2],top:l[3]},r)})}containsHandle(e){return this._domResizerWrapper.contains(e)}static isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(n=>{n.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(e){const n=this.state,s=iX(e),o=this._options.isCentered?this._options.isCentered(this):!0,r={x:n._referenceCoordinates.x-(s.x+n.originalWidth),y:s.y-n.originalHeight-n._referenceCoordinates.y};o&&n.activeHandlePosition.endsWith("-right")&&(r.x=s.x-(n._referenceCoordinates.x+n.originalWidth)),o&&(r.x*=2);let a=Math.abs(n.originalWidth+r.x),l=Math.abs(n.originalHeight+r.y);return(a/n.aspectRatio>l?"width":"height")=="width"?l=a/n.aspectRatio:a=l*n.aspectRatio,{width:Math.round(a),height:Math.round(l),widthPercents:Math.min(Math.round(n.originalWidthPercents/n.originalWidth*a*100)/100,100)}}_getResizeHost(){const e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e)}_getHandleHost(){const e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(e){const n=["top-left","top-right","bottom-right","bottom-left"];for(const s of n)e.appendChild(new Ti({tag:"div",attributes:{class:`ck-widget__resizer__handle ${nX(s)}`}}).render())}_appendSizeUI(e){this._sizeView=new tX,this._sizeView.render(),e.appendChild(this._sizeView.element)}}function nX(i){return`ck-widget__resizer__handle-${i}`}function iX(i){return{x:i.pageX,y:i.pageY}}function sX(i){return i&&i.ownerDocument&&i.ownerDocument.contains(i)}class oy extends te{constructor(){super(...arguments);_(this,"_resizers",new Map);_(this,"_observer");_(this,"_redrawSelectedResizerThrottled")}static get pluginName(){return"WidgetResize"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.editing,n=de.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),e.view.addObserver(Rp),this._observer=new(Yn()),this.listenTo(e.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(n,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(n,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=vc(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[o,r]of this._resizers)o.isAttached()||(this._resizers.delete(o),r.destroy())},{priority:"lowest"}),this._observer.listenTo(de.window,"resize",this._redrawSelectedResizerThrottled);const s=this.editor.editing.view.document.selection;s.on("change",()=>{const o=s.getSelectedElement(),r=this.getResizerByViewElement(o)||null;r?this.select(r):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const e of this._resizers.values())e.destroy();this._redrawSelectedResizerThrottled.cancel()}select(e){this.deselect(),this.selectedResizer=e,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(e){const n=new A2(e),s=this.editor.plugins;if(n.attach(),s.has("WidgetToolbarRepository")){const a=s.get("WidgetToolbarRepository");n.on("begin",()=>{a.forceDisabled("resize")},{priority:"lowest"}),n.on("cancel",()=>{a.clearForceDisabled("resize")},{priority:"highest"}),n.on("commit",()=>{a.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(e.viewElement,n);const r=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(r)==n&&this.select(n),n}getResizerByViewElement(e){return this._resizers.get(e)}_getResizerByHandle(e){for(const n of this._resizers.values())if(n.containsHandle(e))return n}_mouseDownListener(e,n){const s=n.domTarget;A2.isResizeHandle(s)&&(this._activeResizer=this._getResizerByHandle(s)||null,this._activeResizer&&(this._activeResizer.begin(s),e.stop(),n.preventDefault()))}_mouseMoveListener(e,n){this._activeResizer&&this._activeResizer.updateSize(n)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class rh extends Bo{constructor(e){super(e);_(this,"domEventType",["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"]);const n=this.document;this.listenTo(n,"paste",s("clipboardInput"),{priority:"low"}),this.listenTo(n,"drop",s("clipboardInput"),{priority:"low"}),this.listenTo(n,"dragover",s("dragging"),{priority:"low"});function s(o){return(r,a)=>{a.preventDefault();const l=a.dropRange?[a.dropRange]:null,u=new Mo(n,o);n.fire(u,{dataTransfer:a.dataTransfer,method:r.name,targetRanges:l,target:a.target,domEvent:a.domEvent}),u.stop.called&&a.stopPropagation()}}}onDomEvent(e){const n="clipboardData"in e?e.clipboardData:e.dataTransfer,s=e.type=="drop"||e.type=="paste",o={dataTransfer:new q5(n,{cacheFiles:s})};if(e.type=="drop"||e.type=="dragover"){const r=T5(e);o.dropRange=r&&this.view.domConverter.domRangeToView(r)}this.fire(e.type,e,o)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function oX(i){return i=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(i.includes("</p><p>")||i.includes("<br>"))&&(i=`<p>${i}</p>`),i}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function rX(i){return i.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(t,e)=>e.length==1?" ":e).replace(/<!--[\s\S]*?-->/g,"")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const R2=["figcaption","li"],I2=["ol","ul"];function DN(i,t){if(t.is("$text")||t.is("$textProxy"))return t.data;if(t.is("element","img")&&t.hasAttribute("alt"))return t.getAttribute("alt");if(t.is("element","br"))return`
`;let e="",n=null;for(const s of t.getChildren())e+=aX(s,n)+DN(i,s),n=s;if(t.is("rawElement")){const s=document.createElement("div");t.render(s,i),e+=ON(s)}return e}function ON(i){let t="";if(i.nodeType===Node.TEXT_NODE)return i.textContent;if(i.tagName==="BR")return`
`;for(const e of i.childNodes)t+=ON(e);return t}function aX(i,t){return t?i.is("element","li")&&!i.isEmpty&&i.getChild(0).is("containerElement")||I2.includes(i.name)&&I2.includes(t.name)?`

`:!i.is("containerElement")&&!t.is("containerElement")?"":R2.includes(i.name)||R2.includes(t.name)?`
`:i.is("element")&&i.getCustomProperty("dataPipeline:transparentRendering")||t.is("element")&&t.getCustomProperty("dataPipeline:transparentRendering")?"":`

`:""}class Pd extends te{constructor(){super(...arguments);_(this,"_markersToCopy",new Map)}static get pluginName(){return"ClipboardMarkersUtils"}static get isOfficialPlugin(){return!0}_registerMarkerToCopy(e,n){this._markersToCopy.set(e,n)}_copySelectedFragmentWithMarkers(e,n,s=o=>o.model.getSelectedContent(o.model.document.selection)){return this.editor.model.change(o=>{const r=o.model.document.selection;o.setSelection(n);const a=this._insertFakeMarkersIntoSelection(o,o.model.document.selection,e),l=s(o),u=this._removeFakeMarkersInsideElement(o,l);for(const[h,m]of Object.entries(a)){u[h]||(u[h]=o.createRangeIn(l));for(const p of m)o.remove(p)}l.markers.clear();for(const[h,m]of Object.entries(u))l.markers.set(h,m);return o.setSelection(r),l})}_pasteMarkersIntoTransformedElement(e,n){const s=this._getPasteMarkersFromRangeMap(e);return this.editor.model.change(o=>{const r=this._insertFakeMarkersElements(o,s),a=n(o),l=this._removeFakeMarkersInsideElement(o,a);for(const u of Object.values(r).flat())o.remove(u);for(const[u,h]of Object.entries(l))o.model.markers.has(u)||o.addMarker(u,{usingOperation:!0,affectsData:!0,range:h});return a})}_pasteFragmentWithMarkers(e){const n=this._getPasteMarkersFromRangeMap(e.markers);e.markers.clear();for(const s of n)e.markers.set(s.name,s.range);return this.editor.model.insertContent(e)}_forceMarkersCopy(e,n,s={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){const o=this._markersToCopy.get(e);this._markersToCopy.set(e,s),n(),o?this._markersToCopy.set(e,o):this._markersToCopy.delete(e)}_isMarkerCopyable(e,n){const s=this._getMarkerClipboardConfig(e);if(!s)return!1;if(!n)return!0;const{allowedActions:o}=s;return o==="all"||o.includes(n)}_hasMarkerConfiguration(e){return!!this._getMarkerClipboardConfig(e)}_getMarkerClipboardConfig(e){const[n]=e.split(":");return this._markersToCopy.get(n)||null}_insertFakeMarkersIntoSelection(e,n,s){const o=this._getCopyableMarkersFromSelection(e,n,s);return this._insertFakeMarkersElements(e,o)}_getCopyableMarkersFromSelection(e,n,s){const o=Array.from(n.getRanges()),r=new Set(o.flatMap(l=>Array.from(e.model.markers.getMarkersIntersectingRange(l)))),a=l=>{if(!this._isMarkerCopyable(l.name,s))return!1;const{copyPartiallySelected:h}=this._getMarkerClipboardConfig(l.name);if(!h){const m=l.getRange();return o.some(p=>p.containsRange(m,!0))}return!0};return Array.from(r).filter(a).map(l=>({name:s==="dragstart"?this._getUniqueMarkerName(l.name):l.name,range:l.getRange()}))}_getPasteMarkersFromRangeMap(e,n=null){const{model:s}=this.editor;return(e instanceof Map?Array.from(e.entries()):Object.entries(e)).flatMap(([r,a])=>{if(!this._hasMarkerConfiguration(r))return[{name:r,range:a}];if(this._isMarkerCopyable(r,n)){const l=this._getMarkerClipboardConfig(r),u=s.markers.has(r)&&s.markers.get(r).getRange().root.rootName==="$graveyard";return(l.duplicateOnPaste||u)&&(r=this._getUniqueMarkerName(r)),[{name:r,range:a}]}return[]})}_insertFakeMarkersElements(e,n){const s={},o=n.flatMap(r=>{const{start:a,end:l}=r.range;return[{position:a,marker:r,type:"start"},{position:l,marker:r,type:"end"}]}).sort(({position:r},{position:a})=>r.isBefore(a)?1:-1);for(const{position:r,marker:a,type:l}of o){const u=e.createElement("$marker",{"data-name":a.name,"data-type":l});s[a.name]||(s[a.name]=[]),s[a.name].push(u),e.insert(u,r)}return s}_removeFakeMarkersInsideElement(e,n){const o=this._getAllFakeMarkersFromElement(e,n).reduce((r,a)=>{const l=a.markerElement&&e.createPositionBefore(a.markerElement);let u=r[a.name],h=!1;return u!=null&&u.start&&(u!=null&&u.end)&&(this._getMarkerClipboardConfig(a.name).duplicateOnPaste?r[this._getUniqueMarkerName(a.name)]=r[a.name]:h=!0,u=null),h||(r[a.name]={...u,[a.type]:l}),a.markerElement&&e.remove(a.markerElement),r},{});return W9(o,r=>new Z(r.start||e.createPositionFromPath(n,[0]),r.end||e.createPositionAt(n,"end")))}_getAllFakeMarkersFromElement(e,n){const s=Array.from(e.createRangeIn(n)).flatMap(({item:a})=>{if(!a.is("element","$marker"))return[];const l=a.getAttribute("data-name"),u=a.getAttribute("data-type");return[{markerElement:a,name:l,type:u}]}),o=[],r=[];for(const a of s)a.type==="end"&&(s.some(u=>u.name===a.name&&u.type==="start")||o.push({markerElement:null,name:a.name,type:"start"})),a.type==="start"&&(s.some(u=>u.name===a.name&&u.type==="end")||r.unshift({markerElement:null,name:a.name,type:"end"}));return[...o,...s,...r]}_getUniqueMarkerName(e){const n=e.split(":"),s=si().substring(1,6);return n.length===3?`${n.slice(0,2).join(":")}:${s}`:`${n.join(":")}:${s}`}}class ls extends te{static get pluginName(){return"ClipboardPipeline"}static get isOfficialPlugin(){return!0}static get requires(){return[Pd]}init(){this.editor.editing.view.addObserver(rh),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(t,e,n){const s=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:n==="cut"},()=>{const o=s._copySelectedFragmentWithMarkers(n,e);this.fire("outputTransformation",{dataTransfer:t,content:o,method:n})})}_setupPasteDrop(){const t=this.editor,e=t.model,n=t.editing.view,s=n.document,o=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(s,"clipboardInput",(r,a)=>{a.method=="paste"&&!t.model.canEditAt(t.model.document.selection)&&r.stop()},{priority:"highest"}),this.listenTo(s,"clipboardInput",(r,a)=>{const l=a.dataTransfer;let u;if(a.content)u=a.content;else{let p="";l.getData("text/html")?p=rX(l.getData("text/html")):l.getData("text/plain")&&(p=oX(l.getData("text/plain"))),u=this.editor.data.htmlProcessor.toView(p)}const h=new Mo(this,"inputTransformation"),m=l.getData("application/ckeditor5-editor-id")||null;this.fire(h,{content:u,dataTransfer:l,sourceEditorId:m,targetRanges:a.targetRanges,method:a.method}),h.stop.called&&r.stop(),n.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(r,a)=>{if(a.content.isEmpty)return;const u=this.editor.data.toModel(a.content,"$clipboardHolder");u.childCount!=0&&(r.stop(),e.change(()=>{this.fire("contentInsertion",{content:u,method:a.method,sourceEditorId:a.sourceEditorId,dataTransfer:a.dataTransfer,targetRanges:a.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(r,a)=>{a.resultRange=o._pasteFragmentWithMarkers(a.content)},{priority:"low"})}_setupCopyCut(){const t=this.editor,e=t.model.document,s=t.editing.view.document,o=(r,a)=>{const l=a.dataTransfer;a.preventDefault(),this._fireOutputTransformationEvent(l,e.selection,r.name)};this.listenTo(s,"copy",o,{priority:"low"}),this.listenTo(s,"cut",(r,a)=>{t.model.canEditAt(t.model.document.selection)?o(r,a):a.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(r,a)=>{const l=t.data.toView(a.content,{isClipboardPipeline:!0});s.fire("clipboardOutput",{dataTransfer:a.dataTransfer,content:l,method:a.method})},{priority:"low"}),this.listenTo(s,"clipboardOutput",(r,a)=>{a.content.isEmpty||(a.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(a.content)),a.dataTransfer.setData("text/plain",DN(t.data.htmlProcessor.domConverter,a.content)),a.dataTransfer.setData("application/ckeditor5-editor-id",this.editor.id)),a.method=="cut"&&t.model.deleteContent(e.selection)},{priority:"low"})}}const ry=Nc("px");class lX extends fe{constructor(){super();const t=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",t.if("isVisible","ck-hidden",e=>!e)],style:{left:t.to("left",e=>ry(e)),top:t.to("top",e=>ry(e)),width:t.to("width",e=>ry(e))}}})}}class vm extends te{constructor(){super(...arguments);_(this,"removeDropMarkerDelayed",R0(()=>this.removeDropMarker(),40));_(this,"_updateDropMarkerThrottled",vc(e=>this._updateDropMarker(e),40));_(this,"_reconvertMarkerThrottled",vc(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0));_(this,"_dropTargetLineView",new lX);_(this,"_domEmitter",new(Yn()));_(this,"_scrollables",new Map)}static get pluginName(){return"DragDropTarget"}static get isOfficialPlugin(){return!0}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(const{resizeObserver:e}of this._scrollables.values())e.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(e,n,s,o,r,a){this.removeDropMarkerDelayed.cancel();const l=P2(this.editor,e,n,s,o,r,a);/* istanbul ignore next -- @preserve */if(l){if(a&&a.containsRange(l))return this.removeDropMarker();this._updateDropMarkerThrottled(l)}}getFinalDropRange(e,n,s,o,r,a){const l=P2(this.editor,e,n,s,o,r,a);return this.removeDropMarker(),l}removeDropMarker(){const e=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,e.markers.has("drop-target")&&e.change(n=>{n.removeMarker("drop-target")})}_setupDropMarker(){const e=this.editor;e.ui.view.body.add(this._dropTargetLineView),e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(n,{writer:s})=>{if(e.model.schema.checkChild(n.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(s);n.markerRange.isCollapsed?this._updateDropTargetLine(n.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(e){const n=this.editor,s=n.model.markers;n.model.change(o=>{s.has("drop-target")?s.get("drop-target").getRange().isEqual(e)||o.updateMarker("drop-target",{range:e}):o.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(e){return e.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(n){const s=this.toDomElement(n);return s.append("⁠",n.createElement("span"),"⁠"),s})}_updateDropTargetLine(e){const n=this.editor.editing,s=e.start.nodeBefore,o=e.start.nodeAfter,r=e.start.parent,a=s?n.mapper.toViewElement(s):null,l=a?n.view.domConverter.mapViewToDom(a):null,u=o?n.mapper.toViewElement(o):null,h=u?n.view.domConverter.mapViewToDom(u):null,m=n.mapper.toViewElement(r);if(!m)return;const p=n.view.domConverter.mapViewToDom(m),v=this._getScrollableRect(m),{scrollX:C,scrollY:x}=de.window,k=l?new Pe(l):null,S=h?new Pe(h):null,I=new Pe(p).excludeScrollbarsAndBorders(),P=k?k.bottom:I.top,O=S?S.top:I.bottom,D=de.window.getComputedStyle(p),Y=P<=O?(P+O)/2:O;if(v.top<Y&&Y<v.bottom){const F=I.left+parseFloat(D.paddingLeft),j=I.right-parseFloat(D.paddingRight),U=Math.max(F+C,v.left),X=Math.min(j+C,v.right);this._dropTargetLineView.set({isVisible:!0,left:U,top:Y+x,width:X-U})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(e){const n=e.root.rootName;let s;if(this._scrollables.has(n))s=this._scrollables.get(n).domElement;else{const o=this.editor.editing.view.domConverter.mapViewToDom(e);s=uX(o),this._domEmitter.listenTo(s,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});const r=new x0(s,this._reconvertMarkerThrottled);this._scrollables.set(n,{domElement:s,resizeObserver:r})}return new Pe(s).excludeScrollbarsAndBorders()}}function P2(i,t,e,n,s,o,r){const a=i.model,l=i.editing.mapper;let h=M2(i,t);for(;h;){if(!o){if(a.schema.checkChild(h,"$text")){if(e){const m=e[0].start,p=l.toModelPosition(m);if(!r||Array.from(r.getItems({shallow:!0})).every(C=>a.schema.checkChild(p,C))){if(a.schema.checkChild(p,"$text"))return a.createRange(p);if(m)return Cm(i,M2(i,m.parent),n,s)}}}else if(a.schema.isInline(h))return Cm(i,h,n,s)}if(a.schema.isBlock(h))return Cm(i,h,n,s);if(a.schema.checkChild(h,"$block")){const m=Array.from(h.getChildren()).filter(C=>C.is("element")&&!cX(i,C));let p=0,v=m.length;if(v==0)return a.createRange(a.createPositionAt(h,"end"));for(;p<v-1;){const C=Math.floor((p+v)/2);LN(i,m[C],n,s)=="before"?v=C:p=C}return Cm(i,m[p],n,s)}h=h.parent}return null}function cX(i,t){const e=i.editing.mapper,n=i.editing.view.domConverter,s=e.toViewElement(t);if(!s)return!0;const o=n.mapViewToDom(s);return de.window.getComputedStyle(o).float!="none"}function Cm(i,t,e,n){const s=i.model;return s.createRange(s.createPositionAt(t,LN(i,t,e,n)))}function LN(i,t,e,n){const s=i.editing.mapper,o=i.editing.view.domConverter,r=s.toViewElement(t),a=o.mapViewToDom(r),l=new Pe(a);return i.model.schema.isInline(t)?e<(l.left+l.right)/2?"before":"after":n<(l.top+l.bottom)/2?"before":"after"}function M2(i,t){const e=i.editing.mapper,n=i.editing.view,s=e.toModelElement(t);if(s)return s;const o=n.createPositionBefore(t),r=e.findMappedViewAncestor(o);return e.toModelElement(r)}function uX(i){let t=i;do{t=t.parentElement;const e=de.window.getComputedStyle(t).overflowY;if(e=="auto"||e=="scroll")break}while(t.tagName!="BODY");return t}class dX extends te{constructor(){super(...arguments);_(this,"_isBlockDragging",!1);_(this,"_domEmitter",new(Yn()))}static get pluginName(){return"DragDropBlockToolbar"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(this.listenTo(e,"change:isReadOnly",(n,s,o)=>{o?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),Se.isAndroid&&this.forceDisabled("noAndroidSupport"),e.plugins.has("BlockToolbar")){const s=e.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(s,"dragstart",(o,r)=>this._handleBlockDragStart(r)),this._domEmitter.listenTo(de.document,"dragover",(o,r)=>this._handleBlockDragging(r)),this._domEmitter.listenTo(de.document,"drop",(o,r)=>this._handleBlockDragging(r)),this._domEmitter.listenTo(de.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&s.setAttribute("draggable","true"),this.on("change:isEnabled",(o,r,a)=>{s.setAttribute("draggable",a?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(e){if(!this.isEnabled)return;const n=this.editor.model,s=n.document.selection,o=this.editor.editing.view,r=Array.from(s.getSelectedBlocks()),a=n.createRange(n.createPositionBefore(r[0]),n.createPositionAfter(r[r.length-1]));n.change(l=>l.setSelection(a)),this._isBlockDragging=!0,o.focus(),o.getObserver(rh).onDomEvent(e)}_handleBlockDragging(e){if(!this.isEnabled||!this._isBlockDragging)return;const n=e.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),s=e.clientY,o=document.elementFromPoint(n,s),r=this.editor.editing.view;!o||!o.closest(".ck-editor__editable")||r.getObserver(rh).onDomEvent({...e,type:e.type,dataTransfer:e.dataTransfer,target:o,clientX:n,clientY:s,preventDefault:()=>e.preventDefault(),stopPropagation:()=>e.stopPropagation()})}_handleBlockDragEnd(){this._isBlockDragging=!1}}class hX extends te{constructor(){super(...arguments);_(this,"_draggedRange");_(this,"_draggingUid");_(this,"_draggableElement");_(this,"_clearDraggableAttributesDelayed",R0(()=>this._clearDraggableAttributes(),40));_(this,"_blockMode",!1);_(this,"_domEmitter",new(Yn()));_(this,"_previewContainer")}static get pluginName(){return"DragDrop"}static get isOfficialPlugin(){return!0}static get requires(){return[ls,Rh,vm,dX]}init(){const e=this.editor,n=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,n.addObserver(rh),n.addObserver(Rp),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",(s,o,r)=>{r?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(s,o,r)=>{r||this._finalizeDragging(!1)}),Se.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const e=this.editor,n=e.model,s=e.editing.view,o=s.document,r=e.plugins.get(vm);this.listenTo(o,"dragstart",(a,l)=>{var x;if((x=l.target)!=null&&x.is("editableElement")){l.preventDefault();return}if(this._prepareDraggedRange(l.target),!this._draggedRange){l.preventDefault();return}this._draggingUid=si(),l.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",l.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const u=n.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(l.dataTransfer,u,"dragstart");const{dataTransfer:m,domTarget:p,domEvent:v}=l,{clientX:C}=v;this._updatePreview({dataTransfer:m,domTarget:p,clientX:C}),l.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(o,"dragend",(a,l)=>{this._finalizeDragging(!l.dataTransfer.isCanceled&&l.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(de.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(o,"dragenter",()=>{this.isEnabled&&s.focus()}),this.listenTo(o,"dragleave",()=>{r.removeDropMarkerDelayed()}),this.listenTo(o,"dragging",(a,l)=>{if(!this.isEnabled){l.dataTransfer.dropEffect="none";return}const{clientX:u,clientY:h}=l.domEvent;r.updateDropMarker(l.target,l.targetRanges,u,h,this._blockMode,this._draggedRange),this._draggedRange||(l.dataTransfer.dropEffect="copy"),Se.isGecko||(l.dataTransfer.effectAllowed=="copy"?l.dataTransfer.dropEffect="copy":["all","copyMove"].includes(l.dataTransfer.effectAllowed)&&(l.dataTransfer.dropEffect="move")),a.stop()},{priority:"low"})}_setupClipboardInputIntegration(){const e=this.editor,s=e.editing.view.document,o=e.plugins.get(vm);this.listenTo(s,"clipboardInput",(r,a)=>{if(a.method!="drop")return;const{clientX:l,clientY:u}=a.domEvent,h=o.getFinalDropRange(a.target,a.targetRanges,l,u,this._blockMode,this._draggedRange);if(!h){this._finalizeDragging(!1),r.stop();return}if(this._draggedRange&&this._draggingUid!=a.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),V2(a.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(h,!0)){this._finalizeDragging(!1),r.stop();return}a.targetRanges=[e.editing.mapper.toViewRange(h)]},{priority:"high"})}_setupContentInsertionIntegration(){const e=this.editor.plugins.get(ls);e.on("contentInsertion",(n,s)=>{if(!this.isEnabled||s.method!=="drop")return;const o=s.targetRanges.map(r=>this.editor.editing.mapper.toModelRange(r));this.editor.model.change(r=>r.setSelection(o))},{priority:"high"}),e.on("contentInsertion",(n,s)=>{if(!this.isEnabled||s.method!=="drop")return;const o=V2(s.dataTransfer)=="move",r=!s.resultRange||!s.resultRange.isCollapsed;this._finalizeDragging(r&&o)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const e=this.editor,n=e.editing.view,s=n.document;this.listenTo(s,"mousedown",(o,r)=>{if(Se.isAndroid||!r)return;this._clearDraggableAttributesDelayed.cancel();let a=N2(r.target);if(Se.isBlink&&!e.isReadOnly&&!a&&!s.selection.isCollapsed){const l=s.selection.getSelectedElement();(!l||!Jt(l))&&(a=s.selection.editableElement)}a&&(n.change(l=>{l.setAttribute("draggable","true",a)}),this._draggableElement=e.editing.mapper.toModelElement(a))}),this.listenTo(s,"mouseup",()=>{Se.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const e=this.editor.editing;e.view.change(n=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&n.removeAttribute("draggable",e.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(e){const n=this.editor,s=n.model;n.plugins.get(vm).removeDropMarker(),this._clearDraggableAttributes(),n.plugins.has("WidgetToolbarRepository")&&n.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(e&&this.isEnabled&&s.change(r=>{const a=s.createSelection(this._draggedRange);s.deleteContent(a,{doNotAutoparagraph:!0});const l=a.getFirstPosition().parent;l.isEmpty&&!s.schema.checkChild(l,"$text")&&s.schema.checkChild(l,"paragraph")&&r.insertElement("paragraph",l,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(e){const n=this.editor,s=n.model,o=s.document.selection,r=e?N2(e):null;if(r){const h=n.editing.mapper.toModelElement(r);this._draggedRange=ei.fromRange(s.createRangeOn(h)),this._blockMode=s.schema.isBlock(h),n.plugins.has("WidgetToolbarRepository")&&n.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(o.isCollapsed&&!o.getFirstPosition().parent.isEmpty)return;const a=Array.from(o.getSelectedBlocks()),l=o.getFirstRange();if(a.length==0){this._draggedRange=ei.fromRange(l);return}const u=BN(s,a);if(a.length>1)this._draggedRange=ei.fromRange(u),this._blockMode=!0;else if(a.length==1){const h=l.start.isTouching(u.start)&&l.end.isTouching(u.end);this._draggedRange=ei.fromRange(h?u:l),this._blockMode=h}s.change(h=>h.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:e,domTarget:n,clientX:s}){const o=this.editor.editing.view,r=o.document.selection.editableElement,a=o.domConverter.mapViewToDom(r),l=de.window.getComputedStyle(a);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=ps(de.document,"div",{style:"position: fixed; left: -999999px;"}),de.document.body.appendChild(this._previewContainer));const u=new Pe(a);if(a.contains(n))return;const h=parseFloat(l.paddingLeft),m=ps(de.document,"div");m.className="ck ck-content",m.style.width=l.width,m.style.paddingLeft=`${u.left-s+h}px`,Se.isiOS&&(m.style.backgroundColor="white"),o.domConverter.setContentOf(m,e.getData("text/html")),e.setDragImage(m,0,0),this._previewContainer.appendChild(m)}}function V2(i){return Se.isGecko?i.dropEffect:["all","copyMove"].includes(i.effectAllowed)?"move":"copy"}function N2(i){if(i.is("editableElement"))return null;if(i.hasClass("ck-widget__selection-handle"))return i.findAncestor(Jt);if(Jt(i))return i;const t=i.findAncestor(e=>Jt(e)||e.is("editableElement"));return Jt(t)?t:null}function BN(i,t){const e=t[0],n=t[t.length-1],s=e.getCommonAncestor(n),o=i.createPositionBefore(e),r=i.createPositionAfter(n);if(s&&s.is("element")&&!i.schema.isLimit(s)){const a=i.createRangeOn(s),l=o.isTouching(a.start),u=r.isTouching(a.end);if(l&&u)return BN(i,[s])}return i.createRange(o,r)}class fX extends te{static get pluginName(){return"PastePlainText"}static get isOfficialPlugin(){return!0}static get requires(){return[ls]}init(){const t=this.editor,e=t.model,n=t.editing.view,s=e.document.selection;n.addObserver(rh),t.plugins.get(ls).on("contentInsertion",(o,r)=>{mX(r.content,e)&&e.change(a=>{const l=Array.from(s.getAttributes()).filter(([h])=>e.schema.getAttributeProperties(h).isFormatting);s.isCollapsed||e.deleteContent(s,{doNotAutoparagraph:!0}),l.push(...s.getAttributes());const u=a.createRangeIn(r.content);for(const h of u.getItems())for(const m of l)e.schema.checkAttribute(h,m[0])&&a.setAttribute(m[0],m[1],h)})})}}function mX(i,t){let e=t.createRangeIn(i);if(i.childCount==1){const n=i.getChild(0);n.is("element")&&t.schema.isBlock(n)&&!t.schema.isObject(n)&&!t.schema.isLimit(n)&&(e=t.createRangeIn(n))}for(const n of e.getItems())if(!t.schema.isInline(n)||Array.from(n.getAttributeKeys()).find(o=>t.schema.getAttributeProperties(o).isFormatting))return!1;return!0}class u1 extends te{static get pluginName(){return"Clipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[Pd,ls,hX,fX]}init(){const t=this.editor,e=this.editor.t;t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Copy selected content"),keystroke:"CTRL+C"},{label:e("Paste content"),keystroke:"CTRL+V"},{label:e("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class gX extends fY{constructor(e,n){super(e);_(this,"view");_(this,"_toolbarConfig");_(this,"_elementReplacer");this.view=n,this._toolbarConfig=lN(e.config.get("toolbar")),this._elementReplacer=new TH,this.listenTo(e.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(e){const n=this.editor,s=this.view,o=n.editing.view,r=s.editable,a=o.document.getRoot();r.name=a.rootName,s.render();const l=r.element;this.setEditableElement(r.name,l),s.editable.bind("isFocused").to(this.focusTracker),o.attachDomRoot(l),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),s.menuBarView&&this.initMenuBar(s.menuBarView),this._initDialogPluginIntegration(),this._initContextualBalloonIntegration(),this.fire("ready")}destroy(){super.destroy();const e=this.view,n=this.editor.editing.view;this._elementReplacer.restore(),n.getDomRoot(e.editable.name)&&n.detachDomRoot(e.editable.name),e.destroy()}_initToolbar(){const e=this.view;e.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),e.stickyPanel.limiterElement=e.element,e.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({visualTop:n})=>n||0),e.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(e.toolbar)}_initPlaceholder(){const e=this.editor,n=e.editing.view,s=n.document.getRoot(),o=e.sourceElement;let r;const a=e.config.get("placeholder");a&&(r=typeof a=="string"?a:a[this.view.editable.name]),!r&&o&&o.tagName.toLowerCase()==="textarea"&&(r=o.getAttribute("placeholder")),r&&(s.placeholder=r),V0({view:n,element:s,isDirectHost:!1,keepOnFocus:!0})}_initContextualBalloonIntegration(){if(!this.editor.plugins.has("ContextualBalloon"))return;const{stickyPanel:e}=this.view,n=this.editor.plugins.get("ContextualBalloon");n.on("getPositionOptions",o=>{const r=o.return;if(!r||!e.isSticky||!e.element)return;const a=new Pe(e.element).height,l=typeof r.target=="function"?r.target():r.target,u=typeof r.limiter=="function"?r.limiter():r.limiter;if(l&&u&&new Pe(l).height>=new Pe(u).height-a)return;const h={...r.viewportOffsetConfig},m=(h.top||0)+a;o.return={...r,viewportOffsetConfig:{...h,top:m}}},{priority:"low"});const s=()=>{n.visibleView&&n.updatePosition()};this.listenTo(e,"change:isSticky",s),this.listenTo(this.editor.ui,"change:viewportOffset",s)}_handleScrollToTheSelectionWithStickyPanel(e,n,s){const o=this.view.stickyPanel;if(o.isSticky){const r=new Pe(o.element).height;n.viewportOffset.top+=r}else{const r=()=>{this.editor.editing.view.scrollToTheSelection(s)};this.listenTo(o,"change:isSticky",r),setTimeout(()=>{this.stopListening(o,"change:isSticky",r)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;const e=this.view.stickyPanel,n=this.editor.plugins.get("Dialog");n.on("show",()=>{const s=n.view;s.on("moveTo",(o,r)=>{if(!e.isSticky||s.wasMoved||s.isModal)return;const a=new Pe(e.contentPanelElement);r[1]<a.bottom+ih.defaultOffset&&(r[1]=a.bottom+ih.defaultOffset)},{priority:"high"})},{priority:"low"})}}class pX extends gY{constructor(e,n,s={}){super(e);_(this,"stickyPanel");_(this,"toolbar");_(this,"editable");this.stickyPanel=new yY(e),this.toolbar=new Da(e,{shouldGroupWhenFull:s.shouldToolbarGroupWhenFull}),s.useMenuBar&&(this.menuBarView=new SY(e)),this.editable=new bY(e,n,void 0,{label:s.label})}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}class bX extends ev(Sj){constructor(e,n={}){if(!Km(e)&&n.initialData!==void 0)throw new V("editor-create-initial-data",null);super(n);_(this,"ui");this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",_X(e)),Km(e)&&(this.sourceElement=e),this.model.document.createRoot();const s=!this.config.get("toolbar.shouldNotGroupWhenFull"),o=this.config.get("menuBar"),r=new pX(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:s,useMenuBar:o.isVisible,label:this.config.get("label")});this.ui=new gX(this,r),Rj(this)}static get editorName(){return"ClassicEditor"}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(e,n={}){return new Promise(s=>{const o=new this(e,n);s(o.initPlugins().then(()=>o.ui.init(Km(e)?e:null)).then(()=>o.data.init(o.config.get("initialData"))).then(()=>o.fire("ready")).then(()=>o))})}}function _X(i){return Km(i)?AH(i):i}function Km(i){return Pr(i)}var Zm={exports:{}},wX=Zm.exports,D2;function yX(){return D2||(D2=1,function(i){((t,e)=>{i.exports?i.exports=e():t.fuzzysort=e()})(wX,t=>{var e=(G,W)=>{if(!G||!W)return N;var Q=C(G);B(W)||(W=v(W));var ve=Q.bitflags;return(ve&W._bitflags)!==ve?N:k(Q,W)},n=(G,W,Q)=>{if(!G)return Q!=null&&Q.all?x(W,Q):De;var ve=C(G),pe=ve.bitflags,Ce=ve.containsSpace,_e=m((Q==null?void 0:Q.threshold)||0),Me=(Q==null?void 0:Q.limit)||le,Re=0,it=0,nt=W.length;function Bn(Zs){Re<Me?(ue.add(Zs),++Re):(++it,Zs._score>ue.peek()._score&&ue.replaceTop(Zs))}if(Q!=null&&Q.key)for(var _n=Q.key,He=0;He<nt;++He){var An=W[He],ct=we(An,_n);if(ct&&(B(ct)||(ct=v(ct)),(pe&ct._bitflags)===pe)){var gt=k(ve,ct);gt!==N&&(gt._score<_e||(gt.obj=An,Bn(gt)))}}else if(Q!=null&&Q.keys){var xi=Q.keys,ri=xi.length;e:for(var He=0;He<nt;++He){var An=W[He];{for(var un=0,st=0;st<ri;++st){var _n=xi[st],ct=we(An,_n);if(!ct){Ae[st]=se;continue}B(ct)||(ct=v(ct)),Ae[st]=ct,un|=ct._bitflags}if((pe&un)!==pe)continue}if(Ce)for(let ft=0;ft<ve.spaceSearches.length;ft++)ae[ft]=he;for(var st=0;st<ri;++st){if(ct=Ae[st],ct===se){ze[st]=se;continue}if(ze[st]=k(ve,ct,!1,Ce),ze[st]===N){ze[st]=se;continue}if(Ce)for(let ut=0;ut<ve.spaceSearches.length;ut++){if(me[ut]>-1e3&&ae[ut]>he){var dn=(ae[ut]+me[ut])/4;dn>ae[ut]&&(ae[ut]=dn)}me[ut]>ae[ut]&&(ae[ut]=me[ut])}}if(Ce){for(let ft=0;ft<ve.spaceSearches.length;ft++)if(ae[ft]===he)continue e}else{var Ge=!1;for(let ft=0;ft<ri;ft++)if(ze[ft]._score!==he){Ge=!0;break}if(!Ge)continue}var Pt=new l(ri);for(let ft=0;ft<ri;ft++)Pt[ft]=ze[ft];if(Ce){var xt=0;for(let ft=0;ft<ve.spaceSearches.length;ft++)xt+=ae[ft]}else{var xt=he;for(let ut=0;ut<ri;ut++){var gt=Pt[ut];if(gt._score>-1e3&&xt>he){var dn=(xt+gt._score)/4;dn>xt&&(xt=dn)}gt._score>xt&&(xt=gt._score)}}if(Pt.obj=An,Pt._score=xt,Q!=null&&Q.scoreFn){if(xt=Q.scoreFn(Pt),!xt)continue;xt=m(xt),Pt._score=xt}xt<_e||Bn(Pt)}}else for(var He=0;He<nt;++He){var ct=W[He];if(ct&&(B(ct)||(ct=v(ct)),(pe&ct._bitflags)===pe)){var gt=k(ve,ct);gt!==N&&(gt._score<_e||Bn(gt))}}if(Re===0)return De;for(var jt=new Array(Re),He=Re-1;He>=0;--He)jt[He]=ue.poll();return jt.total=Re+it,jt},s=(G,W="<b>",Q="</b>")=>{for(var ve=typeof W=="function"?W:void 0,pe=G.target,Ce=pe.length,_e=G.indexes,Me="",Re=0,it=0,nt=!1,Bn=[],_n=0;_n<Ce;++_n){var He=pe[_n];if(_e[it]===_n){if(++it,nt||(nt=!0,ve?(Bn.push(Me),Me=""):Me+=W),it===_e.length){ve?(Me+=He,Bn.push(ve(Me,Re++)),Me="",Bn.push(pe.substr(_n+1))):Me+=He+Q+pe.substr(_n+1);break}}else nt&&(nt=!1,ve?(Bn.push(ve(Me,Re++)),Me=""):Me+=Q);Me+=He}return ve?Bn:Me},o=G=>{typeof G=="number"?G=""+G:typeof G!="string"&&(G="");var W=P(G);return u(G,{_targetLower:W._lower,_targetLowerCodes:W.lowerCodes,_bitflags:W.bitflags})},r=()=>{Y.clear(),F.clear()};class a{get indexes(){return this._indexes.slice(0,this._indexes.len).sort((W,Q)=>W-Q)}set indexes(W){return this._indexes=W}highlight(W,Q){return s(this,W,Q)}get score(){return h(this._score)}set score(W){this._score=m(W)}}class l extends Array{get score(){return h(this._score)}set score(W){this._score=m(W)}}var u=(G,W)=>{const Q=new a;return Q.target=G,Q.obj=W.obj??N,Q._score=W._score??he,Q._indexes=W._indexes??[],Q._targetLower=W._targetLower??"",Q._targetLowerCodes=W._targetLowerCodes??N,Q._nextBeginningIndexes=W._nextBeginningIndexes??N,Q._bitflags=W._bitflags??0,Q},h=G=>G===he?0:G>1?G:Math.E**(((-G+1)**.04307-1)*-2),m=G=>G===0?he:G>1?G:1-Math.pow(Math.log(G)/-2+1,1/.04307),p=G=>{typeof G=="number"?G=""+G:typeof G!="string"&&(G=""),G=G.trim();var W=P(G),Q=[];if(W.containsSpace){var ve=G.split(/\s+/);ve=[...new Set(ve)];for(var pe=0;pe<ve.length;pe++)if(ve[pe]!==""){var Ce=P(ve[pe]);Q.push({lowerCodes:Ce.lowerCodes,_lower:ve[pe].toLowerCase(),containsSpace:!1})}}return{lowerCodes:W.lowerCodes,_lower:W._lower,containsSpace:W.containsSpace,bitflags:W.bitflags,spaceSearches:Q}},v=G=>{if(G.length>999)return o(G);var W=Y.get(G);return W!==void 0||(W=o(G),Y.set(G,W)),W},C=G=>{if(G.length>999)return p(G);var W=F.get(G);return W!==void 0||(W=p(G),F.set(G,W)),W},x=(G,W)=>{var Q=[];Q.total=G.length;var ve=(W==null?void 0:W.limit)||le;if(W!=null&&W.key)for(var pe=0;pe<G.length;pe++){var Ce=G[pe],_e=we(Ce,W.key);if(_e!=N){B(_e)||(_e=v(_e));var Me=u(_e.target,{_score:_e._score,obj:Ce});if(Q.push(Me),Q.length>=ve)return Q}}else if(W!=null&&W.keys)for(var pe=0;pe<G.length;pe++){for(var Ce=G[pe],Re=new l(W.keys.length),it=W.keys.length-1;it>=0;--it){var _e=we(Ce,W.keys[it]);if(!_e){Re[it]=se;continue}B(_e)||(_e=v(_e)),_e._score=he,_e._indexes.len=0,Re[it]=_e}if(Re.obj=Ce,Re._score=he,Q.push(Re),Q.length>=ve)return Q}else for(var pe=0;pe<G.length;pe++){var _e=G[pe];if(_e!=N&&(B(_e)||(_e=v(_e)),_e._score=he,_e._indexes.len=0,Q.push(_e),Q.length>=ve))return Q}return Q},k=(G,W,Q=!1,ve=!1)=>{if(Q===!1&&G.containsSpace)return S(G,W,ve);for(var pe=G._lower,Ce=G.lowerCodes,_e=Ce[0],Me=W._targetLowerCodes,Re=Ce.length,it=Me.length,He=0,nt=0,Bn=0;;){var _n=_e===Me[nt];if(_n){if(j[Bn++]=nt,++He,He===Re)break;_e=Ce[He]}if(++nt,nt>=it)return N}var He=0,An=!1,ct=0,gt=W._nextBeginningIndexes;gt===N&&(gt=W._nextBeginningIndexes=D(W.target)),nt=j[0]===0?0:gt[j[0]-1];var xi=0;if(nt!==it)for(;;)if(nt>=it){if(He<=0||(++xi,xi>200))break;--He;var ri=U[--ct];nt=gt[ri]}else{var _n=Ce[He]===Me[nt];if(_n){if(U[ct++]=nt,++He,He===Re){An=!0;break}++nt}else nt=gt[nt]}var un=Re<=1?-1:W._targetLower.indexOf(pe,j[0]),st=!!~un,dn=st?un===0||W._nextBeginningIndexes[un-1]===un:!1;if(st&&!dn){for(var Ge=0;Ge<gt.length;Ge=gt[Ge])if(!(Ge<=un)){for(var Pt=0;Pt<Re&&Ce[Pt]===W._targetLowerCodes[Ge+Pt];Pt++);if(Pt===Re){un=Ge,dn=!0;break}}}var xt=ft=>{for(var ut=0,qr=0,Rn=1;Rn<Re;++Rn)ft[Rn]-ft[Rn-1]!==1&&(ut-=ft[Rn],++qr);var el=ft[Re-1]-ft[0]-(Re-1);if(ut-=(12+el)*qr,ft[0]!==0&&(ut-=ft[0]*ft[0]*.2),!An)ut*=1e3;else{for(var Ys=1,Rn=gt[0];Rn<it;Rn=gt[Rn])++Ys;Ys>24&&(ut*=(Ys-24)*10)}return ut-=(it-Re)/2,st&&(ut/=1+Re*Re*1),dn&&(ut/=1+Re*Re*1),ut-=(it-Re)/2,ut};if(An)if(dn){for(var Ge=0;Ge<Re;++Ge)j[Ge]=un+Ge;var jt=j,Zs=xt(j)}else var jt=U,Zs=xt(U);else{if(st)for(var Ge=0;Ge<Re;++Ge)j[Ge]=un+Ge;var jt=j,Zs=xt(jt)}W._score=Zs;for(var Ge=0;Ge<Re;++Ge)W._indexes[Ge]=jt[Ge];W._indexes.len=Re;const Qa=new a;return Qa.target=W.target,Qa._score=W._score,Qa._indexes=W._indexes,Qa},S=(G,W,Q)=>{for(var ve=new Set,pe=0,Ce=N,_e=0,Me=G.spaceSearches,Re=Me.length,it=0,nt=()=>{for(let dn=it-1;dn>=0;dn--)W._nextBeginningIndexes[X[dn*2+0]]=X[dn*2+1]},Bn=!1,st=0;st<Re;++st){me[st]=he;var _n=Me[st];if(Ce=k(_n,W),Q){if(Ce===N)continue;Bn=!0}else if(Ce===N)return nt(),N;var He=st===Re-1;if(!He){var An=Ce._indexes,ct=!0;for(let Ge=0;Ge<An.len-1;Ge++)if(An[Ge+1]-An[Ge]!==1){ct=!1;break}if(ct){var gt=An[An.len-1]+1,xi=W._nextBeginningIndexes[gt-1];for(let Ge=gt-1;Ge>=0&&xi===W._nextBeginningIndexes[Ge];Ge--)W._nextBeginningIndexes[Ge]=gt,X[it*2+0]=Ge,X[it*2+1]=xi,it++}}pe+=Ce._score/Re,me[st]=Ce._score/Re,Ce._indexes[0]<_e&&(pe-=(_e-Ce._indexes[0])*2),_e=Ce._indexes[0];for(var ri=0;ri<Ce._indexes.len;++ri)ve.add(Ce._indexes[ri])}if(Q&&!Bn)return N;nt();var un=k(G,W,!0);if(un!==N&&un._score>pe){if(Q)for(var st=0;st<Re;++st)me[st]=un._score/Re;return un}Q&&(Ce=W),Ce._score=pe;var st=0;for(let dn of ve)Ce._indexes[st++]=dn;return Ce._indexes.len=st,Ce},I=G=>G.replace(new RegExp("\\p{Script=Latin}+","gu"),W=>W.normalize("NFD")).replace(/[\u0300-\u036f]/g,""),P=G=>{G=I(G);for(var W=G.length,Q=G.toLowerCase(),ve=[],pe=0,Ce=!1,_e=0;_e<W;++_e){var Me=ve[_e]=Q.charCodeAt(_e);if(Me===32){Ce=!0;continue}var Re=Me>=97&&Me<=122?Me-97:Me>=48&&Me<=57?26:Me<=127?30:31;pe|=1<<Re}return{lowerCodes:ve,bitflags:pe,containsSpace:Ce,_lower:Q}},O=G=>{for(var W=G.length,Q=[],ve=0,pe=!1,Ce=!1,_e=0;_e<W;++_e){var Me=G.charCodeAt(_e),Re=Me>=65&&Me<=90,it=Re||Me>=97&&Me<=122||Me>=48&&Me<=57,nt=Re&&!pe||!Ce||!it;pe=Re,Ce=it,nt&&(Q[ve++]=_e)}return Q},D=G=>{G=I(G);for(var W=G.length,Q=O(G),ve=[],pe=Q[0],Ce=0,_e=0;_e<W;++_e)pe>_e?ve[_e]=pe:(pe=Q[++Ce],ve[_e]=pe===void 0?W:pe);return ve},Y=new Map,F=new Map,j=[],U=[],X=[],ae=[],me=[],Ae=[],ze=[],we=(G,W)=>{var Q=G[W];if(Q!==void 0)return Q;if(typeof W=="function")return W(G);var ve=W;Array.isArray(W)||(ve=W.split("."));for(var pe=ve.length,Ce=-1;G&&++Ce<pe;)G=G[ve[Ce]];return G},B=G=>typeof G=="object"&&typeof G._bitflags=="number",le=1/0,he=-le,De=[];De.total=0;var N=null,se=o(""),be=G=>{var W=[],Q=0,ve={},pe=Ce=>{for(var _e=0,Me=W[_e],Re=1;Re<Q;){var it=Re+1;_e=Re,it<Q&&W[it]._score<W[Re]._score&&(_e=it),W[_e-1>>1]=W[_e],Re=1+(_e<<1)}for(var nt=_e-1>>1;_e>0&&Me._score<W[nt]._score;nt=(_e=nt)-1>>1)W[_e]=W[nt];W[_e]=Me};return ve.add=Ce=>{var _e=Q;W[Q++]=Ce;for(var Me=_e-1>>1;_e>0&&Ce._score<W[Me]._score;Me=(_e=Me)-1>>1)W[_e]=W[Me];W[_e]=Ce},ve.poll=Ce=>{if(Q!==0){var _e=W[0];return W[0]=W[--Q],pe(),_e}},ve.peek=Ce=>{if(Q!==0)return W[0]},ve.replaceTop=Ce=>{W[0]=Ce,pe()},ve},ue=be();return{single:e,go:n,prepare:o,cleanup:r}})}(Zm)),Zm.exports}var vX=yX();const CX=op(vX);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2023, Koala Interactive SAS
 * For licensing, see https://github.com/koala-interactive/is-emoji-supported/blob/master/LICENSE.md
 */function TX(i){const t=xX();/* istanbul ignore next -- @preserve */if(!t)return!1;const e=25,n=20,s=Math.floor(e/2);t.font=s+"px Arial, Sans-Serif",t.textBaseline="top",t.canvas.width=n*2,t.canvas.height=e,t.clearRect(0,0,n*2,e),t.fillStyle="#FF0000",t.fillText(i,0,22),t.fillStyle="#0000FF",t.fillText(i,n,22);const o=t.getImageData(0,0,n,e).data,r=o.length;let a=0;for(;a<r&&!o[a+3];a+=4);/* istanbul ignore next -- @preserve */if(a>=r)return!1;const l=n+a/4%n,u=Math.floor(a/4/n),h=t.getImageData(l,u,1,1).data;/* istanbul ignore next -- @preserve */if(o[a]!==h[0]||o[a+2]!==h[2])return!1;/* istanbul ignore next -- @preserve */return!(t.measureText(i).width>=n)}function xX(){try{return document.createElement("canvas").getContext("2d",{willReadFrequently:!0})}catch{/* istanbul ignore next -- @preserve */return null}}const kX={0:"default",1:"light",2:"medium-light",3:"medium",4:"medium-dark",5:"dark"},EX={"🫩":16,"🫨":15.1,"🫠":14,"😶‍🌫️":13.1,"🧑‍💻":12.1,"🥰":11,"🤪":5,"⚕️":4,"🤣":3,"👋🏽":2,"😀":1,"😐":.7,"😂":.6},O2=24,ip=class ip extends te{static get pluginName(){return"EmojiUtils"}static get isOfficialPlugin(){return!0}isEmojiSupported(t,e,n){return t.version<=e?this.hasZwj(t.emoji)?this.isEmojiZwjSupported(t,n):!0:!1}getEmojiSupportedVersionByOs(){for(const[t,e]of Object.entries(EX))if(ip._isEmojiSupported(t))return e;return 0}hasZwj(t){return t.includes("‍")}isEmojiZwjSupported(t,e){return this.getNodeWidth(e,t.emoji)<O2*1.8}getNodeWidth(t,e){const n=document.createElement("span");n.textContent=e,t.appendChild(n);const s=n.offsetWidth;return t.removeChild(n),s}createEmojiWidthTestingContainer(){const t=document.createElement("div");return t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.left="-9999px",t.style.whiteSpace="nowrap",t.style.fontSize=O2+"px",t}normalizeEmojiSkinTone(t){const e={...t,skins:{default:t.emoji}};return t.skins&&t.skins.forEach(n=>{const s=kX[n.tone];e.skins[s]=n.emoji}),e}isEmojiCategoryAllowed(t){return t.group!==2}};_(ip,"_isEmojiSupported",TX);let lv=ip;const SX="https://cdn.ckeditor.com/ckeditor5/data/emoji/{version}/en.json",AX=16,fc=class fc extends te{constructor(e){super(e);_(this,"_items");_(this,"_url");_(this,"_repositoryPromise");e.config.define("emoji",{version:void 0,skinTone:"default",definitionsUrl:void 0,useCustomFont:!1}),this._url=this._getUrl(),this._repositoryPromise=new Promise(n=>{this._repositoryPromiseResolveCallback=n}),this._items=null}static get requires(){return[lv]}static get pluginName(){return"EmojiRepository"}static get isOfficialPlugin(){return!0}async init(){return this._warnAboutCdnUse(),await this._loadAndCacheEmoji(),this._items=this._getItems(),this._items?this._repositoryPromiseResolveCallback(!0):(Ze("emoji-repository-empty"),this._repositoryPromiseResolveCallback(!1))}getEmojiByQuery(e){return this._items?e.split(/\s/).filter(Boolean).some(o=>o.length>=2)?CX.go(e,this._items,{threshold:.6,keys:["emoticon","annotation",o=>e.split(/\s/).filter(Boolean).flatMap(l=>{var u;return(u=o.tags)==null?void 0:u.filter(h=>h.startsWith(l))}).join()]}).map(o=>o.obj):[]:[]}getEmojiCategories(){const e=this._getItems();if(!e)return[];const{t:n}=this.editor.locale,s=[{title:n("Smileys & Expressions"),icon:"😄",groupId:0},{title:n("Gestures & People"),icon:"👋",groupId:1},{title:n("Animals & Nature"),icon:"🐻",groupId:3},{title:n("Food & Drinks"),icon:"🍎",groupId:4},{title:n("Travel & Places"),icon:"🚘",groupId:5},{title:n("Activities"),icon:"🏀",groupId:6},{title:n("Objects"),icon:"💡",groupId:7},{title:n("Symbols"),icon:"🔵",groupId:8},{title:n("Flags"),icon:"🏁",groupId:9}],o=_9(e,r=>r.group);return s.map(r=>({...r,items:o[r.groupId]}))}getSkinTones(){const{t:e}=this.editor.locale;return[{id:"default",icon:"👋",tooltip:e("Default skin tone")},{id:"light",icon:"👋🏻",tooltip:e("Light skin tone")},{id:"medium-light",icon:"👋🏼",tooltip:e("Medium Light skin tone")},{id:"medium",icon:"👋🏽",tooltip:e("Medium skin tone")},{id:"medium-dark",icon:"👋🏾",tooltip:e("Medium Dark skin tone")},{id:"dark",icon:"👋🏿",tooltip:e("Dark skin tone")}]}isReady(){return this._repositoryPromise}_getUrl(){const{definitionsUrl:e,version:n}=this.editor.config.get("emoji");if(!e||e==="cdn"){const s=n||AX,o=new URL(SX.replace("{version}",s.toString()));return o.searchParams.set("editorVersion",f5),o}return n&&Ze("emoji-repository-redundant-version"),new URL(e)}_warnAboutCdnUse(){const e=this.editor,n=e.config.get("emoji"),s=e.config.get("licenseKey"),o=window[Symbol.for("cke distribution")];s!=="GPL"&&o!=="cloud"&&(n&&n.definitionsUrl||Ze("emoji-repository-cdn-use"))}_getItems(){const e=fc._results[this._url.href];return e&&e.length?e:null}async _loadAndCacheEmoji(){if(fc._results[this._url.href])return;const e=await fetch(this._url,{cache:"force-cache"}).then(n=>n.ok?n.json():[]).catch(()=>[]);fc._results[this._url.href]=this._normalizeEmoji(e)}_normalizeEmoji(e){const n=this.editor,s=n.config.get("emoji.useCustomFont"),o=n.plugins.get("EmojiUtils"),r=e.filter(h=>o.isEmojiCategoryAllowed(h));if(s)return r.map(h=>o.normalizeEmojiSkinTone(h));const a=o.getEmojiSupportedVersionByOs(),l=o.createEmojiWidthTestingContainer();document.body.appendChild(l);const u=r.filter(h=>o.isEmojiSupported(h,a,l)).map(h=>o.normalizeEmojiSkinTone(h));return l.remove(),u}};_(fc,"_results",{});let Dg=fc;const Jl=":",ay=":__EMOJI_SHOW_ALL:",ly=":__EMOJI_HINT:";class RX extends te{constructor(e){super(e);_(this,"_emojiDropdownLimit");_(this,"_skinTone");this.editor.config.define("emoji",{dropdownLimit:6}),this._emojiDropdownLimit=e.config.get("emoji.dropdownLimit"),this._skinTone=e.config.get("emoji.skinTone"),this._setupMentionConfiguration(e)}static get requires(){return[Dg,i1,"Mention"]}static get pluginName(){return"EmojiMention"}static get isOfficialPlugin(){return!0}_setupMentionConfiguration(e){const n=e.config.get("mergeFields.prefix"),s=e.config.get("mention.feeds"),o=n?n[0]===Jl:!1;if(s.filter(u=>!u._isEmojiMarker).some(u=>u.marker===Jl)||o){Ze("emoji-config-marker-already-used",{marker:Jl});return}if(s.some(u=>u._isEmojiMarker))return;const l={_isEmojiMarker:!0,marker:Jl,dropdownLimit:this._emojiDropdownLimit,itemRenderer:this._customItemRendererFactory(this.editor.t),feed:this._queryEmojiCallbackFactory()};this.editor.config.set("mention.feeds",[...s,l])}async init(){const e=this.editor;this.emojiPickerPlugin=e.plugins.has("EmojiPicker")?e.plugins.get("EmojiPicker"):null,this.emojiRepositoryPlugin=e.plugins.get("EmojiRepository"),this._isEmojiRepositoryAvailable=await this.emojiRepositoryPlugin.isReady(),this._isEmojiRepositoryAvailable&&e.once("ready",this._overrideMentionExecuteListener.bind(this))}_customItemRendererFactory(e){return n=>{const s=document.createElement("button");s.classList.add("ck"),s.classList.add("ck-button"),s.classList.add("ck-button_with-text"),s.id=`mention-list-item-id${n.id.slice(0,-1)}`,s.type="button",s.tabIndex=-1;const o=document.createElement("span");return o.classList.add("ck"),o.classList.add("ck-button__label"),s.appendChild(o),n.id===ly?(s.classList.add("ck-list-item-button"),s.classList.add("ck-disabled"),o.textContent=e("Keep on typing to see the emoji.")):n.id===ay?o.textContent=e("Show all emoji..."):o.textContent=`${n.text} ${n.id}`,s}}_overrideMentionExecuteListener(){const e=this.editor;e.commands.get("mention").on("execute",(n,s)=>{const o=s[0];if(o.marker===Jl&&(n.stop(),o.mention.id!==ly))if(o.mention.id===ay){const r=[...o.range.getItems()].filter(l=>l.is("$textProxy")).map(l=>l.data).reduce((l,u)=>l+u,"");e.model.change(l=>{e.model.deleteContent(l.createSelection(o.range))});const a=this.emojiPickerPlugin;a.showUI(r.slice(1)),setTimeout(()=>{a.emojiPickerView.focus()})}else e.execute("insertText",{text:o.mention.text,range:o.range})},{priority:"high"})}_queryEmojiCallbackFactory(){return e=>{if(e.startsWith(" "))return[];if(e.startsWith(Jl))return[];if(!this._isEmojiRepositoryAvailable)return[];const n=this.emojiRepositoryPlugin.getEmojiByQuery(e).map(o=>{let r=o.skins[this._skinTone]||o.skins.default;return this.emojiPickerPlugin&&(r=o.skins[this.emojiPickerPlugin.skinTone]||o.skins.default),{id:`:${o.annotation}:`,text:r}});if(!this.emojiPickerPlugin)return n.slice(0,this._emojiDropdownLimit);const s={id:e.length>1?ay:ly};return[...n.slice(0,this._emojiDropdownLimit-1),s]}}}class IX extends $e{refresh(){const e=this.editor.model,n=e.schema,s=e.document.selection;this.isEnabled=n.checkChild(s.getFirstPosition(),"$text")}execute(t=""){this.editor.plugins.get("EmojiPicker").showUI(t)}}class PX extends fe{constructor(e,{categoryName:n,emojiCategories:s,getEmojiByQuery:o,skinTone:r}){super(e);_(this,"tiles");_(this,"focusTracker");_(this,"keystrokes");_(this,"emojiCategories");_(this,"cachedTiles");_(this,"_getEmojiByQuery");this.set("isEmpty",!0),this.set("categoryName",n),this.set("skinTone",r),this.tiles=this.createCollection(),this.cachedTiles=this.createCollection(),this.focusTracker=new wt,this.keystrokes=new Dt,this._getEmojiByQuery=o,this.emojiCategories=s;const a=this.bindTemplate;this.setTemplate({tag:"div",children:[{tag:"div",attributes:{role:"grid",class:["ck","ck-emoji__grid"]},children:this.tiles}],attributes:{role:"tabpanel",class:["ck","ck-emoji__tiles",a.if("isEmpty","ck-hidden",l=>l)]}}),J0({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.tiles,numberOfColumns:()=>de.window.getComputedStyle(this.element.firstChild).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy(),this.focusTracker.destroy()}focus(){const e=this.tiles.first;e&&e.focus()}filter(e){const{matchingItems:n,allItems:s}=e?this._getItemsByQuery(e.source):this._getItemsByCategory();return this._updateGrid(n),this.set("isEmpty",n.length===0),{resultsCount:n.length,totalItemsCount:s.length}}_getItemsByQuery(e){return{matchingItems:this._getEmojiByQuery(e),allItems:this.emojiCategories.flatMap(n=>n.items)}}_getItemsByCategory(){const e=this.emojiCategories.find(s=>s.title===this.categoryName),{items:n}=e;return{matchingItems:n,allItems:n}}_updateGrid(e){[...this.tiles].forEach(n=>{this.focusTracker.remove(n),this.tiles.remove(n)}),e.map(n=>{const s=n.skins[this.skinTone]||n.skins.default;return this.cachedTiles.get(s)||this._createTile(s,n.annotation)}).forEach(n=>{this.tiles.add(n),this.focusTracker.add(n)})}_createTile(e,n){const s=new ke(this.locale);return s.viewUid=e,s.extendTemplate({attributes:{class:["ck-emoji__tile"]}}),s.set({label:e,tooltip:n,withText:!0,ariaLabel:n,ariaLabelledBy:void 0}),s.on("execute",()=>{this.fire("execute",{name:n,emoji:e})}),this.cachedTiles.add(s),s}}class MX extends fe{constructor(e,{emojiCategories:n,categoryName:s}){super(e);_(this,"focusTracker");_(this,"keystrokes");_(this,"focusCycler");_(this,"buttonViews");this.buttonViews=this.createCollection(n.map(o=>this._createCategoryButton(o))),this.focusTracker=new wt,this.keystrokes=new Dt,this.focusCycler=new cn({focusables:this.buttonViews,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowleft",focusNext:"arrowright"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-emoji__categories-list"],role:"tablist"},children:this.buttonViews}),this.on("change:categoryName",(o,r,a,l)=>{const u=this.buttonViews.find(m=>m.tooltip===l);u&&(u.isOn=!1);const h=this.buttonViews.find(m=>m.tooltip===a);h.isOn=!0}),this.set("categoryName",s)}render(){super.render(),this.buttonViews.forEach(e=>{this.focusTracker.add(e)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),this.buttonViews.destroy()}focus(){this.buttonViews.first.focus()}enableCategories(){this.buttonViews.forEach(e=>{e.isEnabled=!0})}disableCategories(){this.buttonViews.forEach(e=>{e.set({class:"",isEnabled:!1,isOn:!1})})}_createCategoryButton(e){const n=new ke,s=n.bindTemplate;return n.extendTemplate({attributes:{"aria-selected":s.to("isOn",o=>o.toString()),class:["ck-emoji__category-item"]}}),n.set({ariaLabel:e.title,label:e.icon,role:"tab",tooltip:e.title,withText:!0,ariaLabelledBy:void 0}),n.on("execute",()=>{this.categoryName=e.title}),n.on("change:isEnabled",()=>{n.isEnabled&&n.tooltip===this.categoryName&&(n.isOn=!0)}),n}}class VX extends fe{constructor(e,{gridView:n,resultsView:s}){super(e);_(this,"inputView");_(this,"gridView");this.gridView=n;const o=e.t;this.inputView=new TY(this.locale,{queryView:{label:o("Find an emoji (min. 2 characters)"),creator:ti},filteredView:this.gridView,infoView:{instance:s}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search"],tabindex:"-1"},children:[this.inputView.queryView]}),this.inputView.delegate("search").to(this)}destroy(){super.destroy(),this.inputView.destroy()}search(e){const n=e?new RegExp(T0(e),"ig"):null,s=this.gridView.filter(n);this.inputView.fire("search",{query:e,...s})}setInputValue(e){e?this.inputView.queryView.fieldView.value=e:this.inputView.queryView.fieldView.reset()}getInputValue(){return this.inputView.queryView.fieldView.element.value}focus(){this.inputView.focus()}}class NX extends fe{constructor(e,{skinTone:n,skinTones:s}){super(e);_(this,"dropdownView");_(this,"_skinTones");this.set("skinTone",n),this._skinTones=s;const o=e.t,r=o("Select skin tone"),a=ii(e),l=new En;for(const{id:u,icon:h,tooltip:m}of this._skinTones){const p={type:"button",model:new Oa({value:u,label:h,ariaLabel:m,tooltip:m,tooltipPosition:"e",role:"menuitemradio",withText:!0,ariaLabelledBy:void 0})};p.model.bind("isOn").to(this,"skinTone",v=>v===u),l.add(p)}Ka(a,l,{ariaLabel:r,role:"menu"}),a.buttonView.set({label:this._getSkinTone().icon,ariaLabel:r,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:r}),this.dropdownView=a,this.listenTo(a,"execute",u=>{this.skinTone=u.source.value}),a.buttonView.bind("label").to(this,"skinTone",()=>this._getSkinTone().icon),a.buttonView.bind("ariaLabel").to(this,"skinTone",()=>`${this._getSkinTone().tooltip}, ${r}`),this.setTemplate({tag:"div",attributes:{class:["ck","ck-emoji__skin-tone"]},children:[a]})}focus(){this.dropdownView.buttonView.focus()}_getSkinTone(){return this._skinTones.find(e=>e.id===this.skinTone)}}class DX extends fe{constructor(e,{emojiCategories:n,getEmojiByQuery:s,skinTone:o,skinTones:r}){super(e);_(this,"items");_(this,"focusTracker");_(this,"keystrokes");_(this,"focusCycler");_(this,"searchView");_(this,"toneView");_(this,"categoriesView");_(this,"gridView");_(this,"infoView");const a=n[0].title;this.gridView=new PX(e,{categoryName:a,emojiCategories:n,getEmojiByQuery:s,skinTone:o}),this.infoView=new _N,this.searchView=new VX(e,{gridView:this.gridView,resultsView:this.infoView}),this.categoriesView=new MX(e,{emojiCategories:n,categoryName:a}),this.toneView=new NX(e,{skinTone:o,skinTones:r}),this.items=this.createCollection([this.searchView,this.toneView,this.categoriesView,this.gridView,this.infoView]),this.focusTracker=new wt,this.keystrokes=new Dt,this.focusCycler=new cn({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",children:[{tag:"div",children:[this.searchView,this.toneView],attributes:{class:["ck","ck-emoji__search"]}},this.categoriesView,this.gridView,{tag:"div",children:[this.infoView],attributes:{class:["ck","ck-search__results"]}}],attributes:{tabindex:"-1",class:["ck","ck-emoji","ck-search"]}}),this._setupEventListeners()}render(){super.render(),this.focusTracker.add(this.searchView.element),this.focusTracker.add(this.toneView.element),this.focusTracker.add(this.categoriesView.element),this.focusTracker.add(this.gridView.element),this.focusTracker.add(this.infoView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.searchView.focus()}_setupEventListeners(){const e=this.locale.t;this.searchView.on("search",(n,s)=>{s.query?this.categoriesView.disableCategories():this.categoriesView.enableCategories()}),this.searchView.on("search",(n,s)=>{s.query.length===1?this.infoView.set({primaryText:e("Keep on typing to see the emoji."),secondaryText:e("The query must contain at least two characters."),isVisible:!0}):s.resultsCount?this.infoView.set({isVisible:!1}):this.infoView.set({primaryText:e('No emojis were found matching "%0".',s.query),secondaryText:e("Please try a different phrase or check the spelling."),isVisible:!0})}),this.searchView.on("search",()=>{this.fire("update"),this.gridView.element.scrollTo(0,0)}),this.categoriesView.on("change:categoryName",(n,s,o)=>{this.gridView.categoryName=o,this.searchView.search("")}),this.toneView.on("change:skinTone",(n,s,o)=>{this.gridView.skinTone=o,this.searchView.search(this.searchView.getInputValue())})}}class OX extends fe{constructor(e){super(e);_(this,"backButtonView");_(this,"focusTracker",new wt);_(this,"keystrokes",new Dt);_(this,"children");_(this,"_focusables",new Sn);_(this,"_focusCycler");this.backButtonView=this._createBackButton(),this.children=this.createCollection([this._createHeaderView()]),this._focusCycler=new cn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form","ck-emoji-picker-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),[...this.children.filter(Dc),this.backButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element),QV(n)&&this._focusCycler.chain(n.focusCycler)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBackButton(){const e=this.locale.t,n=new ke(this.locale);return n.set({class:"ck-button-back",label:e("Back"),icon:Ga,tooltip:!0}),n.delegate("execute").to(this,"cancel"),n}_createHeaderView(){const e=this.locale.t,n=new zo(this.locale,{label:e("Emoji picker")});return n.children.add(this.backButtonView,0),n}}const mr="emoji-picker";class LX extends te{static get requires(){return[Dg,as,xc,i1]}static get pluginName(){return"EmojiPicker"}static get isOfficialPlugin(){return!0}async init(){const t=this.editor;if(this.balloonPlugin=t.plugins.get("ContextualBalloon"),this.emojiRepositoryPlugin=t.plugins.get("EmojiRepository"),!await this.emojiRepositoryPlugin.isReady())return;const e=new IX(t);t.commands.add("emoji",e),t.ui.componentFactory.add("emoji",()=>{const n=this._createButton(ke,e);return n.set({tooltip:!0}),n}),t.ui.componentFactory.add("menuBar:emoji",()=>this._createButton(Jn,e)),this._setupConversion()}destroy(){super.destroy(),this.emojiPickerView&&this.emojiPickerView.destroy()}get skinTone(){return this.emojiPickerView?this.emojiPickerView.gridView.skinTone:this.editor.config.get("emoji.skinTone")}showUI(t=""){this._showFakeVisualSelection(),this.emojiPickerView||(this.emojiPickerView=this._createEmojiPickerView()),t&&this.emojiPickerView.searchView.setInputValue(t),this.emojiPickerView.searchView.search(t),this.emojiPickerFormView||(this.emojiPickerFormView=this._createEmojiPickerFormView()),this.balloonPlugin.hasView(this.emojiPickerFormView)||(this.emojiPickerFormView.backButtonView.isVisible=!!this.balloonPlugin.visibleView,this.balloonPlugin.add({view:this.emojiPickerFormView,position:this._getBalloonPositionData(),balloonClassName:"ck-emoji-picker-balloon"})),this.emojiPickerView.focus()}_createButton(t,e){const n=new t(this.editor.locale),s=this.editor.locale.t;return n.bind("isEnabled").to(e,"isEnabled"),n.set({label:s("Emoji"),icon:zj,isToggleable:!0}),n.on("execute",()=>{this.editor.editing.view.scrollToTheSelection(),this.showUI()}),n}_createEmojiPickerView(){const t=new DX(this.editor.locale,{emojiCategories:this.emojiRepositoryPlugin.getEmojiCategories(),skinTone:this.editor.config.get("emoji.skinTone"),skinTones:this.emojiRepositoryPlugin.getSkinTones(),getEmojiByQuery:e=>this.emojiRepositoryPlugin.getEmojiByQuery(e)});return this.listenTo(t.gridView,"execute",(e,n)=>{const s=this.editor,o=n.emoji;this._hideUI(),s.execute("insertText",{text:o})}),t}_createEmojiPickerFormView(){const t=new OX(this.editor.locale);return t.children.add(this.emojiPickerView),this.listenTo(this.emojiPickerView,"update",()=>{this.balloonPlugin.visibleView===t&&this.balloonPlugin.updatePosition()}),this.listenTo(t,"cancel",()=>{this._hideUI()}),t.keystrokes.set("Esc",(e,n)=>{this._hideUI(),n()}),Uo({emitter:t,contextElements:[this.balloonPlugin.view.element],callback:()=>{this._hideUI(!1)},activator:()=>this.balloonPlugin.visibleView===t}),t}_hideUI(t=!0){this.balloonPlugin.remove(this.emojiPickerFormView),this.emojiPickerView.searchView.setInputValue(""),t&&this.editor.editing.view.focus(),this._hideFakeVisualSelection()}_setupConversion(){const t=this.editor;t.conversion.for("editingDowncast").markerToHighlight({model:mr,view:{classes:["ck-fake-emoji-selection"]}}),t.conversion.for("editingDowncast").markerToElement({model:mr,view:(e,{writer:n})=>{if(!e.markerRange.isCollapsed)return null;const s=n.createUIElement("span");return n.addClass(["ck-fake-emoji-selection","ck-fake-emoji-selection_collapsed"],s),s}})}_getBalloonPositionData(){const t=this.editor.editing.view,e=t.document;return{target:()=>t.domConverter.viewRangeToDom(e.selection.getFirstRange())}}_showFakeVisualSelection(){const t=this.editor.model;t.change(e=>{const n=t.document.selection.getFirstRange();if(t.markers.has(mr))e.updateMarker(mr,{range:n});else if(n.start.isAtEnd){const s=n.start.getLastMatchingPosition(({item:o})=>!t.schema.isContent(o),{boundaries:n});e.addMarker(mr,{usingOperation:!1,affectsData:!1,range:e.createRange(s,n.end)})}else e.addMarker(mr,{usingOperation:!1,affectsData:!1,range:n})})}_hideFakeVisualSelection(){const t=this.editor.model;t.markers.has(mr)&&t.change(e=>{e.removeMarker(mr)})}}class BX extends te{static get requires(){return[RX,LX]}static get pluginName(){return"Emoji"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class FX extends $e{constructor(t){super(t),this.affectsData=!1}execute(){const t=this.editor.model,e=t.document.selection;let n=t.schema.getLimitElement(e);if(e.containsEntireContent(n)||!L2(t.schema,n))do if(n=n.parent,!n)return;while(!L2(t.schema,n));t.change(s=>{s.setSelection(n,"in")})}}function L2(i,t){return i.isLimit(t)&&(i.checkChild(t,"$text")||i.checkChild(t,"paragraph"))}const UX=S0("Ctrl+A");class zX extends te{static get pluginName(){return"SelectAllEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,s=t.editing.view.document;t.commands.add("selectAll",new FX(t)),this.listenTo(s,"keydown",(o,r)=>{Cc(r)===UX&&(t.execute("selectAll"),r.preventDefault())}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Select all"),keystroke:"CTRL+A"}]})}}class HX extends te{static get pluginName(){return"SelectAllUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("selectAll",()=>{const e=this._createButton(ke);return e.set({tooltip:!0}),e}),t.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(Jn))}_createButton(t){const e=this.editor,n=e.locale,s=e.commands.get("selectAll"),o=new t(e.locale),r=n.t;return o.set({label:r("Select all"),icon:dK,keystroke:"Ctrl+A"}),o.bind("isEnabled").to(s,"isEnabled"),this.listenTo(o,"execute",()=>{e.execute("selectAll"),e.editing.view.focus()}),o}}class WX extends te{static get requires(){return[zX,HX]}static get pluginName(){return"SelectAll"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class FN extends $e{constructor(e){super(e);_(this,"_stack",[]);_(this,"_createdBatches",new WeakSet);this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(e.data,"set",(n,s)=>{s[1]={...s[1]};const o=s[1];o.batchType||(o.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(e.data,"set",(n,s)=>{s[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(e){const n=this.editor.model.document.selection,s={ranges:n.hasOwnRange?Array.from(n.getRanges()):[],isBackward:n.isBackward};this._stack.push({batch:e,selection:s}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,n,s){const o=this.editor.model,r=o.document,a=[],l=e.map(h=>h.getTransformedByOperations(s)),u=l.flat();for(const h of l){const m=h.filter(p=>p.root!=r.graveyard).filter(p=>!$X(p,u));m.length&&(qX(m),a.push(m[0]))}a.length&&o.change(h=>{h.setSelection(a,{backward:n})})}_undo(e,n){const s=this.editor.model,o=s.document;this._createdBatches.add(n);const r=e.operations.slice().filter(a=>a.isDocumentOperation);r.reverse();for(const a of r){const l=a.baseVersion+1,u=Array.from(o.history.getOperations(l)),m=X$([a.getReversed()],u,{useRelations:!0,document:this.editor.model.document,forceWeakRemove:!0}).operationsA;for(let p of m){const v=p.affectedSelectable;v&&!s.canEditAt(v)&&(p=new pn(p.baseVersion)),n.addOperation(p),s.applyOperation(p),o.history.setOperationAsUndone(a,p)}}}}function qX(i){i.sort((t,e)=>t.start.isBefore(e.start)?-1:1);for(let t=1;t<i.length;t++){const n=i[t-1].getJoined(i[t],!0);n&&(t--,i.splice(t,2,n))}}function $X(i,t){return t.some(e=>e!==i&&e.containsRange(i,!0))}class GX extends FN{execute(t=null){const e=t?this._stack.findIndex(o=>o.batch==t):this._stack.length-1,n=this._stack.splice(e,1)[0],s=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(s,()=>{this._undo(n.batch,s);const o=this.editor.model.document.history.getOperations(n.batch.baseVersion);this._restoreSelection(n.selection.ranges,n.selection.isBackward,o)}),this.fire("revert",n.batch,s),this.refresh()}}class jX extends FN{execute(){const t=this._stack.pop(),e=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(e,()=>{const s=t.batch.operations[t.batch.operations.length-1].baseVersion+1,o=this.editor.model.document.history.getOperations(s);this._restoreSelection(t.selection.ranges,t.selection.isBackward,o),this._undo(t.batch,e)}),this.refresh()}}class KX extends te{constructor(){super(...arguments);_(this,"_undoCommand");_(this,"_redoCommand");_(this,"_batchRegistry",new WeakSet)}static get pluginName(){return"UndoEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.t;this._undoCommand=new GX(e),this._redoCommand=new jX(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(s,o)=>{const r=o[0];if(!r.isDocumentOperation)return;const a=r.batch,l=this._redoCommand.createdBatches.has(a),u=this._undoCommand.createdBatches.has(a);this._batchRegistry.has(a)||(this._batchRegistry.add(a),a.isUndoable&&(l?this._undoCommand.addBatch(a):u||(this._undoCommand.addBatch(a),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(s,o,r)=>{this._redoCommand.addBatch(r)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Undo"),keystroke:"CTRL+Z"},{label:n("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}class ZX extends te{static get pluginName(){return"UndoUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale,n=t.t,s=e.uiLanguageDirection=="ltr"?AA:EA,o=e.uiLanguageDirection=="ltr"?EA:AA;this._addButtonsToFactory("undo",n("Undo"),"CTRL+Z",s),this._addButtonsToFactory("redo",n("Redo"),"CTRL+Y",o)}_addButtonsToFactory(t,e,n,s){const o=this.editor;o.ui.componentFactory.add(t,()=>{const r=this._createButton(ke,t,e,n,s);return r.set({tooltip:!0}),r}),o.ui.componentFactory.add("menuBar:"+t,()=>this._createButton(Jn,t,e,n,s))}_createButton(t,e,n,s,o){const r=this.editor,a=r.locale,l=r.commands.get(e),u=new t(a);return u.set({label:n,icon:o,keystroke:s}),u.bind("isEnabled").to(l,"isEnabled"),this.listenTo(u,"execute",()=>{r.execute(e),r.editing.view.focus()}),u}}class d1 extends te{static get requires(){return[KX,ZX]}static get pluginName(){return"Undo"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class YX extends te{static get requires(){return[aZ,u1,IN,WX,yJ,i1,d1]}static get pluginName(){return"Essentials"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Lp extends $e{constructor(e,n){super(e);_(this,"attributeKey");this.attributeKey=n}refresh(){const e=this.editor.model,n=e.document;this.value=n.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(n.selection,this.attributeKey)}execute(e={}){const n=this.editor.model,o=n.document.selection,r=e.value,a=e.batch,l=u=>{if(o.isCollapsed)r?u.setSelectionAttribute(this.attributeKey,r):u.removeSelectionAttribute(this.attributeKey);else{const h=n.schema.getValidRanges(o.getRanges(),this.attributeKey);for(const m of h)r?u.setAttribute(this.attributeKey,r,m):u.removeAttribute(this.attributeKey,m)}};a?n.enqueueChange(a,u=>{l(u)}):n.change(u=>{l(u)})}}const fi="fontSize",mi="fontFamily",Fs="fontColor",To="fontBackgroundColor";function UN(i,t){const e={model:{key:i,values:[]},view:{},upcastAlso:{}};for(const n of t)e.model.values.push(n.model),e.view[n.model]=n.view,n.upcastAlso&&(e.upcastAlso[n.model]=n.upcastAlso);return e}function zN(i){return t=>XX(t.getStyle(i))}function HN(i){return(t,{writer:e})=>e.createAttributeElement("span",{style:`${i}:${t}`},{priority:7})}function JX({dropdownView:i,colors:t,columns:e,removeButtonLabel:n,colorPickerLabel:s,documentColorsLabel:o,documentColorsCount:r,colorPickerViewConfig:a}){const l=i.locale,u=new e1(l,{colors:t,columns:e,removeButtonLabel:n,colorPickerLabel:s,documentColorsLabel:o,documentColorsCount:r,colorPickerViewConfig:a});return i.colorSelectorView=u,i.panelView.children.add(u),u}function XX(i){return i.replace(/\s/g,"")}class QX extends Lp{constructor(t){super(t,mi)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function WN(i){return i.map(eQ).filter(t=>t!==void 0)}function eQ(i){if(typeof i=="object")return i;if(i==="default")return{title:"Default",model:void 0};if(typeof i=="string")return tQ(i)}function tQ(i){const t=i.replace(/"|'/g,"").split(","),e=t[0],n=t.map(nQ).join(", ");return{title:e,model:n,view:{name:"span",styles:{"font-family":n},priority:7}}}function nQ(i){return i=i.trim(),i.indexOf(" ")>0&&(i=`'${i}'`),i}class iQ extends te{static get pluginName(){return"FontFamilyEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define(mi,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:mi}),t.model.schema.setAttributeProperties(mi,{isFormatting:!0,copyOnEnter:!0});const e=WN(t.config.get("fontFamily.options")).filter(s=>s.model),n=UN(mi,e);t.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):t.conversion.attributeToElement(n),t.commands.add(mi,new QX(t))}_prepareAnyValueConverters(){const t=this.editor;t.conversion.for("downcast").attributeToElement({model:mi,view:(e,{writer:n})=>n.createAttributeElement("span",{style:"font-family:"+e},{priority:7})}),t.conversion.for("upcast").elementToAttribute({model:{key:mi,value:e=>e.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:mi,value:e=>e.getAttribute("face")}})}}class sQ extends te{static get pluginName(){return"FontFamilyUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,n=this._getLocalizedOptions(),s=t.commands.get(mi),o=e("Font Family"),r=oQ(n,s);t.ui.componentFactory.add(mi,a=>{const l=ii(a);return Ka(l,r,{role:"menu",ariaLabel:o}),l.buttonView.set({label:o,icon:CA,tooltip:!0}),l.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),l.bind("isEnabled").to(s),this.listenTo(l,"execute",u=>{t.execute(u.source.commandName,{value:u.source.commandParam}),t.editing.view.focus()}),l}),t.ui.componentFactory.add(`menuBar:${mi}`,a=>{const l=new ws(a);l.buttonView.set({label:o,icon:CA}),l.bind("isEnabled").to(s);const u=new kc(a);for(const h of r){const m=new Lc(a,l),p=new Jn(a);p.set({role:"menuitemradio",isToggleable:!0}),p.bind(...Object.keys(h.model)).to(h.model),p.delegate("execute").to(l),p.on("execute",()=>{t.execute(h.model.commandName,{value:h.model.commandParam}),t.editing.view.focus()}),m.children.add(p),u.items.add(m)}return l.panelView.children.add(u),l})}_getLocalizedOptions(){const t=this.editor,e=t.t;return WN(t.config.get(mi).options).map(s=>(s.title==="Default"&&(s.title=e("Default")),s))}}function oQ(i,t){const e=new En;for(const n of i){const s={type:"button",model:new Oa({commandName:mi,commandParam:n.model,label:n.title,role:"menuitemradio",withText:!0})};s.model.bind("isOn").to(t,"value",o=>o===n.model?!0:!o||!n.model?!1:o.split(",")[0].replace(/'/g,"").toLowerCase()===n.model.toLowerCase()),n.view&&typeof n.view!="string"&&n.view.styles&&s.model.set("labelStyle",`font-family: ${n.view.styles["font-family"]}`),e.add(s)}return e}class rQ extends te{static get requires(){return[iQ,sQ]}static get pluginName(){return"FontFamily"}static get isOfficialPlugin(){return!0}}class aQ extends Lp{constructor(t){super(t,fi)}}function h1(i){return i.map(t=>lQ(t)).filter(t=>t!==void 0)}const B2={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function lQ(i){if(typeof i=="number"&&(i=String(i)),typeof i=="object"&&dQ(i))return cv(i);const t=uQ(i);if(t)return cv(t);if(i==="default")return{model:void 0,title:"Default"};if(!hQ(i))return cQ(i)}function cQ(i){return typeof i=="string"&&(i={title:i,model:`${parseFloat(i)}px`}),i.view={name:"span",styles:{"font-size":i.model}},cv(i)}function cv(i){return i.view&&typeof i.view!="string"&&!i.view.priority&&(i.view.priority=7),i}function uQ(i){return typeof i=="string"?B2[i]:B2[i.model]}function dQ(i){return i.title&&i.model&&i.view}function hQ(i){let t;if(typeof i=="object")if(i.model)t=parseFloat(i.model);else throw new V("font-size-invalid-definition",null,i);else t=parseFloat(i);return isNaN(t)}const F2=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class fQ extends te{static get pluginName(){return"FontSizeEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define(fi,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:fi}),t.model.schema.setAttributeProperties(fi,{isFormatting:!0,copyOnEnter:!0});const e=t.config.get("fontSize.supportAllValues"),n=h1(this.editor.config.get("fontSize.options")).filter(o=>o.model),s=UN(fi,n);e?(this._prepareAnyValueConverters(s),this._prepareCompatibilityConverter()):t.conversion.attributeToElement(s),t.commands.add(fi,new aQ(t))}_prepareAnyValueConverters(t){const e=this.editor,n=t.model.values.filter(s=>!Ip(String(s))&&!vV(String(s)));if(n.length)throw new V("font-size-invalid-use-of-named-presets",null,{presets:n});e.conversion.for("downcast").attributeToElement({model:fi,view:(s,{writer:o})=>{if(s)return o.createAttributeElement("span",{style:"font-size:"+s},{priority:7})}}),e.conversion.for("upcast").elementToAttribute({model:{key:fi,value:s=>s.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:fi,value:e=>{const n=e.getAttribute("size"),s=n[0]==="-"||n[0]==="+";let o=parseInt(n,10);s&&(o=3+o);const r=F2.length-1,a=Math.min(Math.max(o,0),r);return F2[a]}}})}}class mQ extends te{static get pluginName(){return"FontSizeUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,n=this._getLocalizedOptions(),s=t.commands.get(fi),o=e("Font Size"),r=gQ(n,s);t.ui.componentFactory.add(fi,a=>{const l=ii(a);return Ka(l,r,{role:"menu",ariaLabel:o}),l.buttonView.set({label:o,icon:TA,tooltip:!0}),l.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),l.bind("isEnabled").to(s),this.listenTo(l,"execute",u=>{t.execute(u.source.commandName,{value:u.source.commandParam}),t.editing.view.focus()}),l}),t.ui.componentFactory.add(`menuBar:${fi}`,a=>{const l=new ws(a);l.buttonView.set({label:o,icon:TA}),l.bind("isEnabled").to(s);const u=new kc(a);for(const h of r){const m=new Lc(a,l),p=new Jn(a);p.set({role:"menuitemradio",isToggleable:!0}),p.bind(...Object.keys(h.model)).to(h.model),p.delegate("execute").to(l),p.on("execute",()=>{t.execute(h.model.commandName,{value:h.model.commandParam}),t.editing.view.focus()}),m.children.add(p),u.items.add(m)}return l.panelView.children.add(u),l})}_getLocalizedOptions(){const t=this.editor,e=t.t,n={Default:e("Default"),Tiny:e("Tiny"),Small:e("Small"),Big:e("Big"),Huge:e("Huge")};return h1(t.config.get(fi).options).map(o=>{const r=n[o.title];return r&&r!=o.title&&(o=Object.assign({},o,{title:r})),o})}}function gQ(i,t){const e=new En;for(const n of i){const s={type:"button",model:new Oa({commandName:fi,commandParam:n.model,label:n.title,class:"ck-fontsize-option",role:"menuitemradio",withText:!0})};n.view&&typeof n.view!="string"&&(n.view.styles&&s.model.set("labelStyle",`font-size:${n.view.styles["font-size"]}`),n.view.classes&&s.model.set("class",`${s.model.class} ${n.view.classes}`)),s.model.bind("isOn").to(t,"value",o=>o===n.model),e.add(s)}return e}class pQ extends te{static get requires(){return[fQ,mQ]}static get pluginName(){return"FontSize"}static get isOfficialPlugin(){return!0}normalizeSizeOptions(t){return h1(t)}}class bQ extends Lp{constructor(t){super(t,Fs)}}class _Q extends te{static get pluginName(){return"FontColorEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define(Fs,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),t.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:Fs,value:zN("color")}}),t.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:Fs,value:e=>e.getAttribute("color")}}),t.conversion.for("downcast").attributeToElement({model:Fs,view:HN("color")}),t.commands.add(Fs,new bQ(t)),t.model.schema.extend("$text",{allowAttributes:Fs}),t.model.schema.setAttributeProperties(Fs,{isFormatting:!0,copyOnEnter:!0})}}class qN extends te{constructor(e,{commandName:n,componentName:s,icon:o,dropdownLabel:r}){super(e);_(this,"commandName");_(this,"componentName");_(this,"icon");_(this,"dropdownLabel");_(this,"columns");this.commandName=n,this.componentName=s,this.icon=o,this.dropdownLabel=r,this.columns=e.config.get(`${this.componentName}.columns`)}init(){const e=this.editor,n=e.locale,s=n.t,o=e.commands.get(this.commandName),r=e.config.get(this.componentName),a=oh(r.colors),l=sh(n,a),u=r.documentColors,h=r.colorPicker!==!1;e.ui.componentFactory.add(this.componentName,m=>{const p=ii(m);let v=!1;const C=JX({dropdownView:p,colors:l.map(x=>({label:x.label,color:x.model,options:{hasBorder:x.hasBorder}})),columns:this.columns,removeButtonLabel:s("Remove color"),colorPickerLabel:s("Color picker"),documentColorsLabel:u!==0?s("Document colors"):"",documentColorsCount:u===void 0?this.columns:u,colorPickerViewConfig:h?r.colorPicker||{}:!1});return C.bind("selectedColor").to(o,"value"),p.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),p.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),p.bind("isEnabled").to(o),C.on("execute",(x,k)=>{p.isOpen&&e.execute(this.commandName,{value:k.value,batch:this._undoStepBatch}),k.source!=="colorPicker"&&e.editing.view.focus(),k.source==="colorPickerSaveButton"&&(p.isOpen=!1)}),C.on("colorPicker:show",()=>{this._undoStepBatch=e.model.createBatch()}),C.on("colorPicker:cancel",()=>{this._undoStepBatch.operations.length&&(p.isOpen=!1,e.execute("undo",this._undoStepBatch)),e.editing.view.focus()}),p.on("change:isOpen",(x,k,S)=>{v||(v=!0,p.colorSelectorView.appendUI()),S&&(u!==0&&C.updateDocumentColors(e.model,this.componentName),C.updateSelectedColors(),C.showColorGridsFragment())}),Q0(p,()=>p.colorSelectorView.colorGridsFragmentView.staticColorsGrid.items.find(x=>x.isOn)),p}),e.ui.componentFactory.add(`menuBar:${this.componentName}`,m=>{const p=new ws(m);p.buttonView.set({label:this.dropdownLabel,icon:this.icon}),p.bind("isEnabled").to(o);let v=!1;const C=new e1(m,{colors:l.map(x=>({label:x.label,color:x.model,options:{hasBorder:x.hasBorder}})),columns:this.columns,removeButtonLabel:s("Remove color"),colorPickerLabel:s("Color picker"),documentColorsLabel:u!==0?s("Document colors"):"",documentColorsCount:u===void 0?this.columns:u,colorPickerViewConfig:!1});return C.bind("selectedColor").to(o,"value"),C.delegate("execute").to(p),C.on("execute",(x,k)=>{e.execute(this.commandName,{value:k.value,batch:this._undoStepBatch}),e.editing.view.focus()}),p.on("change:isOpen",(x,k,S)=>{v||(v=!0,C.appendUI()),S&&(u!==0&&C.updateDocumentColors(e.model,this.componentName),C.updateSelectedColors(),C.showColorGridsFragment())}),p.panelView.children.add(C),p})}}class wQ extends qN{constructor(t){const e=t.locale.t;super(t,{commandName:Fs,componentName:Fs,icon:qj,dropdownLabel:e("Font Color")})}static get pluginName(){return"FontColorUI"}}class yQ extends te{static get requires(){return[_Q,wQ]}static get pluginName(){return"FontColor"}static get isOfficialPlugin(){return!0}}class vQ extends Lp{constructor(t){super(t,To)}}class CQ extends te{static get pluginName(){return"FontBackgroundColorEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define(To,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),t.data.addStyleProcessorRules(q0),t.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:To,value:zN("background-color")}}),t.conversion.for("downcast").attributeToElement({model:To,view:HN("background-color")}),t.commands.add(To,new vQ(t)),t.model.schema.extend("$text",{allowAttributes:To}),t.model.schema.setAttributeProperties(To,{isFormatting:!0,copyOnEnter:!0})}}class TQ extends qN{constructor(t){const e=t.locale.t;super(t,{commandName:To,componentName:To,icon:Wj,dropdownLabel:e("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}}class xQ extends te{static get requires(){return[CQ,TQ]}static get pluginName(){return"FontBackgroundColor"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class kQ extends $e{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}refresh(){const t=this.editor.model,e=t.document,n=Ln(e.selection.getSelectedBlocks());this.value=!!n&&n.is("element","paragraph"),this.isEnabled=!!n&&U2(n,t.schema)}execute(t={}){const e=this.editor.model,n=e.document,s=t.selection||n.selection;e.canEditAt(s)&&e.change(o=>{const r=s.getSelectedBlocks();for(const a of r)!a.is("element","paragraph")&&U2(a,e.schema)&&o.rename(a,"paragraph")})}}function U2(i,t){return t.checkChild(i.parent,"paragraph")&&!t.isObject(i)}class EQ extends $e{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}execute(t){const e=this.editor.model,n=t.attributes;let s=t.position;return e.canEditAt(s)?e.change(o=>{if(s=this._findPositionToInsertParagraph(s,o),!s)return null;const r=o.createElement("paragraph");return n&&e.schema.setAllowedAttributes(r,n,o),e.insertContent(r,s),o.setSelection(r,"in"),o.createPositionAt(r,0)}):null}_findPositionToInsertParagraph(t,e){const n=this.editor.model;if(n.schema.checkChild(t,"paragraph"))return t;const s=n.schema.findAllowedParent(t,"paragraph");if(!s)return null;const o=t.parent,r=n.schema.checkChild(o,"$text");return o.isEmpty||r&&t.isAtEnd?n.createPositionAfter(o):!o.isEmpty&&r&&t.isAtStart?n.createPositionBefore(o):e.split(t,s).position}}const sp=class sp extends te{static get pluginName(){return"Paragraph"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model;t.commands.add("paragraph",new kQ(t)),t.commands.add("insertParagraph",new EQ(t)),e.schema.register("paragraph",{inheritAllFrom:"$block"}),t.conversion.elementToElement({model:"paragraph",view:"p"}),t.conversion.for("upcast").elementToElement({model:(n,{writer:s})=>!sp.paragraphLikeElements.has(n.name)||n.isEmpty?null:s.createElement("paragraph"),view:/.+/,converterPriority:"low"})}};_(sp,"paragraphLikeElements",new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]));let uv=sp;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function SQ(i){return i.createContainerElement("span",{class:"image-inline"},i.createEmptyElement("img"))}function z2(i){return i.createContainerElement("figure",{class:"image"},[i.createEmptyElement("img"),i.createSlot("children")])}function $N(i,t){const e=i.plugins.get("ImageUtils"),n=i.plugins.has("ImageInlineEditing")&&i.plugins.has("ImageBlockEditing");return o=>e.isInlineImageView(o)?n&&(o.getStyle("display")=="block"||o.findAncestor(e.isBlockImageView)?"imageBlock":"imageInline")!==t?null:s(o):null;function s(o){const r={name:!0};return o.hasAttribute("src")&&(r.attributes=["src"]),r}}function f1(i,t){const e=Ln(t.getSelectedBlocks());return!e||i.isObject(e)||e.isEmpty&&e.name!="listItem"?"imageBlock":"imageInline"}function Og(i){return i&&i.endsWith("px")?parseInt(i):null}function Lg(i){const t=Og(i.getStyle("width")),e=Og(i.getStyle("height"));return!!(t&&e)}const AQ=/^(image|image-inline)$/;class On extends te{constructor(){super(...arguments);_(this,"_domEmitter",new(Yn()))}static get pluginName(){return"ImageUtils"}static get isOfficialPlugin(){return!0}isImage(e){return this.isInlineImage(e)||this.isBlockImage(e)}isInlineImageView(e){return!!e&&e.is("element","img")}isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image")}insertImage(e={},n=null,s=null,o={}){const r=this.editor,a=r.model,l=a.document.selection,u=GN(r,n||l,s);e={...Object.fromEntries(l.getAttributes()),...e};for(const h in e)a.schema.checkAttribute(u,h)||delete e[h];return a.change(h=>{const{setImageSizes:m=!0}=o,p=h.createElement(u,e);return a.insertObject(p,n,null,{setSelection:"on",findOptimalPosition:!n&&u!="imageInline"?"auto":void 0}),p.parent?(m&&this.setImageNaturalSizeAttributes(p),p):null})}setImageNaturalSizeAttributes(e){const n=e.getAttribute("src");n&&(e.getAttribute("width")||e.getAttribute("height")||this.editor.model.change(s=>{const o=new de.window.Image;this._domEmitter.listenTo(o,"load",()=>{!e.getAttribute("width")&&!e.getAttribute("height")&&this.editor.model.enqueueChange(s.batch,r=>{r.setAttribute("width",o.naturalWidth,e),r.setAttribute("height",o.naturalHeight,e)}),this._domEmitter.stopListening(o,"load")}),o.src=n}))}getClosestSelectedImageWidget(e){const n=e.getFirstPosition();if(!n)return null;const s=e.getSelectedElement();if(s&&this.isImageWidget(s))return s;let o=n.parent;for(;o;){if(o.is("element")&&this.isImageWidget(o))return o;o=o.parent}return null}getClosestSelectedImageElement(e){const n=e.getSelectedElement();return this.isImage(n)?n:e.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(e){return e.findAncestor({classes:AQ})}isImageAllowed(){const n=this.editor.model.document.selection;return RQ(this.editor,n)&&IQ(n)}toImageWidget(e,n,s){return n.setCustomProperty("image",!0,e),a1(e,n,{label:()=>{const a=this.findViewImgElement(e).getAttribute("alt");return a?`${a} ${s}`:s}})}isImageWidget(e){return!!e.getCustomProperty("image")&&Jt(e)}isBlockImage(e){return!!e&&e.is("element","imageBlock")}isInlineImage(e){return!!e&&e.is("element","imageInline")}findViewImgElement(e){if(this.isInlineImageView(e))return e;const n=this.editor.editing.view;for(const{item:s}of n.createRangeIn(e))if(this.isInlineImageView(s))return s}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function RQ(i,t){if(GN(i,t,null)=="imageBlock"){const n=PQ(t,i.model);if(i.model.schema.checkChild(n,"imageBlock"))return!0}else if(i.model.schema.checkChild(t.focus,"imageInline"))return!0;return!1}function IQ(i){return[...i.focus.getAncestors()].every(t=>!t.is("element","imageBlock"))}function PQ(i,t){const n=MN(i,t).start.parent;return n.isEmpty&&!n.is("element","$root")?n.parent:n}function GN(i,t,e){const n=i.model.schema,s=i.config.get("image.insert.type");return i.plugins.has("ImageBlockEditing")?i.plugins.has("ImageInlineEditing")?e||(s==="inline"?"imageInline":s!=="auto"?"imageBlock":t.is("selection")?f1(n,t):n.checkChild(t,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}const MQ=new RegExp(String(/^(http(s)?:\/\/)?[\w-]+\.[\w.~:/[\]@!$&'()*+,;=%-]+/.source+/\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source+/(\?[\w.~:/[\]@!$&'()*+,;=%-]*)?/.source+/(#[\w.~:/[\]@!$&'()*+,;=%-]*)?$/.source));class VQ extends te{constructor(e){super(e);_(this,"_timeoutId");_(this,"_positionToInsert");this._timeoutId=null,this._positionToInsert=null}static get requires(){return[u1,On,d1,Vr]}static get pluginName(){return"AutoImage"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model.document,s=e.plugins.get("ClipboardPipeline");this.listenTo(s,"inputTransformation",()=>{const o=n.selection.getFirstRange(),r=zt.fromPosition(o.start);r.stickiness="toPrevious";const a=zt.fromPosition(o.end);a.stickiness="toNext",n.once("change:data",()=>{this._embedImageBetweenPositions(r,a),r.detach(),a.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(de.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedImageBetweenPositions(e,n){const s=this.editor,o=new ei(e,n),r=o.getWalker({ignoreElementEnd:!0}),a=Object.fromEntries(s.model.document.selection.getAttributes()),l=this.editor.plugins.get("ImageUtils");let u="";for(const h of r)h.item.is("$textProxy")&&(u+=h.item.data);if(u=u.trim(),!u.match(MQ)){o.detach();return}this._positionToInsert=zt.fromPosition(e),this._timeoutId=setTimeout(()=>{if(!s.commands.get("insertImage").isEnabled){o.detach();return}s.model.change(p=>{this._timeoutId=null,p.remove(o),o.detach();let v;this._positionToInsert.root.rootName!=="$graveyard"&&(v=this._positionToInsert.toPosition()),l.insertImage({...a,src:u},v),this._positionToInsert.detach(),this._positionToInsert=null}),s.plugins.get("Delete").requestUndoOnBackspace()},100)}}class NQ extends $e{refresh(){const n=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!n,this.isEnabled&&n.hasAttribute("alt")?this.value=n.getAttribute("alt"):this.value=!1}execute(t){const e=this.editor,n=e.plugins.get("ImageUtils"),s=e.model,o=n.getClosestSelectedImageElement(s.document.selection);s.change(r=>{r.setAttribute("alt",t.newValue,o)})}}class DQ extends te{static get requires(){return[On]}static get pluginName(){return"ImageTextAlternativeEditing"}static get isOfficialPlugin(){return!0}init(){this.editor.commands.add("imageTextAlternative",new NQ(this.editor))}}class OQ extends fe{constructor(e){super(e);_(this,"focusTracker");_(this,"keystrokes");_(this,"labeledInput");_(this,"backButtonView");_(this,"saveButtonView");_(this,"children");_(this,"_focusables");_(this,"_focusCycler");this.focusTracker=new wt,this.keystrokes=new Dt,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.labeledInput=this._createLabeledInputView(),this.children=this.createCollection([this._createHeaderView()]),this.children.add(new Vn(e,{children:[this.labeledInput,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding"]})),this._focusables=new Sn,this.keystrokes.set("Esc",(n,s)=>{this.fire("cancel"),s()}),this._focusCycler=new cn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),zr({view:this}),[this.backButtonView,this.labeledInput,this.saveButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createBackButton(){const e=this.locale.t,n=new ke(this.locale);return n.set({class:"ck-button-back",label:e("Back"),icon:Ga,tooltip:!0}),n.delegate("execute").to(this,"cancel"),n}_createSaveButton(){const e=this.locale.t,n=new ke(this.locale);return n.set({label:e("Save"),withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),n}_createHeaderView(){const e=this.locale.t,n=new zo(this.locale,{label:e("Text Alternative")});return n.children.add(this.backButtonView,0),n}_createLabeledInputView(){const e=this.locale.t,n=new sn(this.locale,ti);return n.label=e("Text alternative"),n.class="ck-labeled-field-view_full-width",n}}function LQ(i){const t=i.plugins.get("ContextualBalloon");if(i.plugins.get("ImageUtils").getClosestSelectedImageWidget(i.editing.view.document.selection)){const n=m1(i);t.updatePosition(n)}}function m1(i){const t=i.editing.view,e=Qn.defaultPositions,n=i.plugins.get("ImageUtils");return{target:t.domConverter.mapViewToDom(n.getClosestSelectedImageWidget(t.document.selection)),positions:[e.northArrowSouth,e.northArrowSouthWest,e.northArrowSouthEast,e.southArrowNorth,e.southArrowNorthWest,e.southArrowNorthEast,e.viewportStickyNorth]}}class BQ extends te{constructor(){super(...arguments);_(this,"_balloon");_(this,"_form")}static get requires(){return[as]}static get pluginName(){return"ImageTextAlternativeUI"}static get isOfficialPlugin(){return!0}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const e=this.editor,n=e.t;e.ui.componentFactory.add("imageTextAlternative",s=>{const o=e.commands.get("imageTextAlternative"),r=new ke(s);return r.set({label:n("Change image text alternative"),icon:_K,tooltip:!0}),r.bind("isEnabled").to(o,"isEnabled"),r.bind("isOn").to(o,"value",a=>!!a),this.listenTo(r,"execute",()=>{this._showForm()}),r})}_createForm(){const e=this.editor,s=e.editing.view.document,o=e.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(nh(OQ))(e.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{e.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this.listenTo(e.ui,"update",()=>{o.getClosestSelectedImageWidget(s.selection)?this._isVisible&&LQ(e):this._hideForm(!0)}),Uo({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const e=this.editor,n=e.commands.get("imageTextAlternative"),s=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:m1(e)}),s.fieldView.value=s.fieldView.element.value=n.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}class g1 extends te{static get requires(){return[DQ,BQ]}static get pluginName(){return"ImageTextAlternative"}static get isOfficialPlugin(){return!0}}function FQ(i){const t=(e,n,s)=>{if(!s.consumable.test(n.viewItem,{name:!0,classes:"image"}))return;const o=i.findViewImgElement(n.viewItem);if(!o||!s.consumable.test(o,{name:!0}))return;s.consumable.consume(n.viewItem,{name:!0,classes:"image"});const r=s.convertItem(o,n.modelCursor),a=Ln(r.modelRange.getItems());if(!a){s.consumable.revert(n.viewItem,{name:!0,classes:"image"});return}s.convertChildren(n.viewItem,a),s.updateConversionResult(a,n)};return e=>{e.on("element:figure",t)}}function jN(i,t){const e=(n,s,o)=>{if(!o.consumable.consume(s.item,n.name))return;const r=o.writer,a=o.mapper.toViewElement(s.item),l=i.findViewImgElement(a);s.attributeNewValue===null?(r.removeAttribute("srcset",l),r.removeAttribute("sizes",l)):s.attributeNewValue&&(r.setAttribute("srcset",s.attributeNewValue,l),r.setAttribute("sizes","100vw",l))};return n=>{n.on(`attribute:srcset:${t}`,e)}}function Bg(i,t,e){const n=(s,o,r)=>{if(!r.consumable.consume(o.item,s.name))return;const a=r.writer,l=r.mapper.toViewElement(o.item),u=i.findViewImgElement(l);a.setAttribute(o.attributeKey,o.attributeNewValue||"",u)};return s=>{s.on(`attribute:${e}:${t}`,n)}}class p1 extends Ks{observe(t){this.listenTo(t,"load",(e,n)=>{const s=n.target;this.checkShouldIgnoreEventFromTarget(s)||s.tagName=="IMG"&&this._fireEvents(n)},{useCapture:!0})}stopObserving(t){this.stopListening(t)}_fireEvents(t){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",t))}}class UQ extends $e{constructor(t){super(t);const e=t.config.get("image.insert.type");t.plugins.has("ImageBlockEditing")||e==="block"&&Ze("image-block-plugin-required"),t.plugins.has("ImageInlineEditing")||e==="inline"&&Ze("image-inline-plugin-required")}refresh(){const t=this.editor.plugins.get("ImageUtils");this.isEnabled=t.isImageAllowed()}execute(t){const e=bn(t.source),n=this.editor.model.document.selection,s=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(n.getAttributes());e.forEach((r,a)=>{const l=n.getSelectedElement();if(typeof r=="string"&&(r={src:r}),a&&l&&s.isImage(l)){const u=this.editor.model.createPositionAfter(l);s.insertImage({...r,...o},u,t.imageType)}else t.breakBlock?s.insertImage({...r,...o},n.getFirstPosition(),t.imageType):s.insertImage({...r,...o},null,t.imageType)})}}class zQ extends $e{constructor(t){super(t),this.decorate("cleanupImage")}refresh(){const e=this.editor.plugins.get("ImageUtils"),n=this.editor.model.document.selection.getSelectedElement();this.isEnabled=e.isImage(n),this.value=this.isEnabled?n.getAttribute("src"):null}execute(t){const e=this.editor.model.document.selection.getSelectedElement(),n=this.editor.plugins.get("ImageUtils");this.editor.model.change(s=>{s.setAttribute("src",t.source,e),this.cleanupImage(s,e),n.setImageNaturalSizeAttributes(e)})}cleanupImage(t,e){t.removeAttribute("srcset",e),t.removeAttribute("sizes",e),t.removeAttribute("sources",e),t.removeAttribute("width",e),t.removeAttribute("height",e),t.removeAttribute("alt",e)}}class KN extends te{static get requires(){return[On]}static get pluginName(){return"ImageEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.conversion;t.editing.view.addObserver(p1),e.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});const n=new UQ(t),s=new zQ(t);t.commands.add("insertImage",n),t.commands.add("replaceImageSource",s),t.commands.add("imageInsert",n)}}class ZN extends te{static get requires(){return[On]}static get pluginName(){return"ImageSizeAttributes"}static get isOfficialPlugin(){return!0}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(t){const e=this.editor,n=e.plugins.get("ImageUtils"),s=t==="imageBlock"?"figure":"img";e.conversion.for("upcast").attributeToAttribute({view:{name:s,styles:{width:/.+/}},model:{key:"width",value:r=>Lg(r)?Og(r.getStyle("width")):null}}).attributeToAttribute({view:{name:s,key:"width"},model:"width"}).attributeToAttribute({view:{name:s,styles:{height:/.+/}},model:{key:"height",value:r=>Lg(r)?Og(r.getStyle("height")):null}}).attributeToAttribute({view:{name:s,key:"height"},model:"height"}),e.conversion.for("editingDowncast").add(r=>{o(r,"width","width",!0,!0),o(r,"height","height",!0,!0)}),e.conversion.for("dataDowncast").add(r=>{o(r,"width","width",!1),o(r,"height","height",!1)}),e.conversion.for("upcast").add(r=>{r.on("element:img",(a,l,u)=>{const h=l.viewItem.getAttribute("width"),m=l.viewItem.getAttribute("height");h&&m&&u.consumable.consume(l.viewItem,{styles:["aspect-ratio"]})})});function o(r,a,l,u,h=!1){r.on(`attribute:${a}:${t}`,(m,p,v)=>{if(!v.consumable.consume(p.item,m.name))return;const C=v.writer,x=v.mapper.toViewElement(p.item),k=n.findViewImgElement(x);p.attributeNewValue!==null?C.setAttribute(l,p.attributeNewValue,k):C.removeAttribute(l,k);const S=p.item.getAttribute("width"),I=p.item.getAttribute("height"),P=S&&I;if(P&&h&&C.setAttribute("loading","lazy",k),p.item.hasAttribute("sources"))return;const O=p.item.hasAttribute("resizedWidth");t==="imageInline"&&!O&&!u||P&&C.setStyle("aspect-ratio",`${S}/${I}`,k)})}}}class YN extends $e{constructor(e,n){super(e);_(this,"_modelElementName");this._modelElementName=n}refresh(){const n=this.editor.plugins.get("ImageUtils"),s=n.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=n.isInlineImage(s):this.isEnabled=n.isBlockImage(s)}execute(e={}){const n=this.editor,s=this.editor.model,o=n.plugins.get("ImageUtils"),r=o.getClosestSelectedImageElement(s.document.selection),a=Object.fromEntries(r.getAttributes());return!a.src&&!a.uploadId?null:s.change(l=>{const{setImageSizes:u=!0}=e,h=Array.from(s.markers).filter(v=>v.getRange().containsItem(r)),m=o.insertImage(a,s.createSelection(r,"on"),this._modelElementName,{setImageSizes:u});if(!m)return null;const p=l.createRangeOn(m);for(const v of h){const C=v.getRange(),x=C.root.rootName!="$graveyard"?C.getJoined(p,!0):p;l.updateMarker(v,{range:x})}return{oldElement:r,newElement:m}})}}class JN extends te{static get requires(){return[On]}static get pluginName(){return"ImagePlaceholder"}static get isOfficialPlugin(){return!0}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){const t=this.editor.model.schema;t.isRegistered("imageBlock")&&t.extend("imageBlock",{allowAttributes:["placeholder"]}),t.isRegistered("imageInline")&&t.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){const t=this.editor,e=t.conversion,n=t.plugins.get("ImageUtils");e.for("editingDowncast").add(s=>{s.on("attribute:placeholder",(o,r,a)=>{if(!a.consumable.test(r.item,o.name)||!r.item.is("element","imageBlock")&&!r.item.is("element","imageInline"))return;a.consumable.consume(r.item,o.name);const l=a.writer,u=a.mapper.toViewElement(r.item),h=n.findViewImgElement(u);r.attributeNewValue?(l.addClass("image_placeholder",h),l.setStyle("background-image",`url(${r.attributeNewValue})`,h),l.setCustomProperty("editingPipeline:doNotReuseOnce",!0,h)):(l.removeClass("image_placeholder",h),l.removeStyle("background-image",h))})})}_setupLoadListener(){const t=this.editor,e=t.model,n=t.editing,s=n.view,o=t.plugins.get("ImageUtils");s.addObserver(p1),this.listenTo(s.document,"imageLoaded",(r,a)=>{const l=s.domConverter.mapDomToView(a.target);if(!l)return;const u=o.getImageWidgetFromImageView(l);if(!u)return;const h=n.mapper.toModelElement(u);!h||!h.hasAttribute("placeholder")||e.enqueueChange({isUndoable:!1},m=>{m.removeAttribute("placeholder",h)})})}}class XN extends te{static get requires(){return[KN,ZN,On,JN,ls]}static get pluginName(){return"ImageBlockEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),t.plugins.has("ImageInlineEditing")&&(t.commands.add("imageTypeBlock",new YN(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const t=this.editor,e=t.t,n=t.conversion,s=t.plugins.get("ImageUtils");n.for("dataDowncast").elementToStructure({model:"imageBlock",view:(o,{writer:r})=>z2(r)}),n.for("editingDowncast").elementToStructure({model:"imageBlock",view:(o,{writer:r})=>s.toImageWidget(z2(r),r,e("image widget"))}),n.for("downcast").add(Bg(s,"imageBlock","src")).add(Bg(s,"imageBlock","alt")).add(jN(s,"imageBlock")),n.for("upcast").elementToElement({view:$N(t,"imageBlock"),model:(o,{writer:r})=>r.createElement("imageBlock",o.hasAttribute("src")?{src:o.getAttribute("src")}:void 0)}).add(FQ(s))}_setupClipboardIntegration(){const t=this.editor,e=t.model,n=t.editing.view,s=t.plugins.get("ImageUtils"),o=t.plugins.get("ClipboardPipeline");this.listenTo(o,"inputTransformation",(r,a)=>{const l=Array.from(a.content.getChildren());let u;if(!l.every(s.isInlineImageView))return;a.targetRanges?u=t.editing.mapper.toModelRange(a.targetRanges[0]):u=e.document.selection.getFirstRange();const h=e.createSelection(u);if(f1(e.schema,h)==="imageBlock"){const m=new Fo(n.document),p=l.map(v=>m.createElement("figure",{class:"image"},v));a.content=m.createDocumentFragment(p)}}),this.listenTo(o,"contentInsertion",(r,a)=>{a.method==="paste"&&e.change(l=>{const u=l.createRangeIn(a.content);for(const h of u.getItems())h.is("element","imageBlock")&&s.setImageNaturalSizeAttributes(h)})})}}class HQ extends fe{constructor(e,n=[]){super(e);_(this,"focusTracker");_(this,"keystrokes");_(this,"_focusables");_(this,"_focusCycler");_(this,"children");this.focusTracker=new wt,this.keystrokes=new Dt,this._focusables=new Sn,this.children=this.createCollection(),this._focusCycler=new cn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(const s of n)this.children.add(s),this._focusables.add(s),s instanceof uZ&&this._focusables.addMany(s.children);this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),zr({view:this});for(const n of this._focusables)this.focusTracker.add(n.element);this.keystrokes.listenTo(this.element);const e=n=>n.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}class Ih extends te{constructor(e){super(e);_(this,"dropdownView");_(this,"_integrations",new Map);e.config.define("image.insert.integrations",["upload","assetManager","url"])}static get pluginName(){return"ImageInsertUI"}static get isOfficialPlugin(){return!0}static get requires(){return[On]}init(){const e=this.editor,n=e.model.document.selection,s=e.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(e.model.document,"change",()=>{this.isImageSelected=s.isImage(n.getSelectedElement())});const o=a=>this._createToolbarComponent(a),r=a=>this._createMenuBarComponent(a);e.ui.componentFactory.add("insertImage",o),e.ui.componentFactory.add("imageInsert",o),e.ui.componentFactory.add("menuBar:insertImage",r)}registerIntegration({name:e,observable:n,buttonViewCreator:s,formViewCreator:o,menuBarButtonViewCreator:r,requiresForm:a=!1,override:l=!1}){this._integrations.has(e)&&!l&&Ze("image-insert-integration-exists",{name:e}),this._integrations.set(e,{observable:n,buttonViewCreator:s,menuBarButtonViewCreator:r,formViewCreator:o,requiresForm:a})}_createToolbarComponent(e){const n=this.editor,s=e.t,o=this._prepareIntegrations();if(!o.length)return null;let r;const a=o[0];if(o.length==1){if(!a.requiresForm)return a.buttonViewCreator(!0);r=a.buttonViewCreator(!0)}else{const h=a.buttonViewCreator(!1);r=new Np(e,h),r.tooltip=!0,r.bind("label").to(this,"isImageSelected",m=>s(m?"Replace image":"Insert image"))}const l=this.dropdownView=ii(e,r),u=o.map(({observable:h})=>typeof h=="function"?h():h);return l.bind("isEnabled").toMany(u,"isEnabled",(...h)=>h.some(m=>m)),l.once("change:isOpen",()=>{const h=o.flatMap(({formViewCreator:p})=>p(o.length==1)),m=new HQ(n.locale,h);l.panelView.children.add(m)}),l}_createMenuBarComponent(e){const n=e.t,s=this._prepareIntegrations();if(!s.length)return null;const o=s.flatMap(({menuBarButtonViewCreator:l})=>l(s.length==1)),r=new ws(e),a=new kc(e);r.panelView.children.add(a),r.buttonView.set({icon:$j,label:n("Image")});for(const l of o){const u=new Lc(e,r);u.children.add(l),a.items.add(u),l.delegate("execute").to(r)}return r}_prepareIntegrations(){const n=this.editor.config.get("image.insert.integrations"),s=[];if(!n.length)return Ze("image-insert-integrations-not-specified"),s;for(const o of n){if(!this._integrations.has(o)){["upload","assetManager","url"].includes(o)||Ze("image-insert-unknown-integration",{item:o});continue}s.push(this._integrations.get(o))}return s.length||Ze("image-insert-integrations-not-registered"),s}}class WQ extends te{static get requires(){return[XN,Rh,g1,Ih]}static get pluginName(){return"ImageBlock"}static get isOfficialPlugin(){return!0}}class qQ extends te{static get requires(){return[KN,ZN,On,JN,ls]}static get pluginName(){return"ImageInlineEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.model.schema.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"],disallowIn:["caption"]}),this._setupConversion(),t.plugins.has("ImageBlockEditing")&&(t.commands.add("imageTypeInline",new YN(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const t=this.editor,e=t.t,n=t.conversion,s=t.plugins.get("ImageUtils");n.for("dataDowncast").elementToElement({model:"imageInline",view:(o,{writer:r})=>r.createEmptyElement("img")}),n.for("editingDowncast").elementToStructure({model:"imageInline",view:(o,{writer:r})=>s.toImageWidget(SQ(r),r,e("image widget"))}),n.for("downcast").add(Bg(s,"imageInline","src")).add(Bg(s,"imageInline","alt")).add(jN(s,"imageInline")),n.for("upcast").elementToElement({view:$N(t,"imageInline"),model:(o,{writer:r})=>r.createElement("imageInline",o.hasAttribute("src")?{src:o.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const t=this.editor,e=t.model,n=t.editing.view,s=t.plugins.get("ImageUtils"),o=t.plugins.get("ClipboardPipeline");this.listenTo(o,"inputTransformation",(r,a)=>{const l=Array.from(a.content.getChildren());let u;if(!l.every(s.isBlockImageView))return;a.targetRanges?u=t.editing.mapper.toModelRange(a.targetRanges[0]):u=e.document.selection.getFirstRange();const h=e.createSelection(u);if(f1(e.schema,h)==="imageInline"){const m=new Fo(n.document),p=l.map(v=>v.childCount===1?(Array.from(v.getAttributes()).forEach(C=>m.setAttribute(...C,s.findViewImgElement(v))),v.getChild(0)):v);a.content=m.createDocumentFragment(p)}}),this.listenTo(o,"contentInsertion",(r,a)=>{a.method==="paste"&&e.change(l=>{const u=l.createRangeIn(a.content);for(const h of u.getItems())h.is("element","imageInline")&&s.setImageNaturalSizeAttributes(h)})})}}class $Q extends te{static get requires(){return[qQ,Rh,g1,Ih]}static get pluginName(){return"ImageInline"}static get isOfficialPlugin(){return!0}}class QN extends te{static get pluginName(){return"ImageCaptionUtils"}static get isOfficialPlugin(){return!0}static get requires(){return[On]}getCaptionFromImageModelElement(t){for(const e of t.getChildren())if(e&&e.is("element","caption"))return e;return null}getCaptionFromModelSelection(t){const e=this.editor.plugins.get("ImageUtils"),n=t.getFirstPosition().findAncestor("caption");return n&&e.isBlockImage(n.parent)?n:null}matchImageCaptionViewElement(t){const e=this.editor.plugins.get("ImageUtils");return t.name=="figcaption"&&e.isBlockImageView(t.parent)?{name:!0}:null}}class GQ extends $e{refresh(){const t=this.editor,e=t.plugins.get("ImageCaptionUtils"),n=t.plugins.get("ImageUtils");if(!t.plugins.has(XN)){this.isEnabled=!1,this.value=!1;return}const s=t.model.document.selection,o=s.getSelectedElement();if(!o){const r=e.getCaptionFromModelSelection(s);this.isEnabled=!!r,this.value=!!r;return}this.isEnabled=n.isImage(o),this.isEnabled?this.value=!!e.getCaptionFromImageModelElement(o):this.value=!1}execute(t={}){const{focusCaptionOnShow:e}=t;this.editor.model.change(n=>{this.value?this._hideImageCaption(n):this._showImageCaption(n,e)})}_showImageCaption(t,e){const s=this.editor.model.document.selection,o=this.editor.plugins.get("ImageCaptionEditing"),r=this.editor.plugins.get("ImageUtils");let a=s.getSelectedElement();const l=o._getSavedCaption(a);r.isInlineImage(a)&&(this.editor.execute("imageTypeBlock"),a=s.getSelectedElement());const u=l||t.createElement("caption");t.append(u,a),e&&t.setSelection(u,"in")}_hideImageCaption(t){const e=this.editor,n=e.model.document.selection,s=e.plugins.get("ImageCaptionEditing"),o=e.plugins.get("ImageCaptionUtils");let r=n.getSelectedElement(),a;r?a=o.getCaptionFromImageModelElement(r):(a=o.getCaptionFromModelSelection(n),r=a.parent),s._saveCaption(r,a),t.setSelection(r,"on"),t.remove(a)}}class jQ extends te{constructor(e){super(e);_(this,"_savedCaptionsMap");this._savedCaptionsMap=new WeakMap}static get requires(){return[On,QN]}static get pluginName(){return"ImageCaptionEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model.schema;n.isRegistered("caption")?n.extend("caption",{allowIn:"imageBlock"}):n.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleImageCaption",new GQ(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration(),this._registerCaptionReconversion()}_setupConversion(){const e=this.editor,n=e.editing.view,s=e.plugins.get("ImageUtils"),o=e.plugins.get("ImageCaptionUtils"),r=e.t;e.conversion.for("upcast").elementToElement({view:a=>o.matchImageCaptionViewElement(a),model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(a,{writer:l})=>s.isBlockImage(a.parent)?l.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(a,{writer:l})=>{if(!s.isBlockImage(a.parent))return null;const u=l.createEditableElement("figcaption");l.setCustomProperty("imageCaption",!0,u),u.placeholder=r("Enter image caption"),V0({view:n,element:u,keepOnFocus:!0});const h=a.parent.getAttribute("alt"),m=h?r("Caption for image: %0",[h]):r("Caption for the image");return l1(u,l,{label:m})}})}_setupImageTypeCommandsIntegration(){const e=this.editor,n=e.plugins.get("ImageUtils"),s=e.plugins.get("ImageCaptionUtils"),o=e.commands.get("imageTypeInline"),r=e.commands.get("imageTypeBlock"),a=l=>{if(!l.return)return;const{oldElement:u,newElement:h}=l.return;/* istanbul ignore if: paranoid check -- @preserve */if(!u)return;if(n.isBlockImage(u)){const p=s.getCaptionFromImageModelElement(u);if(p){this._saveCaption(h,p);return}}const m=this._getSavedCaption(u);m&&this._saveCaption(h,m)};o&&this.listenTo(o,"execute",a,{priority:"low"}),r&&this.listenTo(r,"execute",a,{priority:"low"})}_getSavedCaption(e){const n=this._savedCaptionsMap.get(e);return n?Rt.fromJSON(n):null}_saveCaption(e,n){this._savedCaptionsMap.set(e,n.toJSON())}_registerCaptionReconversion(){const e=this.editor,n=e.model,s=e.plugins.get("ImageUtils"),o=e.plugins.get("ImageCaptionUtils");n.document.on("change:data",()=>{const r=n.document.differ.getChanges();for(const a of r){if(a.attributeKey!=="alt")continue;const l=a.range.start.nodeAfter;if(s.isBlockImage(l)){const u=o.getCaptionFromImageModelElement(l);if(!u)return;e.editing.reconvertItem(u)}}})}}class KQ extends te{static get requires(){return[QN]}static get pluginName(){return"ImageCaptionUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,n=t.plugins.get("ImageCaptionUtils"),s=t.t;t.ui.componentFactory.add("toggleImageCaption",o=>{const r=t.commands.get("toggleImageCaption"),a=new ke(o);return a.set({icon:NV,tooltip:!0,isToggleable:!0}),a.bind("isOn","isEnabled").to(r,"value","isEnabled"),a.bind("label").to(r,"value",l=>s(l?"Toggle caption off":"Toggle caption on")),this.listenTo(a,"execute",()=>{t.execute("toggleImageCaption",{focusCaptionOnShow:!0});const l=n.getCaptionFromModelSelection(t.model.document.selection);if(l){const u=t.editing.mapper.toViewElement(l);e.scrollToTheSelection(),e.change(h=>{h.addClass("image__caption_highlighted",u)})}t.editing.view.focus()}),a})}}class ZQ extends te{static get requires(){return[jQ,KQ]}static get pluginName(){return"ImageCaption"}static get isOfficialPlugin(){return!0}}function eD(i){const t=i.map(e=>e.replace("+","\\+"));return new RegExp(`^image\\/(${t.join("|")})$`)}function YQ(i){return new Promise((t,e)=>{const n=i.getAttribute("src");fetch(n).then(s=>s.blob()).then(s=>{const o=tD(s,n),a=`image.${o.replace("image/","")}`,l=new File([s],a,{type:o});t(l)}).catch(s=>s&&s.name==="TypeError"?XQ(n).then(t).catch(e):e(s))})}function JQ(i,t){return!i.isInlineImageView(t)||!t.getAttribute("src")?!1:!!t.getAttribute("src").match(/^data:image\/\w+;base64,/g)||!!t.getAttribute("src").match(/^blob:/g)}function tD(i,t){return i.type?i.type:t.match(/data:(image\/\w+);base64/)?t.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function XQ(i){return QQ(i).then(t=>{const e=tD(t,i),s=`image.${e.replace("image/","")}`;return new File([t],s,{type:e})})}function QQ(i){return new Promise((t,e)=>{const n=de.document.createElement("img");n.addEventListener("load",()=>{const s=de.document.createElement("canvas");s.width=n.width,s.height=n.height,s.getContext("2d").drawImage(n,0,0),s.toBlob(r=>r?t(r):e())}),n.addEventListener("error",()=>e()),n.src=i})}class eee extends te{static get pluginName(){return"ImageUploadUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("uploadImage",()=>this._createToolbarButton()),t.ui.componentFactory.add("imageUpload",()=>this._createToolbarButton()),t.ui.componentFactory.add("menuBar:uploadImage",()=>this._createMenuBarButton("standalone")),t.plugins.has("ImageInsertUI")&&t.plugins.get("ImageInsertUI").registerIntegration({name:"upload",observable:()=>t.commands.get("uploadImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:e=>this._createMenuBarButton(e?"insertOnly":"insertNested")})}_createButton(t){const e=this.editor,n=e.locale,s=e.commands.get("uploadImage"),o=e.config.get("image.upload.types"),r=eD(o),a=new t(e.locale),l=n.t;return a.set({acceptedType:o.map(u=>`image/${u}`).join(","),allowMultipleFiles:!0,label:l("Upload from computer"),icon:Gj}),a.bind("isEnabled").to(s),a.on("done",(u,h)=>{const m=Array.from(h).filter(p=>r.test(p.type));m.length&&(e.execute("uploadImage",{file:m}),e.editing.view.focus())}),a}_createToolbarButton(){const t=this.editor.locale.t,e=this.editor.plugins.get("ImageInsertUI"),n=this.editor.commands.get("uploadImage"),s=this._createButton(YA);return s.tooltip=!0,s.bind("label").to(e,"isImageSelected",n,"isAccessAllowed",(o,r)=>t(r?o?"Replace image from computer":"Upload image from computer":"You have no image upload permissions.")),s}_createDropdownButton(){const t=this.editor.locale.t,e=this.editor.plugins.get("ImageInsertUI"),n=this._createButton(YA);return n.withText=!0,n.bind("label").to(e,"isImageSelected",s=>t(s?"Replace from computer":"Upload from computer")),n.on("execute",()=>{e.dropdownView.isOpen=!1}),n}_createMenuBarButton(t){const e=this.editor.locale.t,n=this._createButton(wN);switch(n.withText=!0,t){case"standalone":n.label=e("Image from computer");break;case"insertOnly":n.label=e("Image");break;case"insertNested":n.label=e("From computer");break}return n}}class tee extends te{constructor(e){super(e);_(this,"placeholder");_(this,"uploadStatusChange",(e,n,s)=>{const o=this.editor,r=n.item,a=r.getAttribute("uploadId");if(!s.consumable.consume(n.item,e.name))return;const l=o.plugins.get("ImageUtils"),u=o.plugins.get(Tr),h=a?n.attributeNewValue:null,m=this.placeholder,p=o.editing.mapper.toViewElement(r),v=s.writer;if(h=="reading"){H2(p,v),W2(l,m,p,v);return}if(h=="uploading"){const C=u.loaders.get(a);H2(p,v),C?(q2(p,v),iee(p,v,C,o.editing.view),lee(l,p,v,C)):W2(l,m,p,v);return}h=="complete"&&u.loaders.get(a)&&oee(p,v,o.editing.view),see(p,v),q2(p,v),nee(p,v)});this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}static get pluginName(){return"ImageUploadProgress"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.plugins.has("ImageBlockEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",this.uploadStatusChange),e.plugins.has("ImageInlineEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",this.uploadStatusChange)}}function H2(i,t){i.hasClass("ck-appear")||t.addClass("ck-appear",i)}function nee(i,t){t.removeClass("ck-appear",i)}function W2(i,t,e,n){e.hasClass("ck-image-upload-placeholder")||n.addClass("ck-image-upload-placeholder",e);const s=i.findViewImgElement(e);s.getAttribute("src")!==t&&n.setAttribute("src",t,s),nD(e,"placeholder")||n.insert(n.createPositionAfter(s),aee(n))}function q2(i,t){i.hasClass("ck-image-upload-placeholder")&&t.removeClass("ck-image-upload-placeholder",i),iD(i,t,"placeholder")}function iee(i,t,e,n){const s=ree(t);t.insert(t.createPositionAt(i,"end"),s),e.on("change:uploadedPercent",(o,r,a)=>{n.change(l=>{l.setStyle("width",a+"%",s)})})}function see(i,t){iD(i,t,"progressBar")}function oee(i,t,e){const n=t.createUIElement("div",{class:"ck-image-upload-complete-icon"});t.insert(t.createPositionAt(i,"end"),n),setTimeout(()=>{e.change(s=>s.remove(s.createRangeOn(n)))},3e3)}function ree(i){const t=i.createUIElement("div",{class:"ck-progress-bar"});return i.setCustomProperty("progressBar",!0,t),t}function aee(i){const t=i.createUIElement("div",{class:"ck-upload-placeholder-loader"});return i.setCustomProperty("placeholder",!0,t),t}function nD(i,t){for(const e of i.getChildren())if(e.getCustomProperty(t))return e}function iD(i,t,e){const n=nD(i,e);n&&t.remove(t.createRangeOn(n))}function lee(i,t,e,n){if(n.data){const s=i.findViewImgElement(t);e.setAttribute("src",n.data,s)}}class cee extends $e{constructor(t){super(t),this.set("isAccessAllowed",!0)}refresh(){const t=this.editor,e=t.plugins.get("ImageUtils"),n=t.model.document.selection.getSelectedElement();this.isEnabled=e.isImageAllowed()||e.isImage(n)}execute(t){const e=bn(t.file),n=this.editor.model.document.selection,s=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(n.getAttributes());e.forEach((r,a)=>{const l=n.getSelectedElement();if(a&&l&&s.isImage(l)){const u=this.editor.model.createPositionAfter(l);this._uploadImage(r,o,u)}else this._uploadImage(r,o)})}_uploadImage(t,e,n){const s=this.editor,r=s.plugins.get(Tr).createLoader(t),a=s.plugins.get("ImageUtils");r&&a.insertImage({...e,uploadId:r.id},n)}}class uee extends te{constructor(e){super(e);_(this,"_uploadImageElements");_(this,"_uploadedImages",new Map);e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}static get requires(){return[Tr,c2,ls,On]}static get pluginName(){return"ImageUploadEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model.document,s=e.conversion,o=e.plugins.get(Tr),r=e.plugins.get("ImageUtils"),a=e.plugins.get("ClipboardPipeline"),l=eD(e.config.get("image.upload.types")),u=new cee(e);e.commands.add("uploadImage",u),e.commands.add("imageUpload",u),s.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}).add(h=>h.on("element:img",(m,p,v)=>{if(!v.consumable.test(p.viewItem,{attributes:["data-ck-upload-id"]}))return;const C=p.viewItem.getAttribute("data-ck-upload-id");if(!C)return;const[x]=Array.from(p.modelRange.getItems({shallow:!0})),k=o.loaders.get(C);x&&(v.writer.setAttribute("uploadId",C,x),v.consumable.consume(p.viewItem,{attributes:["data-ck-upload-id"]}),k&&k.data&&v.writer.setAttribute("uploadStatus",k.status,x))},{priority:"low"})),this.listenTo(e.editing.view.document,"clipboardInput",(h,m)=>{if(dee(m.dataTransfer))return;const p=Array.from(m.dataTransfer.files).filter(C=>C?l.test(C.type):!1);if(!p.length)return;if(h.stop(),e.model.change(C=>{m.targetRanges&&C.setSelection(m.targetRanges.map(x=>e.editing.mapper.toModelRange(x))),e.execute("uploadImage",{file:p})}),!e.commands.get("uploadImage").isAccessAllowed){const C=e.plugins.get("Notification"),x=e.locale.t;C.showWarning(x("You have no image upload permissions."),{namespace:"image"})}}),this.listenTo(a,"inputTransformation",(h,m)=>{const p=Array.from(e.editing.view.createRangeIn(m.content)).map(C=>C.item).filter(C=>JQ(r,C)&&!C.getAttribute("uploadProcessed")).map(C=>({promise:YQ(C),imageElement:C}));if(!p.length)return;const v=new Fo(e.editing.view.document);for(const C of p){v.setAttribute("uploadProcessed",!0,C.imageElement);const x=o.createLoader(C.promise);x&&(v.setAttribute("src","",C.imageElement),v.setAttribute("uploadId",x.id,C.imageElement))}}),e.editing.view.document.on("dragover",(h,m)=>{m.preventDefault()}),n.on("change",()=>{const h=n.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),m=new Set;for(const p of h)if(p.type=="insert"&&p.name!="$text"){const v=p.position.nodeAfter,C=p.position.root.rootName=="$graveyard";for(const x of hee(e,v)){const k=x.getAttribute("uploadId");if(!k)continue;const S=o.loaders.get(k);if(!S){!C&&this._uploadedImages.has(k)&&e.model.enqueueChange({isUndoable:!1},I=>{I.setAttribute("uploadStatus","complete",x),this.fire("uploadComplete",{data:this._uploadedImages.get(k),imageElement:x})});continue}C?m.has(k)||Array.from(this._uploadImageElements.get(k)).every(P=>P.root.rootName=="$graveyard")&&S.abort():(m.add(k),this._uploadImageElements.has(k)?this._uploadImageElements.get(k).add(x):this._uploadImageElements.set(k,new Set([x])),S.status=="idle"&&this._readAndUpload(S))}}}),this.on("uploadComplete",(h,{imageElement:m,data:p})=>{const v=p.urls?p.urls:p;this.editor.model.change(C=>{C.setAttribute("src",v.default,m),this._parseAndSetSrcsetAttributeOnImage(v,m,C),r.setImageNaturalSizeAttributes(m)})},{priority:"low"})}afterInit(){const e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&(e.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageBlock")),this.editor.plugins.has("ImageInlineEditing")&&(e.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageInline"))}_readAndUpload(e){const n=this.editor,s=n.model,o=n.locale.t,r=n.plugins.get(Tr),a=n.plugins.get(c2),l=n.plugins.get("ImageUtils"),u=this._uploadImageElements;return s.enqueueChange({isUndoable:!1},m=>{const p=u.get(e.id);for(const v of p)m.setAttribute("uploadStatus","reading",v)}),e.read().then(()=>{const m=e.upload();n.ui&&n.ui.ariaLiveAnnouncer.announce(o("Uploading image"));for(const p of u.get(e.id)){/* istanbul ignore next -- @preserve */if(Se.isSafari){const v=n.editing.mapper.toViewElement(p),C=l.findViewImgElement(v);n.editing.view.once("render",()=>{if(!C.parent)return;const x=n.editing.view.domConverter.mapViewToDom(C.parent);if(!x)return;const k=x.style.display;x.style.display="none",x._ckHack=x.offsetHeight,x.style.display=k})}s.enqueueChange({isUndoable:!1},v=>{v.setAttribute("uploadStatus","uploading",p)})}return m}).then(m=>{s.enqueueChange({isUndoable:!1},p=>{for(const v of u.get(e.id))p.setAttribute("uploadStatus","complete",v),this.fire("uploadComplete",{data:m,imageElement:v});n.ui&&n.ui.ariaLiveAnnouncer.announce(o("Image upload complete")),this._uploadedImages.set(e.id,m)}),h()}).catch(m=>{if(n.ui&&n.ui.ariaLiveAnnouncer.announce(o("Error during image upload")),e.status!=="error"&&e.status!=="aborted")throw m;e.status=="error"&&m&&a.showWarning(m,{title:o("Upload failed"),namespace:"upload"}),s.enqueueChange({isUndoable:!1},p=>{for(const v of u.get(e.id))v.root.rootName!=="$graveyard"&&p.remove(v)}),h()});function h(){s.enqueueChange({isUndoable:!1},m=>{for(const p of u.get(e.id))m.removeAttribute("uploadId",p),m.removeAttribute("uploadStatus",p);u.delete(e.id)}),r.destroyLoader(e)}}_parseAndSetSrcsetAttributeOnImage(e,n,s){let o=0;const r=Object.keys(e).filter(a=>{const l=parseInt(a,10);if(!isNaN(l))return o=Math.max(o,l),!0}).map(a=>`${e[a]} ${a}w`).join(", ");if(r!=""){const a={srcset:r};!n.hasAttribute("width")&&!n.hasAttribute("height")&&(a.width=o),s.setAttributes(a,n)}}_registerConverters(e){const{conversion:n,plugins:s}=this.editor,o=s.get(Tr),r=s.get(On);n.for("dataDowncast").add(a=>{a.on(`attribute:uploadId:${e}`,(l,u,h)=>{if(!h.consumable.test(u.item,l.name))return;const m=o.loaders.get(u.attributeNewValue);if(!m||!m.data)return null;const p=h.mapper.toViewElement(u.item),v=r.findViewImgElement(p);v&&(h.consumable.consume(u.item,l.name),h.writer.setAttribute("data-ck-upload-id",m.id,v))})})}}function dee(i){return Array.from(i.types).includes("text/html")&&i.getData("text/html")!==""}function hee(i,t){const e=i.plugins.get("ImageUtils");return Array.from(i.model.createRangeOn(t)).filter(n=>e.isImage(n.item)).map(n=>n.item)}class sD extends te{static get pluginName(){return"ImageUpload"}static get isOfficialPlugin(){return!0}static get requires(){return[uee,eee,tee]}}class fee extends fe{constructor(e){super(e);_(this,"urlInputView");_(this,"keystrokes");this.set("imageURLInputValue",""),this.set("isImageSelected",!1),this.set("isEnabled",!0),this.keystrokes=new Dt,this.urlInputView=this._createUrlInputView(),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-url"],tabindex:"-1"},children:[this.urlInputView,{tag:"div",attributes:{class:["ck","ck-image-insert-url__action-row"]}}]})}render(){super.render(),zr({view:this}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}_createUrlInputView(){const e=this.locale,n=e.t,s=new sn(e,ti);return s.bind("label").to(this,"isImageSelected",o=>n(o?"Update image URL":"Insert image via URL")),s.bind("isEnabled").to(this),s.fieldView.inputMode="url",s.fieldView.placeholder="https://example.com/image.png",s.fieldView.bind("value").to(this,"imageURLInputValue",o=>o||""),s.fieldView.on("input",()=>{this.imageURLInputValue=s.fieldView.element.value.trim()}),s}focus(){this.urlInputView.focus()}}class mee extends te{constructor(){super(...arguments);_(this,"_imageInsertUI");_(this,"_formView")}static get pluginName(){return"ImageInsertViaUrlUI"}static get isOfficialPlugin(){return!0}static get requires(){return[Ih,xc]}init(){this.editor.ui.componentFactory.add("insertImageViaUrl",()=>this._createToolbarButton()),this.editor.ui.componentFactory.add("menuBar:insertImageViaUrl",()=>this._createMenuBarButton("standalone"))}afterInit(){this._imageInsertUI=this.editor.plugins.get("ImageInsertUI"),this._imageInsertUI.registerIntegration({name:"url",observable:()=>this.editor.commands.get("insertImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:e=>this._createMenuBarButton(e?"insertOnly":"insertNested")})}_createInsertUrlButton(e){const n=new e(this.editor.locale);return n.icon=jj,n.on("execute",()=>{this._showModal()}),n}_createToolbarButton(){const e=this.editor.locale.t,n=this._createInsertUrlButton(ke);return n.tooltip=!0,n.bind("label").to(this._imageInsertUI,"isImageSelected",s=>e(s?"Update image URL":"Insert image via URL")),n}_createDropdownButton(){const e=this.editor.locale.t,n=this._createInsertUrlButton(ke);return n.withText=!0,n.bind("label").to(this._imageInsertUI,"isImageSelected",s=>e(s?"Update image URL":"Insert via URL")),n}_createMenuBarButton(e){const n=this.editor.locale.t,s=this._createInsertUrlButton(Jn);switch(s.withText=!0,e){case"standalone":s.label=n("Image via URL");break;case"insertOnly":s.label=n("Image");break;case"insertNested":s.label=n("Via URL");break}return s}_createInsertUrlView(){const e=this.editor,n=e.locale,s=e.commands.get("replaceImageSource"),o=e.commands.get("insertImage"),r=new fee(n);return r.bind("isImageSelected").to(this._imageInsertUI),r.bind("isEnabled").toMany([o,s],"isEnabled",(...a)=>a.some(l=>l)),r}_showModal(){const e=this.editor,s=e.locale.t,o=e.plugins.get("Dialog");this._formView||(this._formView=this._createInsertUrlView(),this._formView.on("submit",()=>this._handleSave()));const r=e.commands.get("replaceImageSource");this._formView.imageURLInputValue=r.value||"",o.show({id:"insertImageViaUrl",title:s("Image via URL"),isModal:!0,content:this._formView,actionButtons:[{label:s("Cancel"),withText:!0,onExecute:()=>o.hide()},{label:this._imageInsertUI.isImageSelected?s("Save"):s("Insert"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSave()}]})}_handleSave(){this.editor.commands.get("replaceImageSource").isEnabled?this.editor.execute("replaceImageSource",{source:this._formView.imageURLInputValue}):this.editor.execute("insertImage",{source:this._formView.imageURLInputValue}),this.editor.plugins.get("Dialog").hide()}}class oD extends te{static get pluginName(){return"ImageInsertViaUrl"}static get isOfficialPlugin(){return!0}static get requires(){return[mee,Ih]}}class gee extends te{static get pluginName(){return"ImageInsert"}static get isOfficialPlugin(){return!0}static get requires(){return[sD,oD,Ih]}}class pee extends $e{refresh(){const t=this.editor,n=t.plugins.get("ImageUtils").getClosestSelectedImageElement(t.model.document.selection);this.isEnabled=!!n,!n||!n.hasAttribute("resizedWidth")?this.value=null:this.value={width:n.getAttribute("resizedWidth"),height:null}}execute(t){const e=this.editor,n=e.model,s=e.plugins.get("ImageUtils"),o=s.getClosestSelectedImageElement(n.document.selection);this.value={width:t.width,height:null},o&&n.change(r=>{r.setAttribute("resizedWidth",t.width,o),r.removeAttribute("resizedHeight",o),s.setImageNaturalSizeAttributes(o)})}}class rD extends te{static get requires(){return[On]}static get pluginName(){return"ImageResizeEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:custom",value:"custom",icon:"custom"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const t=this.editor,e=new pee(t);this._registerConverters("imageBlock"),this._registerConverters("imageInline"),t.commands.add("resizeImage",e),t.commands.add("imageResize",e)}afterInit(){this._registerSchema()}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["resizedWidth","resizedHeight"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["resizedWidth","resizedHeight"]})}_registerConverters(t){const e=this.editor,n=e.plugins.get("ImageUtils");e.conversion.for("downcast").add(s=>s.on(`attribute:resizedWidth:${t}`,(o,r,a)=>{if(!a.consumable.consume(r.item,o.name))return;const l=a.writer,u=a.mapper.toViewElement(r.item);r.attributeNewValue!==null?(l.setStyle("width",r.attributeNewValue,u),l.addClass("image_resized",u)):(l.removeStyle("width",u),l.removeClass("image_resized",u))})),e.conversion.for("dataDowncast").attributeToAttribute({model:{name:t,key:"resizedHeight"},view:s=>({key:"style",value:{height:s}})}),e.conversion.for("editingDowncast").add(s=>s.on(`attribute:resizedHeight:${t}`,(o,r,a)=>{if(!a.consumable.consume(r.item,o.name))return;const l=a.writer,u=a.mapper.toViewElement(r.item),h=t==="imageInline"?n.findViewImgElement(u):u;r.attributeNewValue!==null?l.setStyle("height",r.attributeNewValue,h):l.removeStyle("height",h)})),e.conversion.for("upcast").attributeToAttribute({view:{name:t==="imageBlock"?"figure":"img",styles:{width:/.+/}},model:{key:"resizedWidth",value:s=>Lg(s)?null:s.getStyle("width")}}),e.conversion.for("upcast").attributeToAttribute({view:{name:t==="imageBlock"?"figure":"img",styles:{height:/.+/}},model:{key:"resizedHeight",value:s=>Lg(s)?null:s.getStyle("height")}}),e.conversion.for("upcast").add(s=>{s.on(`element:${t==="imageBlock"?"figure":"img"}`,(o,r,a)=>{a.consumable.consume(r.viewItem,{classes:["image_resized"]})})})}}const cy={small:sK,medium:iK,large:nK,custom:eK,original:tK};class bee extends te{constructor(e){super(e);_(this,"_resizeUnit");this._resizeUnit=e.config.get("image.resizeUnit")}static get requires(){return[rD]}static get pluginName(){return"ImageResizeButtons"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.config.get("image.resizeOptions"),s=e.commands.get("resizeImage");this.bind("isEnabled").to(s);for(const o of n)this._registerImageResizeButton(o);this._registerImageResizeDropdown(n)}_registerImageResizeButton(e){const n=this.editor,{name:s,value:o,icon:r}=e;n.ui.componentFactory.add(s,a=>{const l=new ke(a),u=n.commands.get("resizeImage"),h=this._getOptionLabelValue(e,!0);if(!cy[r])throw new V("imageresizebuttons-missing-icon",n,e);if(l.set({label:h,icon:cy[r],tooltip:h,isToggleable:!0}),l.bind("isEnabled").to(this),n.plugins.has("ImageCustomResizeUI")&&td(e)){const m=n.plugins.get("ImageCustomResizeUI");this.listenTo(l,"execute",()=>{m._showForm(this._resizeUnit)})}else{const m=o?o+this._resizeUnit:null;l.bind("isOn").to(u,"value",u,"isEnabled",dv(m)),this.listenTo(l,"execute",()=>{n.execute("resizeImage",{width:m})})}return l})}_registerImageResizeDropdown(e){const n=this.editor,s=n.t,o=e.find(a=>!a.value),r=a=>{const l=n.commands.get("resizeImage"),u=ii(a,rN),h=u.buttonView,m=s("Resize image");return h.set({tooltip:m,commandValue:o.value,icon:cy.medium,isToggleable:!0,label:this._getOptionLabelValue(o),withText:!0,class:"ck-resize-image-button",ariaLabel:m,ariaLabelledBy:void 0}),h.bind("label").to(l,"value",p=>p&&p.width?p.width:this._getOptionLabelValue(o)),u.bind("isEnabled").to(this),Ka(u,()=>this._getResizeDropdownListItemDefinitions(e,l),{ariaLabel:s("Image resize list"),role:"menu"}),this.listenTo(u,"execute",p=>{"onClick"in p.source?p.source.onClick():(n.execute(p.source.commandName,{width:p.source.commandValue}),n.editing.view.focus())}),u};n.ui.componentFactory.add("resizeImage",r),n.ui.componentFactory.add("imageResize",r)}_getOptionLabelValue(e,n=!1){const s=this.editor.t;return e.label?e.label:n?td(e)?s("Custom image size"):e.value?s("Resize image to %0",e.value+this._resizeUnit):s("Resize image to the original size"):td(e)?s("Custom"):e.value?e.value+this._resizeUnit:s("Original")}_getResizeDropdownListItemDefinitions(e,n){const{editor:s}=this,o=new En,r=e.map(a=>td(a)?{...a,valueWithUnits:"custom"}:a.value?{...a,valueWithUnits:`${a.value}${this._resizeUnit}`}:{...a,valueWithUnits:null});for(const a of r){let l=null;if(s.plugins.has("ImageCustomResizeUI")&&td(a)){const u=s.plugins.get("ImageCustomResizeUI");l={type:"button",model:new Oa({label:this._getOptionLabelValue(a),role:"menuitemradio",withText:!0,icon:null,onClick:()=>{u._showForm(this._resizeUnit)}})};const h=Object.values(r).map(m=>m.valueWithUnits);l.model.bind("isOn").to(n,"value",n,"isEnabled",_ee(h))}else l={type:"button",model:new Oa({commandName:"resizeImage",commandValue:a.valueWithUnits,label:this._getOptionLabelValue(a),role:"menuitemradio",withText:!0,icon:null})},l.model.bind("isOn").to(n,"value",n,"isEnabled",dv(a.valueWithUnits));l.model.bind("isEnabled").to(n,"isEnabled"),o.add(l)}return o}}function td(i){return i.value==="custom"}function dv(i){return(t,e)=>{const n=t;return n===void 0||!e?!1:i===null&&n===i?!0:n!==null&&n.width===i}}function _ee(i){return(t,e)=>!i.some(n=>dv(n)(t,e))}const wee="figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img",uy="image_resized";class yee extends te{static get requires(){return[oy,On]}static get pluginName(){return"ImageResizeHandles"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(t),this._setupResizerCreator()}_setupResizerCreator(){const t=this.editor,e=t.editing.view,n=t.plugins.get("ImageUtils");e.addObserver(p1),this.listenTo(e.document,"imageLoaded",(s,o)=>{if(!o.target.matches(wee))return;const r=t.editing.view.domConverter,a=r.domToView(o.target),l=n.getImageWidgetFromImageView(a);let u=this.editor.plugins.get(oy).getResizerByViewElement(l);if(u){u.redraw();return}const h=t.editing.mapper,m=h.toModelElement(l);u=t.plugins.get(oy).attachTo({unit:t.config.get("image.resizeUnit"),modelElement:m,viewElement:l,editor:t,getHandleHost(p){return p.querySelector("img")},getResizeHost(){return r.mapViewToDom(h.toViewElement(m))},isCentered(){return m.getAttribute("imageStyle")=="alignCenter"},onCommit(p){e.change(v=>{v.removeClass(uy,l)}),t.execute("resizeImage",{width:p})}}),u.on("updateSize",()=>{l.hasClass(uy)||e.change(v=>{v.addClass(uy,l)});const p=m.name==="imageInline"?a:l;p.getStyle("height")&&e.change(v=>{v.removeStyle("height",p)})}),u.bind("isEnabled").to(this)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function aD(i){if(!i)return null;const[,t,e]=i.trim().match(/([.,\d]+)(%|px)$/)||[],n=Number.parseFloat(t);return Number.isNaN(n)?null:{value:n,unit:e}}function lD(i,t,e){return e==="px"?{value:t.value,unit:"px"}:{value:t.value/i*100,unit:"%"}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function cD(i){const{editing:t}=i,n=i.plugins.get("ImageUtils").getClosestSelectedImageElement(i.model.document.selection);if(!n)return null;const s=t.mapper.toViewElement(n),o=t.view.domConverter.mapViewToDom(s);return{model:n,view:s,dom:o}}function vee(i,t){const e=cD(i);if(!e)return null;const n=aD(e.model.getAttribute("resizedWidth")||null);if(!n)return null;if(n.unit===t)return n;const s=c1(e.dom),o={value:new Pe(e.dom).width};return lD(s,o,t)}class Cee extends fe{constructor(e,n,s){super(e);_(this,"focusTracker");_(this,"keystrokes");_(this,"unit");_(this,"backButtonView");_(this,"saveButtonView");_(this,"labeledInput");_(this,"children");_(this,"_focusables");_(this,"_focusCycler");_(this,"_validators");this.focusTracker=new wt,this.keystrokes=new Dt,this.unit=n,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.labeledInput=this._createLabeledInputView(),this.children=this.createCollection([this._createHeaderView()]),this.children.add(new Vn(e,{children:[this.labeledInput,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding"]})),this._focusables=new Sn,this._validators=s,this.keystrokes.set("Esc",(o,r)=>{this.fire("cancel"),r()}),this._focusCycler=new cn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-image-custom-resize-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),zr({view:this}),[this.backButtonView,this.labeledInput,this.saveButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createBackButton(){const e=this.locale.t,n=new ke(this.locale);return n.set({class:"ck-button-back",label:e("Back"),icon:Ga,tooltip:!0}),n.delegate("execute").to(this,"cancel"),n}_createSaveButton(){const e=this.locale.t,n=new ke(this.locale);return n.set({label:e("Save"),withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),n}_createHeaderView(){const e=this.locale.t,n=new zo(this.locale,{label:e("Image Resize")});return n.children.add(this.backButtonView,0),n}_createLabeledInputView(){const e=this.locale.t,n=new sn(this.locale,VZ);return n.label=e("Resize image (in %0)",this.unit),n.class="ck-labeled-field-view_full-width",n.fieldView.set({step:.1}),n}isValid(){this.resetFormStatus();for(const e of this._validators){const n=e(this);if(n)return this.labeledInput.errorText=n,!1}return!0}resetFormStatus(){this.labeledInput.errorText=null}get rawSize(){const{element:e}=this.labeledInput.fieldView;return e?e.value:null}get parsedSize(){const{rawSize:e}=this;if(e===null)return null;const n=Number.parseFloat(e);return Number.isNaN(n)?null:n}get sizeWithUnits(){const{parsedSize:e,unit:n}=this;return e===null?null:`${e}${n}`}}function Tee(i,t){const e=cD(i);if(!e)return null;const n=c1(e.dom),s=aD(window.getComputedStyle(e.dom).minWidth)||{value:1},o=Math.max(.1,lD(n,s,t).value);return{unit:t,lower:o,upper:t==="px"?n:100}}class xee extends te{constructor(){super(...arguments);_(this,"_balloon");_(this,"_form")}static get requires(){return[as]}static get pluginName(){return"ImageCustomResizeUI"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._form&&this._form.destroy()}_createForm(e){const n=this.editor;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(nh(Cee))(n.locale,e,kee(n)),this._form.render(),this.listenTo(this._form,"submit",()=>{this._form.isValid()&&(n.execute("resizeImage",{width:this._form.sizeWithUnits}),this._hideForm(!0))}),this.listenTo(this._form.labeledInput,"change:errorText",()=>{n.ui.update()}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),Uo({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(e){if(this._isVisible)return;this._form||this._createForm(e);const n=this.editor,s=this._form.labeledInput;this._form.disableCssTransitions(),this._form.resetFormStatus(),this._isInBalloon||this._balloon.add({view:this._form,position:m1(n)});const o=vee(n,e),r=o?o.value.toFixed(1):"",a=Tee(n,e);s.fieldView.value=s.fieldView.element.value=r,a&&Object.assign(s.fieldView,{min:a.lower.toFixed(1),max:Math.ceil(a.upper).toFixed(1)}),this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}function kee(i){const t=i.t;return[e=>{if(e.rawSize.trim()==="")return t("The value must not be empty.");if(e.parsedSize===null)return t("The value should be a plain number.")}]}class Eee extends te{static get requires(){return[rD,yee,xee,bee]}static get pluginName(){return"ImageResize"}static get isOfficialPlugin(){return!0}}class See extends $e{constructor(e,n){super(e);_(this,"_defaultStyles");_(this,"_styles");this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(n.map(s=>{if(s.isDefault)for(const o of s.modelElements)this._defaultStyles[o]=s.name;return[s.name,s]}))}refresh(){const s=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!s,this.isEnabled?s.hasAttribute("imageStyle")?this.value=s.getAttribute("imageStyle"):this.value=this._defaultStyles[s.name]:this.value=!1}execute(e={}){const n=this.editor,s=n.model,o=n.plugins.get("ImageUtils");s.change(r=>{const a=e.value,{setImageSizes:l=!0}=e;let u=o.getClosestSelectedImageElement(s.document.selection);a&&this.shouldConvertImageType(a,u)&&(this.editor.execute(o.isBlockImage(u)?"imageTypeInline":"imageTypeBlock",{setImageSizes:l}),u=o.getClosestSelectedImageElement(s.document.selection)),!a||this._styles.get(a).isDefault?r.removeAttribute("imageStyle",u):r.setAttribute("imageStyle",a,u),l&&o.setImageNaturalSizeAttributes(u)})}shouldConvertImageType(e,n){return!this._styles.get(e).modelElements.includes(n.name)}}const Ym={get inline(){return{name:"inline",title:"In line",icon:LV,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:G0,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:BV,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:Ig,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:Pg,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:FV,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:Ig,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:Pg,modelElements:["imageBlock"],className:"image-style-side"}}},uD={full:Qj,left:BV,right:FV,center:Ig,inlineLeft:G0,inlineRight:Pg,inline:LV},dD=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function Aee(i){return(i.configuredStyles.options||[]).map(n=>Pee(n)).filter(n=>Mee(n,i))}function Ree(i,t){return i&&t?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:i?{options:["block","side"]}:t?{options:["inline","alignLeft","alignRight"]}:{}}function Iee(i){return i.has("ImageBlockEditing")&&i.has("ImageInlineEditing")?[...dD]:[]}function Pee(i){return typeof i=="string"?Ym[i]?i={...Ym[i]}:i={name:i}:i=Vee(Ym[i.name],i),typeof i.icon=="string"&&(i.icon=uD[i.icon]||i.icon),i}function Mee(i,{isBlockPluginLoaded:t,isInlinePluginLoaded:e}){const{modelElements:n,name:s}=i;if(!n||!n.length||!s)return hD({style:i}),!1;{const o=[t?"imageBlock":null,e?"imageInline":null];if(!n.some(r=>o.includes(r)))return Ze("image-style-missing-dependency",{style:i,missingPlugins:n.map(r=>r==="imageBlock"?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}function Vee(i,t){const e={...t};for(const n in i)Object.prototype.hasOwnProperty.call(t,n)||(e[n]=i[n]);return e}function hD(i){Ze("image-style-configuration-definition-invalid",i)}var hv={normalizeStyles:Aee,getDefaultStylesConfiguration:Ree,getDefaultDropdownDefinitions:Iee,warnInvalidStyle:hD,DEFAULT_OPTIONS:Ym,DEFAULT_ICONS:uD,DEFAULT_DROPDOWN_DEFINITIONS:dD};function Nee(i){return(t,e,n)=>{if(!n.consumable.consume(e.item,t.name))return;const s=$2(e.attributeNewValue,i),o=$2(e.attributeOldValue,i),r=n.mapper.toViewElement(e.item),a=n.writer;o&&a.removeClass(o.className,r),s&&a.addClass(s.className,r)}}function Dee(i){const t={imageInline:i.filter(e=>!e.isDefault&&e.modelElements.includes("imageInline")),imageBlock:i.filter(e=>!e.isDefault&&e.modelElements.includes("imageBlock"))};return(e,n,s)=>{if(!n.modelRange)return;const o=n.viewItem,r=Ln(n.modelRange.getItems());if(r&&s.schema.checkAttribute(r,"imageStyle"))for(const a of t[r.name])s.consumable.consume(o,{classes:a.className})&&s.writer.setAttribute("imageStyle",a.name,r)}}function $2(i,t){for(const e of t)if(e.name===i)return e}class fD extends te{constructor(){super(...arguments);_(this,"normalizedStyles")}static get pluginName(){return"ImageStyleEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[On]}init(){const{normalizeStyles:e,getDefaultStylesConfiguration:n}=hv,s=this.editor,o=s.plugins.has("ImageBlockEditing"),r=s.plugins.has("ImageInlineEditing");s.config.define("image.styles",n(o,r)),this.normalizedStyles=e({configuredStyles:s.config.get("image.styles"),isBlockPluginLoaded:o,isInlinePluginLoaded:r}),this._setupConversion(o,r),this._setupPostFixer(),s.commands.add("imageStyle",new See(s,this.normalizedStyles))}_setupConversion(e,n){const s=this.editor,o=s.model.schema,r=Nee(this.normalizedStyles),a=Dee(this.normalizedStyles);s.editing.downcastDispatcher.on("attribute:imageStyle",r),s.data.downcastDispatcher.on("attribute:imageStyle",r),e&&(o.extend("imageBlock",{allowAttributes:"imageStyle"}),s.data.upcastDispatcher.on("element:figure",a,{priority:"low"})),n&&(o.extend("imageInline",{allowAttributes:"imageStyle"}),s.data.upcastDispatcher.on("element:img",a,{priority:"low"}))}_setupPostFixer(){const e=this.editor,n=e.model.document,s=e.plugins.get(On),o=new Map(this.normalizedStyles.map(r=>[r.name,r]));n.registerPostFixer(r=>{let a=!1;for(const l of n.differ.getChanges())if(l.type=="insert"||l.type=="attribute"&&l.attributeKey=="imageStyle"){let u=l.type=="insert"?l.position.nodeAfter:l.range.start.nodeAfter;if(u&&u.is("element","paragraph")&&u.childCount>0&&(u=u.getChild(0)),!s.isImage(u))continue;const h=u.getAttribute("imageStyle");if(!h)continue;const m=o.get(h);(!m||!m.modelElements.includes(u.name))&&(r.removeAttribute("imageStyle",u),a=!0)}return a})}}class Oee extends te{static get requires(){return[fD]}static get pluginName(){return"ImageStyleUI"}static get isOfficialPlugin(){return!0}get localizedDefaultStylesTitles(){const t=this.editor.t;return{"Wrap text":t("Wrap text"),"Break text":t("Break text"),"In line":t("In line"),"Full size image":t("Full size image"),"Side image":t("Side image"),"Left aligned image":t("Left aligned image"),"Centered image":t("Centered image"),"Right aligned image":t("Right aligned image")}}init(){const t=this.editor.plugins,e=this.editor.config.get("image.toolbar")||[],n=t.get("ImageStyleEditing"),s=G2(n.normalizedStyles,this.localizedDefaultStylesTitles);for(const r of s)this._createButton(r);const o=G2([...e.filter(is),...hv.getDefaultDropdownDefinitions(t)],this.localizedDefaultStylesTitles);for(const r of o)this._createDropdown(r,s)}_createDropdown(t,e){const n=this.editor.ui.componentFactory;n.add(t.name,s=>{let o;const{defaultItem:r,items:a,title:l}=t,u=a.filter(v=>e.find(({name:C})=>j2(C)===v)).map(v=>{const C=n.create(v);return v===r&&(o=C),C});a.length!==u.length&&hv.warnInvalidStyle({dropdown:t});const h=ii(s,Np),m=h.buttonView,p=m.arrowView;return Dp(h,u,{enableActiveItemFocusOnDropdownOpen:!0}),m.set({label:K2(l,o.label),class:null,tooltip:!0}),p.unbind("label"),p.set({label:l}),m.bind("icon").toMany(u,"isOn",(...v)=>{const C=v.findIndex(Xl);return C<0?o.icon:u[C].icon}),m.bind("label").toMany(u,"isOn",(...v)=>{const C=v.findIndex(Xl);return K2(l,C<0?o.label:u[C].label)}),m.bind("isOn").toMany(u,"isOn",(...v)=>v.some(Xl)),m.bind("class").toMany(u,"isOn",(...v)=>v.some(Xl)?"ck-splitbutton_flatten":void 0),m.on("execute",()=>{u.some(({isOn:v})=>v)?h.isOpen=!h.isOpen:o.fire("execute")}),h.bind("isEnabled").toMany(u,"isEnabled",(...v)=>v.some(Xl)),this.listenTo(h,"execute",()=>{this.editor.editing.view.focus()}),h})}_createButton(t){const e=t.name;this.editor.ui.componentFactory.add(j2(e),n=>{const s=this.editor.commands.get("imageStyle"),o=new ke(n);return o.set({label:t.title,icon:t.icon,tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(s,"isEnabled"),o.bind("isOn").to(s,"value",r=>r===e),o.on("execute",this._executeCommand.bind(this,e)),o})}_executeCommand(t){this.editor.execute("imageStyle",{value:t}),this.editor.editing.view.focus()}}function G2(i,t){for(const e of i)t[e.title]&&(e.title=t[e.title]);return i}function j2(i){return`imageStyle:${i}`}function K2(i,t){return(i?i+": ":"")+t}class Lee extends te{static get requires(){return[fD,Oee]}static get pluginName(){return"ImageStyle"}static get isOfficialPlugin(){return!0}}class Bee extends te{static get requires(){return[Ng,On]}static get pluginName(){return"ImageToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=t.t,n=t.plugins.get(Ng),s=t.plugins.get("ImageUtils");n.register("image",{ariaLabel:e("Image toolbar"),items:Fee(t.config.get("image.toolbar")||[]),getRelatedElement:o=>s.getClosestSelectedImageWidget(o)})}}function Fee(i){return i.map(t=>is(t)?t.name:t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Uee extends te{static get pluginName(){return"IndentEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.commands.add("indent",new _A(t)),t.commands.add("outdent",new _A(t))}}class zee extends te{static get pluginName(){return"IndentUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale,n=t.t,s=e.uiLanguageDirection=="ltr"?xA:kA,o=e.uiLanguageDirection=="ltr"?kA:xA;this._defineButton("indent",n("Increase indent"),s),this._defineButton("outdent",n("Decrease indent"),o)}_defineButton(t,e,n){const s=this.editor;s.ui.componentFactory.add(t,()=>{const o=this._createButton(ke,t,e,n);return o.set({tooltip:!0}),o}),s.ui.componentFactory.add("menuBar:"+t,()=>this._createButton(Jn,t,e,n))}_createButton(t,e,n,s){const o=this.editor,r=o.commands.get(e),a=new t(o.locale);return a.set({label:n,icon:s}),a.bind("isEnabled").to(r,"isEnabled"),this.listenTo(a,"execute",()=>{o.execute(e),o.editing.view.focus()}),a}}class Hee extends te{static get pluginName(){return"Indent"}static get isOfficialPlugin(){return!0}static get requires(){return[Uee,zee]}}class Tm extends $e{constructor(e,n){super(e);_(this,"_indentBehavior");this._indentBehavior=n}refresh(){const n=this.editor.model,s=Ln(n.document.selection.getSelectedBlocks());if(!s||!this._isIndentationChangeAllowed(s)){this.isEnabled=!1;return}this.isEnabled=this._indentBehavior.checkEnabled(s.getAttribute("blockIndent"))}execute(){const e=this.editor.model,n=this._getBlocksToChange();e.change(s=>{for(const o of n){const r=o.getAttribute("blockIndent"),a=this._indentBehavior.getNextIndent(r);a?s.setAttribute("blockIndent",a,o):s.removeAttribute("blockIndent",o)}})}_getBlocksToChange(){const n=this.editor.model.document.selection;return Array.from(n.getSelectedBlocks()).filter(o=>this._isIndentationChangeAllowed(o))}_isIndentationChangeAllowed(e){const n=this.editor;return n.model.schema.checkAttribute(e,"blockIndent")?!n.plugins.has("ListUtils")||!this._indentBehavior.isForward?!0:!n.plugins.get("ListUtils").isListItemBlock(e):!1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Z2{constructor(t){_(this,"isForward");_(this,"offset");_(this,"unit");this.isForward=t.direction==="forward",this.offset=t.offset,this.unit=t.unit}checkEnabled(t){const e=parseFloat(t||"0");return this.isForward||e>0}getNextIndent(t){const e=parseFloat(t||"0");if(!(!t||t.endsWith(this.unit)))return this.isForward?this.offset+this.unit:void 0;const s=this.isForward?this.offset:-this.offset,o=e+s;return o>0?o+this.unit:void 0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Y2{constructor(t){_(this,"isForward");_(this,"classes");this.isForward=t.direction==="forward",this.classes=t.classes}checkEnabled(t){const e=this.classes.indexOf(t);return this.isForward?e<this.classes.length-1:e>=0}getNextIndent(t){const e=this.classes.indexOf(t),n=this.isForward?1:-1;return this.classes[e+n]}}const Wee=["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"];class qee extends te{constructor(t){super(t),t.config.define("indentBlock",{offset:40,unit:"px"})}static get pluginName(){return"IndentBlock"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.config.get("indentBlock");e.classes&&e.classes.length?(this._setupConversionUsingClasses(e.classes),t.commands.add("indentBlock",new Tm(t,new Y2({direction:"forward",classes:e.classes}))),t.commands.add("outdentBlock",new Tm(t,new Y2({direction:"backward",classes:e.classes})))):(t.data.addStyleProcessorRules(uj),this._setupConversionUsingOffset(),t.commands.add("indentBlock",new Tm(t,new Z2({direction:"forward",offset:e.offset,unit:e.unit}))),t.commands.add("outdentBlock",new Tm(t,new Z2({direction:"backward",offset:e.offset,unit:e.unit}))))}afterInit(){const t=this.editor,e=t.model.schema,n=t.commands.get("indent"),s=t.commands.get("outdent"),o=t.config.get("heading.options");(o&&o.map(l=>l.model)||Wee).forEach(l=>{e.isRegistered(l)&&e.extend(l,{allowAttributes:"blockIndent"})}),e.setAttributeProperties("blockIndent",{isFormatting:!0}),n.registerChildCommand(t.commands.get("indentBlock")),s.registerChildCommand(t.commands.get("outdentBlock"))}_setupConversionUsingOffset(){const t=this.editor.conversion,n=this.editor.locale.contentLanguageDirection==="rtl"?"margin-right":"margin-left";t.for("upcast").attributeToAttribute({view:{styles:{[n]:/[\s\S]+/}},model:{key:"blockIndent",value:s=>{if(!s.is("element","li"))return s.getStyle(n)}}}),t.for("downcast").attributeToAttribute({model:"blockIndent",view:s=>({key:"style",value:{[n]:s}})})}_setupConversionUsingClasses(t){const e={model:{key:"blockIndent",values:[]},view:{}};for(const n of t)e.model.values.push(n),e.view[n]={key:"class",value:[n]};this.editor.conversion.attributeToAttribute(e)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class $ee{constructor(){_(this,"_definitions",new Set)}get length(){return this._definitions.size}add(t){Array.isArray(t)?t.forEach(e=>this._definitions.add(e)):this._definitions.add(t)}getDispatcher(){return t=>{t.on("attribute:linkHref",(e,n,s)=>{if(!s.consumable.test(n.item,"attribute:linkHref")||!(n.item.is("selection")||s.schema.isInline(n.item)))return;const o=s.writer,r=o.document.selection;for(const a of this._definitions){const l=o.createAttributeElement("a",a.attributes,{priority:5});a.classes&&o.addClass(a.classes,l);for(const u in a.styles)o.setStyle(u,a.styles[u],l);o.setCustomProperty("link",!0,l),a.callback(n.attributeNewValue)?n.item.is("selection")?o.wrap(r.getFirstRange(),l):o.wrap(s.mapper.toViewRange(n.range),l):o.unwrap(s.mapper.toViewRange(n.range),l)}},{priority:"high"})}}getDispatcherForLinkedImage(){return t=>{t.on("attribute:linkHref:imageBlock",(e,n,{writer:s,mapper:o})=>{const r=o.toViewElement(n.item),a=Array.from(r.getChildren()).find(l=>l.is("element","a"));if(a)for(const l of this._definitions){const u=Cs(l.attributes);if(l.callback(n.attributeNewValue)){for(const[h,m]of u)h==="class"?s.addClass(m,a):s.setAttribute(h,m,a);l.classes&&s.addClass(l.classes,a);for(const h in l.styles)s.setStyle(h,l.styles[h],a)}else{for(const[h,m]of u)h==="class"?s.removeClass(m,a):s.removeAttribute(h,a);l.classes&&s.removeClass(l.classes,a);for(const h in l.styles)s.removeStyle(h,a)}}})}}}const Gee=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,jee="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",Kee=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,Zee=/^((\w+:(\/{2,})?)|(\W))/i,Yee=["https?","ftps?","mailto"],md="Ctrl+K";function Jee(i){return i.is("attributeElement")&&!!i.getCustomProperty("link")}function J2(i,{writer:t}){const e=t.createAttributeElement("a",{href:i},{priority:5});return t.setCustomProperty("link",!0,e),e}function mD(i,t=Yee){const e=String(i),n=t.join("|"),s=new RegExp(`${jee.replace("<protocols>",n)}`,"i");return Xee(e,s)?e:"#"}function Xee(i,t){return!!i.replace(Gee,"").match(t)}function Qee(i,t){const e={"Open in a new tab":i("Open in a new tab"),Downloadable:i("Downloadable")};return t.forEach(n=>("label"in n&&e[n.label]&&(n.label=e[n.label]),n)),t}function ete(i){const t=[];if(i)for(const[e,n]of Object.entries(i)){const s=Object.assign({},n,{id:`link${K9(e)}`});t.push(s)}return t}function fv(i,t){return i?t.checkAttribute(i.name,"linkHref"):!1}function tte(i){return Kee.test(i)}function b1(i,t){const e=tte(i)?"mailto:":t,n=!!e&&!gD(i);return i&&n?e+i:i}function gD(i){return Zee.test(i)}function nte(i){window.open(i,"_blank","noopener")}function mv(i){let t="";for(const e of i.getItems()){if(!e.is("$text")&&!e.is("$textProxy"))return;t+=e.data}return t}class ite extends $e{constructor(){super(...arguments);_(this,"manualDecorators",new En);_(this,"automaticDecorators",new $ee)}restoreManualDecoratorStates(){for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){const e=this.editor.model,n=e.document.selection,s=n.getSelectedElement()||Ln(n.getSelectedBlocks());fv(s,e.schema)?(this.value=s.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(s,"linkHref")):(this.value=n.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(n,"linkHref"));for(const o of this.manualDecorators)o.value=this._getDecoratorStateFromModel(o.id)}execute(e,n={},s){const o=this.editor.model,r=o.document.selection,a=[],l=[];for(const u in n)n[u]?a.push(u):l.push(u);o.change(u=>{const h=v=>{u.setAttribute("linkHref",e,v),a.forEach(C=>u.setAttribute(C,!0,v)),l.forEach(C=>u.removeAttribute(C,v))},m=(v,C)=>{const x=mv(v);if(!x)return v;let k=s;if(k||(k=C&&C==x?e:x),k!=x){const S=ste(x,k);let I=0;for(const{offset:P,actual:O,expected:D}of S){const Y=P+I,F=u.createRange(v.start.getShiftedBy(Y),v.start.getShiftedBy(Y+O.length)),U=ote(F,v).getAttributes(),X=Array.from(U).filter(([me])=>o.schema.getAttributeProperties(me).isFormatting),ae=u.createText(D,X);h(ae),o.insertContent(ae,F),I+=D.length}return u.createRange(v.start,v.start.getShiftedBy(k.length))}},p=v=>{const{plugins:C}=this.editor;if(u.setSelection(v.end),C.has("TwoStepCaretMovement"))C.get("TwoStepCaretMovement")._handleForwardMovement();else for(const x of["linkHref",...a,...l])u.removeSelectionAttribute(x)};if(r.isCollapsed){const v=r.getFirstPosition();if(r.hasAttribute("linkHref")){const C=r.getAttribute("linkHref"),x=Op(v,"linkHref",C,o),k=m(x,C);h(k||x),k&&p(k)}else if(e!==""){const C=Cs(r.getAttributes());C.set("linkHref",e),a.forEach(k=>{C.set(k,!0)});const x=o.insertContent(u.createText(s||e,C),v);p(x)}}else{const v=Array.from(r.getRanges()),C=o.schema.getValidRanges(v,"linkHref"),x=[];for(const I of r.getSelectedBlocks())o.schema.checkAttribute(I,"linkHref")&&x.push(u.createRangeOn(I));const k=x.slice();for(const I of C)this._isRangeToUpdate(I,x)&&k.push(I);const S=v.map(I=>({start:zt.fromPosition(I.start,"toPrevious"),end:zt.fromPosition(I.end,"toNext")}));for(let I of k){const P=(I.start.textNode||I.start.nodeAfter).getAttribute("linkHref");I=m(I,P)||I,h(I)}u.setSelection(S.map(I=>{const P=I.start.toPosition(),O=I.end.toPosition();return I.start.detach(),I.end.detach(),o.createRange(P,O)}))}})}_getDecoratorStateFromModel(e){const n=this.editor.model,s=n.document.selection,o=s.getSelectedElement();return fv(o,n.schema)?o.getAttribute(e):s.getAttribute(e)}_isRangeToUpdate(e,n){for(const s of n)if(s.containsRange(e))return!1;return!0}}function ste(i,t){const e=pc(i,t),n={equal:0,insert:0,delete:0},s=[];let o="",r="";for(const a of[...e,null])a=="insert"?r+=t[n.equal+n.insert]:a=="delete"?o+=i[n.equal+n.delete]:(o.length||r.length)&&(s.push({offset:n.equal,actual:o,expected:r}),o="",r=""),a&&n[a]++;return s}function ote(i,t){if(!i.isCollapsed)return Ln(i.getItems());const e=i.start;return e.textNode?e.textNode:!e.nodeBefore||e.isEqual(t.start)?e.nodeAfter:e.nodeBefore}class rte extends $e{refresh(){const t=this.editor.model,e=t.document.selection,n=e.getSelectedElement();fv(n,t.schema)?this.isEnabled=t.schema.checkAttribute(n,"linkHref"):this.isEnabled=t.schema.checkAttributeInSelection(e,"linkHref")}execute(){const t=this.editor,e=this.editor.model,n=e.document.selection,s=t.commands.get("link");e.change(o=>{const r=n.isCollapsed?[Op(n.getFirstPosition(),"linkHref",n.getAttribute("linkHref"),e)]:e.schema.getValidRanges(n.getRanges(),"linkHref");for(const a of r)if(o.removeAttribute("linkHref",a),s)for(const l of s.manualDecorators)o.removeAttribute(l.id,a)})}}class ate extends _t(){constructor({id:e,label:n,attributes:s,classes:o,styles:r,defaultValue:a}){super();_(this,"id");_(this,"defaultValue");_(this,"label");_(this,"attributes");_(this,"classes");_(this,"styles");this.id=e,this.set("value",void 0),this.defaultValue=a,this.label=n,this.attributes=s,this.classes=o,this.styles=r}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}const lte="ck-link_selected",X2="automatic",cte="manual",ute=/^(https?:)?\/\//;class Ec extends te{constructor(e){super(e);_(this,"_linkOpeners",[]);e.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1,toolbar:["linkPreview","|","editLink","linkProperties","unlink"]})}static get pluginName(){return"LinkEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[g2,kN,ls]}init(){const e=this.editor,n=this.editor.config.get("link.allowedProtocols");e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:J2}),e.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(r,a)=>J2(mD(r,n),a)}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:r=>r.getAttribute("href")}}),e.commands.add("link",new ite(e)),e.commands.add("unlink",new rte(e));const s=Qee(e.t,ete(e.config.get("link.decorators")));this._enableAutomaticDecorators(s.filter(r=>r.mode===X2)),this._enableManualDecorators(s.filter(r=>r.mode===cte)),e.plugins.get(g2).registerAttribute("linkHref"),nJ(e,"linkHref","a",lte),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_registerLinkOpener(e){this._linkOpeners.push(e)}_enableAutomaticDecorators(e){const n=this.editor,o=n.commands.get("link").automaticDecorators;n.config.get("link.addTargetToExternalLinks")&&o.add({id:"linkIsExternal",mode:X2,callback:r=>!!r&&ute.test(r),attributes:{target:"_blank",rel:"noopener noreferrer"}}),o.add(e),o.length&&n.conversion.for("downcast").add(o.getDispatcher())}_enableManualDecorators(e){if(!e.length)return;const n=this.editor,o=n.commands.get("link").manualDecorators;e.forEach(r=>{n.model.schema.extend("$text",{allowAttributes:r.id});const a=new ate(r);o.add(a),n.conversion.for("downcast").attributeToElement({model:a.id,view:(l,{writer:u,schema:h},{item:m})=>{if((m.is("selection")||h.isInline(m))&&l){const p=u.createAttributeElement("a",a.attributes,{priority:5});a.classes&&u.addClass(a.classes,p);for(const v in a.styles)u.setStyle(v,a.styles[v],p);return u.setCustomProperty("link",!0,p),p}}}),n.conversion.for("upcast").elementToAttribute({view:{name:"a",...a._createPattern()},model:{key:a.id}})})}_enableLinkOpen(){const e=this.editor,s=e.editing.view.document,o=r=>{this._linkOpeners.some(a=>a(r))||nte(r)};this.listenTo(s,"click",(r,a)=>{if(!(Se.isMac?a.domEvent.metaKey:a.domEvent.ctrlKey))return;let u=a.domTarget;if(u.tagName.toLowerCase()!="a"&&(u=u.closest("a")),!u)return;const h=u.getAttribute("href");h&&(r.stop(),a.preventDefault(),o(h))},{context:"$capture"}),this.listenTo(s,"keydown",(r,a)=>{const u=e.commands.get("link").value;u&&a.keyCode===Ue.enter&&a.altKey&&(r.stop(),o(u))})}_enableSelectionAttributesFixer(){const n=this.editor.model,s=n.document.selection;this.listenTo(s,"change:attribute",(o,{attributeKeys:r})=>{!r.includes("linkHref")||s.hasAttribute("linkHref")||n.change(a=>{dte(a,hte(n.schema))})})}_enableClipboardIntegration(){const e=this.editor,n=e.model,s=this.editor.config.get("link.defaultProtocol");s&&this.listenTo(e.plugins.get("ClipboardPipeline"),"contentInsertion",(o,r)=>{n.change(a=>{const l=a.createRangeIn(r.content);for(const u of l.getItems())if(u.hasAttribute("linkHref")){const h=b1(u.getAttribute("linkHref"),s);a.setAttribute("linkHref",h,u)}})})}}function dte(i,t){i.removeSelectionAttribute("linkHref");for(const e of t)i.removeSelectionAttribute(e)}function hte(i){return i.getDefinition("$text").allowAttributes.filter(e=>e.startsWith("link"))}class fte extends ke{constructor(t){super(t);const e=this.bindTemplate;this.set({href:void 0,withText:!0}),this.extendTemplate({attributes:{class:["ck-link-toolbar__preview"],href:e.to("href"),target:"_blank",rel:"noopener noreferrer"},on:{click:e.to(n=>{if(this.href){const s=()=>n.preventDefault();this.fire("navigate",this.href,s)}})}}),this.template.tag="a"}}class mte extends fe{constructor(e,n){super(e);_(this,"focusTracker",new wt);_(this,"keystrokes",new Dt);_(this,"backButtonView");_(this,"saveButtonView");_(this,"displayedTextInputView");_(this,"urlInputView");_(this,"children");_(this,"providersListChildren");_(this,"_validators");_(this,"_focusables",new Sn);_(this,"_focusCycler");this._validators=n,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.displayedTextInputView=this._createDisplayedTextInput(),this.urlInputView=this._createUrlInput(),this.providersListChildren=this.createCollection(),this.children=this.createCollection([this._createHeaderView()]),this._createFormChildren(),this.listenTo(this.providersListChildren,"add",()=>{this.stopListening(this.providersListChildren,"add"),this.children.add(this._createProvidersListView())}),this._focusCycler=new cn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-link-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),zr({view:this}),[this.urlInputView,this.saveButtonView,...this.providersListChildren,this.backButtonView,this.displayedTextInputView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const e of this._validators){const n=e(this);if(n)return this.urlInputView.errorText=n,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createBackButton(){const e=this.locale.t,n=new ke(this.locale);return n.set({class:"ck-button-back",label:e("Back"),icon:Ga,tooltip:!0}),n.delegate("execute").to(this,"cancel"),n}_createSaveButton(){const e=this.locale.t,n=new ke(this.locale);return n.set({label:e("Insert"),tooltip:!1,withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),n}_createHeaderView(){const e=this.locale.t,n=new zo(this.locale,{label:e("Link")});return n.children.add(this.backButtonView,0),n}_createProvidersListView(){const e=new ja(this.locale);return e.extendTemplate({attributes:{class:["ck-link-form__providers-list"]}}),e.items.bindTo(this.providersListChildren).using(n=>{const s=new rs(this.locale);return s.children.add(n),s}),e}_createDisplayedTextInput(){const e=this.locale.t,n=new sn(this.locale,ti);return n.label=e("Displayed text"),n.class="ck-labeled-field-view_full-width",n}_createUrlInput(){const e=this.locale.t,n=new sn(this.locale,ti);return n.fieldView.inputMode="url",n.label=e("Link URL"),n.class="ck-labeled-field-view_full-width",n}_createFormChildren(){this.children.add(new Vn(this.locale,{children:[this.displayedTextInputView],class:["ck-form__row_large-top-padding"]})),this.children.add(new Vn(this.locale,{children:[this.urlInputView,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding","ck-form__row_large-bottom-padding"]}))}get url(){const{element:e}=this.urlInputView.fieldView;return e?e.value.trim():null}}class gte extends fe{constructor(e){super(e);_(this,"focusTracker",new wt);_(this,"keystrokes",new Dt);_(this,"backButtonView");_(this,"listView");_(this,"listChildren");_(this,"emptyListInformation");_(this,"children");_(this,"_focusables",new Sn);_(this,"_focusCycler");this.listChildren=this.createCollection(),this.backButtonView=this._createBackButton(),this.listView=this._createListView(),this.emptyListInformation=this._createEmptyLinksListItemView(),this.children=this.createCollection([this._createHeaderView(),this.emptyListInformation]),this.set("title",""),this.set("emptyListPlaceholder",""),this.set("hasItems",!1),this.listenTo(this.listChildren,"change",()=>{this.hasItems=this.listChildren.length>0}),this.on("change:hasItems",(n,s,o)=>{o?(this.children.remove(this.emptyListInformation),this.children.add(this.listView)):(this.children.remove(this.listView),this.children.add(this.emptyListInformation))}),this.keystrokes.set("Esc",(n,s)=>{this.fire("cancel"),s()}),this._focusCycler=new cn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-providers"],tabindex:"-1"},children:this.children})}render(){super.render(),[this.listView,this.backButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createListView(){const e=new ja(this.locale);return e.extendTemplate({attributes:{class:["ck-link-providers__list"]}}),e.items.bindTo(this.listChildren).using(n=>{const s=new rs(this.locale);return s.children.add(n),s}),e}_createBackButton(){const e=this.locale.t,n=new ke(this.locale);return n.set({class:"ck-button-back",label:e("Back"),icon:Ga,tooltip:!0}),n.delegate("execute").to(this,"cancel"),n}_createHeaderView(){const e=new zo(this.locale);return e.bind("label").to(this,"title"),e.children.add(this.backButtonView,0),e}_createEmptyLinksListItemView(){const e=new fe(this.locale);return e.setTemplate({tag:"p",attributes:{class:["ck","ck-link__empty-list-info"]},children:[{text:this.bindTemplate.to("emptyListPlaceholder")}]}),e}}class pte extends fe{constructor(e){super(e);_(this,"focusTracker",new wt);_(this,"keystrokes",new Dt);_(this,"backButtonView");_(this,"children");_(this,"listChildren");_(this,"_focusables",new Sn);_(this,"_focusCycler");this.backButtonView=this._createBackButton(),this.listChildren=this.createCollection(),this.children=this.createCollection([this._createHeaderView(),this._createListView()]),this._focusCycler=new cn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-properties"],tabindex:"-1"},children:this.children}),this.keystrokes.set("Esc",(n,s)=>{this.fire("back"),s()})}render(){super.render(),[...this.listChildren,this.backButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBackButton(){const e=this.locale.t,n=new ke(this.locale);return n.set({class:"ck-button-back",label:e("Back"),icon:Ga,tooltip:!0}),n.delegate("execute").to(this,"back"),n}_createHeaderView(){const e=this.locale.t,n=new zo(this.locale,{label:e("Link properties")});return n.children.add(this.backButtonView,0),n}_createListView(){const e=new ja(this.locale);return e.extendTemplate({attributes:{class:["ck-link__list"]}}),e.items.bindTo(this.listChildren).using(n=>{const s=new rs(this.locale);return s.children.add(n),s}),e}}class bte extends ke{constructor(e){super(e);_(this,"arrowView");this.set({withText:!0}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-link__button"]}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new os;return e.content=OV,e}}const Ds="link-ui";class pD extends te{constructor(){super(...arguments);_(this,"toolbarView",null);_(this,"formView",null);_(this,"linkProviderItemsView",null);_(this,"propertiesView",null);_(this,"_balloon");_(this,"_linksProviders",new En)}static get requires(){return[as,Ec]}static get pluginName(){return"LinkUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=this.editor.t;this.set("selectedLinkableText",void 0),e.editing.view.addObserver(OG),this._balloon=e.plugins.get(as),this._registerComponents(),this._registerEditingOpeners(),this._enableBalloonActivators(),e.conversion.for("editingDowncast").markerToHighlight({model:Ds,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:Ds,view:(s,{writer:o})=>{if(!s.markerRange.isCollapsed)return null;const r=o.createUIElement("span");return o.addClass(["ck-fake-link-selection","ck-fake-link-selection_collapsed"],r),r}}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Create link"),keystroke:md},{label:n("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.propertiesView&&this.propertiesView.destroy(),this.formView&&this.formView.destroy(),this.toolbarView&&this.toolbarView.destroy(),this.linkProviderItemsView&&this.linkProviderItemsView.destroy()}registerLinksListProvider(e){const n=this._linksProviders.filter(s=>(s.order||0)<=(e.order||0)).length;this._linksProviders.add(e,n)}_createViews(){const e=this.editor.commands.get("link");this.toolbarView=this._createToolbarView(),this.formView=this._createFormView(),e.manualDecorators.length&&(this.propertiesView=this._createPropertiesView()),this._enableUserBalloonInteractions()}_createToolbarView(){const e=this.editor,n=new Da(e.locale),s=e.commands.get("link");n.class="ck-link-toolbar";let o=e.config.get("link.toolbar");return s.manualDecorators.length||(o=o.filter(r=>r!=="linkProperties")),n.fillFromConfig(o,e.ui.componentFactory),n.keystrokes.set("Esc",(r,a)=>{this._hideUI(),a()}),n.keystrokes.set(md,(r,a)=>{this._addFormView(),a()}),e.ui.addToolbar(n,{isContextual:!0,beforeFocus:()=>{this._getSelectedLinkElement()&&!this._isToolbarVisible&&this._showUI(!0)},afterBlur:()=>{this._hideUI(!1)}}),n}_createFormView(){const e=this.editor,n=e.locale.t,s=e.commands.get("link"),o=e.config.get("link.defaultProtocol"),r=new(nh(mte))(e.locale,_te(e));return r.displayedTextInputView.bind("isEnabled").to(this,"selectedLinkableText",a=>a!==void 0),r.urlInputView.bind("isEnabled").to(s,"isEnabled"),r.saveButtonView.bind("isEnabled").to(s,"isEnabled"),r.saveButtonView.bind("label").to(s,"value",a=>n(a?"Update":"Insert")),this.listenTo(r,"submit",()=>{if(r.isValid()){const a=r.urlInputView.fieldView.element.value,l=b1(a,o),u=r.displayedTextInputView.fieldView.element.value;e.execute("link",l,this._getDecoratorSwitchesState(),u!==this.selectedLinkableText?u:void 0),this._closeFormView()}}),this.listenTo(r.urlInputView,"change:errorText",()=>{e.ui.update()}),this.listenTo(r,"cancel",()=>{this._closeFormView()}),r.keystrokes.set("Esc",(a,l)=>{this._closeFormView(),l()}),r.providersListChildren.bindTo(this._linksProviders).using(a=>this._createLinksListProviderButton(a)),r}_createLinkProviderListView(e){return e.getListItems().map(({href:n,label:s,icon:o})=>{const r=new ke;return r.set({label:s,icon:o,tooltip:!1,withText:!0}),r.on("execute",()=>{this.formView.resetFormStatus(),this.formView.urlInputView.fieldView.value=n,this.editor.editing.view.focus(),this._removeLinksProviderView(),this.formView.focus()}),r})}_createLinkProviderItemsView(e){const n=this.editor,s=n.locale.t,o=new gte(n.locale),{emptyListPlaceholder:r,label:a}=e;return o.emptyListPlaceholder=r||s("No links available"),o.title=a,this.listenTo(o,"cancel",()=>{n.editing.view.focus(),this._removeLinksProviderView(),this.formView.focus()}),o}_createPropertiesView(){const e=this.editor,n=this.editor.commands.get("link"),s=new(nh(pte))(e.locale);return this.listenTo(s,"back",()=>{e.editing.view.focus(),this._removePropertiesView()}),s.listChildren.bindTo(n.manualDecorators).using(o=>{const r=new Vp(e.locale);return r.set({label:o.label,withText:!0}),r.bind("isOn").toMany([o,n],"value",(a,l)=>l===void 0&&a===void 0?!!o.defaultValue:!!a),r.on("execute",()=>{o.set("value",!r.isOn),e.execute("link",n.value,this._getDecoratorSwitchesState())}),r}),s}_getDecoratorSwitchesState(){const e=this.editor.commands.get("link");return Array.from(e.manualDecorators).reduce((n,s)=>{const o=e.value===void 0&&s.value===void 0?s.defaultValue:s.value;return{...n,[s.id]:!!o}},{})}_registerEditingOpeners(){this.editor.plugins.get(Ec)._registerLinkOpener(n=>{const s=this._getLinkProviderLinkByHref(n);if(!s)return!1;const{item:o,provider:r}=s;return r.navigate?r.navigate(o):!1})}_registerComponents(){const e=this.editor;e.ui.componentFactory.add("link",()=>{const n=this._createButton(ke);return n.set({tooltip:!0}),n}),e.ui.componentFactory.add("menuBar:link",()=>{const n=this._createButton(Jn);return n.set({role:"menuitemcheckbox"}),n}),e.ui.componentFactory.add("linkPreview",n=>{const s=new fte(n),o=e.config.get("link.allowedProtocols"),r=e.commands.get("link"),a=n.t;s.bind("isEnabled").to(r,"value",u=>!!u),s.bind("href").to(r,"value",u=>u&&mD(u,o));const l=u=>{if(!u){s.label=void 0,s.icon=void 0,s.tooltip=a("Open link in new tab");return}const h=this._getLinkProviderLinkByHref(u);if(h){const{label:m,tooltip:p,icon:v}=h.item;s.label=m,s.tooltip=p||!1,s.icon=v}else s.label=u,s.icon=void 0,s.tooltip=a("Open link in new tab")};return l(r.value),this.listenTo(r,"change:value",(u,h,m)=>{l(m)}),this.listenTo(s,"navigate",(u,h,m)=>{const p=this._getLinkProviderLinkByHref(h);if(!p)return;const{provider:v,item:C}=p,{navigate:x}=v;x&&x(C)&&(u.stop(),m())}),s}),e.ui.componentFactory.add("unlink",n=>{const s=e.commands.get("unlink"),o=new ke(n),r=n.t;return o.set({label:r("Unlink"),icon:vK,tooltip:!0}),o.bind("isEnabled").to(s),this.listenTo(o,"execute",()=>{e.execute("unlink"),this._hideUI()}),o}),e.ui.componentFactory.add("editLink",n=>{const s=e.commands.get("link"),o=new ke(n),r=n.t;return o.set({label:r("Edit link"),icon:rK,tooltip:!0}),o.bind("isEnabled").to(s),this.listenTo(o,"execute",()=>{this._addFormView()}),o}),e.ui.componentFactory.add("linkProperties",n=>{const s=e.commands.get("link"),o=new ke(n),r=n.t;return o.set({label:r("Link properties"),icon:hK,tooltip:!0}),o.bind("isEnabled").to(s,"isEnabled",s,"value",s,"manualDecorators",(a,l,u)=>a&&!!l&&u.length>0),this.listenTo(o,"execute",()=>{this._addPropertiesView()}),o})}_createLinksListProviderButton(e){const n=this.editor.locale,s=new bte(n);return s.set({label:e.label}),this.listenTo(s,"execute",()=>{this._showLinksProviderView(e)}),s}_createButton(e){const n=this.editor,s=n.locale,o=n.commands.get("link"),r=new e(n.locale),a=s.t;return r.set({label:a("Link"),icon:DV,keystroke:md,isToggleable:!0}),r.bind("isEnabled").to(o,"isEnabled"),r.bind("isOn").to(o,"value",l=>!!l),this.listenTo(r,"execute",()=>{n.editing.view.scrollToTheSelection(),this._showUI(!0),this._getSelectedLinkElement()&&this._addFormView()}),r}_enableBalloonActivators(){const e=this.editor,n=e.editing.view.document;this.listenTo(n,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),e.keystrokes.set(md,(s,o)=>{o(),e.commands.get("link").isEnabled&&(e.editing.view.scrollToTheSelection(),this._showUI(!0))})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(e,n)=>{this._isToolbarVisible&&!this.toolbarView.focusTracker.isFocused&&(this.toolbarView.focus(),n())},{priority:"high"}),this.editor.keystrokes.set("Esc",(e,n)=>{this._isUIVisible&&(this._hideUI(),n())}),Uo({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>{this._hideUI(!1)}})}_addToolbarView(){this.toolbarView||this._createViews(),!this._isToolbarInPanel&&this._balloon.add({view:this.toolbarView,position:this._getBalloonPositionData(),balloonClassName:"ck-toolbar-container"})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const e=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this.formView.backButtonView.isVisible=e.isEnabled&&!!e.value,this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.selectedLinkableText=this._getSelectedLinkableText(),this.formView.displayedTextInputView.fieldView.value=this.selectedLinkableText||"",this.formView.urlInputView.fieldView.value=e.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_addPropertiesView(){this.propertiesView||this._createViews(),!this._arePropertiesInPanel&&(this.propertiesView.disableCssTransitions(),this._balloon.add({view:this.propertiesView,position:this._getBalloonPositionData()}),this.propertiesView.enableCssTransitions(),this.propertiesView.focus())}_showLinksProviderView(e){this.linkProviderItemsView&&this._removeLinksProviderView(),this.linkProviderItemsView=this._createLinkProviderItemsView(e),this._addLinkProviderItemsView(e)}_addLinkProviderItemsView(e){this.linkProviderItemsView.listChildren.clear(),this.linkProviderItemsView.listChildren.addMany(this._createLinkProviderListView(e)),this._balloon.add({view:this.linkProviderItemsView,position:this._getBalloonPositionData()}),this.linkProviderItemsView.focus()}_closeFormView(){const e=this.editor.commands.get("link");this.selectedLinkableText=void 0,e.value!==void 0?this._removeFormView():this._hideUI()}_removePropertiesView(){this._arePropertiesInPanel&&this._balloon.remove(this.propertiesView)}_removeLinksProviderView(){this._isLinksListInPanel&&this._balloon.remove(this.linkProviderItemsView)}_removeFormView(e=!0){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.displayedTextInputView.fieldView.reset(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),e&&this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._isToolbarVisible?this._addFormView():this._addToolbarView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addToolbarView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(e=!0){const n=this.editor;this._isUIInPanel&&(this.stopListening(n.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e&&n.editing.view.focus(),this._removeLinksProviderView(),this._removePropertiesView(),this._removeFormView(e),this._isToolbarInPanel&&this._balloon.remove(this.toolbarView),this._hideFakeVisualSelection())}_startUpdatingUI(){const e=this.editor,n=e.editing.view.document;let s=this._getSelectedLinkElement(),o=a();const r=()=>{const l=this._getSelectedLinkElement(),u=a();s&&!l||!s&&u!==o?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),s=l,o=u};function a(){return n.selection.focus.getAncestors().reverse().find(l=>l.is("element"))}this.listenTo(e.ui,"update",r),this.listenTo(this._balloon,"change:visibleView",r)}get _arePropertiesInPanel(){return!!this.propertiesView&&this._balloon.hasView(this.propertiesView)}get _isLinksListInPanel(){return!!this.linkProviderItemsView&&this._balloon.hasView(this.linkProviderItemsView)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _isToolbarInPanel(){return!!this.toolbarView&&this._balloon.hasView(this.toolbarView)}get _isPropertiesVisible(){return!!this.propertiesView&&this._balloon.visibleView===this.propertiesView}get _isFormVisible(){return!!this.formView&&this._balloon.visibleView==this.formView}get _isToolbarVisible(){return!!this.toolbarView&&this._balloon.visibleView===this.toolbarView}get _isUIInPanel(){return this._arePropertiesInPanel||this._isLinksListInPanel||this._isFormInPanel||this._isToolbarInPanel}get _isUIVisible(){return this._isPropertiesVisible||this._isLinksListInPanel||this._isFormVisible||this._isToolbarVisible}_getBalloonPositionData(){const e=this.editor.editing.view,n=e.document;if(this.editor.model.markers.has(Ds)){const o=this.editor.editing.mapper.markerNameToElements(Ds);if(o){const r=Array.from(o),a=e.createRange(e.createPositionBefore(r[0]),e.createPositionAfter(r[r.length-1]));return{target:e.domConverter.viewRangeToDom(a)}}}return{target:()=>{const o=this._getSelectedLinkElement();return o?e.domConverter.mapViewToDom(o):e.domConverter.viewRangeToDom(n.selection.getFirstRange())}}}_getSelectedLinkElement(){const e=this.editor.editing.view,n=e.document.selection,s=n.getSelectedElement();if(n.isCollapsed||s&&Jt(s))return dy(n.getFirstPosition());{const o=n.getFirstRange().getTrimmed(),r=dy(o.start),a=dy(o.end);return!r||r!=a?null:e.createRangeIn(r).getTrimmed().isEqual(o)?r:null}}_getSelectedLinkableText(){const e=this.editor.model,n=this.editor.editing,s=this._getSelectedLinkElement();if(!s)return mv(e.document.selection.getFirstRange());const o=n.view.createRangeOn(s),r=n.mapper.toModelRange(o);return mv(r)}_getLinkProviderLinkByHref(e){if(!e)return null;for(const n of this._linksProviders){const s=n.getItem?n.getItem(e):n.getListItems().find(o=>o.href===e);if(s)return{provider:n,item:s}}return null}_showFakeVisualSelection(){const e=this.editor.model;e.change(n=>{const s=e.document.selection.getFirstRange();if(e.markers.has(Ds))n.updateMarker(Ds,{range:s});else if(s.start.isAtEnd){const o=s.start.getLastMatchingPosition(({item:r})=>!e.schema.isContent(r),{boundaries:s});n.addMarker(Ds,{usingOperation:!1,affectsData:!1,range:n.createRange(o,s.end)})}else n.addMarker(Ds,{usingOperation:!1,affectsData:!1,range:s})})}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has(Ds)&&e.change(n=>{n.removeMarker(Ds)})}}function dy(i){return i.getAncestors().find(t=>Jee(t))||null}function _te(i){const t=i.t,e=i.config.get("link.allowCreatingEmptyLinks");return[n=>{if(!e&&!n.url.length)return t("Link URL must not be empty.")}]}const wte=4,bD=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63}))|localhost)(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),yte=2;class vte extends te{static get requires(){return[Vr,Ec]}static get pluginName(){return"AutoLink"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.model.document.selection;e.on("change:range",()=>{this.isEnabled=!e.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(t,e){return e.textNode&&e.textNode.hasAttribute("linkHref")?Op(e,"linkHref",e.textNode.getAttribute("linkHref"),t):null}_selectEntireLinks(t,e){const s=this.editor.model,o=s.document.selection,r=o.getFirstPosition(),a=o.getLastPosition();let l=e.getJoined(this._expandLinkRange(s,r)||e);l&&(l=l.getJoined(this._expandLinkRange(s,a)||e)),l&&(l.start.isBefore(r)||l.end.isAfter(a))&&t.setSelection(l)}_enablePasteLinking(){const t=this.editor,e=t.model,n=e.document.selection,s=t.plugins.get("ClipboardPipeline"),o=t.commands.get("link");s.on("inputTransformation",(r,a)=>{if(!this.isEnabled||!o.isEnabled||n.isCollapsed||a.method!=="paste"||n.rangeCount>1)return;const l=n.getFirstRange(),u=a.dataTransfer.getData("text/plain");if(!u)return;const h=u.match(bD);h&&h[2]===u&&(e.change(m=>{this._selectEntireLinks(m,l),o.execute(u)}),r.stop())},{priority:"high"})}_enableTypingHandling(){const t=this.editor,e=new s1(t.model,n=>{let s=n;if(!Cte(s))return;s=s.slice(0,-1),"!.:,;?".includes(s[s.length-1])&&(s=s.slice(0,-1));const o=Q2(s);if(o)return{url:o,removedTrailingCharacters:n.length-s.length}});e.on("matched:data",(n,s)=>{const{batch:o,range:r,url:a,removedTrailingCharacters:l}=s;if(!o.isTyping)return;const u=r.end.getShiftedBy(-l),h=u.getShiftedBy(-a.length),m=t.model.createRange(h,u);this._applyAutoLink(a,m)}),e.bind("isEnabled").to(this)}_enableEnterHandling(){const t=this.editor,e=t.model,n=t.commands.get("enter");n&&n.on("execute",()=>{var r;const s=e.document.selection.getFirstPosition();let o;(r=s.parent.previousSibling)!=null&&r.is("element")?o=e.createRangeIn(s.parent.previousSibling):o=e.createRange(e.createPositionAt(s.parent,0),s),this._checkAndApplyAutoLinkOnRange(o)})}_enableShiftEnterHandling(){const t=this.editor,e=t.model,n=t.commands.get("shiftEnter");n&&n.on("execute",()=>{const s=e.document.selection.getFirstPosition(),o=e.createRange(e.createPositionAt(s.parent,0),s.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(o)})}_checkAndApplyAutoLinkOnRange(t){const e=this.editor.model,{text:n,range:s}=SN(t,e),o=Q2(n);if(o){const r=e.createRange(s.end.getShiftedBy(-o.length),s.end);this._applyAutoLink(o,r)}}_applyAutoLink(t,e){const n=this.editor.model,s=this.editor.config.get("link.defaultProtocol"),o=b1(t,s);!this.isEnabled||!Tte(e,n)||!gD(o)||xte(e)||this._persistAutoLink(o,e)}_persistAutoLink(t,e){const n=this.editor.model,s=this.editor.plugins.get("Delete");n.enqueueChange(o=>{o.setAttribute("linkHref",t,e),n.enqueueChange(()=>{s.requestUndoOnBackspace()})})}}function Cte(i){return i.length>wte&&i[i.length-1]===" "&&i[i.length-2]!==" "}function Q2(i){const t=bD.exec(i);return t?t[yte]:null}function Tte(i,t){return t.schema.checkAttributeInSelection(t.createSelection(i),"linkHref")}function xte(i){const t=i.start.nodeAfter;return!!t&&t.hasAttribute("linkHref")}class kte extends te{static get requires(){return[Ec,pD,vte]}static get pluginName(){return"Link"}static get isOfficialPlugin(){return!0}}class Ete extends te{static get requires(){return["ImageEditing","ImageUtils",Ec]}static get pluginName(){return"LinkImageEditing"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=t.model.schema;t.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["linkHref"]}),t.conversion.for("upcast").add(Ste(t)),t.conversion.for("downcast").add(Ate(t)),this._enableAutomaticDecorators(),this._enableManualDecorators()}_enableAutomaticDecorators(){const t=this.editor,n=t.commands.get("link").automaticDecorators;n.length&&t.conversion.for("downcast").add(n.getDispatcherForLinkedImage())}_enableManualDecorators(){const t=this.editor,e=t.commands.get("link");for(const n of e.manualDecorators)t.plugins.has("ImageBlockEditing")&&t.model.schema.extend("imageBlock",{allowAttributes:n.id}),t.plugins.has("ImageInlineEditing")&&t.model.schema.extend("imageInline",{allowAttributes:n.id}),t.conversion.for("downcast").add(Rte(n)),t.conversion.for("upcast").add(Ite(t,n))}}function Ste(i){const t=i.plugins.has("ImageInlineEditing"),e=i.plugins.get("ImageUtils");return n=>{n.on("element:a",(s,o,r)=>{const a=o.viewItem,l=e.findViewImgElement(a);if(!l)return;const u=l.findAncestor(v=>e.isBlockImageView(v));if(t&&!u)return;const h={attributes:["href"]};if(!r.consumable.consume(a,h))return;const m=a.getAttribute("href");if(!m)return;let p=o.modelCursor.parent;if(!p.is("element","imageBlock")){const v=r.convertItem(l,o.modelCursor);o.modelRange=v.modelRange,o.modelCursor=v.modelCursor,p=o.modelCursor.nodeBefore}p&&p.is("element","imageBlock")&&r.writer.setAttribute("linkHref",m,p)},{priority:"high"})}}function Ate(i){const t=i.plugins.get("ImageUtils");return e=>{e.on("attribute:linkHref:imageBlock",(n,s,o)=>{if(!o.consumable.consume(s.item,n.name))return;const r=o.mapper.toViewElement(s.item),a=o.writer,l=Array.from(r.getChildren()).find(m=>m.is("element","a")),u=t.findViewImgElement(r),h=u.parent.is("element","picture")?u.parent:u;if(l)s.attributeNewValue?a.setAttribute("href",s.attributeNewValue,l):(a.move(a.createRangeOn(h),a.createPositionAt(r,0)),a.remove(l));else{const m=a.createContainerElement("a",{href:s.attributeNewValue});a.insert(a.createPositionAt(r,0),m),a.move(a.createRangeOn(h),a.createPositionAt(m,0))}},{priority:"high"})}}function Rte(i){return t=>{t.on(`attribute:${i.id}:imageBlock`,(e,n,s)=>{const o=s.mapper.toViewElement(n.item),r=Array.from(o.getChildren()).find(a=>a.is("element","a"));if(r){if(i.value===void 0){for(const a in i.attributes)s.writer.removeAttribute(a,r);i.classes&&s.writer.removeClass(i.classes,r);for(const a in i.styles)s.writer.removeStyle(a,r);return}for(const[a,l]of Cs(i.attributes))s.writer.setAttribute(a,l,r);i.classes&&s.writer.addClass(i.classes,r);for(const a in i.styles)s.writer.setStyle(a,i.styles[a],r)}})}}function Ite(i,t){const e=i.plugins.has("ImageInlineEditing"),n=i.plugins.get("ImageUtils");return s=>{s.on("element:a",(o,r,a)=>{const l=r.viewItem,u=n.findViewImgElement(l);if(!u)return;const h=u.findAncestor(C=>n.isBlockImageView(C));if(e&&!h)return;const p=new Ts(t._createPattern()).match(l);if(!p||!a.consumable.consume(l,p.match))return;const v=r.modelCursor.nodeBefore||r.modelCursor.parent;a.writer.setAttribute(t.id,!0,v)},{priority:"high"})}}class Pte extends te{static get requires(){return[Ec,pD,"ImageBlockEditing"]}static get pluginName(){return"LinkImageUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view.document;this.listenTo(e,"click",(n,s)=>{this._isSelectedLinkedImage(t.model.document.selection)&&(s.preventDefault(),n.stop())},{priority:"high"}),this._createToolbarLinkImageButton()}_createToolbarLinkImageButton(){const t=this.editor,e=t.t;t.ui.componentFactory.add("linkImage",n=>{const s=new ke(n),o=t.plugins.get("LinkUI"),r=t.commands.get("link");return s.set({isEnabled:!0,label:e("Link image"),icon:DV,keystroke:md,tooltip:!0,isToggleable:!0}),s.bind("isEnabled").to(r,"isEnabled"),s.bind("isOn").to(r,"value",a=>!!a),this.listenTo(s,"execute",()=>{this._isSelectedLinkedImage(t.model.document.selection)?o._addToolbarView():o._showUI(!0)}),s})}_isSelectedLinkedImage(t){const e=t.getSelectedElement();return this.editor.plugins.get("ImageUtils").isImage(e)&&e.hasAttribute("linkHref")}}class Mte extends te{static get requires(){return[Ete,Pte]}static get pluginName(){return"LinkImage"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Vte=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:i,typeAttribute:t,listType:e}of Vte);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function eR(i,t){const e=(n,s,o)=>{if(!o.consumable.consume(s.item,n.name))return;const r=s.attributeNewValue,a=o.writer,l=o.mapper.toViewElement(s.item),u=[...l.getChildren()].find(m=>m.getCustomProperty("media-content"));a.remove(u);const h=i.getMediaViewElement(a,r,t);a.insert(a.createPositionAt(l,0),h)};return n=>{n.on("attribute:url:media",e)}}function Nte(i,t,e){return t.setCustomProperty("media",!0,i),a1(i,t,{label:e})}function tR(i,t,e,n){return i.createContainerElement("figure",{class:"media"},[t.getMediaViewElement(i,e,n),i.createSlot()])}function nR(i){const t=i.getSelectedElement();return t&&t.is("element","media")?t:null}function _D(i,t,e,n){i.change(s=>{const o=s.createElement("media",{url:t});i.insertObject(o,e,null,{setSelection:"on",findOptimalPosition:n?"auto":void 0})})}class Dte extends $e{refresh(){const t=this.editor.model,e=t.document.selection,n=nR(e);this.value=n?n.getAttribute("url"):void 0,this.isEnabled=Lte(e)||Ote(e,t)}execute(t){const e=this.editor.model,n=e.document.selection,s=nR(n);s?e.change(o=>{o.setAttribute("url",t,s)}):_D(e,t,n,!0)}}function Ote(i,t){let n=MN(i,t).start.parent;return n.isEmpty&&!t.schema.isLimit(n)&&(n=n.parent),t.schema.checkChild(n,"media")}function Lte(i){const t=i.getSelectedElement();return!!t&&t.name==="media"}const Bte="0 0 64 42";class Fte{constructor(t,e){_(this,"locale");_(this,"providerDefinitions");const n=e.providers,s=e.extraProviders||[],o=new Set(e.removeProviders),r=n.concat(s).filter(a=>{const l=a.name;return l?!o.has(l):(Ze("media-embed-no-provider-name",{provider:a}),!1)});this.locale=t,this.providerDefinitions=r}hasMedia(t){return!!this._getMedia(t)}getMediaViewElement(t,e,n){return this._getMedia(e).getViewElement(t,n)}_getMedia(t){if(!t)return new iR(this.locale);t=t.trim();for(const e of this.providerDefinitions){const n=e.html,s=bn(e.url);for(const o of s){const r=this._getUrlMatches(t,o);if(r)return new iR(this.locale,t,r,n)}}return null}_getUrlMatches(t,e){let n=t.match(e);if(n)return n;let s=t.replace(/^https?:\/\//,"");return n=s.match(e),n||(s=s.replace(/^www\./,""),n=s.match(e),n)?n:null}}class iR{constructor(t,e,n,s){_(this,"url");_(this,"_locale");_(this,"_match");_(this,"_previewRenderer");this.url=this._getValidUrl(e),this._locale=t,this._match=n,this._previewRenderer=s}getViewElement(t,e){const n={};let s;if(e.renderForEditingView||e.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(n["data-oembed-url"]=this.url),e.renderForEditingView&&(n.class="ck-media__wrapper");const o=this._getPreviewHtml(e);s=t.createRawElement("div",n,(r,a)=>{a.setContentOf(r,o)})}else this.url&&(n.url=this.url),s=t.createEmptyElement(e.elementName,n);return t.setCustomProperty("media-content",!0,s),s}_getPreviewHtml(t){return this._previewRenderer?this._previewRenderer(this._match):this.url&&t.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const t=new os,e=this._locale.t;return t.content=Jj,t.viewBox=Bte,new Ti({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[t]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url,"data-cke-tooltip-text":e("Open media in new tab")},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]}]}]}).render().outerHTML}_getValidUrl(t){return t?t.match(/^https?/)?t:"https://"+t:null}}class Fg extends te{constructor(e){super(e);_(this,"registry");e.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:[/^dailymotion\.com\/video\/(\w+)/,/^dai.ly\/(\w+)/],html:n=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${n[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:n=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${n[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/,/^(?:m\.)?youtube\.com\/shorts\/([\w-]+)(?:\?t=(\d+))?/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/,/^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/,/^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/],html:n=>{const s=n[1],o=n[2];return`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${s}${o?`?start=${o}`:""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:n=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${n[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:[/^instagram\.com\/p\/(\w+)/,/^instagram\.com\/reel\/(\w+)/]},{name:"twitter",url:[/^twitter\.com/,/^x\.com/]},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new Fte(e.locale,e.config.get("mediaEmbed"))}static get pluginName(){return"MediaEmbedEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model.schema,s=e.t,o=e.conversion,r=e.config.get("mediaEmbed.previewsInData"),a=e.config.get("mediaEmbed.elementName"),l=this.registry;e.commands.add("mediaEmbed",new Dte(e)),n.register("media",{inheritAllFrom:"$blockObject",allowAttributes:["url"]}),o.for("dataDowncast").elementToStructure({model:"media",view:(u,{writer:h})=>{const m=u.getAttribute("url");return tR(h,l,m,{elementName:a,renderMediaPreview:!!m&&r})}}),o.for("dataDowncast").add(eR(l,{elementName:a,renderMediaPreview:r})),o.for("editingDowncast").elementToStructure({model:"media",view:(u,{writer:h})=>{const m=u.getAttribute("url"),p=tR(h,l,m,{elementName:a,renderForEditingView:!0});return Nte(p,h,s("media widget"))}}),o.for("editingDowncast").add(eR(l,{elementName:a,renderForEditingView:!0})),o.for("upcast").elementToElement({view:u=>["oembed",a].includes(u.name)&&u.getAttribute("url")?{name:!0}:null,model:(u,{writer:h})=>{const m=u.getAttribute("url");return l.hasMedia(m)?h.createElement("media",{url:m}):null}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(u,{writer:h})=>{const m=u.getAttribute("data-oembed-url");return l.hasMedia(m)?h.createElement("media",{url:m}):null}}).add(u=>{const h=(m,p,v)=>{if(!v.consumable.consume(p.viewItem,{name:!0,classes:"media"}))return;const{modelRange:C,modelCursor:x}=v.convertChildren(p.viewItem,p.modelCursor);p.modelRange=C,p.modelCursor=x,Ln(C.getItems())||v.consumable.revert(p.viewItem,{name:!0,classes:"media"})};u.on("element:figure",h)})}}const Ute=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class zte extends te{constructor(e){super(e);_(this,"_timeoutId");_(this,"_positionToInsert");this._timeoutId=null,this._positionToInsert=null}static get requires(){return[u1,Vr,d1]}static get pluginName(){return"AutoMediaEmbed"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model.document,s=e.plugins.get("ClipboardPipeline");this.listenTo(s,"inputTransformation",()=>{const r=n.selection.getFirstRange(),a=zt.fromPosition(r.start);a.stickiness="toPrevious";const l=zt.fromPosition(r.end);l.stickiness="toNext",n.once("change:data",()=>{this._embedMediaBetweenPositions(a,l),a.detach(),l.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(de.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(e,n){const s=this.editor,o=s.plugins.get(Fg).registry,r=new ei(e,n),a=r.getWalker({ignoreElementEnd:!0});let l="";for(const h of a)h.item.is("$textProxy")&&(l+=h.item.data);if(l=l.trim(),!l.match(Ute)){r.detach();return}if(!o.hasMedia(l)){r.detach();return}if(!s.commands.get("mediaEmbed").isEnabled){r.detach();return}this._positionToInsert=zt.fromPosition(e),this._timeoutId=de.window.setTimeout(()=>{s.model.change(h=>{this._timeoutId=null,h.remove(r),r.detach();let m=null;this._positionToInsert.root.rootName!=="$graveyard"&&(m=this._positionToInsert),_D(s.model,l,m,!1),this._positionToInsert.detach(),this._positionToInsert=null}),s.plugins.get(Vr).requestUndoOnBackspace()},100)}}class Hte extends fe{constructor(e,n){super(n);_(this,"focusTracker");_(this,"keystrokes");_(this,"urlInputView");_(this,"_validators");_(this,"_urlInputViewInfoDefault");_(this,"_urlInputViewInfoTip");this.focusTracker=new wt,this.keystrokes=new Dt,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this._validators=e,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView]})}render(){super.render(),zr({view:this}),this.focusTracker.add(this.urlInputView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.urlInputView.focus()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(e){this.urlInputView.fieldView.value=e.trim()}isValid(){this.resetFormStatus();for(const e of this._validators){const n=e(this);if(n)return this.urlInputView.errorText=n,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const e=this.locale.t,n=new sn(this.locale,ti),s=n.fieldView;return this._urlInputViewInfoDefault=e("Paste the media URL in the input."),this._urlInputViewInfoTip=e("Tip: Paste the URL into the content to embed faster."),n.label=e("Media URL"),n.infoText=this._urlInputViewInfoDefault,s.inputMode="url",s.on("input",()=>{n.infoText=s.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=s.element.value.trim()}),n}}class Wte extends te{constructor(){super(...arguments);_(this,"_formView")}static get requires(){return[Fg,xc]}static get pluginName(){return"MediaEmbedUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("mediaEmbed",()=>{const n=this.editor.locale.t,s=this._createDialogButton(ke);return s.tooltip=!0,s.label=n("Insert media"),s}),e.ui.componentFactory.add("menuBar:mediaEmbed",()=>{const n=this.editor.locale.t,s=this._createDialogButton(Jn);return s.label=n("Media"),s})}_createDialogButton(e){const n=this.editor,s=new e(n.locale),o=n.commands.get("mediaEmbed"),r=this.editor.plugins.get("Dialog");return s.icon=Xj,s.bind("isEnabled").to(o,"isEnabled"),s.on("execute",()=>{r.id==="mediaEmbed"?r.hide():this._showDialog()}),s}_showDialog(){const e=this.editor,n=e.plugins.get("Dialog"),s=e.commands.get("mediaEmbed"),o=e.locale.t,r=s.value!==void 0;if(!this._formView){const a=e.plugins.get(Fg).registry;this._formView=new(nh(Hte))(qte(e.t,a),e.locale),this._formView.on("submit",()=>this._handleSubmitForm())}n.show({id:"mediaEmbed",title:o("Media embed"),content:this._formView,isModal:!0,onShow:()=>{this._formView.url=s.value||"",this._formView.resetFormStatus(),this._formView.urlInputView.fieldView.select()},actionButtons:[{label:o("Cancel"),withText:!0,onExecute:()=>n.hide()},{label:o(r?"Save":"Insert"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSubmitForm()}]})}_handleSubmitForm(){const e=this.editor,n=e.plugins.get("Dialog");this._formView.isValid()&&(e.execute("mediaEmbed",this._formView.url),n.hide(),e.editing.view.focus())}}function qte(i,t){return[e=>{if(!e.url.length)return i("The URL must not be empty.")},e=>{if(!t.hasMedia(e.url))return i("This media URL is not supported.")}]}class $te extends te{static get requires(){return[Fg,Wte,zte,Rh]}static get pluginName(){return"MediaEmbed"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const sR={"(":")","[":"]","{":"}"};class Gte extends $e{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}refresh(){const t=this.editor.model,e=t.document;this.isEnabled=t.schema.checkAttributeInSelection(e.selection,"mention")}execute(t){const e=this.editor.model,s=e.document.selection,o=typeof t.mention=="string"?{id:t.mention}:t.mention,r=o.id,a=t.range||s.getFirstRange();if(!e.canEditAt(a))return;const l=t.text||r,u=wD({_text:l,id:r},o);if(!r.startsWith(t.marker))throw new V("mentioncommand-incorrect-id",this);e.change(h=>{const m=Cs(s.getAttributes()),p=new Map(m.entries());p.set("mention",u);const v=e.insertContent(h.createText(l,p),a),C=v.start.nodeBefore,x=v.end.nodeAfter,k=x&&x.is("$text")&&x.data.startsWith(" ");let S=!1;if(C&&x&&C.is("$text")&&x.is("$text")){const I=C.data.slice(-1),P=I in sR,O=P&&x.data.startsWith(sR[I]);S=P&&O}!S&&!k&&e.insertContent(h.createText(" ",m),a.start.getShiftedBy(l.length))})}}class jte extends te{static get pluginName(){return"MentionEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model,n=e.document;e.schema.extend("$text",{allowAttributes:"mention"}),t.conversion.for("upcast").elementToAttribute({view:{name:"span",attributes:"data-mention",classes:"mention"},model:{key:"mention",value:s=>yD(s)}}),t.conversion.for("downcast").attributeToElement({model:"mention",view:Zte}),t.conversion.for("downcast").add(Kte),n.registerPostFixer(s=>Xte(s,n,e.schema)),n.registerPostFixer(s=>Qte(s,n)),n.registerPostFixer(s=>Yte(s,n)),t.commands.add("mention",new Gte(t))}}function wD(i,t){return Object.assign({uid:si()},i,t||{})}function yD(i,t){const e=i.getAttribute("data-mention"),n=i.getChild(0);if(!n)return;const s={id:e,_text:n.data};return wD(s,t)}function Kte(i){i.on("attribute:mention",(t,e,n)=>{const s=e.attributeNewValue;if(!e.item.is("$textProxy")||!s)return;const o=e.range.start;(o.textNode||o.nodeAfter).data!=s._text&&n.consumable.consume(e.item,t.name)},{priority:"highest"})}function Zte(i,{writer:t}){if(!i)return;const e={class:"mention","data-mention":i.id},n={id:i.uid,priority:20};return t.createAttributeElement("span",e,n)}function Yte(i,t){const e=t.selection,n=e.focus;return e.isCollapsed&&e.hasAttribute("mention")&&Jte(n)?(i.removeSelectionAttribute("mention"),!0):!1}function Jte(i){const t=i.isAtStart;return i.nodeBefore&&i.nodeBefore.is("$text")||t}function Xte(i,t,e){const n=t.differ.getChanges();let s=!1;for(const o of n){if(o.type=="attribute")continue;const r=o.position;if(o.name=="$text"){const a=r.textNode&&r.textNode.nextSibling;s=ga(r.textNode,i)||s,s=ga(a,i)||s,s=ga(r.nodeBefore,i)||s,s=ga(r.nodeAfter,i)||s}if(o.name!="$text"&&o.type=="insert"){const a=r.nodeAfter;for(const l of i.createRangeIn(a).getItems())s=ga(l,i)||s}if(o.type=="insert"&&e.isInline(o.name)){const a=r.nodeAfter&&r.nodeAfter.nextSibling;s=ga(r.nodeBefore,i)||s,s=ga(a,i)||s}}return s}function Qte(i,t){const e=t.differ.getChanges();let n=!1;for(const s of e)if(s.type==="attribute"&&s.attributeKey!="mention"){const o=s.range.start.nodeBefore,r=s.range.end.nodeAfter;for(const a of[o,r])vD(a)&&a.getAttribute(s.attributeKey)!=s.attributeNewValue&&(i.setAttribute(s.attributeKey,s.attributeNewValue,a),n=!0)}return n}function vD(i){if(!i||!(i.is("$text")||i.is("$textProxy"))||!i.hasAttribute("mention"))return!1;const t=i.data,n=i.getAttribute("mention")._text;return t!=n}function ga(i,t){return vD(i)?(t.removeAttribute("mention",i),!0):!1}class ene extends ja{constructor(e){super(e);_(this,"selected");_(this,"position");this.extendTemplate({attributes:{class:["ck-mentions"],tabindex:"-1"}})}selectFirst(){this.select(0)}selectNext(){const e=this.selected,n=this.items.getIndex(e);this.select(n+1)}selectPrevious(){const e=this.selected,n=this.items.getIndex(e);this.select(n-1)}select(e){let n=0;e>0&&e<this.items.length?n=e:e<0&&(n=this.items.length-1);const s=this.items.get(n);this.selected!==s&&(this.selected&&this.selected.removeHighlight(),s.highlight(),this.selected=s,this._isItemVisibleInScrolledArea(s)||(this.element.scrollTop=s.element.offsetTop))}executeSelected(){this.selected.fire("execute")}_isItemVisibleInScrolledArea(e){return new Pe(this.element).contains(new Pe(e.element))}}class tne extends fe{constructor(e,n){super(e);_(this,"domElement");this.template=void 0,this.domElement=n,this.domElement.classList.add("ck-button"),this.set("isOn",!1),this.on("change:isOn",(s,o,r)=>{r?(this.domElement.classList.add("ck-on"),this.domElement.classList.remove("ck-off")):(this.domElement.classList.add("ck-off"),this.domElement.classList.remove("ck-on"))}),this.listenTo(this.domElement,"click",()=>{this.fire("execute")})}render(){super.render(),this.element=this.domElement}focus(){this.domElement.focus()}}class nne extends rs{constructor(){super(...arguments);_(this,"item");_(this,"marker")}highlight(){const e=this.children.first;e.isOn=!0}removeHighlight(){const e=this.children.first;e.isOn=!1}}const xm=3,ine=[Ue.arrowup,Ue.arrowdown,Ue.esc],sne=[Ue.enter,Ue.tab];class one extends te{constructor(e){super(e);_(this,"_mentionsView");_(this,"_mentionsConfigurations");_(this,"_balloon");_(this,"_items",new En);_(this,"_lastRequested");_(this,"_requestFeedDebounced");this._mentionsView=this._createMentionView(),this._mentionsConfigurations=new Map,this._requestFeedDebounced=ss(this._requestFeed,100),e.config.define("mention",{feeds:[]})}static get pluginName(){return"MentionUI"}static get isOfficialPlugin(){return!0}static get requires(){return[as]}init(){const e=this.editor,n=e.config.get("mention.commitKeys")||sne,s=ine.concat(n);this._balloon=e.plugins.get(as),e.editing.view.document.on("keydown",(a,l)=>{r(l.keyCode)&&this._isUIVisible&&(l.preventDefault(),a.stop(),l.keyCode==Ue.arrowdown&&this._mentionsView.selectNext(),l.keyCode==Ue.arrowup&&this._mentionsView.selectPrevious(),n.includes(l.keyCode)&&this._mentionsView.executeSelected(),l.keyCode==Ue.esc&&this._hideUIAndRemoveMarker())},{priority:"highest"}),Uo({emitter:this._mentionsView,activator:()=>this._isUIVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUIAndRemoveMarker()});const o=e.config.get("mention.feeds");for(const a of o){const{feed:l,marker:u,dropdownLimit:h}=a;if(!hne(u))throw new V("mentionconfig-incorrect-marker",null,{marker:u});const m=typeof l=="function"?l.bind(this.editor):cne(l),p=a.itemRenderer,v={marker:u,feedCallback:m,itemRenderer:p,dropdownLimit:h};this._mentionsConfigurations.set(u,v)}this._setupTextWatcher(o),this.listenTo(e,"change:isReadOnly",()=>{this._hideUIAndRemoveMarker()}),this.on("requestFeed:response",(a,l)=>this._handleFeedResponse(l)),this.on("requestFeed:error",()=>this._hideUIAndRemoveMarker());function r(a){return s.includes(a)}}destroy(){super.destroy(),this._mentionsView.destroy()}get _isUIVisible(){return this._balloon.visibleView===this._mentionsView}_createMentionView(){const e=this.editor.locale,n=new ene(e);return n.items.bindTo(this._items).using(s=>{const{item:o,marker:r}=s,{dropdownLimit:a}=this._mentionsConfigurations.get(r),l=a||this.editor.config.get("mention.dropdownLimit")||10;if(n.items.length>=l)return null;const u=new nne(e),h=this._renderItem(o,r);return h.delegate("execute").to(u),u.children.add(h),u.item=o,u.marker=r,u.on("execute",()=>{n.fire("execute",{item:o,marker:r})}),u}),n.on("execute",(s,o)=>{const r=this.editor,a=r.model,l=o.item,u=o.marker,h=r.model.markers.get("mention"),m=a.createPositionAt(a.document.selection.focus),p=a.createPositionAt(h.getStart()),v=a.createRange(p,m);this._hideUIAndRemoveMarker(),r.execute("mention",{mention:l,text:l.text,marker:u,range:v}),r.editing.view.focus()}),n}_getItemRenderer(e){const{itemRenderer:n}=this._mentionsConfigurations.get(e);return n}_requestFeed(e,n){this._lastRequested=n;const{feedCallback:s}=this._mentionsConfigurations.get(e),o=s(n);if(!(o instanceof Promise)){this.fire("requestFeed:response",{feed:o,marker:e,feedText:n});return}o.then(a=>{this._lastRequested==n?this.fire("requestFeed:response",{feed:a,marker:e,feedText:n}):this.fire("requestFeed:discarded",{feed:a,marker:e,feedText:n})}).catch(a=>{this.fire("requestFeed:error",{error:a}),Ze("mention-feed-callback-error",{marker:e})})}_setupTextWatcher(e){const n=this.editor,s=e.map(a=>({...a,pattern:TD(a.marker,a.minimumCharacters||0)})),o=new s1(n.model,ane(s));o.on("matched",(a,l)=>{const u=CD(s,l.text),m=n.model.document.selection.focus,p=n.model.createPositionAt(m.parent,u.position);if(une(m)||dne(p)){this._hideUIAndRemoveMarker();return}const v=lne(u,l.text),C=u.marker.length+v.length,x=m.getShiftedBy(-C),k=m.getShiftedBy(-v.length),S=n.model.createRange(x,k);if(hy(n)){const I=n.model.markers.get("mention");n.model.change(P=>{P.updateMarker(I,{range:S})})}else n.model.change(I=>{I.addMarker("mention",{range:S,usingOperation:!1,affectsData:!1})});this._requestFeedDebounced(u.marker,v)}),o.on("unmatched",()=>{this._hideUIAndRemoveMarker()});const r=n.commands.get("mention");return o.bind("isEnabled").to(r),o}_handleFeedResponse(e){const{feed:n,marker:s}=e;if(!hy(this.editor))return;this._items.clear();for(const r of n){const a=typeof r!="object"?{id:r,text:r}:r;this._items.add({item:a,marker:s})}const o=this.editor.model.markers.get("mention");this._items.length?this._showOrUpdateUI(o):this._hideUIAndRemoveMarker()}_showOrUpdateUI(e){this._isUIVisible?this._balloon.updatePosition(this._getBalloonPanelPositionData(e,this._mentionsView.position)):this._balloon.add({view:this._mentionsView,position:this._getBalloonPanelPositionData(e,this._mentionsView.position),singleViewMode:!0,balloonClassName:"ck-mention-balloon"}),this._mentionsView.position=this._balloon.view.position,this._mentionsView.selectFirst()}_hideUIAndRemoveMarker(){this._balloon.hasView(this._mentionsView)&&this._balloon.remove(this._mentionsView),hy(this.editor)&&this.editor.model.change(e=>e.removeMarker("mention")),this._mentionsView.position=void 0}_renderItem(e,n){const s=this.editor;let o,r=e.id;const a=this._getItemRenderer(n);if(a){const l=a(e);typeof l!="string"?o=new tne(s.locale,l):r=l}if(!o){const l=new ke(s.locale);l.label=r,l.withText=!0,o=l}return o}_getBalloonPanelPositionData(e,n){const s=this.editor,o=s.editing,r=o.view.domConverter,a=o.mapper,l=s.locale.uiLanguageDirection;return{target:()=>{let u=e.getRange();u.start.root.rootName=="$graveyard"&&(u=s.model.document.selection.getFirstRange());const h=a.toViewRange(u);return Pe.getDomRangeRects(r.viewRangeToDom(h)).pop()},limiter:()=>{const u=this.editor.editing.view,m=u.document.selection.editableElement;return m?u.domConverter.mapViewToDom(m.root):null},positions:rne(n,l)}}}function rne(i,t){const e={caret_se:n=>({top:n.bottom+xm,left:n.right,name:"caret_se",config:{withArrow:!1}}),caret_ne:(n,s)=>({top:n.top-s.height-xm,left:n.right,name:"caret_ne",config:{withArrow:!1}}),caret_sw:(n,s)=>({top:n.bottom+xm,left:n.right-s.width,name:"caret_sw",config:{withArrow:!1}}),caret_nw:(n,s)=>({top:n.top-s.height-xm,left:n.right-s.width,name:"caret_nw",config:{withArrow:!1}})};return Object.prototype.hasOwnProperty.call(e,i)?[e[i]]:t!=="rtl"?[e.caret_se,e.caret_sw,e.caret_ne,e.caret_nw]:[e.caret_sw,e.caret_se,e.caret_nw,e.caret_ne]}function CD(i,t){let e;for(const n of i){const s=t.lastIndexOf(n.marker);s>0&&!t.substring(s-1).match(n.pattern)||(!e||s>=e.position)&&(e={marker:n.marker,position:s,minimumCharacters:n.minimumCharacters,pattern:n.pattern})}return e}function TD(i,t){const e=t==0?"*":`{${t},}`,n=Se.features.isRegExpUnicodePropertySupported?`\\p{Ps}\\p{Pi}"'`:`\\(\\[{"'`,s=".";i=i.replace(/[.*+?^${}()\-|[\]\\]/g,"\\$&");const o=`(?:^|[ ${n}])(${i})(${s}${e})$`;return new RegExp(o,"u")}function ane(i){return e=>{const n=CD(i,e);if(!n)return!1;let s=0;n.position!==0&&(s=n.position-1);const o=e.substring(s);return n.pattern.test(o)}}function lne(i,t){let e=0;i.position!==0&&(e=i.position-1);const n=TD(i.marker,0);return t.substring(e).match(n)[2]}function cne(i){return t=>i.filter(n=>(typeof n=="string"?n:String(n.id)).toLowerCase().includes(t.toLowerCase()))}function une(i){const t=i.textNode&&i.textNode.hasAttribute("mention"),e=i.nodeBefore;return t||e&&e.is("$text")&&e.hasAttribute("mention")}function dne(i){const t=i.nodeAfter;return t&&t.is("$text")&&t.hasAttribute("mention")}function hne(i){return!!i}function hy(i){return i.model.markers.has("mention")}class fne extends te{toMentionAttribute(t,e){return yD(t,e)}static get pluginName(){return"Mention"}static get isOfficialPlugin(){return!0}static get requires(){return[jte,one]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function mne(i,t){const e=[];for(const n of t.createRangeIn(i)){const s=n.item;s.is("element","a")&&!s.hasAttribute("href")&&(s.hasAttribute("id")||s.hasAttribute("name"))&&e.push(s)}for(const n of e){const s=n.parent.getChildIndex(n)+1,o=n.getChildren();t.insertChild(s,o,n.parent)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function gne(i){const t=parseFloat(i);return i.endsWith("pt")?ic(t*96/72):i.endsWith("pc")?ic(t*12*96/72):i.endsWith("in")?ic(t*96):i.endsWith("cm")?ic(t*96/2.54):i.endsWith("mm")?ic(t/10*96/2.54):i}function oR(i){return i!==void 0&&i.endsWith("px")}function ic(i){return i.toFixed(2).replace(/\.?0+$/,"")+"px"}function pne(i,t,e){if(!i.childCount)return;const n=new Fo(i.document),s=_ne(i,n);if(!s.length)return;const o={},r=[];for(const a of s)if(a.indent!==void 0){wne(a)||(r.length=0);const l=`${a.id}:${a.indent}`,u=Math.min(a.indent-1,r.length);if(u<r.length&&r[u].id!==a.id&&(r.length=u),u<r.length-1)r.length=u+1;else{const m=yne(a,t);if(u>r.length-1||r[u].listElement.name!=m.type){u==0&&m.type=="ol"&&a.id!==void 0&&o[l]&&(m.startIndex=o[l]);const p=xne(m,n,e);if(oR(a.marginLeft)&&(u==0||oR(r[u-1].marginLeft))){let v=a.marginLeft;u>0&&(v=ic(parseFloat(v)-parseFloat(r[u-1].marginLeft))),n.setStyle("padding-left",v,p)}if(r.length==0){const v=a.element.parent,C=v.getChildIndex(a.element)+1;n.insertChild(C,p,v)}else{const v=r[u-1].listItemElements;n.appendChild(p,v[v.length-1])}r[u]={...a,listElement:p,listItemElements:[]},u==0&&a.id!==void 0&&(o[l]=m.startIndex||1)}}const h=a.element.name=="li"?a.element:n.createElement("li");n.appendChild(h,r[u].listElement),r[u].listItemElements.push(h),u==0&&a.id!==void 0&&o[l]++,a.element!=h&&n.appendChild(a.element,h),Ene(a.element,n),n.removeStyle("text-indent",a.element),n.removeStyle("margin-left",a.element)}else{const l=r.find(u=>u.marginLeft==a.marginLeft);if(l){const u=l.listItemElements;n.appendChild(a.element,u[u.length-1]),n.removeStyle("margin-left",a.element)}else r.length=0}}function bne(i,t){for(const e of t.createRangeIn(i)){const n=e.item;if(n.is("element","li")){const s=n.getChild(0);s&&s.is("element","p")&&t.unwrapElement(s)}}}function _ne(i,t){const e=t.createRangeIn(i),n=[],s=new Set;for(const o of e.getItems()){if(!o.is("element")||!o.name.match(/^(p|h\d+|li|div)$/))continue;let r=Sne(o);if(r!==void 0&&parseFloat(r)==0&&!Array.from(o.getClassNames()).find(a=>a.startsWith("MsoList"))&&(r=void 0),o.hasStyle("mso-list")||r!==void 0&&s.has(r)){const a=kne(o);n.push({element:o,id:a.id,order:a.order,indent:a.indent,marginLeft:r}),r!==void 0&&s.add(r)}else s.clear()}return n}function wne(i){const t=i.element.previousSibling;return rR(t||i.element.parent)}function rR(i){return i.is("element","ol")||i.is("element","ul")}function yne(i,t){const e=new RegExp(`@list l${i.id}:level${i.indent}\\s*({[^}]*)`,"gi"),n=/mso-level-number-format:([^;]{0,100});/gi,s=/mso-level-start-at:\s{0,100}([0-9]{0,10})\s{0,100};/gi,o=new RegExp(`@list\\s+l${i.id}:level\\d\\s*{[^{]*mso-level-text:"%\\d\\\\.`,"gi"),r=new RegExp(`@list l${i.id}:level\\d\\s*{[^{]*mso-level-number-format:`,"gi"),a=o.exec(t),l=r.exec(t),u=a&&!l,h=e.exec(t);let m="decimal",p="ol",v=null;if(h&&h[1]){const C=n.exec(h[1]);if(C&&C[1]&&(m=C[1].trim(),p=m!=="bullet"&&m!=="image"?"ol":"ul"),m==="bullet"){const x=vne(i.element);x&&(m=x)}else{const x=s.exec(h[1]);x&&x[1]&&(v=parseInt(x[1]))}u&&(p="ol")}return{type:p,startIndex:v,style:Tne(m),isLegalStyleList:u}}function vne(i){if(i.name=="li"&&i.parent.name=="ul"&&i.parent.hasAttribute("type"))return i.parent.getAttribute("type");const t=Cne(i);if(!t)return null;const e=t._data;return e==="o"?"circle":e==="·"?"disc":e==="§"?"square":null}function Cne(i){if(i.getChild(0).is("$text"))return null;for(const t of i.getChildren()){if(!t.is("element","span"))continue;const e=t.getChild(0);if(e)return e.is("$text")?e:e.getChild(0)}/* istanbul ignore next -- @preserve */return null}function Tne(i){if(i.startsWith("arabic-leading-zero"))return"decimal-leading-zero";switch(i){case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return i;default:return null}}function xne(i,t,e){const n=t.createElement(i.type);return i.style&&t.setStyle("list-style-type",i.style,n),i.startIndex&&i.startIndex>1&&t.setAttribute("start",i.startIndex,n),i.isLegalStyleList&&e&&t.addClass("legal-list",n),n}function kne(i){const t=i.getStyle("mso-list");if(t===void 0)return{};const e=t.match(/(^|\s{1,100})l(\d+)/i),n=t.match(/\s{0,100}lfo(\d+)/i),s=t.match(/\s{0,100}level(\d+)/i);return e&&n&&s?{id:e[2],order:n[1],indent:parseInt(s[1])}:{indent:1}}function Ene(i,t){const e=new Ts({name:"span",styles:{"mso-list":"Ignore"}}),n=t.createRangeIn(i);for(const s of n)s.type==="elementStart"&&e.match(s.item)&&t.remove(s.item)}function Sne(i){const t=i.getStyle("margin-left");return t===void 0||t.endsWith("px")?t:gne(t)}function Ane(i,t){if(!i.childCount)return;const e=new Fo(i.document),n=Ine(i,e);Pne(n,i,e),Vne(n,i,e),Mne(i,e);const s=Nne(i,e);s.length&&One(s,Dne(t),e)}function Rne(i){return btoa(i.match(/\w{2}/g).map(t=>String.fromCharCode(parseInt(t,16))).join(""))}function Ine(i,t){const e=t.createRangeIn(i),n=new Ts({name:/v:(.+)/}),s=[];for(const o of e){if(o.type!="elementStart")continue;const r=o.item,a=r.previousSibling,l=a&&a.is("element")?a.name:null,u=["Chart"],h=n.match(r),m=r.getAttribute("o:gfxdata"),p=l==="v:shapetype",v=m&&u.some(C=>r.getAttribute("id").includes(C));h&&m&&!p&&!v&&s.push(o.item.getAttribute("id"))}return s}function Pne(i,t,e){const n=e.createRangeIn(t),s=new Ts({name:"img"}),o=[];for(const r of n)if(r.item.is("element")&&s.match(r.item)){const a=r.item,l=a.getAttribute("v:shapes")?a.getAttribute("v:shapes").split(" "):[];l.length&&l.every(u=>i.indexOf(u)>-1)?o.push(a):a.getAttribute("src")||o.push(a)}for(const r of o)e.remove(r)}function Mne(i,t){const e=t.createRangeIn(i),n=new Ts({name:/v:(.+)/}),s=[];for(const o of e)o.type=="elementStart"&&n.match(o.item)&&s.push(o.item);for(const o of s)t.remove(o)}function Vne(i,t,e){const n=e.createRangeIn(t),s=[];for(const a of n)if(a.type=="elementStart"&&a.item.is("element","v:shape")){const l=a.item.getAttribute("id");if(i.includes(l))continue;o(a.item.parent.getChildren(),l)||s.push(a.item)}for(const a of s){const l={src:r(a)};a.hasAttribute("alt")&&(l.alt=a.getAttribute("alt"));const u=e.createElement("img",l);e.insertChild(a.index+1,u,a.parent)}function o(a,l){for(const u of a){/* istanbul ignore else -- @preserve */if(u.is("element")&&(u.name=="img"&&u.getAttribute("v:shapes")==l||o(u.getChildren(),l)))return!0}return!1}function r(a){for(const l of a.getChildren()){/* istanbul ignore else -- @preserve */if(l.is("element")&&l.getAttribute("src"))return l.getAttribute("src")}}}function Nne(i,t){const e=t.createRangeIn(i),n=new Ts({name:"img"}),s=[];let o=0;for(const r of e)r.item.is("element")&&n.match(r.item)&&(r.item.getAttribute("src").startsWith("file://")&&s.push({element:r.item,imageIndex:o}),o++);return s}function Dne(i){if(!i)return[];const t=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,e=new RegExp("(?:("+t.source+"))([\\da-fA-F\\s]+)\\}","g"),n=i.match(e),s=[];if(n)for(const o of n){let r=!1;o.includes("\\pngblip")?r="image/png":o.includes("\\jpegblip")&&(r="image/jpeg"),r&&s.push({hex:o.replace(t,"").replace(/[^\da-fA-F]/g,""),type:r})}return s}function One(i,t,e){for(let n=0;n<i.length;n++){const{element:s,imageIndex:o}=i[n],r=t[o];if(r){const a=`data:${r.type};base64,${Rne(r.hex)}`;e.setAttribute("src",a,s)}}}function Lne(i){const t=[],e=new Fo(i.document);for(const{item:n}of e.createRangeIn(i))if(n.is("element")){for(const s of n.getClassNames())/\bmso/gi.exec(s)&&e.removeClass(s,n);for(const s of n.getStyleNames())/\bmso/gi.exec(s)&&e.removeStyle(s,n);(n.is("element","w:sdt")||n.is("element","w:sdtpr")&&n.isEmpty||n.is("element","o:p")&&n.isEmpty)&&t.push(n)}for(const n of t){const s=n.parent,o=s.getChildIndex(n);e.insertChild(o,n.getChildren(),s),e.remove(n)}}const Bne=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,Fne=/xmlns:o="urn:schemas-microsoft-com/i;class Une{constructor(t,e=!1){_(this,"document");_(this,"hasMultiLevelListPlugin");this.document=t,this.hasMultiLevelListPlugin=e}isActive(t){return Bne.test(t)||Fne.test(t)}execute(t){const e=new Fo(this.document),{body:n,stylesString:s}=t._parsedData;mne(n,e),pne(n,s,this.hasMultiLevelListPlugin),Ane(n,t.dataTransfer.getData("text/rtf")),Lne(n),t.content=n}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function zne(i,t){for(const e of i.getChildren())if(e.is("element","b")&&e.getStyle("font-weight")==="normal"){const n=i.getChildIndex(e);t.remove(e),t.insertChild(n,e.getChildren(),i)}}function Hne(i,t){const e=new Ep(t.document.stylesProcessor),n=new Ap(e,{renderingMode:"data"}),s=n.blockElements,o=n.inlineObjectElements,r=[];for(const a of t.createRangeIn(i)){const l=a.item;if(l.is("element","br")){const u=aR(l,"forward",t,{blockElements:s,inlineObjectElements:o}),h=aR(l,"backward",t,{blockElements:s,inlineObjectElements:o}),m=lR(u,s);(lR(h,s)||m)&&r.push(l)}}for(const a of r)a.hasClass("Apple-interchange-newline")?t.remove(a):t.replace(a,t.createElement("p"))}function aR(i,t,e,{blockElements:n,inlineObjectElements:s}){let o=e.createPositionAt(i,t=="forward"?"after":"before");return o=o.getLastMatchingPosition(({item:r})=>r.is("element")&&!n.includes(r.name)&&!s.includes(r.name),{direction:t}),t=="forward"?o.nodeAfter:o.nodeBefore}function lR(i,t){return!!i&&i.is("element")&&t.includes(i.name)}const Wne=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;class qne{constructor(t){_(this,"document");this.document=t}isActive(t){return Wne.test(t)}execute(t){const e=new Fo(this.document),{body:n}=t._parsedData;zne(n,e),bne(n,e),Hne(n,e),t.content=n}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function $ne(i,t){for(const e of i.getChildren())e.is("element","table")&&e.hasAttribute("xmlns")&&t.removeAttribute("xmlns",e)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Gne(i,t){for(const e of i.getChildren())if(e.is("element","google-sheets-html-origin")){const n=i.getChildIndex(e);t.remove(e),t.insertChild(n,e.getChildren(),i)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function jne(i,t){for(const e of i.getChildren())e.is("element","table")&&e.getStyle("width")==="0px"&&t.removeStyle("width",e)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Kne(i,t){for(const e of Array.from(i.getChildren()))e.is("element","style")&&t.remove(e)}const Zne=/<google-sheets-html-origin/i;class Yne{constructor(t){_(this,"document");this.document=t}isActive(t){return Zne.test(t)}execute(t){const e=new Fo(this.document),{body:n}=t._parsedData;Gne(n,e),$ne(n,e),jne(n,e),Kne(n,e),t.content=n}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Jne(i){return cR(cR(i)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/(<span\s+style=['"]letter-spacing:[^'"]+?['"]>)[\r\n]+(<\/span>)/g,"$1 $2").replace(/ <\//g," </").replace(/ <o:p><\/o:p>/g," <o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><")}function Xne(i){i.querySelectorAll("span[style*=spacerun]").forEach(t=>{const e=t,n=e.innerText.length||0;e.innerText=Array(n+1).join("  ").substr(0,n)})}function cR(i){return i.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(t,e)=>e.length===1?" ":Array(e.length+1).join("  ").substr(0,e.length))}function Qne(i,t){const e=new DOMParser;i=i.replace(/<!--\[if gte vml 1]>/g,""),i=i.replace(/<o:SmartTagType(?:\s+[^\s>=]+(?:="[^"]*")?)*\s*\/?>/gi,"");const n=Jne(nie(i)),s=e.parseFromString(n,"text/html");Xne(s);const o=s.body.innerHTML,r=eie(s,t),a=tie(s);return{body:r,bodyString:o,styles:a.styles,stylesString:a.stylesString}}function eie(i,t){const e=new Ep(t),n=new Ap(e,{renderingMode:"data"}),s=i.createDocumentFragment(),o=i.body.childNodes;for(;o.length>0;)s.appendChild(o[0]);return n.domToView(s,{skipComments:!0})}function tie(i){const t=[],e=[],n=Array.from(i.getElementsByTagName("style"));for(const s of n)s.sheet&&s.sheet.cssRules&&s.sheet.cssRules.length&&(t.push(s.sheet),e.push(s.innerHTML));return{styles:t,stylesString:e.join(" ")}}function nie(i){const t="</body>",e="</html>",n=i.indexOf(t);if(n<0)return i;const s=i.indexOf(e,n+t.length);return i.substring(0,n+t.length)+(s>=0?i.substring(s):"")}class iie extends te{static get pluginName(){return"PasteFromOffice"}static get isOfficialPlugin(){return!0}static get requires(){return[ls]}init(){const t=this.editor,e=t.plugins.get("ClipboardPipeline"),n=t.editing.view.document,s=[],o=this.editor.plugins.has("MultiLevelList");s.push(new Une(n,o)),s.push(new qne(n)),s.push(new Yne(n)),e.on("inputTransformation",(r,a)=>{if(a._isTransformedWithPasteFromOffice||t.model.document.selection.getFirstPosition().parent.is("element","codeBlock"))return;const u=a.dataTransfer.getData("text/html"),h=s.find(m=>m.isActive(u));h&&(a._parsedData||(a._parsedData=Qne(u,n.stylesProcessor)),h.execute(a),a._isTransformedWithPasteFromOffice=!0)},{priority:"high"})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function _1(i,t){const{modelAttribute:e,styleName:n,viewElement:s,defaultValue:o,reduceBoxSides:r=!1,shouldUpcast:a=()=>!0}=t;i.for("upcast").attributeToAttribute({view:{name:s,styles:{[n]:/[\s\S]+/}},model:{key:e,value:(l,u,h)=>{if(!a(l))return;const m=Er(o,"",h),p=l.getNormalizedStyle(n),v=r?Xm(p):p;if(m!==v)return v}}})}function gv(i,t,e,n){i.for("upcast").add(s=>s.on("element:"+t,(o,r,a)=>{if(!r.modelRange)return;const l=["border-top-width","border-top-color","border-top-style","border-bottom-width","border-bottom-color","border-bottom-style","border-right-width","border-right-color","border-right-style","border-left-width","border-left-color","border-left-style"].filter(x=>r.viewItem.hasStyle(x));if(!l.length)return;const u={styles:l};if(!a.consumable.test(r.viewItem,u))return;const h=[...r.modelRange.getItems({shallow:!0})].pop(),m=h.findAncestor("table",{includeSelf:!0});let p=n;m&&m.getAttribute("tableType")=="layout"&&(p={style:"none",color:"",width:""}),a.consumable.consume(r.viewItem,u);const v={style:r.viewItem.getNormalizedStyle("border-style"),color:r.viewItem.getNormalizedStyle("border-color"),width:r.viewItem.getNormalizedStyle("border-width")},C={style:Xm(v.style),color:Xm(v.color),width:Xm(v.width)};C.style!==p.style&&a.writer.setAttribute(e.style,C.style,h),C.color!==p.color&&a.writer.setAttribute(e.color,C.color,h),C.width!==p.width&&a.writer.setAttribute(e.width,C.width,h)}))}function Md(i,t){const{modelElement:e,modelAttribute:n,styleName:s}=t;i.for("downcast").attributeToAttribute({model:{name:e,key:n},view:o=>({key:"style",value:{[s]:o}})})}function Jm(i,t){const{modelAttribute:e,styleName:n}=t;i.for("downcast").add(s=>s.on(`attribute:${e}:table`,(o,r,a)=>{const{item:l,attributeNewValue:u}=r,{mapper:h,writer:m}=a;if(!a.consumable.consume(r.item,o.name))return;const p=[...h.toViewElement(l).getChildren()].find(v=>v.is("element","table"));u?m.setStyle(n,u,p):m.removeStyle(n,p)}))}function Er(i,t,e){const n=e.modelRange&&Ln(e.modelRange.getItems({shallow:!0})),s=n&&n.is("element")&&n.findAncestor("table",{includeSelf:!0});return s&&s.getAttribute("tableType")==="layout"?t:i}function Xm(i){if(!i)return;const t=["top","right","bottom","left"];if(!t.every(o=>i[o]))return i;const n=i.top;return t.every(o=>i[o]===n)?n:i}function Yt(i,t,e,n,s=1){t!=null&&s!==void 0&&s!==null&&t>s?n.setAttribute(i,t,e):n.removeAttribute(i,e)}function Za(i,t,e={}){const n=i.createElement("tableCell",e);return i.insertElement("paragraph",n),i.insert(n,t),n}function pv(i,t){const e=t.parent.parent,n=parseInt(e.getAttribute("headingColumns")||"0"),{column:s}=i.getCellLocation(t);return!!n&&s<n}function Qm(i,t,e){const{modelAttribute:n}=e;i.extend("tableCell",{allowAttributes:[n]}),_1(t,{viewElement:/^(td|th)$/,...e}),Md(t,{modelElement:"tableCell",...e})}function Sr(i){const t=i.getSelectedElement();return t&&t.is("element","table")?t:i.getFirstPosition().findAncestor("table")}function sie(){return i=>{i.on("element:figure",(t,e,n)=>{if(!n.consumable.test(e.viewItem,{name:!0,classes:"table"}))return;const s=aie(e.viewItem);if(!s||!n.consumable.test(s,{name:!0}))return;n.consumable.consume(e.viewItem,{name:!0,classes:"table"});const o=n.convertItem(s,e.modelCursor),r=Ln(o.modelRange.getItems());if(!r){n.consumable.revert(e.viewItem,{name:!0,classes:"table"});return}n.convertChildren(e.viewItem,n.writer.createPositionAt(r,"end")),n.updateConversionResult(r,e)})}}function oie(){return i=>{i.on("element:table",(t,e,n)=>{const s=e.viewItem;if(!n.consumable.test(s,{name:!0}))return;const{rows:o,headingRows:r,headingColumns:a}=lie(s),l={};a&&(l.headingColumns=a),r&&(l.headingRows=r);const u=n.writer.createElement("table",l);if(n.safeInsert(u,e.modelCursor)){if(n.consumable.consume(s,{name:!0}),o.forEach(h=>n.convertItem(h,n.writer.createPositionAt(u,"end"))),n.convertChildren(s,n.writer.createPositionAt(u,"end")),u.isEmpty){const h=n.writer.createElement("tableRow");n.writer.insert(h,n.writer.createPositionAt(u,"end")),Za(n.writer,n.writer.createPositionAt(h,"end"))}n.updateConversionResult(u,e)}})}}function rie(){return i=>{i.on("element:tr",(t,e)=>{e.viewItem.isEmpty&&e.modelCursor.index==0&&t.stop()},{priority:"high"})}}function uR(i){return t=>{t.on(`element:${i}`,(e,n,{writer:s})=>{if(!n.modelRange)return;const o=n.modelRange.start.nodeAfter,r=s.createPositionAt(o,0);if(n.viewItem.isEmpty){s.insertElement("paragraph",r);return}const a=Array.from(o.getChildren());if(a.every(l=>l.is("element","$marker"))){const l=s.createElement("paragraph");s.insert(l,s.createPositionAt(o,0));for(const u of a)s.move(s.createRangeOn(u),s.createPositionAt(l,"end"))}},{priority:"low"})}}function aie(i){for(const t of i.getChildren())if(t.is("element","table"))return t}function lie(i){let t=0,e;const n=[],s=[];let o;for(const r of Array.from(i.getChildren())){if(r.name!=="tbody"&&r.name!=="thead"&&r.name!=="tfoot")continue;r.name==="thead"&&!o&&(o=r);const a=Array.from(r.getChildren()).filter(u=>u.is("element","tr"));let l=null;for(const u of a){const h=Array.from(u.getChildren()).filter(m=>m.is("element","td")||m.is("element","th"));if(o&&r===o||r.name==="tbody"&&h.length>0&&(l===null||h.length===l)&&h.every(m=>m.is("element","th")))t++,n.push(u);else{s.push(u);const m=cie(u);(!e||m<e)&&(e=m)}l=Math.max(l||0,h.length)}}return{headingRows:t,headingColumns:e||0,rows:[...n,...s]}}function cie(i){let t=0,e=0;const n=Array.from(i.getChildren()).filter(s=>s.name==="th"||s.name==="td");for(;e<n.length&&n[e].name==="th";){const s=n[e],o=parseInt(s.getAttribute("colspan")||"1");t=t+o,e++}return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class pt{constructor(t,e={}){_(this,"_table");_(this,"_startRow");_(this,"_endRow");_(this,"_startColumn");_(this,"_endColumn");_(this,"_includeAllSlots");_(this,"_skipRows");_(this,"_row");_(this,"_rowIndex");_(this,"_column");_(this,"_cellIndex");_(this,"_spannedCells");_(this,"_nextCellAtColumn");_(this,"_jumpedToStartRow",!1);this._table=t,this._startRow=e.row!==void 0?e.row:e.startRow||0,this._endRow=e.row!==void 0?e.row:e.endRow,this._startColumn=e.column!==void 0?e.column:e.startColumn||0,this._endColumn=e.column!==void 0?e.column:e.endColumn,this._includeAllSlots=!!e.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){this._canJumpToStartRow()&&this._jumpToNonSpannedRowClosestToStartRow();const t=this._table.getChild(this._rowIndex);if(!t||this._isOverEndRow())return{done:!0,value:void 0};if(!t.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let e=null;const n=this._getSpanned();if(n)this._includeAllSlots&&!this._shouldSkipSlot()&&(e=this._formatOutValue(n.cell,n.row,n.column));else{const s=t.getChild(this._cellIndex);if(!s)return this._advanceToNextRow();const o=parseInt(s.getAttribute("colspan")||"1"),r=parseInt(s.getAttribute("rowspan")||"1");(o>1||r>1)&&this._recordSpans(s,r,o),this._shouldSkipSlot()||(e=this._formatOutValue(s)),this._nextCellAtColumn=this._column+o}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,e||this.next()}skipRow(t){this._skipRows.add(t)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return this._endRow!==void 0&&this._row>this._endRow}_isOverEndColumn(){return this._endColumn!==void 0&&this._column>this._endColumn}_formatOutValue(t,e=this._row,n=this._column){return{done:!1,value:new uie(this,t,e,n)}}_shouldSkipSlot(){const t=this._skipRows.has(this._row),e=this._row<this._startRow,n=this._column<this._startColumn,s=this._endColumn!==void 0&&this._column>this._endColumn;return t||e||n||s}_getSpanned(){const t=this._spannedCells.get(this._row);return t&&t.get(this._column)||null}_recordSpans(t,e,n){const s={cell:t,row:this._row,column:this._column};for(let o=this._row;o<this._row+e;o++)for(let r=this._column;r<this._column+n;r++)(o!=this._row||r!=this._column)&&this._markSpannedCell(o,r,s)}_markSpannedCell(t,e,n){this._spannedCells.has(t)||this._spannedCells.set(t,new Map),this._spannedCells.get(t).set(e,n)}_canJumpToStartRow(){return!!this._startRow&&this._startRow>0&&!this._jumpedToStartRow}_jumpToNonSpannedRowClosestToStartRow(){const t=this._getRowLength(0);for(let e=this._startRow;!this._jumpedToStartRow;e--)t===this._getRowLength(e)&&(this._row=e,this._rowIndex=e,this._jumpedToStartRow=!0)}_getRowLength(t){return[...this._table.getChild(t).getChildren()].reduce((n,s)=>n+parseInt(s.getAttribute("colspan")||"1"),0)}}class uie{constructor(t,e,n,s){_(this,"cell");_(this,"row");_(this,"column");_(this,"cellAnchorRow");_(this,"cellAnchorColumn");_(this,"_cellIndex");_(this,"_rowIndex");_(this,"_table");this.cell=e,this.row=t._row,this.column=t._column,this.cellAnchorRow=n,this.cellAnchorColumn=s,this._cellIndex=t._cellIndex,this._rowIndex=t._rowIndex,this._table=t._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||"1")}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||"1")}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}function dR(i,t){return(e,{writer:n})=>{const s=e.getAttribute("headingRows")||0,o=n.createContainerElement("table",null,[]),r=n.createContainerElement("figure",{class:"table"},o);s>0&&n.insert(n.createPositionAt(o,"end"),n.createContainerElement("thead",null,n.createSlot(a=>a.is("element","tableRow")&&a.index<s))),s<i.getRows(e)&&n.insert(n.createPositionAt(o,"end"),n.createContainerElement("tbody",null,n.createSlot(a=>a.is("element","tableRow")&&a.index>=s)));for(const{positionOffset:a,filter:l}of t.additionalSlots)n.insert(n.createPositionAt(o,a),n.createSlot(l));return n.insert(n.createPositionAt(o,"after"),n.createSlot(a=>a.is("element","tableRow")?!1:!t.additionalSlots.some(({filter:l})=>l(a)))),t.asWidget?hie(r,n):r}}function die(){return(i,{writer:t})=>i.isEmpty?t.createEmptyElement("tr"):t.createContainerElement("tr")}function hR(i={}){return(t,{writer:e})=>{const n=t.parent,s=n.parent,o=s.getChildIndex(n),r=new pt(s,{row:o}),a=s.getAttribute("headingRows")||0,l=s.getAttribute("headingColumns")||0;let u=null;for(const h of r)if(h.cell==t){const p=h.row<a||h.column<l?"th":"td";u=i.asWidget?l1(e.createEditableElement(p),e,{withAriaRole:!1}):e.createContainerElement(p);break}return u}}function fR(i={}){return(t,{writer:e})=>{if(!t.parent.is("element","tableCell")||!xD(t))return null;if(i.asWidget)return e.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const n=e.createContainerElement("p");return e.setCustomProperty("dataPipeline:transparentRendering",!0,n),n}}}function xD(i){return i.parent.childCount==1&&!fie(i)}function hie(i,t){return t.setCustomProperty("table",!0,i),a1(i,t,{hasSelectionHandle:!0})}function fie(i){for(const t of i.getAttributeKeys())if(!(t.startsWith("selection:")||t=="htmlEmptyBlock"))return!0;return!1}class mie extends $e{refresh(){const t=this.editor.model,e=t.document.selection,n=t.schema;this.isEnabled=gie(e,n)}execute(t={}){const e=this.editor,n=e.model,s=e.plugins.get("TableUtils"),o=e.config.get("table.defaultHeadings.rows"),r=e.config.get("table.defaultHeadings.columns");t.headingRows===void 0&&o&&(t.headingRows=o),t.headingColumns===void 0&&r&&(t.headingColumns=r),n.change(a=>{const l=s.createTable(a,t);n.insertObject(l,null,null,{findOptimalPosition:"auto"}),a.setSelection(a.createPositionAt(l.getNodeByPath([0,0,0]),0))})}}function gie(i,t){const e=i.getFirstPosition().parent,n=e===e.root?e:e.parent;return t.checkChild(n,"table")}class mR extends $e{constructor(e,n={}){super(e);_(this,"order");this.order=n.order||"below"}refresh(){const e=this.editor.model.document.selection,s=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=s}execute(){const e=this.editor,n=e.model.document.selection,s=e.plugins.get("TableUtils"),o=this.order==="above",r=s.getSelectionAffectedTableCells(n),a=s.getRowIndexes(r),l=o?a.first:a.last,u=r[0].findAncestor("table");s.insertRows(u,{at:o?l:l+1,copyStructureFromAbove:!o})}}class gR extends $e{constructor(e,n={}){super(e);_(this,"order");this.order=n.order||"right"}refresh(){const e=this.editor.model.document.selection,s=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=s}execute(){const e=this.editor,n=e.model.document.selection,s=e.plugins.get("TableUtils"),o=this.order==="left",r=s.getSelectionAffectedTableCells(n),a=s.getColumnIndexes(r),l=o?a.first:a.last,u=r[0].findAncestor("table");s.insertColumns(u,{columns:1,at:o?l:l+1})}}class pR extends $e{constructor(e,n={}){super(e);_(this,"direction");this.direction=n.direction||"horizontally"}refresh(){const n=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=n.length===1}execute(){const e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];this.direction==="horizontally"?e.splitCellHorizontally(n,2):e.splitCellVertically(n,2)}}function kD(i,t,e){const{startRow:n,startColumn:s,endRow:o,endColumn:r}=t,a=e.createElement("table"),l=i.getAttribute("tableType");l&&e.setAttribute("tableType",l,a);const u=o-n+1;for(let m=0;m<u;m++)e.insertElement("tableRow",a,"end");const h=[...new pt(i,{startRow:n,endRow:o,startColumn:s,endColumn:r,includeAllSlots:!0})];for(const{row:m,column:p,cell:v,isAnchor:C,cellAnchorRow:x,cellAnchorColumn:k}of h){const S=m-n,I=a.getChild(S);if(!C)(x<n||k<s)&&Za(e,e.createPositionAt(I,"end"));else{const P=e.cloneElement(v);e.append(P,I),ID(P,m,p,o,r,e)}}return pie(a,i,n,s,e),a}function ED(i,t,e=0){const n=[],s=new pt(i,{startRow:e,endRow:t-1});for(const o of s){const{row:r,cellHeight:a}=o,l=r+a-1;r<t&&t<=l&&n.push(o)}return n}function SD(i,t,e){const n=i.parent,s=n.parent,o=n.index,r=parseInt(i.getAttribute("rowspan")),a=t-o,l={},u=r-a;u>1&&(l.rowspan=u);const h=parseInt(i.getAttribute("colspan")||"1");h>1&&(l.colspan=h);const m=o,p=m+a,v=[...new pt(s,{startRow:m,endRow:p,includeAllSlots:!0})];let C=null,x;for(const k of v){const{row:S,column:I,cell:P}=k;P===i&&x===void 0&&(x=I),x!==void 0&&x===I&&S===p&&(C=Za(e,k.getPositionBefore(),l))}return Yt("rowspan",a,i,e),C}function AD(i,t){const e=[],n=new pt(i);for(const s of n){const{column:o,cellWidth:r}=s,a=o+r-1;o<t&&t<=a&&e.push(s)}return e}function RD(i,t,e,n){const s=parseInt(i.getAttribute("colspan")),o=e-t,r={},a=s-o;a>1&&(r.colspan=a);const l=parseInt(i.getAttribute("rowspan")||"1");l>1&&(r.rowspan=l);const u=Za(n,n.createPositionAfter(i),r);return Yt("colspan",o,i,n),u}function ID(i,t,e,n,s,o){const r=parseInt(i.getAttribute("colspan")||"1"),a=parseInt(i.getAttribute("rowspan")||"1");if(e+r-1>s){const h=s-e+1;Yt("colspan",h,i,o,1)}if(t+a-1>n){const h=n-t+1;Yt("rowspan",h,i,o,1)}}function pie(i,t,e,n,s){const o=parseInt(t.getAttribute("headingRows")||"0");if(o>0){const a=o-e;Yt("headingRows",a,i,s,0)}const r=parseInt(t.getAttribute("headingColumns")||"0");if(r>0){const a=r-n;Yt("headingColumns",a,i,s,0)}}function bv(i,t){const e=t.getColumns(i),n=new Array(e).fill(0);for(const{column:o}of new pt(i))n[o]++;const s=n.reduce((o,r,a)=>r?o:[...o,a],[]);if(s.length>0){const o=s[s.length-1];return t.removeColumns(i,{at:o}),!0}return!1}function _v(i,t){const e=[],n=t.getRows(i);for(let s=0;s<n;s++)i.getChild(s).isEmpty&&e.push(s);if(e.length>0){const s=e[e.length-1];return t.removeRows(i,{at:s}),!0}return!1}function w1(i,t){bv(i,t)||_v(i,t)}function PD(i,t){const e=Array.from(new pt(i,{startColumn:t.firstColumn,endColumn:t.lastColumn,row:t.lastRow}));if(e.every(({cellHeight:o})=>o===1))return t.lastRow;const s=e[0].cellHeight-1;return t.lastRow+s}function MD(i,t){const e=Array.from(new pt(i,{startRow:t.firstRow,endRow:t.lastRow,column:t.lastColumn}));if(e.every(({cellWidth:o})=>o===1))return t.lastColumn;const s=e[0].cellWidth-1;return t.lastColumn+s}class km extends $e{constructor(e,n){super(e);_(this,"direction");_(this,"isHorizontal");this.direction=n.direction,this.isHorizontal=this.direction=="right"||this.direction=="left"}refresh(){const e=this._getMergeableCell();this.value=e,this.isEnabled=!!e}execute(){const e=this.editor.model,n=e.document,o=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(n.selection)[0],r=this.value,a=this.direction;e.change(l=>{const u=a=="right"||a=="down",h=u?o:r,m=u?r:o,p=m.parent;wie(m,h,l);const v=this.isHorizontal?"colspan":"rowspan",C=parseInt(o.getAttribute(v)||"1"),x=parseInt(r.getAttribute(v)||"1");l.setAttribute(v,C+x,h),l.setSelection(l.createRangeIn(h));const k=this.editor.plugins.get("TableUtils"),S=p.findAncestor("table");w1(S,k)})}_getMergeableCell(){const n=this.editor.model.document,s=this.editor.plugins.get("TableUtils"),o=s.getTableCellsContainingSelection(n.selection)[0];if(!o)return;const r=this.isHorizontal?bie(o,this.direction,s):_ie(o,this.direction,s);if(!r)return;const a=this.isHorizontal?"rowspan":"colspan",l=parseInt(o.getAttribute(a)||"1");if(parseInt(r.getAttribute(a)||"1")===l)return r}}function bie(i,t,e){const s=i.parent.parent,o=t=="right"?i.nextSibling:i.previousSibling,r=(s.getAttribute("headingColumns")||0)>0;if(!o)return;const a=t=="right"?i:o,l=t=="right"?o:i,{column:u}=e.getCellLocation(a),{column:h}=e.getCellLocation(l),m=parseInt(a.getAttribute("colspan")||"1"),p=pv(e,a),v=pv(e,l);return r&&p!=v?void 0:u+m===h?o:void 0}function _ie(i,t,e){const n=i.parent,s=n.parent,o=s.getChildIndex(n);if(t=="down"&&o===e.getRows(s)-1||t=="up"&&o===0)return null;const r=parseInt(i.getAttribute("rowspan")||"1"),a=s.getAttribute("headingRows")||0,l=t=="down"&&o+r===a,u=t=="up"&&o===a;if(a&&(l||u))return null;const h=parseInt(i.getAttribute("rowspan")||"1"),m=t=="down"?o+h:o,p=[...new pt(s,{endRow:m})],C=p.find(k=>k.cell===i).column,x=p.find(({row:k,cellHeight:S,column:I})=>I!==C?!1:t=="down"?k===m:m===k+S);return x&&x.cell?x.cell:null}function wie(i,t,e){bR(i)||(bR(t)&&e.remove(e.createRangeIn(t)),e.move(e.createRangeIn(i),e.createPositionAt(t,"end"))),e.remove(i)}function bR(i){const t=i.getChild(0);return i.childCount==1&&t.is("element","paragraph")&&t.isEmpty}class yie extends $e{refresh(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection),n=e[0];if(n){const s=n.findAncestor("table"),r=t.getRows(s)-1,a=t.getRowIndexes(e),l=a.first===0&&a.last===r;this.isEnabled=!l}else this.isEnabled=!1}execute(){const t=this.editor.model,e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(t.document.selection),s=e.getRowIndexes(n),o=n[0],r=o.findAncestor("table"),a=e.getCellLocation(o).column;t.change(l=>{const u=s.last-s.first+1;e.removeRows(r,{at:s.first,rows:u});const h=vie(r,s.first,a,e.getRows(r));l.setSelection(l.createPositionAt(h,0))})}}function vie(i,t,e,n){const s=i.getChild(Math.min(t,n-1));let o=s.getChild(0),r=0;for(const a of s.getChildren()){if(r>e)return o;o=a,r+=parseInt(a.getAttribute("colspan")||"1")}return o}class Cie extends $e{refresh(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection),n=e[0];if(n){const s=n.findAncestor("table"),o=t.getColumns(s),{first:r,last:a}=t.getColumnIndexes(e);this.isEnabled=a-r<o-1}else this.isEnabled=!1}execute(){const t=this.editor.plugins.get("TableUtils"),[e,n]=xie(this.editor.model.document.selection,t),s=e.parent.parent,o=[...new pt(s)],r={first:o.find(l=>l.cell===e).column,last:o.find(l=>l.cell===n).column},a=Tie(o,e,n,r);this.editor.model.change(l=>{const u=r.last-r.first+1;t.removeColumns(s,{at:r.first,columns:u}),l.setSelection(l.createPositionAt(a,0))})}}function Tie(i,t,e,n){return parseInt(e.getAttribute("colspan")||"1")>1?e:t.previousSibling||e.nextSibling?e.nextSibling||t.previousSibling:n.first?i.reverse().find(({column:o})=>o<n.first).cell:i.reverse().find(({column:o})=>o>n.last).cell}function xie(i,t){const e=t.getSelectionAffectedTableCells(i),n=e[0],s=e.pop(),o=[n,s];return n.isBefore(s)?o:o.reverse()}class kie extends $e{refresh(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,n=t.getSelectionAffectedTableCells(e.document.selection);if(n.length===0){this.isEnabled=!1,this.value=!1;return}const s=n[0].findAncestor("table");this.isEnabled=e.schema.checkAttribute(s,"headingRows"),this.value=n.every(o=>this._isInHeading(o,o.parent.parent))}execute(t={}){if(t.forceValue===this.value)return;const e=this.editor.plugins.get("TableUtils"),n=this.editor.model,s=e.getSelectionAffectedTableCells(n.document.selection),o=s[0].findAncestor("table"),{first:r,last:a}=e.getRowIndexes(s),l=this.value?r:a+1,u=o.getAttribute("headingRows")||0;n.change(h=>{if(l){const m=l>u?u:0,p=ED(o,l,m);for(const{cell:v}of p)SD(v,l,h)}Yt("headingRows",l,o,h,0)})}_isInHeading(t,e){const n=parseInt(e.getAttribute("headingRows")||"0");return!!n&&t.parent.index<n}}class Eie extends $e{refresh(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,n=t.getSelectionAffectedTableCells(e.document.selection);if(n.length===0){this.isEnabled=!1,this.value=!1;return}const s=n[0].findAncestor("table");this.isEnabled=e.schema.checkAttribute(s,"headingColumns"),this.value=n.every(o=>pv(t,o))}execute(t={}){if(t.forceValue===this.value)return;const e=this.editor.plugins.get("TableUtils"),n=this.editor.model,s=e.getSelectionAffectedTableCells(n.document.selection),o=s[0].findAncestor("table"),{first:r,last:a}=e.getColumnIndexes(s),l=this.value?r:a+1;n.change(u=>{if(l){const h=AD(o,l);for(const{cell:m,column:p}of h)RD(m,p,l,u)}Yt("headingColumns",l,o,u,0)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Sie=5,wv=40,Aie=2,Rie=3;function Iie(i){const t=new Set;for(const e of i.document.differ.getChanges()){let n=null;switch(e.type){case"insert":n=["table","tableRow","tableCell"].includes(e.name)?e.position:null;break;case"remove":n=["tableRow","tableCell"].includes(e.name)?e.position:null;break;case"attribute":e.range.start.nodeAfter&&(n=["table","tableRow","tableCell"].includes(e.range.start.nodeAfter.name)?e.range.start:null);break}if(!n)continue;const s=n.nodeAfter&&n.nodeAfter.is("element","table")?n.nodeAfter:n.findAncestor("table");for(const o of i.createRangeOn(s).getItems())o.is("element","table")&&Ph(o)&&t.add(o)}return t}function Pie(i,t){return wv*100/VD(i,t)}function VD(i,t){const e=_R(i,"tbody",t)||_R(i,"thead",t),n=t.editing.view.domConverter.mapViewToDom(e);return yv(n)}function _R(i,t,e){return[...[...e.editing.mapper.toViewElement(i).getChildren()].find(o=>o.is("element","table")).getChildren()].find(o=>o.is("element",t))}function yv(i){const t=de.window.getComputedStyle(i);return t.boxSizing==="border-box"?parseFloat(t.width)-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)-parseFloat(t.borderLeftWidth)-parseFloat(t.borderRightWidth):parseFloat(t.width)}function Mie(i,t){const e=t.getCellLocation(i).column,n=i.getAttribute("colspan")||1;return{leftEdge:e,rightEdge:e+n-1}}function pi(i){const t=Math.pow(10,Aie),e=typeof i=="number"?i:parseFloat(i);return Math.round(e*t)/t}function Vie(i,t,e){return i<=t?pi(t):i>=e?pi(e):pi(i)}function Nie(i,t){return Array(i).fill(t)}function ah(i){return i.map(t=>typeof t=="number"?t:parseFloat(t)).filter(t=>!Number.isNaN(t)).reduce((t,e)=>t+e,0)}function y1(i){const t=i.map(s=>s==="auto"?s:parseFloat(s.replace("%","")));let e=Die(t);const n=ah(e);return n!==100&&(e=e.map(s=>pi(s*100/n)).map((s,o,r)=>{if(!(o===r.length-1))return s;const l=ah(r);return pi(s+100-l)})),e.map(s=>s+"%")}function Die(i){const t=i.filter(s=>s==="auto").length;if(t===0)return i.map(s=>pi(s));const e=ah(i),n=Math.max((100-e)/t,Sie);return i.map(s=>s==="auto"?n:s).map(s=>pi(s))}function Oie(i){const t=de.window.getComputedStyle(i);return t.boxSizing==="border-box"?parseInt(t.width):parseFloat(t.width)+parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)+parseFloat(t.borderWidth)}function ND(i,t,e,n){for(let s=0;s<Math.max(e.length,i.length);s++){const o=i[s],r=e[s];r?o?n.setAttribute("columnWidth",r,o):n.appendElement("tableColumn",{columnWidth:r},t):n.remove(o)}}function Ph(i){if(i.is("element","tableColumnGroup"))return i;const t=i.getChildren();return Array.from(t).find(e=>e.is("element","tableColumnGroup"))}function Mh(i){const t=Ph(i);return t?Array.from(t.getChildren()):[]}function Lie(i){return Mh(i).map(t=>t.getAttribute("columnWidth"))}function Bie(i,t){return Mh(i).reduce((n,s)=>{const o=s.getAttribute("columnWidth"),r=s.getAttribute("colSpan");if(!r)return n.push(o),n;for(let a=0;a<r;a++)n.push(o);return t.removeAttribute("colSpan",s),n},[])}class xn extends te{static get pluginName(){return"TableUtils"}static get isOfficialPlugin(){return!0}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(t){const e=t.parent,n=e.parent,s=n.getChildIndex(e),o=new pt(n,{row:s});for(const{cell:r,row:a,column:l}of o)if(r===t)return{row:a,column:l};/* istanbul ignore next -- @preserve */}createTable(t,e){const n=t.createElement("table"),s=e.rows||2,o=e.columns||2;return fy(t,n,0,s,o),e.headingRows&&Yt("headingRows",Math.min(e.headingRows,s),n,t,0),e.headingColumns&&Yt("headingColumns",Math.min(e.headingColumns,o),n,t,0),n}insertRows(t,e={}){const n=this.editor.model,s=e.at||0,o=e.rows||1,r=e.copyStructureFromAbove!==void 0,a=e.copyStructureFromAbove?s-1:s,l=this.getRows(t),u=this.getColumns(t);if(s>l)throw new V("tableutils-insertrows-insert-out-of-range",this,{options:e});n.change(h=>{const m=t.getAttribute("headingRows")||0;if(m>s&&Yt("headingRows",m+o,t,h,0),!r&&(s===0||s===l)){fy(h,t,s,o,u);return}const p=r?Math.max(s,a):s,v=new pt(t,{endRow:p}),C=new Array(u).fill(1);for(const{row:x,column:k,cellHeight:S,cellWidth:I,cell:P}of v){const O=x+S-1,D=x<s&&s<=O,Y=x<=a&&a<=O;D?(h.setAttribute("rowspan",S+o,P),C[k]=-I):r&&Y&&(C[k]=I)}for(let x=0;x<o;x++){const k=h.createElement("tableRow");h.insert(k,t,s);for(let S=0;S<C.length;S++){const I=C[S],P=h.createPositionAt(k,"end");I>0&&Za(h,P,I>1?{colspan:I}:void 0),S+=Math.abs(I)-1}}})}insertColumns(t,e={}){const n=this.editor.model,s=e.at||0,o=e.columns||1;n.change(r=>{const a=t.getAttribute("headingColumns");s<a&&r.setAttribute("headingColumns",a+o,t);const l=this.getColumns(t);if(s===0||l===s){for(const h of t.getChildren())h.is("element","tableRow")&&sc(o,r,r.createPositionAt(h,s?"end":0));return}const u=new pt(t,{column:s,includeAllSlots:!0});for(const h of u){const{row:m,cell:p,cellAnchorColumn:v,cellAnchorRow:C,cellWidth:x,cellHeight:k}=h;if(v<s){r.setAttribute("colspan",x+o,p);const S=C+k-1;for(let I=m;I<=S;I++)u.skipRow(I)}else sc(o,r,h.getPositionBefore())}})}removeRows(t,e){const n=this.editor.model,s=e.rows||1,o=this.getRows(t),r=e.at,a=r+s-1;if(a>o-1)throw new V("tableutils-removerows-row-index-out-of-range",this,{table:t,options:e});n.change(l=>{const u={first:r,last:a},{cellsToMove:h,cellsToTrim:m}=zie(t,u);if(h.size){const p=a+1;Hie(t,p,h,l)}for(let p=a;p>=r;p--)l.remove(t.getChild(p));for(const{rowspan:p,cell:v}of m)Yt("rowspan",p,v,l);Uie(t,u,l),bv(t,this)||_v(t,this)})}removeColumns(t,e){const n=this.editor.model,s=e.at,o=e.columns||1,r=e.at+o-1;n.change(a=>{Fie(t,{first:s,last:r},a);const l=Mh(t);for(let u=r;u>=s;u--){for(const{cell:h,column:m,cellWidth:p}of[...new pt(t)])m<=u&&p>1&&m+p>u?Yt("colspan",p-1,h,a):m===u&&a.remove(h);if(l[u]){const h=u===0?l[1]:l[u-1],m=parseFloat(l[u].getAttribute("columnWidth")),p=parseFloat(h.getAttribute("columnWidth"));a.remove(l[u]),a.setAttribute("columnWidth",m+p+"%",h)}}_v(t,this)||bv(t,this)})}splitCellVertically(t,e=2){const n=this.editor.model,o=t.parent.parent,r=parseInt(t.getAttribute("rowspan")||"1"),a=parseInt(t.getAttribute("colspan")||"1");n.change(l=>{if(a>1){const{newCellsSpan:u,updatedSpan:h}=wR(a,e);Yt("colspan",h,t,l);const m={};u>1&&(m.colspan=u),r>1&&(m.rowspan=r);const p=a>e?e-1:a-1;sc(p,l,l.createPositionAfter(t),m)}if(a<e){const u=e-a,h=[...new pt(o)],{column:m}=h.find(({cell:x})=>x===t),p=h.filter(({cell:x,cellWidth:k,column:S})=>{const I=x!==t&&S===m,P=S<m&&S+k>m;return I||P});for(const{cell:x,cellWidth:k}of p)l.setAttribute("colspan",k+u,x);const v={};r>1&&(v.rowspan=r),sc(u,l,l.createPositionAfter(t),v);const C=o.getAttribute("headingColumns")||0;C>m&&Yt("headingColumns",C+u,o,l)}})}splitCellHorizontally(t,e=2){const n=this.editor.model,s=t.parent,o=s.parent,r=o.getChildIndex(s),a=parseInt(t.getAttribute("rowspan")||"1"),l=parseInt(t.getAttribute("colspan")||"1");n.change(u=>{if(a>1){const h=[...new pt(o,{startRow:r,endRow:r+a-1,includeAllSlots:!0})],{newCellsSpan:m,updatedSpan:p}=wR(a,e);Yt("rowspan",p,t,u);const{column:v}=h.find(({cell:k})=>k===t),C={};m>1&&(C.rowspan=m),l>1&&(C.colspan=l);let x=0;for(const k of h){const{column:S,row:I}=k,P=I>=r+p,O=S===v;x>=m&&O&&(x=0),P&&O&&(x||sc(1,u,k.getPositionBefore(),C),x++)}}if(a<e){const h=e-a,m=[...new pt(o,{startRow:0,endRow:r})];for(const{cell:C,cellHeight:x,row:k}of m)if(C!==t&&k+x>r){const S=x+h;u.setAttribute("rowspan",S,C)}const p={};l>1&&(p.colspan=l),fy(u,o,r+1,h,1,p);const v=o.getAttribute("headingRows")||0;v>r&&Yt("headingRows",v+h,o,u)}})}getColumns(t){return[...t.getChild(0).getChildren()].filter(n=>n.is("element","tableCell")).reduce((n,s)=>{const o=parseInt(s.getAttribute("colspan")||"1");return n+o},0)}getRows(t){return Array.from(t.getChildren()).reduce((e,n)=>n.is("element","tableRow")?e+1:e,0)}createTableWalker(t,e={}){return new pt(t,e)}getSelectedTableCells(t){const e=[];for(const n of this.sortRanges(t.getRanges())){const s=n.getContainedElement();s&&s.is("element","tableCell")&&e.push(s)}return e}getTableCellsContainingSelection(t){const e=[];for(const n of t.getRanges()){const s=n.start.findAncestor("tableCell");s&&e.push(s)}return e}getSelectionAffectedTableCells(t){const e=this.getSelectedTableCells(t);return e.length?e:this.getTableCellsContainingSelection(t)}getRowIndexes(t){const e=t.map(n=>n.parent.index);return this._getFirstLastIndexesObject(e)}getColumnIndexes(t){const e=t[0].findAncestor("table"),s=[...new pt(e)].filter(o=>t.includes(o.cell)).map(o=>o.column);return this._getFirstLastIndexesObject(s)}isSelectionRectangular(t){if(t.length<2||!this._areCellInTheSameTableSection(t))return!1;const e=new Set,n=new Set;let s=0;for(const r of t){const{row:a,column:l}=this.getCellLocation(r),u=parseInt(r.getAttribute("rowspan"))||1,h=parseInt(r.getAttribute("colspan"))||1;e.add(a),n.add(l),u>1&&e.add(a+u-1),h>1&&n.add(l+h-1),s+=u*h}return qie(e,n)==s}sortRanges(t){return Array.from(t).sort(Wie)}_getFirstLastIndexesObject(t){const e=t.sort((o,r)=>o-r),n=e[0],s=e[e.length-1];return{first:n,last:s}}_areCellInTheSameTableSection(t){const e=t[0].findAncestor("table"),n=this.getRowIndexes(t),s=parseInt(e.getAttribute("headingRows"))||0;if(!this._areIndexesInSameSection(n,s))return!1;const o=this.getColumnIndexes(t),r=parseInt(e.getAttribute("headingColumns"))||0;return this._areIndexesInSameSection(o,r)}_areIndexesInSameSection({first:t,last:e},n){const s=t<n,o=e<n;return s===o}}function fy(i,t,e,n,s,o={}){for(let r=0;r<n;r++){const a=i.createElement("tableRow");i.insert(a,t,e),sc(s,i,i.createPositionAt(a,"end"),o)}}function sc(i,t,e,n={}){for(let s=0;s<i;s++)Za(t,e,n)}function wR(i,t){if(i<t)return{newCellsSpan:1,updatedSpan:1};const e=Math.floor(i/t),n=i-e*t+e;return{newCellsSpan:e,updatedSpan:n}}function Fie(i,t,e){const n=i.getAttribute("headingColumns")||0;if(n&&t.first<n){const s=Math.min(n-1,t.last)-t.first+1;e.setAttribute("headingColumns",n-s,i)}}function Uie(i,{first:t,last:e},n){const s=i.getAttribute("headingRows")||0;if(t<s){const o=e<s?s-(e-t+1):t;Yt("headingRows",o,i,n,0)}}function zie(i,{first:t,last:e}){const n=new Map,s=[];for(const{row:o,column:r,cellHeight:a,cell:l}of new pt(i,{endRow:e})){const u=o+a-1;if(o>=t&&o<=e&&u>e){const p=e-o+1,v=a-p;n.set(r,{cell:l,rowspan:v})}if(o<t&&u>=t){let p;u>=e?p=e-t+1:p=u-t+1,s.push({cell:l,rowspan:a-p})}}return{cellsToMove:n,cellsToTrim:s}}function Hie(i,t,e,n){const o=[...new pt(i,{includeAllSlots:!0,row:t})],r=i.getChild(t);let a;for(const{column:l,cell:u,isAnchor:h}of o)if(e.has(l)){const{cell:m,rowspan:p}=e.get(l),v=a?n.createPositionAfter(a):n.createPositionAt(r,0);n.move(n.createRangeOn(m),v),Yt("rowspan",p,m,n),a=m}else h&&(a=u)}function Wie(i,t){const e=i.start,n=t.start;return e.isBefore(n)?-1:1}function qie(i,t){const e=Array.from(i.values()),n=Array.from(t.values()),s=Math.max(...e),o=Math.min(...e),r=Math.max(...n),a=Math.min(...n);return(s-o+1)*(r-a+1)}class $ie extends $e{refresh(){const t=this.editor.plugins.get(xn),e=t.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=t.isSelectionRectangular(e)}execute(){const t=this.editor.model,e=this.editor.plugins.get(xn);t.change(n=>{const s=e.getSelectedTableCells(t.document.selection),o=s.shift(),{mergeWidth:r,mergeHeight:a}=jie(o,s,e);Yt("colspan",r,o,n),Yt("rowspan",a,o,n);for(const u of s)Gie(u,o,n);const l=o.findAncestor("table");w1(l,e),n.setSelection(o,"in")})}}function Gie(i,t,e){yR(i)||(yR(t)&&e.remove(e.createRangeIn(t)),e.move(e.createRangeIn(i),e.createPositionAt(t,"end"))),e.remove(i)}function yR(i){const t=i.getChild(0);return i.childCount==1&&t.is("element","paragraph")&&t.isEmpty}function jie(i,t,e){let n=0,s=0;for(const u of t){const{row:h,column:m}=e.getCellLocation(u);n=vR(u,m,n,"colspan"),s=vR(u,h,s,"rowspan")}const{row:o,column:r}=e.getCellLocation(i),a=n-r,l=s-o;return{mergeWidth:a,mergeHeight:l}}function vR(i,t,e,n){const s=parseInt(i.getAttribute(n)||"1");return Math.max(e,t+s)}class Kie extends $e{constructor(t){super(t),this.affectsData=!1}refresh(){const e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const t=this.editor.model,e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(t.document.selection),s=e.getRowIndexes(n),o=n[0].findAncestor("table"),r=[];for(let a=s.first;a<=s.last;a++)for(const l of o.getChild(a).getChildren())r.push(t.createRangeOn(l));t.change(a=>{a.setSelection(r)})}}class Zie extends $e{constructor(t){super(t),this.affectsData=!1}refresh(){const e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,n=t.getSelectionAffectedTableCells(e.document.selection),s=n[0],o=n.pop(),r=s.findAncestor("table"),a=t.getCellLocation(s),l=t.getCellLocation(o),u=Math.min(a.column,l.column),h=Math.max(a.column,l.column),m=[];for(const p of new pt(r,{startColumn:u,endColumn:h}))m.push(e.createRangeOn(p.cell));e.change(p=>{p.setSelection(m)})}}function Yie(i){i.document.registerPostFixer(t=>Jie(t,i))}function Jie(i,t){const e=t.document.differ.getChanges();let n=!1;const s=new Set;for(const o of e){let r=null;o.type=="insert"&&o.name=="table"&&(r=o.position.nodeAfter),(o.type=="insert"||o.type=="remove")&&(o.name=="tableRow"||o.name=="tableCell")&&(r=o.position.findAncestor("table")),nse(o)&&(r=o.range.start.findAncestor("table")),r&&!s.has(r)&&(n=Xie(r,i)||n,n=Qie(r,i)||n,s.add(r))}return n}function Xie(i,t){let e=!1;const n=ese(i);if(n.length){e=!0;for(const s of n)Yt("rowspan",s.rowspan,s.cell,t,1)}return e}function Qie(i,t){let e=!1;const n=tse(i),s=[];for(const[l,u]of n.entries())!u&&i.getChild(l).is("element","tableRow")&&s.push(l);if(s.length){e=!0;for(const l of s.reverse())t.remove(i.getChild(l)),n.splice(l,1)}const o=n.filter((l,u)=>i.getChild(u).is("element","tableRow")),r=o[0];if(!o.every(l=>l===r)){const l=o.reduce((u,h)=>h>u?h:u,0);for(const[u,h]of o.entries()){const m=l-h;if(m){for(let p=0;p<m;p++)Za(t,t.createPositionAt(i.getChild(u),"end"));e=!0}}}return e}function ese(i){const t=parseInt(i.getAttribute("headingRows")||"0"),e=Array.from(i.getChildren()).reduce((s,o)=>o.is("element","tableRow")?s+1:s,0),n=[];for(const{row:s,cell:o,cellHeight:r}of new pt(i)){if(r<2)continue;const l=s<t?t:e;if(s+r>l){const u=l-s;n.push({cell:o,rowspan:u})}}return n}function tse(i){const t=new Array(i.childCount).fill(0);for(const{rowIndex:e}of new pt(i,{includeAllSlots:!0}))t[e]++;return t}function nse(i){if(i.type!=="attribute")return!1;const t=i.attributeKey;return t==="headingRows"||t==="colspan"||t==="rowspan"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ise(i){i.document.registerPostFixer(t=>sse(t,i))}function sse(i,t){const e=t.document.differ.getChanges();let n=!1;for(const s of e)s.type=="insert"&&s.name=="table"&&(n=ose(s.position.nodeAfter,i)||n),s.type=="insert"&&s.name=="tableRow"&&(n=DD(s.position.nodeAfter,i)||n),s.type=="insert"&&s.name=="tableCell"&&(n=vv(s.position.nodeAfter,i)||n),(s.type=="remove"||s.type=="insert")&&rse(s)&&(n=vv(s.position.parent,i)||n);return n}function ose(i,t){let e=!1;for(const n of i.getChildren())n.is("element","tableRow")&&(e=DD(n,t)||e);return e}function DD(i,t){let e=!1;for(const n of i.getChildren())e=vv(n,t)||e;return e}function vv(i,t){if(i.childCount==0)return t.insertElement("paragraph",i),!0;const e=Array.from(i.getChildren()).filter(n=>n.is("$text"));for(const n of e)t.wrap(t.createRangeOn(n),"paragraph");return!!e.length}function rse(i){return i.position.parent.is("element","tableCell")?i.type=="insert"&&i.name=="$text"||i.type=="remove":!1}function ase(i,t){const e=i.document.differ;for(const n of e.getChanges()){let s,o=!1;if(n.type=="attribute"){const u=n.range.start.nodeAfter;if(!u||!u.is("element","table")||n.attributeKey!="headingRows"&&n.attributeKey!="headingColumns")continue;s=u,o=n.attributeKey=="headingRows"}else(n.name=="tableRow"||n.name=="tableCell")&&(s=n.position.findAncestor("table"),o=n.name=="tableRow");if(!s)continue;const r=s.getAttribute("headingRows")||0,a=s.getAttribute("headingColumns")||0,l=new pt(s);for(const u of l){const m=u.row<r||u.column<a?"th":"td",p=t.mapper.toViewElement(u.cell);p&&p.is("element")&&p.name!=m&&t.reconvertItem(o?u.cell.parent:u.cell)}}}function lse(i,t){const e=i.document.differ,n=new Set;for(const s of e.getChanges()){const o=s.type=="attribute"?s.range.start.parent:s.position.parent;o.is("element","tableCell")&&n.add(o)}for(const s of n.values()){const o=Array.from(s.getChildren()).filter(r=>cse(r,t.mapper));for(const r of o)t.reconvertItem(r)}}function cse(i,t){if(!i.is("element","paragraph"))return!1;const e=t.toViewElement(i);return e?xD(i)!==e.is("element","span"):!1}class Vh extends te{constructor(e){super(e);_(this,"_additionalSlots");this._additionalSlots=[]}static get pluginName(){return"TableEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[xn]}init(){const e=this.editor,n=e.model,s=n.schema,o=e.conversion,r=e.plugins.get(xn);s.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),s.register("tableRow",{allowIn:"table",isLimit:!0}),s.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),o.for("upcast").add(sie()),o.for("upcast").add(oie()),o.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:dR(r,{asWidget:!0,additionalSlots:this._additionalSlots})}),o.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:dR(r,{additionalSlots:this._additionalSlots})}),o.for("upcast").elementToElement({model:"tableRow",view:"tr"}),o.for("upcast").add(rie()),o.for("downcast").elementToElement({model:"tableRow",view:die()}),o.for("upcast").elementToElement({model:"tableCell",view:"td"}),o.for("upcast").elementToElement({model:"tableCell",view:"th"}),o.for("upcast").add(uR("td")),o.for("upcast").add(uR("th")),o.for("editingDowncast").elementToElement({model:"tableCell",view:hR({asWidget:!0})}),o.for("dataDowncast").elementToElement({model:"tableCell",view:hR()}),o.for("editingDowncast").elementToElement({model:"paragraph",view:fR({asWidget:!0}),converterPriority:"high"}),o.for("dataDowncast").elementToElement({model:"paragraph",view:fR(),converterPriority:"high"}),o.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),o.for("upcast").attributeToAttribute({model:{key:"colspan",value:CR("colspan")},view:"colspan"}),o.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),o.for("upcast").attributeToAttribute({model:{key:"rowspan",value:CR("rowspan")},view:"rowspan"}),e.config.define("table.defaultHeadings.rows",0),e.config.define("table.defaultHeadings.columns",0),e.commands.add("insertTable",new mie(e)),e.commands.add("insertTableRowAbove",new mR(e,{order:"above"})),e.commands.add("insertTableRowBelow",new mR(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new gR(e,{order:"left"})),e.commands.add("insertTableColumnRight",new gR(e,{order:"right"})),e.commands.add("removeTableRow",new yie(e)),e.commands.add("removeTableColumn",new Cie(e)),e.commands.add("splitTableCellVertically",new pR(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new pR(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new $ie(e)),e.commands.add("mergeTableCellRight",new km(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new km(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new km(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new km(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new Eie(e)),e.commands.add("setTableRowHeader",new kie(e)),e.commands.add("selectTableRow",new Kie(e)),e.commands.add("selectTableColumn",new Zie(e)),Yie(n),ise(n),this.listenTo(n.document,"change:data",()=>{ase(n,e.editing),lse(n,e.editing)})}registerAdditionalSlot(e){this._additionalSlots.push(e)}}function CR(i){return t=>{const e=parseInt(t.getAttribute(i));return Number.isNaN(e)||e<=0?null:e}}class TR extends fe{constructor(e){super(e);_(this,"items");_(this,"keystrokes");_(this,"focusTracker");const n=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new Dt,this.focusTracker=new wt,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(s,o)=>`${o} × ${s}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":n.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:n.to("label")}]}],on:{mousedown:n.to(s=>{s.preventDefault()}),click:n.to(()=>{this.fire("execute")})}}),this.on("boxover",(s,o)=>{const{row:r,column:a}=o.target.dataset;this.items.get((parseInt(r,10)-1)*10+(parseInt(a,10)-1)).focus()}),this.focusTracker.on("change:focusedElement",(s,o,r)=>{if(!r)return;const{row:a,column:l}=r.dataset;this.set({rows:parseInt(a),columns:parseInt(l)})}),this.on("change:columns",()=>this._highlightGridBoxes()),this.on("change:rows",()=>this._highlightGridBoxes())}render(){super.render(),J0({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const e of this.items)this.focusTracker.add(e.element);this.keystrokes.listenTo(this.element)}reset(){this.set({rows:1,columns:1})}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const e=this.rows,n=this.columns;this.items.map((s,o)=>{const r=Math.floor(o/10),a=o%10,l=r<e&&a<n;s.set("isOn",l)})}_createGridButton(e,n,s,o){const r=new ke(e);return r.set({label:o,class:"ck-insert-table-dropdown-grid-box"}),r.extendTemplate({attributes:{"data-row":n,"data-column":s}}),r}_createGridCollection(){const e=[];for(let n=0;n<100;n++){const s=Math.floor(n/10),o=n%10,r=`${s+1} × ${o+1}`;e.push(this._createGridButton(this.locale,s+1,o+1,r))}return this.createCollection(e)}}class use extends te{static get pluginName(){return"TableUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t,s=t.locale.contentLanguageDirection==="ltr";t.ui.componentFactory.add("insertTable",o=>{const r=t.commands.get("insertTable"),a=ii(o);a.bind("isEnabled").to(r),a.buttonView.set({icon:SA,label:e("Insert table"),tooltip:!0});let l;return a.on("change:isOpen",()=>{l||(l=new TR(o),a.panelView.children.add(l),l.delegate("execute").to(a),a.on("execute",()=>{t.execute("insertTable",{rows:l.rows,columns:l.columns}),t.editing.view.focus()}))}),a}),t.ui.componentFactory.add("menuBar:insertTable",o=>{const r=t.commands.get("insertTable"),a=new ws(o),l=new TR(o);return l.delegate("execute").to(a),a.on("change:isOpen",(u,h,m)=>{m||l.reset()}),l.on("execute",()=>{t.execute("insertTable",{rows:l.rows,columns:l.columns}),t.editing.view.focus()}),a.buttonView.set({label:e("Table"),icon:SA}),a.panelView.children.add(l),a.bind("isEnabled").to(r),a}),t.ui.componentFactory.add("tableColumn",o=>{const r=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:e("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:s?"insertTableColumnLeft":"insertTableColumnRight",label:e("Insert column left")}},{type:"button",model:{commandName:s?"insertTableColumnRight":"insertTableColumnLeft",label:e("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:e("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:e("Select column")}}];return this._prepareDropdown(e("Column"),mK,r,o)}),t.ui.componentFactory.add("tableRow",o=>{const r=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:e("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:e("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:e("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:e("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:e("Select row")}}];return this._prepareDropdown(e("Row"),bK,r,o)}),t.ui.componentFactory.add("mergeTableCells",o=>{const r=[{type:"button",model:{commandName:"mergeTableCellUp",label:e("Merge cell up")}},{type:"button",model:{commandName:s?"mergeTableCellRight":"mergeTableCellLeft",label:e("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:e("Merge cell down")}},{type:"button",model:{commandName:s?"mergeTableCellLeft":"mergeTableCellRight",label:e("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:e("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:e("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(e("Merge cells"),gK,r,o)})}_prepareDropdown(t,e,n,s){const o=this.editor,r=ii(s),a=this._fillDropdownWithListOptions(r,n);return r.buttonView.set({label:t,icon:e,tooltip:!0}),r.bind("isEnabled").toMany(a,"isEnabled",(...l)=>l.some(u=>u)),this.listenTo(r,"execute",l=>{o.execute(l.source.commandName),l.source instanceof Vp||o.editing.view.focus()}),r}_prepareMergeSplitButtonDropdown(t,e,n,s){const o=this.editor,r=ii(s,Np),a="mergeTableCells",l=o.commands.get(a),u=this._fillDropdownWithListOptions(r,n);return r.buttonView.set({label:t,icon:e,tooltip:!0,isEnabled:!0}),r.bind("isEnabled").toMany([l,...u],"isEnabled",(...h)=>h.some(m=>m)),this.listenTo(r.buttonView,"execute",()=>{o.execute(a),o.editing.view.focus()}),this.listenTo(r,"execute",h=>{o.execute(h.source.commandName),o.editing.view.focus()}),r}_fillDropdownWithListOptions(t,e){const n=this.editor,s=[],o=new En;for(const r of e)dse(r,n,s,o);return Ka(t,o),s}}function dse(i,t,e,n){if(i.type==="button"||i.type==="switchbutton"){const s=i.model=new Oa(i.model),{commandName:o,bindIsOn:r}=i.model,a=t.commands.get(o);e.push(a),s.set({commandName:o}),s.bind("isEnabled").to(a),r&&s.bind("isOn").to(a,"value"),s.set({withText:!0})}n.add(i)}class Ar extends te{static get pluginName(){return"TableSelection"}static get isOfficialPlugin(){return!0}static get requires(){return[xn,xn]}init(){const t=this.editor,e=t.model,n=t.editing.view;this.listenTo(e,"deleteContent",(s,o)=>this._handleDeleteContent(s,o),{priority:"high"}),this.listenTo(n.document,"insertText",(s,o)=>this._handleInsertTextEvent(s,o),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const t=this.editor.plugins.get(xn),e=this.editor.model.document.selection,n=t.getSelectedTableCells(e);return n.length==0?null:n}getSelectionAsFragment(){const t=this.editor.plugins.get(xn),e=this.getSelectedTableCells();return e?this.editor.model.change(n=>{const s=n.createDocumentFragment(),{first:o,last:r}=t.getColumnIndexes(e),{first:a,last:l}=t.getRowIndexes(e),u=e[0].findAncestor("table");let h=l,m=r;if(t.isSelectionRectangular(e)){const C={firstColumn:o,lastColumn:r,firstRow:a,lastRow:l};h=PD(u,C),m=MD(u,C)}const v=kD(u,{startRow:a,startColumn:o,endRow:h,endColumn:m},n);return n.insert(v,s,0),s}):null}setCellSelection(t,e){const n=this._getCellsToSelect(t,e);this.editor.model.change(s=>{s.setSelection(n.cells.map(o=>s.createRangeOn(o)),{backward:n.backward})})}getFocusCell(){const n=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return n&&n.is("element","tableCell")?n:null}getAnchorCell(){const t=this.editor.model.document.selection,n=Ln(t.getRanges()).getContainedElement();return n&&n.is("element","tableCell")?n:null}_defineSelectionConverter(){const t=this.editor,e=new Set;t.conversion.for("editingDowncast").add(s=>s.on("selection",(o,r,a)=>{const l=a.writer;n(l);const u=this.getSelectedTableCells();if(!u)return;for(const m of u){const p=a.mapper.toViewElement(m);l.addClass("ck-editor__editable_selected",p),e.add(p)}const h=a.mapper.toViewElement(u[u.length-1]);l.setSelection(h,0)},{priority:"lowest"}));function n(s){for(const o of e)s.removeClass("ck-editor__editable_selected",o);e.clear()}}_enablePluginDisabling(){const t=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const e=this.getSelectedTableCells();if(!e)return;t.model.change(n=>{const s=n.createPositionAt(e[0],0),o=t.model.schema.getNearestSelectionRange(s);n.setSelection(o)})}})}_handleDeleteContent(t,e){const n=this.editor.plugins.get(xn),s=e[0],o=e[1],r=this.editor.model,a=!o||o.direction=="backward",l=n.getSelectedTableCells(s);l.length&&(t.stop(),r.change(u=>{const h=l[a?l.length-1:0];r.change(p=>{for(const v of l)r.deleteContent(p.createSelection(v,"in"))});const m=r.schema.getNearestSelectionRange(u.createPositionAt(h,0));s.is("documentSelection")?u.setSelection(m):s.setTo(m)}))}_handleInsertTextEvent(t,e){const n=this.editor,s=this.getSelectedTableCells();if(!s)return;const o=n.editing.view,r=n.editing.mapper,a=s.map(l=>o.createRangeOn(r.toViewElement(l)));e.selection=o.createSelection(a),e.preventDefault()}_getCellsToSelect(t,e){const n=this.editor.plugins.get("TableUtils"),s=n.getCellLocation(t),o=n.getCellLocation(e),r=Math.min(s.row,o.row),a=Math.max(s.row,o.row),l=Math.min(s.column,o.column),u=parseInt(e.getAttribute("colspan")||"1")-1,h=Math.max(s.column,o.column+u),m=new Array(a-r+1).fill(null).map(()=>[]),p={startRow:r,endRow:a,startColumn:l,endColumn:h};for(const{row:x,cell:k}of new pt(t.findAncestor("table"),p))m[x-r].push(k);const v=o.row<s.row,C=o.column<s.column;return v&&m.reverse(),C&&m.forEach(x=>x.reverse()),{cells:m.flat(),backward:v||C}}}class hse extends te{static get pluginName(){return"TableClipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[Pd,ls,Ar,xn]}init(){const e=this.editor.editing.view.document;this.listenTo(e,"copy",(n,s)=>this._onCopyCut(n,s)),this.listenTo(e,"cut",(n,s)=>this._onCopyCut(n,s)),this._listenToContentInsertion(),this.decorate("_replaceTableSlotCell")}_listenToContentInsertion(){const{editor:t}=this,e=t.plugins.get(ls),n=t.plugins.get(Ar);let s=!1;e.on("contentInsertion",(o,r)=>{s=r.method==="paste"}),this.listenTo(t.model,"insertContent",(o,[r,a])=>{(s||n.getSelectedTableCells()!==null)&&this._onInsertContent(o,r,a)},{priority:"high"}),e.on("contentInsertion",()=>{s=!1},{priority:"lowest"})}_onCopyCut(t,e){const n=this.editor.editing.view,s=this.editor.plugins.get(Ar),o=this.editor.plugins.get(Pd);s.getSelectedTableCells()&&(t.name=="cut"&&!this.editor.model.canEditAt(this.editor.model.document.selection)||(e.preventDefault(),t.stop(),this.editor.model.enqueueChange({isUndoable:t.name==="cut"},()=>{const r=o._copySelectedFragmentWithMarkers(t.name,this.editor.model.document.selection,()=>s.getSelectionAsFragment());n.document.fire("clipboardOutput",{dataTransfer:e.dataTransfer,content:this.editor.data.toView(r),method:t.name})})))}_onInsertContent(t,e,n){if(n&&!n.is("documentSelection"))return;const s=this.editor.model,o=this.editor.plugins.get(xn),r=this.editor.plugins.get(Pd),a=this.getTableIfOnlyTableInContent(e,s);if(!a)return;const l=o.getSelectionAffectedTableCells(s.document.selection);if(!l.length){w1(a,o);return}t.stop(),e.is("documentFragment")?r._pasteMarkersIntoTransformedElement(e.markers,u=>this._replaceSelectedCells(a,l,u)):this.editor.model.change(u=>{this._replaceSelectedCells(a,l,u)})}_replaceSelectedCells(t,e,n){const s=this.editor.plugins.get(xn),o={width:s.getColumns(t),height:s.getRows(t)},r=fse(e,o,n,s),a=r.lastRow-r.firstRow+1,l=r.lastColumn-r.firstColumn+1,u={startRow:0,startColumn:0,endRow:Math.min(a,o.height)-1,endColumn:Math.min(l,o.width)-1};t=kD(t,u,n);const h=e[0].findAncestor("table"),m=this._replaceSelectedCellsWithPasted(t,o,h,r,n);if(this.editor.plugins.get("TableSelection").isEnabled){const p=s.sortRanges(m.map(v=>n.createRangeOn(v)));n.setSelection(p)}else n.setSelection(m[0],0);return h}_replaceSelectedCellsWithPasted(t,e,n,s,o){const{width:r,height:a}=e,l=gse(t,r,a),u=[...new pt(n,{startRow:s.firstRow,endRow:s.lastRow,startColumn:s.firstColumn,endColumn:s.lastColumn,includeAllSlots:!0})],h=[];let m;for(const k of u){const{row:S,column:I}=k;I===s.firstColumn&&(m=k.getPositionBefore());const P=S-s.firstRow,O=I-s.firstColumn,D=l[P%a][O%r],Y=D?o.cloneElement(D):null,F=this._replaceTableSlotCell(k,Y,m,o);F&&(ID(F,S,I,s.lastRow,s.lastColumn,o),h.push(F),m=o.createPositionAfter(F))}const p=parseInt(n.getAttribute("headingRows")||"0"),v=parseInt(n.getAttribute("headingColumns")||"0"),C=s.firstRow<p&&p<=s.lastRow,x=s.firstColumn<v&&v<=s.lastColumn;if(C){const k={first:s.firstColumn,last:s.lastColumn},S=Cv(n,p,k,o,s.firstRow);h.push(...S)}if(x){const k={first:s.firstRow,last:s.lastRow},S=Tv(n,v,k,o);h.push(...S)}return h}_replaceTableSlotCell(t,e,n,s){const{cell:o,isAnchor:r}=t;return r&&s.remove(o),e?(s.insert(e,n),e):null}getTableIfOnlyTableInContent(t,e){if(!t.is("documentFragment")&&!t.is("element"))return null;if(t.is("element","table"))return t;if(t.childCount==1&&t.getChild(0).is("element","table"))return t.getChild(0);const n=e.createRangeIn(t);for(const s of n.getItems())if(s.is("element","table")){const o=e.createRange(n.start,e.createPositionBefore(s));if(e.hasContent(o,{ignoreWhitespaces:!0}))return null;const r=e.createRange(e.createPositionAfter(s),n.end);return e.hasContent(r,{ignoreWhitespaces:!0})?null:s}return null}}function fse(i,t,e,n){const s=i[0].findAncestor("table"),o=n.getColumnIndexes(i),r=n.getRowIndexes(i),a={firstColumn:o.first,lastColumn:o.last,firstRow:r.first,lastRow:r.last},l=i.length===1;return l&&(a.lastRow+=t.height-1,a.lastColumn+=t.width-1,mse(s,a.lastRow+1,a.lastColumn+1,n)),l||!n.isSelectionRectangular(i)?pse(s,a,e):(a.lastRow=PD(s,a),a.lastColumn=MD(s,a)),a}function mse(i,t,e,n){const s=n.getColumns(i),o=n.getRows(i);e>s&&n.insertColumns(i,{at:s,columns:e-s}),t>o&&n.insertRows(i,{at:o,rows:t-o})}function gse(i,t,e){const n=new Array(e).fill(null).map(()=>new Array(t).fill(null));for(const{column:s,row:o,cell:r}of new pt(i))n[o][s]=r;return n}function pse(i,t,e){const{firstRow:n,lastRow:s,firstColumn:o,lastColumn:r}=t,a={first:n,last:s},l={first:o,last:r};Tv(i,o,a,e),Tv(i,r+1,a,e),Cv(i,n,l,e),Cv(i,s+1,l,e,n)}function Cv(i,t,e,n,s=0){return t<1?void 0:ED(i,t,s).filter(({column:a,cellWidth:l})=>OD(a,l,e)).map(({cell:a})=>SD(a,t,n))}function Tv(i,t,e,n){return t<1?void 0:AD(i,t).filter(({row:r,cellHeight:a})=>OD(r,a,e)).map(({cell:r,column:a})=>RD(r,a,t,n))}function OD(i,t,e){const n=i+t-1,{first:s,last:o}=e,r=i>=s&&i<=o,a=i<s&&n>=s;return r||a}class bse extends te{static get pluginName(){return"TableKeyboard"}static get isOfficialPlugin(){return!0}static get requires(){return[Ar,xn]}init(){const t=this.editor,n=t.editing.view.document,s=t.t;this.listenTo(n,"arrowKey",(...o)=>this._onArrowKey(...o),{context:"table"}),this.listenTo(n,"tab",(...o)=>this._handleTabOnSelectedTable(...o),{context:"figure"}),this.listenTo(n,"tab",(...o)=>this._handleTab(...o),{context:["th","td"]}),t.accessibility.addKeystrokeInfoGroup({id:"table",label:s("Keystrokes that can be used in a table cell"),keystrokes:[{label:s("Move the selection to the next cell"),keystroke:"Tab"},{label:s("Move the selection to the previous cell"),keystroke:"Shift+Tab"},{label:s("Insert a new table row (when in the last cell of a table)"),keystroke:"Tab"},{label:s("Navigate through the table"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]}]})}_handleTabOnSelectedTable(t,e){const n=this.editor,o=n.model.document.selection.getSelectedElement();!o||!o.is("element","table")||(e.preventDefault(),e.stopPropagation(),t.stop(),n.model.change(r=>{r.setSelection(r.createRangeIn(o.getChild(0).getChild(0)))}))}_handleTab(t,e){const n=this.editor,s=this.editor.plugins.get(xn),o=this.editor.plugins.get("TableSelection"),r=n.model.document.selection,a=!e.shiftKey;let l=s.getTableCellsContainingSelection(r)[0];if(l||(l=o.getFocusCell()),!l)return;e.preventDefault(),e.stopPropagation(),t.stop();const u=l.parent,h=u.parent,m=h.getChildIndex(u),p=u.getChildIndex(l),v=p===0;if(!a&&v&&m===0){n.model.change(S=>{S.setSelection(S.createRangeOn(h))});return}const C=p===u.childCount-1,x=m===s.getRows(h)-1;if(a&&x&&C&&(n.execute("insertTableRowBelow"),m===s.getRows(h)-1)){n.model.change(S=>{S.setSelection(S.createRangeOn(h))});return}let k;if(a&&C)k=h.getChild(m+1).getChild(0);else if(!a&&v){const S=h.getChild(m-1);k=S.getChild(S.childCount-1)}else k=u.getChild(p+(a?1:-1));n.model.change(S=>{S.setSelection(S.createRangeIn(k))})}_onArrowKey(t,e){const n=this.editor,s=e.keyCode,o=A0(s,n.locale.contentLanguageDirection);this._handleArrowKeys(o,e.shiftKey)&&(e.preventDefault(),e.stopPropagation(),t.stop())}_handleArrowKeys(t,e){const n=this.editor.plugins.get(xn),s=this.editor.plugins.get("TableSelection"),o=this.editor.model,r=o.document.selection,a=["right","down"].includes(t),l=n.getSelectedTableCells(r);if(l.length){let h;return e?h=s.getFocusCell():h=a?l[l.length-1]:l[0],this._navigateFromCellInDirection(h,t,e),!0}const u=r.focus.findAncestor("tableCell");/* istanbul ignore if: paranoid check -- @preserve */if(!u)return!1;if(!r.isCollapsed)if(e){if(r.isBackward==a&&!r.containsEntireContent(u))return!1}else{const h=r.getSelectedElement();if(!h||!o.schema.isObject(h))return!1}return this._isSelectionAtCellEdge(r,u,a)?(this._navigateFromCellInDirection(u,t,e),!0):!1}_isSelectionAtCellEdge(t,e,n){const s=this.editor.model,o=this.editor.model.schema,r=n?t.getLastPosition():t.getFirstPosition();if(!o.getLimitElement(r).is("element","tableCell"))return s.createPositionAt(e,n?"end":0).isTouching(r);const a=s.createSelection(r);return s.modifySelection(a,{direction:n?"forward":"backward"}),r.isEqual(a.focus)}_navigateFromCellInDirection(t,e,n=!1){const s=this.editor.model,o=t.findAncestor("table"),r=[...new pt(o,{includeAllSlots:!0})],{row:a,column:l}=r[r.length-1],u=r.find(({cell:I})=>I==t);let{row:h,column:m}=u;switch(e){case"left":m--;break;case"up":h--;break;case"right":m+=u.cellWidth;break;case"down":h+=u.cellHeight;break}const p=h<0||h>a,v=m<0&&h<=0,C=m>l&&h>=a;if(p||v||C){s.change(I=>{I.setSelection(I.createRangeOn(o))});return}m<0?(m=n?0:l,h--):m>l&&(m=n?l:0,h++);const x=r.find(I=>I.row==h&&I.column==m).cell,k=["right","down"].includes(e),S=this.editor.plugins.get("TableSelection");if(n&&S.isEnabled){const I=S.getAnchorCell()||t;S.setCellSelection(I,x)}else{const I=s.createPositionAt(x,k?0:"end");s.change(P=>{P.setSelection(I)})}}}class LD extends Bo{constructor(){super(...arguments);_(this,"domEventType",["mousemove","mouseleave"])}onDomEvent(e){this.fire(e.type,e)}}class _se extends te{static get pluginName(){return"TableMouse"}static get isOfficialPlugin(){return!0}static get requires(){return[Ar,xn]}init(){this.editor.editing.view.addObserver(LD),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const t=this.editor,e=t.plugins.get(xn);let n=!1;const s=t.plugins.get(Ar);this.listenTo(t.editing.view.document,"mousedown",(o,r)=>{const a=t.model.document.selection;if(!this.isEnabled||!s.isEnabled||!r.domEvent.shiftKey)return;const l=s.getAnchorCell()||e.getTableCellsContainingSelection(a)[0];if(!l)return;const u=this._getModelTableCellFromDomEvent(r);u&&xR(l,u)&&(n=!0,s.setCellSelection(l,u),r.preventDefault())}),this.listenTo(t.editing.view.document,"mouseup",()=>{n=!1}),this.listenTo(t.editing.view.document,"selectionChange",o=>{n&&o.stop()},{priority:"highest"})}_enableMouseDragSelection(){const t=this.editor;let e,n,s=!1,o=!1;const r=t.plugins.get(Ar);this.listenTo(t.editing.view.document,"mousedown",(a,l)=>{!this.isEnabled||!r.isEnabled||l.domEvent.shiftKey||l.domEvent.ctrlKey||l.domEvent.altKey||(e=this._getModelTableCellFromDomEvent(l))}),this.listenTo(t.editing.view.document,"mousemove",(a,l)=>{if(!l.domEvent.buttons||!e)return;const u=this._getModelTableCellFromDomEvent(l);u&&xR(e,u)&&(n=u,!s&&n!=e&&(s=!0)),s&&(o=!0,r.setCellSelection(e,n),l.preventDefault())}),this.listenTo(t.editing.view.document,"mouseup",()=>{s=!1,o=!1,e=null,n=null}),this.listenTo(t.editing.view.document,"selectionChange",a=>{o&&a.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(t){const e=t.target,n=this.editor.editing.view.createPositionAt(e,0);return this.editor.editing.mapper.toModelPosition(n).parent.findAncestor("tableCell",{includeSelf:!0})}}function xR(i,t){return i.parent.parent==t.parent.parent}class wse extends te{static get requires(){return[Vh,use,Ar,_se,bse,hse,Rh]}static get pluginName(){return"Table"}static get isOfficialPlugin(){return!0}}function Ug(i){const t=BD(i);return t||Bp(i)}function BD(i){const t=i.getSelectedElement();return t&&FD(t)?t:null}function Bp(i){const t=i.getFirstPosition();if(!t)return null;let e=t.parent;for(;e;){if(e.is("element")&&FD(e))return e;e=e.parent}return null}function FD(i){return!!i.getCustomProperty("table")&&Jt(i)}class yse extends te{static get requires(){return[Ng]}static get pluginName(){return"TableToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=t.t,n=t.plugins.get(Ng),s=t.config.get("table.contentToolbar"),o=t.config.get("table.tableToolbar");s&&n.register("tableContent",{ariaLabel:e("Table toolbar"),items:s,getRelatedElement:Bp}),o&&n.register("table",{ariaLabel:e("Table toolbar"),items:o,getRelatedElement:BD})}}class vse extends fe{constructor(e,n){super(e);_(this,"options");_(this,"focusTracker");_(this,"focusCycler");_(this,"_focusables");_(this,"dropdownView");_(this,"inputView");_(this,"keystrokes");_(this,"_stillTyping");this.set("value",""),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isEmpty",!0),this.options=n,this.focusTracker=new wt,this._focusables=new Sn,this.dropdownView=this._createDropdownView(),this.inputView=this._createInputTextView(),this.keystrokes=new Dt,this._stillTyping=!1,this.focusCycler=new cn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-input-color"]},children:[this.dropdownView,this.inputView]}),this.on("change:value",(s,o,r)=>this._setInputValue(r))}render(){super.render(),[this.inputView,this.dropdownView.buttonView].forEach(e=>{this.focusTracker.add(e.element),this._focusables.add(e)}),this.keystrokes.listenTo(this.element)}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createDropdownView(){const e=this.locale,n=e.t,s=this.bindTemplate,o=this._createColorSelector(e),r=ii(e),a=new fe;return a.setTemplate({tag:"span",attributes:{class:["ck","ck-input-color__button__preview"],style:{backgroundColor:s.to("value")}},children:[{tag:"span",attributes:{class:["ck","ck-input-color__button__preview__no-color-indicator",s.if("value","ck-hidden",l=>l!="")]}}]}),r.buttonView.extendTemplate({attributes:{class:"ck-input-color__button"}}),r.buttonView.children.add(a),r.buttonView.label=n("Color picker"),r.buttonView.tooltip=!0,r.panelPosition=e.uiLanguageDirection==="rtl"?"se":"sw",r.panelView.children.add(o),r.bind("isEnabled").to(this,"isReadOnly",l=>!l),r.on("change:isOpen",(l,u,h)=>{h&&(o.updateSelectedColors(),o.showColorGridsFragment())}),r}_createInputTextView(){const e=this.locale,n=new oN(e);return n.extendTemplate({on:{blur:n.bindTemplate.to("blur")}}),n.value=this.value,n.bind("isReadOnly","hasError").to(this),this.bind("isFocused","isEmpty").to(n),n.on("input",()=>{const s=n.element.value,o=this.options.colorDefinitions.find(r=>s===r.label);this._stillTyping=!0,this.value=o&&o.color||s}),n.on("blur",()=>{this._stillTyping=!1,this._setInputValue(n.element.value)}),n.delegate("input").to(this),n}_createColorSelector(e){const n=e.t,s=this.options.defaultColorValue||"",o=n(s?"Restore default":"Remove color"),r=new e1(e,{colors:this.options.colorDefinitions,columns:this.options.columns,removeButtonLabel:o,colorPickerLabel:n("Color picker"),colorPickerViewConfig:this.options.colorPickerConfig===!1?!1:{...this.options.colorPickerConfig,hideInput:!0}});r.appendUI(),r.on("execute",(l,u)=>{if(u.source==="colorPickerSaveButton"){this.dropdownView.isOpen=!1;return}this.value=u.value||s,this.fire("input"),u.source!=="colorPicker"&&(this.dropdownView.isOpen=!1)});let a=this.value;return r.on("colorPicker:cancel",()=>{this.value=a,this.fire("input"),this.dropdownView.isOpen=!1}),r.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{a=this.value}),r.bind("selectedColor").to(this,"value"),r}_setInputValue(e){if(!this._stillTyping){const n=kR(e),s=this.options.colorDefinitions.find(o=>n===kR(o.color));s?this.inputView.value=s.label:this.inputView.value=e||""}}}function kR(i){return i.replace(/([(,])\s+/g,"$1").replace(/^\s+|\s+(?=[),\s]|$)/g,"").replace(/,|\s/g," ")}const v1=i=>i==="";function C1(i){return{none:i("None"),solid:i("Solid"),dotted:i("Dotted"),dashed:i("Dashed"),double:i("Double"),groove:i("Groove"),ridge:i("Ridge"),inset:i("Inset"),outset:i("Outset")}}function UD(i){return i('The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".')}function zD(i){return i('The value is invalid. Try "10px" or "2em" or simply "2".')}function zg(i){return i=i.trim().toLowerCase(),v1(i)||yV(i)}function Vd(i){return i=i.trim(),v1(i)||qD(i)||Ip(i)||vV(i)}function HD(i){return i=i.trim(),v1(i)||qD(i)||Ip(i)}function WD(i,t){const e=new En,n=C1(i.t);for(const s in n){const o={type:"button",model:new Oa({_borderStyleValue:s,label:n[s],role:"menuitemradio",withText:!0})};s==="none"?o.model.bind("isOn").to(i,"borderStyle",r=>t==="none"?!r:r===s):o.model.bind("isOn").to(i,"borderStyle",r=>r===s),e.add(o)}return e}function xv(i){const{view:t,icons:e,toolbar:n,labels:s,propertyName:o,nameToValue:r,defaultValue:a}=i;for(const l in s){const u=new ke(t.locale);u.set({role:"radio",isToggleable:!0,label:s[l],icon:e[l],tooltip:s[l]});const h=r?r(l):l;u.bind("isOn").to(t,o,m=>{let p=m;return m===""&&a&&(p=a),h===p}),u.on("execute",()=>{!a&&h&&t[o]===h?t[o]=void 0:t[o]=h}),n.items.add(u)}}const Hg=[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}];function Wg(i){return(t,e,n)=>{const s=new vse(t.locale,{colorDefinitions:Cse(i.colorConfig),columns:i.columns,defaultColorValue:i.defaultColorValue,colorPickerConfig:i.colorPickerConfig});return s.inputView.set({id:e,ariaDescribedById:n}),s.bind("isReadOnly").to(t,"isEnabled",o=>!o),s.bind("hasError").to(t,"errorText",o=>!!o),s.on("input",()=>{t.errorText=null}),t.bind("isEmpty","isFocused").to(s),s}}function qD(i){const t=parseFloat(i);return!Number.isNaN(t)&&i===String(t)}function Cse(i){return i.map(t=>({color:t.model,label:t.label,options:{hasBorder:t.hasBorder}}))}class Tse extends fe{constructor(e,n){super(e);_(this,"options");_(this,"focusTracker");_(this,"keystrokes");_(this,"children");_(this,"borderStyleDropdown");_(this,"borderWidthInput");_(this,"borderColorInput");_(this,"backgroundInput");_(this,"paddingInput");_(this,"widthInput");_(this,"heightInput");_(this,"horizontalAlignmentToolbar");_(this,"verticalAlignmentToolbar");_(this,"saveButtonView");_(this,"cancelButtonView");_(this,"_focusables");_(this,"_focusCycler");this.set({borderStyle:"",borderWidth:"",borderColor:"",padding:"",backgroundColor:"",width:"",height:"",horizontalAlignment:"",verticalAlignment:""}),this.options=n;const{borderStyleDropdown:s,borderWidthInput:o,borderColorInput:r,borderRowLabel:a}=this._createBorderFields(),{backgroundRowLabel:l,backgroundInput:u}=this._createBackgroundFields(),{widthInput:h,operatorLabel:m,heightInput:p,dimensionsLabel:v}=this._createDimensionFields(),{horizontalAlignmentToolbar:C,verticalAlignmentToolbar:x,alignmentLabel:k}=this._createAlignmentFields();this.focusTracker=new wt,this.keystrokes=new Dt,this.children=this.createCollection(),this.borderStyleDropdown=s,this.borderWidthInput=o,this.borderColorInput=r,this.backgroundInput=u,this.paddingInput=this._createPaddingField(),this.widthInput=h,this.heightInput=p,this.horizontalAlignmentToolbar=C,this.verticalAlignmentToolbar=x;const{saveButtonView:S,cancelButtonView:I}=this._createActionButtons();this.saveButtonView=S,this.cancelButtonView=I,this._focusables=new Sn,this._focusCycler=new cn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new zo(e,{label:this.t("Cell properties")})),this.children.add(new Vn(e,{labelView:a,children:[a,s,r,o],class:"ck-table-form__border-row"})),this.children.add(new Vn(e,{labelView:l,children:[l,u],class:"ck-table-form__background-row"})),this.children.add(new Vn(e,{children:[new Vn(e,{labelView:v,children:[v,h,m,p],class:"ck-table-form__dimensions-row"}),new Vn(e,{children:[this.paddingInput],class:"ck-table-cell-properties-form__padding-row"})]})),this.children.add(new Vn(e,{labelView:k,children:[k,C,x],class:"ck-table-cell-properties-form__alignment-row"})),this.children.add(new Vn(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-cell-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),zr({view:this}),[this.borderColorInput,this.backgroundInput].forEach(e=>{this._focusCycler.chain(e.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.paddingInput,this.horizontalAlignmentToolbar,this.verticalAlignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableCellProperties,n={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},s=Wg({colorConfig:this.options.borderColors,columns:5,defaultColorValue:n.color,colorPickerConfig:this.options.colorPickerConfig}),o=this.locale,r=this.t,a=r("Style"),l=new Qi(o);l.text=r("Border");const u=C1(r),h=new sn(o,dN);h.set({label:a,class:"ck-table-form__border-style"}),h.fieldView.buttonView.set({ariaLabel:a,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:a}),h.fieldView.buttonView.bind("label").to(this,"borderStyle",v=>u[v||"none"]),h.fieldView.on("execute",v=>{this.borderStyle=v.source._borderStyleValue}),h.bind("isEmpty").to(this,"borderStyle",v=>!v),Ka(h.fieldView,WD(this,n.style),{role:"menu",ariaLabel:a});const m=new sn(o,ti);m.set({label:r("Width"),class:"ck-table-form__border-width"}),m.fieldView.bind("value").to(this,"borderWidth"),m.bind("isEnabled").to(this,"borderStyle",Em),m.fieldView.on("input",()=>{this.borderWidth=m.fieldView.element.value});const p=new sn(o,s);return p.set({label:r("Color"),class:"ck-table-form__border-color"}),p.fieldView.bind("value").to(this,"borderColor"),p.bind("isEnabled").to(this,"borderStyle",Em),p.fieldView.on("input",()=>{this.borderColor=p.fieldView.value}),this.on("change:borderStyle",(v,C,x,k)=>{Em(x)||(this.borderColor="",this.borderWidth=""),Em(k)||(this.borderColor=n.color,this.borderWidth=n.width)}),{borderRowLabel:l,borderStyleDropdown:h,borderColorInput:p,borderWidthInput:m}}_createBackgroundFields(){const e=this.locale,n=this.t,s=new Qi(e);s.text=n("Background");const o=Wg({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableCellProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),r=new sn(e,o);return r.set({label:n("Color"),class:"ck-table-cell-properties-form__background"}),r.fieldView.bind("value").to(this,"backgroundColor"),r.fieldView.on("input",()=>{this.backgroundColor=r.fieldView.value}),{backgroundRowLabel:s,backgroundInput:r}}_createDimensionFields(){const e=this.locale,n=this.t,s=new Qi(e);s.text=n("Dimensions");const o=new sn(e,ti);o.set({label:n("Width"),class:"ck-table-form__dimensions-row__width"}),o.fieldView.bind("value").to(this,"width"),o.fieldView.on("input",()=>{this.width=o.fieldView.element.value});const r=new fe(e);r.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const a=new sn(e,ti);return a.set({label:n("Height"),class:"ck-table-form__dimensions-row__height"}),a.fieldView.bind("value").to(this,"height"),a.fieldView.on("input",()=>{this.height=a.fieldView.element.value}),{dimensionsLabel:s,widthInput:o,operatorLabel:r,heightInput:a}}_createPaddingField(){const e=this.locale,n=this.t,s=new sn(e,ti);return s.set({label:n("Padding"),class:"ck-table-cell-properties-form__padding"}),s.fieldView.bind("value").to(this,"padding"),s.fieldView.on("input",()=>{this.padding=s.fieldView.element.value}),s}_createAlignmentFields(){const e=this.locale,n=this.t,s=new Qi(e),o={left:$0,center:IV,right:MV,justify:PV,top:Oj,middle:Dj,bottom:Nj};s.text=n("Table cell text alignment");const r=new Da(e),a=e.contentLanguageDirection==="rtl";r.set({isCompact:!0,role:"radiogroup",ariaLabel:n("Horizontal text alignment toolbar")}),xv({view:this,icons:o,toolbar:r,labels:this._horizontalAlignmentLabels,propertyName:"horizontalAlignment",nameToValue:u=>{if(a){if(u==="left")return"right";if(u==="right")return"left"}return u},defaultValue:this.options.defaultTableCellProperties.horizontalAlignment});const l=new Da(e);return l.set({isCompact:!0,role:"radiogroup",ariaLabel:n("Vertical text alignment toolbar")}),xv({view:this,icons:o,toolbar:l,labels:this._verticalAlignmentLabels,propertyName:"verticalAlignment",defaultValue:this.options.defaultTableCellProperties.verticalAlignment}),{horizontalAlignmentToolbar:r,verticalAlignmentToolbar:l,alignmentLabel:s}}_createActionButtons(){const e=this.locale,n=this.t,s=new ke(e),o=new ke(e),r=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.paddingInput];return s.set({label:n("Save"),icon:Pp,class:"ck-button-save",type:"submit",withText:!0}),s.bind("isEnabled").toMany(r,"errorText",(...a)=>a.every(l=>!l)),o.set({label:n("Cancel"),icon:Sh,class:"ck-button-cancel",withText:!0}),o.delegate("execute").to(this,"cancel"),{saveButtonView:s,cancelButtonView:o}}get _horizontalAlignmentLabels(){const e=this.locale,n=this.t,s=n("Align cell text to the left"),o=n("Align cell text to the center"),r=n("Align cell text to the right"),a=n("Justify cell text");return e.uiLanguageDirection==="rtl"?{right:r,center:o,left:s,justify:a}:{left:s,center:o,right:r,justify:a}}get _verticalAlignmentLabels(){const e=this.t;return{top:e("Align cell text to the top"),middle:e("Align cell text to the middle"),bottom:e("Align cell text to the bottom")}}}function Em(i){return i!=="none"}const kv=[Qn.defaultPositions.northArrowSouth,Qn.defaultPositions.northArrowSouthWest,Qn.defaultPositions.northArrowSouthEast,Qn.defaultPositions.southArrowNorth,Qn.defaultPositions.southArrowNorthWest,Qn.defaultPositions.southArrowNorthEast,Qn.defaultPositions.viewportStickyNorth];function $D(i,t){const e=i.plugins.get("ContextualBalloon"),n=i.editing.view.document.selection;let s;t==="cell"?Bp(n)&&(s=jD(i)):Ug(n)&&(s=GD(i)),s&&e.updatePosition(s)}function GD(i){const t=i.model.document.selection,e=Sr(t),n=i.editing.mapper.toViewElement(e);return{target:i.editing.view.domConverter.mapViewToDom(n),positions:kv}}function jD(i){const t=i.editing.mapper,e=i.editing.view.domConverter,n=i.model.document.selection;if(n.rangeCount>1)return{target:()=>xse(n.getRanges(),i),positions:kv};const s=KD(n.getFirstPosition()),o=t.toViewElement(s);return{target:e.mapViewToDom(o),positions:kv}}function KD(i){return i.nodeAfter&&i.nodeAfter.is("element","tableCell")?i.nodeAfter:i.findAncestor("tableCell")}function xse(i,t){const e=t.editing.mapper,n=t.editing.view.domConverter,s=Array.from(i).map(o=>{const r=KD(o.start),a=e.toViewElement(r);return new Pe(n.mapViewToDom(a))});return Pe.getBoundingRect(s)}function Ya(i){if(!i||!is(i))return i;const{top:t,right:e,bottom:n,left:s}=i;if(t==e&&e==n&&n==s)return t}function Ja(i,t){const e=parseFloat(i);return Number.isNaN(e)||String(e)!==String(i)?i:`${e}${t}`}function Fp(i,t={}){const e={borderStyle:"none",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",...i};return t.includeAlignmentProperty&&!e.alignment&&(e.alignment="center"),t.includePaddingProperty&&!e.padding&&(e.padding=""),t.includeVerticalAlignmentProperty&&!e.verticalAlignment&&(e.verticalAlignment="middle"),t.includeHorizontalAlignmentProperty&&!e.horizontalAlignment&&(e.horizontalAlignment=t.isRightToLeftContent?"right":"left"),e}function ZD(i,t){return Fp({borderStyle:"double",borderColor:"hsl(0, 0%, 70%)",borderWidth:"1px",...i},t)}function T1(i,t){return Fp({borderStyle:"solid",borderColor:"hsl(0, 0%, 75%)",borderWidth:"1px",...i},t)}const kse=500,ER={borderStyle:"tableCellBorderStyle",borderColor:"tableCellBorderColor",borderWidth:"tableCellBorderWidth",height:"tableCellHeight",width:"tableCellWidth",padding:"tableCellPadding",backgroundColor:"tableCellBackgroundColor",horizontalAlignment:"tableCellHorizontalAlignment",verticalAlignment:"tableCellVerticalAlignment"};class Ese extends te{constructor(e){super(e);_(this,"_defaultContentTableCellProperties");_(this,"_defaultLayoutTableCellProperties");_(this,"_balloon");_(this,"view");_(this,"_viewWithContentTableDefaults");_(this,"_viewWithLayoutTableDefaults");_(this,"_undoStepBatch");_(this,"_isReady");e.config.define("table.tableCellProperties",{borderColors:Hg,backgroundColors:Hg})}static get requires(){return[as]}static get pluginName(){return"TableCellPropertiesUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.t;this._defaultContentTableCellProperties=T1(e.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"}),this._defaultLayoutTableCellProperties=Fp(void 0,{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"}),this._balloon=e.plugins.get(as),this.view=null,this._isReady=!1,e.ui.componentFactory.add("tableCellProperties",s=>{const o=new ke(s);o.set({label:n("Cell properties"),icon:fK,tooltip:!0}),this.listenTo(o,"execute",()=>this._showView());const r=Object.values(ER).map(a=>e.commands.get(a));return o.bind("isEnabled").toMany(r,"isEnabled",(...a)=>a.some(l=>l)),o})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(e){const n=this.editor,s=n.config.get("table.tableCellProperties"),o=oh(s.borderColors),r=sh(n.locale,o),a=oh(s.backgroundColors),l=sh(n.locale,a),u=s.colorPicker!==!1,h=new Tse(n.locale,{borderColors:r,backgroundColors:l,defaultTableCellProperties:e,colorPickerConfig:u?s.colorPicker||{}:!1}),m=n.t;h.render(),this.listenTo(h,"submit",()=>{this._hideView()}),this.listenTo(h,"cancel",()=>{this._undoStepBatch.operations.length&&n.execute("undo",this._undoStepBatch),this._hideView()}),h.keystrokes.set("Esc",(C,x)=>{this._hideView(),x()}),Uo({emitter:h,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const p=UD(m),v=zD(m);return h.on("change:borderStyle",this._getPropertyChangeCallback("tableCellBorderStyle")),h.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:h.borderColorInput,commandName:"tableCellBorderColor",errorText:p,validator:zg})),h.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:h.borderWidthInput,commandName:"tableCellBorderWidth",errorText:v,validator:HD})),h.on("change:padding",this._getValidatedPropertyChangeCallback({viewField:h.paddingInput,commandName:"tableCellPadding",errorText:v,validator:Vd})),h.on("change:width",this._getValidatedPropertyChangeCallback({viewField:h.widthInput,commandName:"tableCellWidth",errorText:v,validator:Vd})),h.on("change:height",this._getValidatedPropertyChangeCallback({viewField:h.heightInput,commandName:"tableCellHeight",errorText:v,validator:Vd})),h.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:h.backgroundInput,commandName:"tableCellBackgroundColor",errorText:p,validator:zg})),h.on("change:horizontalAlignment",this._getPropertyChangeCallback("tableCellHorizontalAlignment")),h.on("change:verticalAlignment",this._getPropertyChangeCallback("tableCellVerticalAlignment")),h}_fillViewFormFromCommandValues(){const e=this.editor.commands,n=e.get("tableCellBorderStyle");Object.entries(ER).map(([s,o])=>{const r=s,a=this.view===this._viewWithContentTableDefaults?this._defaultContentTableCellProperties[r]||"":this._defaultLayoutTableCellProperties[r]||"";return[s,e.get(o).value||a]}).forEach(([s,o])=>{(s==="borderColor"||s==="borderWidth")&&n.value==="none"||this.view.set(s,o)}),this._isReady=!0}_showView(){const e=this.editor,n=Ug(e.editing.view.document.selection),s=n&&e.editing.mapper.toModelElement(n),o=!s||s.getAttribute("tableType")!=="layout";o&&!this._viewWithContentTableDefaults?this._viewWithContentTableDefaults=this._createPropertiesView(this._defaultContentTableCellProperties):!o&&!this._viewWithLayoutTableDefaults&&(this._viewWithLayoutTableDefaults=this._createPropertiesView(this._defaultLayoutTableCellProperties)),this.view=o?this._viewWithContentTableDefaults:this._viewWithLayoutTableDefaults,this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:jD(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,n=e.editing.view.document;Bp(n.selection)?this._isViewVisible&&$D(e,"cell"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(n,s,o)=>{this._isReady&&this.editor.execute(e,{value:o,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:n,viewField:s,validator:o,errorText:r}=e,a=ss(()=>{s.errorText=r},kse);return(l,u,h)=>{a.cancel(),this._isReady&&(o(h)?(this.editor.execute(n,{value:h,batch:this._undoStepBatch}),s.errorText=null):a())}}}class Ho extends $e{constructor(e,n,s){super(e);_(this,"attributeName");_(this,"_defaultValue");_(this,"_defaultContentTableValue");_(this,"_defaultLayoutTableValue");switch(this.attributeName=n,this._defaultContentTableValue=s,n){case"tableCellBorderStyle":this._defaultLayoutTableValue="none";break;case"tableCellHorizontalAlignment":this._defaultLayoutTableValue="left";break;case"tableCellVerticalAlignment":this._defaultLayoutTableValue="middle";break;default:this._defaultLayoutTableValue=void 0}}refresh(){const n=this.editor.model.document.selection,o=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(n),r=Sr(n);this._defaultValue=!r||r.getAttribute("tableType")!=="layout"?this._defaultContentTableValue:this._defaultLayoutTableValue,this.isEnabled=!!o.length,this.value=this._getSingleValue(o)}execute(e={}){const{value:n,batch:s}=e,o=this.editor.model,a=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(o.document.selection),l=this._getValueToSet(n);o.enqueueChange(s,u=>{l?a.forEach(h=>u.setAttribute(this.attributeName,l,h)):a.forEach(h=>u.removeAttribute(this.attributeName,h))})}_getAttribute(e){if(!e)return;const n=e.getAttribute(this.attributeName);if(n!==this._defaultValue)return n}_getValueToSet(e){if(e!==this._defaultValue)return e}_getSingleValue(e){const n=this._getAttribute(e[0]);return e.every(o=>this._getAttribute(o)===n)?n:void 0}}class Sse extends Ho{constructor(t,e){super(t,"tableCellWidth",e)}_getValueToSet(t){if(t=Ja(t,"px"),t!==this._defaultValue)return t}}class YD extends te{static get pluginName(){return"TableCellWidthEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Vh]}init(){const t=this.editor,e=T1(t.config.get("table.tableCellProperties.defaultProperties"));Qm(t.model.schema,t.conversion,{modelAttribute:"tableCellWidth",styleName:"width",defaultValue:e.width}),t.commands.add("tableCellWidth",new Sse(t,e.width))}}class Ase extends Ho{constructor(t,e){super(t,"tableCellPadding",e)}_getAttribute(t){if(!t)return;const e=Ya(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}_getValueToSet(t){const e=Ja(t,"px");if(e!==this._defaultValue)return e}}class Rse extends Ho{constructor(t,e){super(t,"tableCellHeight",e)}_getValueToSet(t){const e=Ja(t,"px");if(e!==this._defaultValue)return e}}class Ise extends Ho{constructor(t,e){super(t,"tableCellBackgroundColor",e)}}class Pse extends Ho{constructor(t,e){super(t,"tableCellVerticalAlignment",e)}}class Mse extends Ho{constructor(t,e){super(t,"tableCellHorizontalAlignment",e)}}class Vse extends Ho{constructor(t,e){super(t,"tableCellBorderStyle",e)}_getAttribute(t){if(!t)return;const e=Ya(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class Nse extends Ho{constructor(t,e){super(t,"tableCellBorderColor",e)}_getAttribute(t){if(!t)return;const e=Ya(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class Dse extends Ho{constructor(t,e){super(t,"tableCellBorderWidth",e)}_getAttribute(t){if(!t)return;const e=Ya(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}_getValueToSet(t){const e=Ja(t,"px");if(e!==this._defaultValue)return e}}const SR=/^(top|middle|bottom)$/,AR=/^(left|center|right|justify)$/;class Ose extends te{static get pluginName(){return"TableCellPropertiesEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Vh,YD]}init(){const t=this.editor,e=t.model.schema,n=t.conversion;t.config.define("table.tableCellProperties.defaultProperties",{});const s=T1(t.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:t.locale.contentLanguageDirection==="rtl"});t.data.addStyleProcessorRules(TV),Lse(e,n,{color:s.borderColor,style:s.borderStyle,width:s.borderWidth}),t.commands.add("tableCellBorderStyle",new Vse(t,s.borderStyle)),t.commands.add("tableCellBorderColor",new Nse(t,s.borderColor)),t.commands.add("tableCellBorderWidth",new Dse(t,s.borderWidth)),Qm(e,n,{modelAttribute:"tableCellHeight",styleName:"height",defaultValue:s.height}),t.commands.add("tableCellHeight",new Rse(t,s.height)),t.data.addStyleProcessorRules(dj),Qm(e,n,{modelAttribute:"tableCellPadding",styleName:"padding",reduceBoxSides:!0,defaultValue:s.padding}),t.commands.add("tableCellPadding",new Ase(t,s.padding)),t.data.addStyleProcessorRules(q0),Qm(e,n,{modelAttribute:"tableCellBackgroundColor",styleName:"background-color",defaultValue:s.backgroundColor}),t.commands.add("tableCellBackgroundColor",new Ise(t,s.backgroundColor)),Bse(e,n,s.horizontalAlignment),t.commands.add("tableCellHorizontalAlignment",new Mse(t,s.horizontalAlignment)),Fse(e,n,s.verticalAlignment),t.commands.add("tableCellVerticalAlignment",new Pse(t,s.verticalAlignment))}}function Lse(i,t,e){const n={width:"tableCellBorderWidth",color:"tableCellBorderColor",style:"tableCellBorderStyle"};i.extend("tableCell",{allowAttributes:Object.values(n)}),gv(t,"td",n,e),gv(t,"th",n,e),Md(t,{modelElement:"tableCell",modelAttribute:n.style,styleName:"border-style"}),Md(t,{modelElement:"tableCell",modelAttribute:n.color,styleName:"border-color"}),Md(t,{modelElement:"tableCell",modelAttribute:n.width,styleName:"border-width"})}function Bse(i,t,e){i.extend("tableCell",{allowAttributes:["tableCellHorizontalAlignment"]}),t.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellHorizontalAlignment"},view:n=>({key:"style",value:{"text-align":n}})}),t.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"text-align":AR}},model:{key:"tableCellHorizontalAlignment",value:(n,s,o)=>{const r=Er(e,"left",o),a=n.getStyle("text-align");return a===r?null:a}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{align:AR}},model:{key:"tableCellHorizontalAlignment",value:(n,s,o)=>{const r=Er(e,"left",o),a=n.getAttribute("align");return a===r?null:a}}})}function Fse(i,t,e){i.extend("tableCell",{allowAttributes:["tableCellVerticalAlignment"]}),t.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellVerticalAlignment"},view:n=>({key:"style",value:{"vertical-align":n}})}),t.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"vertical-align":SR}},model:{key:"tableCellVerticalAlignment",value:(n,s,o)=>{const r=Er(e,"middle",o),a=n.getStyle("vertical-align");return a===r?null:a}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{valign:SR}},model:{key:"tableCellVerticalAlignment",value:(n,s,o)=>{const r=Er(e,"middle",o),a=n.getAttribute("valign");return a===r?null:a}}})}class Use extends te{static get pluginName(){return"TableCellProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[Ose,Ese]}}class zse extends $e{refresh(){this.isEnabled=!0}execute(t={}){const{model:e,plugins:n}=this.editor;let{table:s=e.document.selection.getSelectedElement(),columnWidths:o,tableWidth:r}=t;o&&(o=Array.isArray(o)?o:o.split(",")),e.change(a=>{r?a.setAttribute("tableWidth",r,s):a.removeAttribute("tableWidth",s);const l=n.get("TableColumnResizeEditing").getColumnGroupElement(s);if(!o&&!l)return;if(!o)return a.remove(l);const u=y1(o);if(l)Array.from(l.getChildren()).forEach((h,m)=>a.setAttribute("columnWidth",u[m],h));else{const h=a.createElement("tableColumnGroup");u.forEach(m=>a.appendElement("tableColumn",{columnWidth:m},h)),a.append(h,s)}})}}function Hse(i){return t=>t.on("element:colgroup",(e,n,s)=>{const o=n.modelCursor.findAncestor("table"),r=Ph(o);if(!r)return;const a=Mh(r),l=i.getColumns(o);let u=Bie(r,s.writer);u=Array.from({length:l},(h,m)=>u[m]||"auto"),(u.length!=a.length||u.includes("auto"))&&ND(a,r,y1(u),s.writer)},{priority:"low"})}function Wse(){return i=>i.on("insert:table",(t,e,n)=>{const s=n.writer,o=e.item,r=n.mapper.toViewElement(o),a=r.is("element","table")?r:Array.from(r.getChildren()).find(u=>u.is("element","table"));Ph(o)?s.addClass("ck-table-resized",a):s.removeClass("ck-table-resized",a)},{priority:"low"})}const RR=Nc("px");class qse extends te{constructor(e){super(e);_(this,"_isResizingActive");_(this,"_resizingData");_(this,"_domEmitter");_(this,"_tableUtilsPlugin");_(this,"_initialMouseEventData",null);this._isResizingActive=!1,this.set("_isResizingAllowed",!0),this._resizingData=null,this._domEmitter=new(Yn()),this._tableUtilsPlugin=e.plugins.get("TableUtils"),this.on("change:_isResizingAllowed",(n,s,o)=>{const r=o?"removeClass":"addClass";e.editing.view.change(a=>{for(const l of e.editing.view.document.roots)a[r]("ck-column-resize_disabled",e.editing.view.document.getRoot(l.rootName))})})}static get requires(){return[Vh,xn]}static get pluginName(){return"TableColumnResizeEditing"}static get isOfficialPlugin(){return!0}init(){this._extendSchema(),this._registerPostFixer(),this._registerConverters(),this._registerResizingListeners(),this._registerResizerInserter();const e=this.editor,n=e.plugins.get("TableColumnResize");e.plugins.get("TableEditing").registerAdditionalSlot({filter:r=>r.is("element","tableColumnGroup"),positionOffset:0});const o=new zse(e);e.commands.add("resizeTableWidth",o),e.commands.add("resizeColumnWidths",o),this.bind("_isResizingAllowed").to(e,"isReadOnly",n,"isEnabled",o,"isEnabled",(r,a,l)=>!r&&a&&l)}destroy(){this._domEmitter.stopListening(),super.destroy()}getColumnGroupElement(e){return Ph(e)}getTableColumnElements(e){return Mh(e)}getTableColumnsWidths(e){return Lie(e)}_extendSchema(){this.editor.model.schema.extend("table",{allowAttributes:["tableWidth"]}),this.editor.model.schema.register("tableColumnGroup",{allowIn:"table",isLimit:!0}),this.editor.model.schema.register("tableColumn",{allowIn:"tableColumnGroup",allowAttributes:["columnWidth","colSpan"],isLimit:!0})}_registerPostFixer(){const n=this.editor.model;n.document.registerPostFixer(r=>{let a=!1;for(const l of Iie(n)){const u=this.getColumnGroupElement(l),h=this.getTableColumnElements(u),m=this.getTableColumnsWidths(u);let p=y1(m);p=s(p,l,this),!wg(m,p)&&(ND(h,u,p,r),a=!0)}return a});function s(r,a,l){const u=l._tableUtilsPlugin.getColumns(a);if(u-r.length===0)return r;const m=r.map(v=>Number(v.replace("%",""))),p=o(l.editor.model.document.differ,a);for(const v of p){const C=u-m.length;if(C===0)continue;const x=C>0,k=l._tableUtilsPlugin.getCellLocation(v).column;if(x){const S=Pie(a,l.editor),I=Nie(C,S);m.splice(k,0,...I)}else{const S=m.splice(k,Math.abs(C));m[k]+=ah(S)}}return m.map(v=>v+"%")}function o(r,a){const l=new Set;for(const u of r.getChanges())if(u.type=="insert"&&u.position.nodeAfter&&u.position.nodeAfter.name=="tableCell"&&u.position.nodeAfter.getAncestors().includes(a))l.add(u.position.nodeAfter);else if(u.type=="remove"){const h=u.position.nodeBefore||u.position.nodeAfter;h.name=="tableCell"&&h.getAncestors().includes(a)&&l.add(h)}return l}}_registerConverters(){const n=this.editor.conversion;n.for("upcast").attributeToAttribute({view:{name:/^(figure|table)$/,styles:{width:/[\s\S]+/}},model:{name:"table",key:"tableWidth",value:s=>s.getStyle("width")}}),n.for("downcast").attributeToAttribute({model:{name:"table",key:"tableWidth"},view:s=>({name:"figure",key:"style",value:{width:s}})}),n.elementToElement({model:"tableColumnGroup",view:"colgroup"}),n.elementToElement({model:"tableColumn",view:"col"}),n.for("downcast").add(Wse()),n.for("upcast").add(Hse(this._tableUtilsPlugin)),n.for("upcast").attributeToAttribute({view:{name:"col",styles:{width:/.*/}},model:{key:"columnWidth",value:s=>{const o=s.getStyle("width");return!o||!o.endsWith("%")&&!o.endsWith("pt")?"auto":o}}}),n.for("upcast").attributeToAttribute({view:{name:"col",key:"span"},model:"colSpan"}),n.for("downcast").attributeToAttribute({model:{name:"tableColumn",key:"columnWidth"},view:s=>({key:"style",value:{width:s}})})}_registerResizingListeners(){const e=this.editor.editing.view;e.addObserver(LD),e.document.on("mouseover",this._onMouseOverHandler.bind(this),{priority:"high"}),e.document.on("mousedown",this._onMouseDownHandler.bind(this),{priority:"high"}),e.document.on("mouseout",this._onMouseOutHandler.bind(this),{priority:"high"}),this._domEmitter.listenTo(de.window.document,"mousemove",vc(this._onMouseMoveHandler.bind(this),50)),this._domEmitter.listenTo(de.window.document,"mouseup",this._onMouseUpHandler.bind(this))}_recalculateResizerElement(e){const n=this.editor,s=n.editing.view.domConverter,o=s.mapViewToDom(e.findAncestor("table")),r=s.mapViewToDom(e.findAncestor(m=>["td","th"].includes(m.name))),a=new Pe(o),l=new Pe(r),u=RR(Number((a.top-l.top).toFixed(4))),h=RR(Number((l.bottom-a.bottom).toFixed(4)));n.editing.view.change(m=>{m.setStyle("top",u,e),m.setStyle("bottom",h,e)})}_resetResizerStyles(e){this.editor.editing.view.change(n=>{n.removeStyle("top",e),n.removeStyle("bottom",e)})}_onMouseOverHandler(e,n){const s=n.target;s.hasClass("ck-table-column-resizer")&&this._isResizingAllowed&&this._recalculateResizerElement(s)}_onMouseOutHandler(e,n){const s=n.target;s.hasClass("ck-table-column-resizer")&&this._isResizingAllowed&&(this._isResizingActive||this._resetResizerStyles(s))}_onMouseDownHandler(e,n){const s=n.target;if(!s.hasClass("ck-table-column-resizer")||!this._isResizingAllowed)return;const o=this.editor,r=o.editing.mapper.toModelElement(s.findAncestor("figure"));o.model.canEditAt(r)&&(n.preventDefault(),e.stop(),this._initialMouseEventData=n)}_startResizingAfterThreshold(){const e=this._initialMouseEventData,{target:n}=e,s=this.editor.editing.mapper.toModelElement(n.findAncestor("figure")),o=n.findAncestor("table"),r=a(s,this._tableUtilsPlugin,this.editor);Array.from(o.getChildren()).find(h=>h.is("element","colgroup"))||this.editor.editing.view.change(h=>{l(h,r,o)}),this._isResizingActive=!0,this._resizingData=this._getResizingData(e,r),this.editor.editing.view.change(h=>u(h,o,this._resizingData));function a(h,m,p){const v=Array(m.getColumns(h)),C=new pt(h);for(const x of C){const k=p.editing.mapper.toViewElement(x.cell),S=p.editing.view.domConverter.mapViewToDom(k),I=Oie(S);(!v[x.column]||I<v[x.column])&&(v[x.column]=pi(I))}return v}function l(h,m,p){const v=h.createContainerElement("colgroup");for(let C=0;C<m.length;C++){const x=h.createEmptyElement("col"),k=`${pi(m[C]/ah(m)*100)}%`;h.setStyle("width",k,x),h.insert(h.createPositionAt(v,"end"),x)}h.insert(h.createPositionAt(p,0),v)}function u(h,m,p){const v=p.widths.viewFigureWidth/p.widths.viewFigureParentWidth;h.addClass("ck-table-resized",m),h.addClass("ck-table-column-resizer__active",p.elements.viewResizer),h.setStyle("width",`${pi(v*100)}%`,m.findAncestor("figure"))}}_onMouseMoveHandler(e,n){if(this._initialMouseEventData){const O=this._initialMouseEventData.domEvent;if(Math.abs(n.clientX-O.clientX)>=Rie)this._startResizingAfterThreshold(),this._initialMouseEventData=null;else return}if(!this._isResizingActive)return;if(!this._isResizingAllowed){this._onMouseUpHandler();return}const{columnPosition:s,flags:{isRightEdge:o,isTableCentered:r,isLtrContent:a},elements:{viewFigure:l,viewLeftColumn:u,viewRightColumn:h,viewResizer:m},widths:{viewFigureParentWidth:p,tableWidth:v,leftColumnWidth:C,rightColumnWidth:x}}=this._resizingData,k=-C+wv,S=o?p-v:x-wv,I=(a?1:-1)*(o&&r?2:1),P=Vie((n.clientX-s)*I,Math.min(k,0),Math.max(S,0));P!==0&&(this.editor.editing.view.change(O=>{const D=pi((C+P)*100/v);if(O.setStyle("width",`${D}%`,u),o){const Y=pi((v+P)*100/p);O.setStyle("width",`${Y}%`,l)}else{const Y=pi((x-P)*100/v);O.setStyle("width",`${Y}%`,h)}}),this._recalculateResizerElement(m))}_onMouseUpHandler(){if(this._initialMouseEventData=null,!this._isResizingActive)return;const{viewResizer:e,modelTable:n,viewFigure:s,viewColgroup:o}=this._resizingData.elements,r=this.editor,a=r.editing.view,l=this.getColumnGroupElement(n),u=Array.from(o.getChildren()).filter(S=>S.is("view:element")),h=l?this.getTableColumnsWidths(l):null,m=u.map(S=>S.getStyle("width")),p=!wg(h,m),v=n.getAttribute("tableWidth"),C=s.getStyle("width"),x=v!==C;(p||x)&&(this._isResizingAllowed?r.execute("resizeTableWidth",{table:n,tableWidth:`${pi(C)}%`,columnWidths:m}):a.change(S=>{if(h)for(const I of u)S.setStyle("width",h.shift(),I);else S.remove(o);x&&(v?S.setStyle("width",v,s):S.removeStyle("width",s)),!h&&!v&&S.removeClass("ck-table-resized",[...s.getChildren()].find(I=>I.name==="table"))})),a.change(S=>{S.removeClass("ck-table-column-resizer__active",e)}),a.domConverter.mapViewToDom(e).matches(":hover")||this._resetResizerStyles(e),this._isResizingActive=!1,this._resizingData=null}_getResizingData(e,n){const s=this.editor,o=e.domEvent.clientX,r=e.target,a=r.findAncestor("td")||r.findAncestor("th"),l=s.editing.mapper.toModelElement(a),u=l.findAncestor("table"),h=Mie(l,this._tableUtilsPlugin).rightEdge,m=this._tableUtilsPlugin.getColumns(u)-1,p=h===m,v=!u.hasAttribute("tableAlignment"),C=s.locale.contentLanguageDirection!=="rtl",x=a.findAncestor("table"),k=x.findAncestor("figure"),S=[...x.getChildren()].find(U=>U.is("element","colgroup")),I=S.getChild(h),P=p?void 0:S.getChild(h+1),O=yv(s.editing.view.domConverter.mapViewToDom(k.parent)),D=yv(s.editing.view.domConverter.mapViewToDom(k)),Y=VD(u,s),F=n[h],j=p?void 0:n[h+1];return{columnPosition:o,flags:{isRightEdge:p,isTableCentered:v,isLtrContent:C},elements:{viewResizer:r,modelTable:u,viewFigure:k,viewColgroup:S,viewLeftColumn:I,viewRightColumn:P},widths:{viewFigureParentWidth:O,viewFigureWidth:D,tableWidth:Y,leftColumnWidth:F,rightColumnWidth:j}}}_registerResizerInserter(){this.editor.conversion.for("editingDowncast").add(e=>{e.on("insert:tableCell",(n,s,o)=>{const r=s.item,a=o.mapper.toViewElement(r),l=o.writer;l.insert(l.createPositionAt(a,"end"),l.createUIElement("div",{class:"ck-table-column-resizer"}))},{priority:"lowest"})})}}class $se extends te{static get requires(){return[qse,YD]}static get pluginName(){return"TableColumnResize"}static get isOfficialPlugin(){return!0}}class Xa extends $e{constructor(e,n,s){super(e);_(this,"attributeName");_(this,"_defaultValue");_(this,"_defaultContentTableValue");_(this,"_defaultLayoutTableValue");this.attributeName=n,this._defaultContentTableValue=s,this._defaultLayoutTableValue=n==="tableBorderStyle"?"none":void 0}refresh(){const n=this.editor.model.document.selection,s=Sr(n);this._defaultValue=!s||s.getAttribute("tableType")!=="layout"?this._defaultContentTableValue:this._defaultLayoutTableValue,this.isEnabled=!!s,this.value=this._getValue(s)}execute(e={}){const n=this.editor.model,s=n.document.selection,{value:o,batch:r}=e,a=Sr(s),l=this._getValueToSet(o);n.enqueueChange(r,u=>{l?u.setAttribute(this.attributeName,l,a):u.removeAttribute(this.attributeName,a)})}_getValue(e){if(!e)return;const n=e.getAttribute(this.attributeName);if(n!==this._defaultValue)return n}_getValueToSet(e){if(e!==this._defaultValue)return e}}class Gse extends Xa{constructor(t,e){super(t,"tableBackgroundColor",e)}}class jse extends Xa{constructor(t,e){super(t,"tableBorderColor",e)}_getValue(t){if(!t)return;const e=Ya(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class Kse extends Xa{constructor(t,e){super(t,"tableBorderStyle",e)}_getValue(t){if(!t)return;const e=Ya(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class Zse extends Xa{constructor(t,e){super(t,"tableBorderWidth",e)}_getValue(t){if(!t)return;const e=Ya(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}_getValueToSet(t){const e=Ja(t,"px");if(e!==this._defaultValue)return e}}class Yse extends Xa{constructor(t,e){super(t,"tableWidth",e)}_getValueToSet(t){if(t=Ja(t,"px"),t!==this._defaultValue)return t}}class Jse extends Xa{constructor(t,e){super(t,"tableHeight",e)}_getValueToSet(t){if(t=Ja(t,"px"),t!==this._defaultValue)return t}}class Xse extends Xa{constructor(t,e){super(t,"tableAlignment",e)}}const Qse=/^(left|center|right)$/,eoe=/^(left|none|right)$/;class toe extends te{static get pluginName(){return"TablePropertiesEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Vh]}init(){const t=this.editor,e=t.model.schema,n=t.conversion;t.config.define("table.tableProperties.defaultProperties",{});const s=ZD(t.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0});t.data.addStyleProcessorRules(TV),noe(e,n,{color:s.borderColor,style:s.borderStyle,width:s.borderWidth}),t.commands.add("tableBorderColor",new jse(t,s.borderColor)),t.commands.add("tableBorderStyle",new Kse(t,s.borderStyle)),t.commands.add("tableBorderWidth",new Zse(t,s.borderWidth)),ioe(e,n,s.alignment),t.commands.add("tableAlignment",new Xse(t,s.alignment)),IR(e,n,{modelAttribute:"tableWidth",styleName:"width",defaultValue:s.width}),t.commands.add("tableWidth",new Yse(t,s.width)),IR(e,n,{modelAttribute:"tableHeight",styleName:"height",defaultValue:s.height}),t.commands.add("tableHeight",new Jse(t,s.height)),t.data.addStyleProcessorRules(q0),soe(e,n,{modelAttribute:"tableBackgroundColor",styleName:"background-color",defaultValue:s.backgroundColor}),t.commands.add("tableBackgroundColor",new Gse(t,s.backgroundColor))}}function noe(i,t,e){const n={width:"tableBorderWidth",color:"tableBorderColor",style:"tableBorderStyle"};i.extend("table",{allowAttributes:Object.values(n)}),gv(t,"table",n,e),Jm(t,{modelAttribute:n.color,styleName:"border-color"}),Jm(t,{modelAttribute:n.style,styleName:"border-style"}),Jm(t,{modelAttribute:n.width,styleName:"border-width"})}function ioe(i,t,e){i.extend("table",{allowAttributes:["tableAlignment"]}),t.for("downcast").attributeToAttribute({model:{name:"table",key:"tableAlignment",values:["left","center","right"]},view:{left:{key:"style",value:{float:"left"}},right:{key:"style",value:{float:"right"}},center:(n,s,o)=>({key:"style",value:o.item.getAttribute("tableType")!=="layout"?{float:"none"}:{"margin-left":"auto","margin-right":"auto"}})},converterPriority:"high"}),t.for("upcast").attributeToAttribute({view:{name:/^(table|figure)$/,styles:{float:eoe}},model:{key:"tableAlignment",value:(n,s,o)=>{const r=Er(e,"",o);let a=n.getStyle("float");return a==="none"&&(a="center"),a===r?null:a}}}).attributeToAttribute({view:{name:/^(table|figure)$/,styles:{"margin-left":"auto","margin-right":"auto"}},model:{key:"tableAlignment",value:(n,s,o)=>{const r=Er(e,"",o),a="center";return a===r?null:a}}}).attributeToAttribute({view:{attributes:{align:Qse}},model:{name:"table",key:"tableAlignment",value:(n,s,o)=>{const r=Er(e,"",o),a=n.getAttribute("align");return a===r?null:a}}})}function soe(i,t,e){const{modelAttribute:n}=e;i.extend("table",{allowAttributes:[n]}),_1(t,{viewElement:"table",...e}),Jm(t,e)}function IR(i,t,e){const{modelAttribute:n}=e;i.extend("table",{allowAttributes:[n]}),_1(t,{viewElement:/^(table|figure)$/,shouldUpcast:s=>!(s.name=="table"&&s.parent.name=="figure"),...e}),Md(t,{modelElement:"table",...e})}class ooe extends fe{constructor(e,n){super(e);_(this,"options");_(this,"focusTracker");_(this,"keystrokes");_(this,"children");_(this,"borderStyleDropdown");_(this,"borderWidthInput");_(this,"borderColorInput");_(this,"backgroundInput");_(this,"widthInput");_(this,"heightInput");_(this,"alignmentToolbar");_(this,"saveButtonView");_(this,"cancelButtonView");_(this,"_focusables");_(this,"_focusCycler");this.set({borderStyle:"",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",alignment:""}),this.options=n;const{borderStyleDropdown:s,borderWidthInput:o,borderColorInput:r,borderRowLabel:a}=this._createBorderFields(),{backgroundRowLabel:l,backgroundInput:u}=this._createBackgroundFields(),{widthInput:h,operatorLabel:m,heightInput:p,dimensionsLabel:v}=this._createDimensionFields(),{alignmentToolbar:C,alignmentLabel:x}=this._createAlignmentFields();this.focusTracker=new wt,this.keystrokes=new Dt,this.children=this.createCollection(),this.borderStyleDropdown=s,this.borderWidthInput=o,this.borderColorInput=r,this.backgroundInput=u,this.widthInput=h,this.heightInput=p,this.alignmentToolbar=C;const{saveButtonView:k,cancelButtonView:S}=this._createActionButtons();this.saveButtonView=k,this.cancelButtonView=S,this._focusables=new Sn,this._focusCycler=new cn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new zo(e,{label:this.t("Table properties")})),this.children.add(new Vn(e,{labelView:a,children:[a,s,r,o],class:"ck-table-form__border-row"})),this.children.add(new Vn(e,{labelView:l,children:[l,u],class:"ck-table-form__background-row"})),this.children.add(new Vn(e,{children:[new Vn(e,{labelView:v,children:[v,h,m,p],class:"ck-table-form__dimensions-row"}),new Vn(e,{labelView:x,children:[x,C],class:"ck-table-properties-form__alignment-row"})]})),this.children.add(new Vn(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),zr({view:this}),[this.borderColorInput,this.backgroundInput].forEach(e=>{this._focusCycler.chain(e.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.alignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableProperties,n={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},s=Wg({colorConfig:this.options.borderColors,columns:5,defaultColorValue:n.color,colorPickerConfig:this.options.colorPickerConfig}),o=this.locale,r=this.t,a=r("Style"),l=new Qi(o);l.text=r("Border");const u=C1(r),h=new sn(o,dN);h.set({label:a,class:"ck-table-form__border-style"}),h.fieldView.buttonView.set({ariaLabel:a,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:a}),h.fieldView.buttonView.bind("label").to(this,"borderStyle",v=>u[v||"none"]),h.fieldView.on("execute",v=>{this.borderStyle=v.source._borderStyleValue}),h.bind("isEmpty").to(this,"borderStyle",v=>!v),Ka(h.fieldView,WD(this,n.style),{role:"menu",ariaLabel:a});const m=new sn(o,ti);m.set({label:r("Width"),class:"ck-table-form__border-width"}),m.fieldView.bind("value").to(this,"borderWidth"),m.bind("isEnabled").to(this,"borderStyle",Sm),m.fieldView.on("input",()=>{this.borderWidth=m.fieldView.element.value});const p=new sn(o,s);return p.set({label:r("Color"),class:"ck-table-form__border-color"}),p.fieldView.bind("value").to(this,"borderColor"),p.bind("isEnabled").to(this,"borderStyle",Sm),p.fieldView.on("input",()=>{this.borderColor=p.fieldView.value}),this.on("change:borderStyle",(v,C,x,k)=>{Sm(x)||(this.borderColor="",this.borderWidth=""),Sm(k)||(this.borderColor=n.color,this.borderWidth=n.width)}),{borderRowLabel:l,borderStyleDropdown:h,borderColorInput:p,borderWidthInput:m}}_createBackgroundFields(){const e=this.locale,n=this.t,s=new Qi(e);s.text=n("Background");const o=Wg({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),r=new sn(e,o);return r.set({label:n("Color"),class:"ck-table-properties-form__background"}),r.fieldView.bind("value").to(this,"backgroundColor"),r.fieldView.on("input",()=>{this.backgroundColor=r.fieldView.value}),{backgroundRowLabel:s,backgroundInput:r}}_createDimensionFields(){const e=this.locale,n=this.t,s=new Qi(e);s.text=n("Dimensions");const o=new sn(e,ti);o.set({label:n("Width"),class:"ck-table-form__dimensions-row__width"}),o.fieldView.bind("value").to(this,"width"),o.fieldView.on("input",()=>{this.width=o.fieldView.element.value});const r=new fe(e);r.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const a=new sn(e,ti);return a.set({label:n("Height"),class:"ck-table-form__dimensions-row__height"}),a.fieldView.bind("value").to(this,"height"),a.fieldView.on("input",()=>{this.height=a.fieldView.element.value}),{dimensionsLabel:s,widthInput:o,operatorLabel:r,heightInput:a}}_createAlignmentFields(){const e=this.locale,n=this.t,s=new Qi(e);s.text=n("Alignment");const o=new Da(e);return o.set({role:"radiogroup",isCompact:!0,ariaLabel:n("Table alignment toolbar")}),xv({view:this,icons:{left:G0,center:Ig,right:Pg},toolbar:o,labels:this._alignmentLabels,propertyName:"alignment",defaultValue:this.options.defaultTableProperties.alignment}),{alignmentLabel:s,alignmentToolbar:o}}_createActionButtons(){const e=this.locale,n=this.t,s=new ke(e),o=new ke(e),r=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.widthInput,this.heightInput];return s.set({label:n("Save"),icon:Pp,class:"ck-button-save",type:"submit",withText:!0}),s.bind("isEnabled").toMany(r,"errorText",(...a)=>a.every(l=>!l)),o.set({label:n("Cancel"),icon:Sh,class:"ck-button-cancel",withText:!0}),o.delegate("execute").to(this,"cancel"),{saveButtonView:s,cancelButtonView:o}}get _alignmentLabels(){const e=this.locale,n=this.t,s=n("Align table to the left"),o=n("Center table"),r=n("Align table to the right");return e.uiLanguageDirection==="rtl"?{right:r,center:o,left:s}:{left:s,center:o,right:r}}}function Sm(i){return i!=="none"}const roe=500,PR={borderStyle:"tableBorderStyle",borderColor:"tableBorderColor",borderWidth:"tableBorderWidth",backgroundColor:"tableBackgroundColor",width:"tableWidth",height:"tableHeight",alignment:"tableAlignment"};class aoe extends te{constructor(e){super(e);_(this,"_defaultContentTableProperties");_(this,"_defaultLayoutTableProperties");_(this,"_balloon");_(this,"view",null);_(this,"_viewWithContentTableDefaults",null);_(this,"_viewWithLayoutTableDefaults",null);_(this,"_undoStepBatch");_(this,"_isReady");e.config.define("table.tableProperties",{borderColors:Hg,backgroundColors:Hg})}static get requires(){return[as]}static get pluginName(){return"TablePropertiesUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;this._defaultContentTableProperties=ZD(e.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0}),this._defaultLayoutTableProperties=Fp(),this._balloon=e.plugins.get(as),e.ui.componentFactory.add("tableProperties",()=>this._createTablePropertiesButton())}_createTablePropertiesButton(){const e=this.editor,n=e.t,s=new ke(e.locale);s.set({label:n("Table properties"),icon:pK,tooltip:!0}),this.listenTo(s,"execute",()=>this._showView());const o=Object.values(PR).map(r=>e.commands.get(r));return s.bind("isEnabled").toMany(o,"isEnabled",(...r)=>r.some(a=>a)),s}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(e){const n=this.editor,s=n.config.get("table.tableProperties"),o=oh(s.borderColors),r=sh(n.locale,o),a=oh(s.backgroundColors),l=sh(n.locale,a),u=s.colorPicker!==!1,h=new ooe(n.locale,{borderColors:r,backgroundColors:l,defaultTableProperties:e,colorPickerConfig:u?s.colorPicker||{}:!1}),m=n.t;h.render(),this.listenTo(h,"submit",()=>{this._hideView()}),this.listenTo(h,"cancel",()=>{this._undoStepBatch.operations.length&&n.execute("undo",this._undoStepBatch),this._hideView()}),h.keystrokes.set("Esc",(C,x)=>{this._hideView(),x()}),Uo({emitter:h,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const p=UD(m),v=zD(m);return h.on("change:borderStyle",this._getPropertyChangeCallback("tableBorderStyle")),h.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:h.borderColorInput,commandName:"tableBorderColor",errorText:p,validator:zg})),h.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:h.borderWidthInput,commandName:"tableBorderWidth",errorText:v,validator:HD})),h.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:h.backgroundInput,commandName:"tableBackgroundColor",errorText:p,validator:zg})),h.on("change:width",this._getValidatedPropertyChangeCallback({viewField:h.widthInput,commandName:"tableWidth",errorText:v,validator:Vd})),h.on("change:height",this._getValidatedPropertyChangeCallback({viewField:h.heightInput,commandName:"tableHeight",errorText:v,validator:Vd})),h.on("change:alignment",this._getPropertyChangeCallback("tableAlignment")),h}_fillViewFormFromCommandValues(){const e=this.editor.commands,n=e.get("tableBorderStyle");Object.entries(PR).map(([s,o])=>{const r=s,a=this.view===this._viewWithContentTableDefaults?this._defaultContentTableProperties[r]||"":this._defaultLayoutTableProperties[r]||"";return[r,e.get(o).value||a]}).forEach(([s,o])=>{(s==="borderColor"||s==="borderWidth")&&n.value==="none"||this.view.set(s,o)}),this._isReady=!0}_showView(){const e=this.editor,n=Ug(e.editing.view.document.selection),s=n&&e.editing.mapper.toModelElement(n),o=!s||s.getAttribute("tableType")!=="layout";o&&!this._viewWithContentTableDefaults?this._viewWithContentTableDefaults=this._createPropertiesView(this._defaultContentTableProperties):!o&&!this._viewWithLayoutTableDefaults&&(this._viewWithLayoutTableDefaults=this._createPropertiesView(this._defaultLayoutTableProperties)),this.view=o?this._viewWithContentTableDefaults:this._viewWithLayoutTableDefaults,this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:GD(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,n=e.editing.view.document;Ug(n.selection)?this._isViewVisible&&$D(e,"table"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(n,s,o)=>{this._isReady&&this.editor.execute(e,{value:o,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:n,viewField:s,validator:o,errorText:r}=e,a=ss(()=>{s.errorText=r},roe);return(l,u,h)=>{a.cancel(),this._isReady&&(o(h)?(this.editor.execute(n,{value:h,batch:this._undoStepBatch}),s.errorText=null):a())}}}class loe extends te{static get pluginName(){return"TableProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[toe,aoe]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function coe(i){i.document.registerPostFixer(t=>uoe(t,i))}function uoe(i,t){const e=t.document.differ.getChanges();let n=!1;for(const s of e){if(s.type!="insert")continue;const o=s.position.parent;if(o.is("element","table")||s.name=="table"){const r=s.name=="table"?s.position.nodeAfter:o,a=Array.from(r.getChildren()).filter(u=>u.is("element","caption")),l=a.shift();if(!l)continue;for(const u of a)i.move(i.createRangeIn(u),l,"end"),i.remove(u);l.nextSibling&&(i.move(i.createRangeOn(l),r,"end"),n=!0),n=!!a.length||n}}return n}function MR(i){return!!i&&i.is("element","table")}function Ev(i){for(const t of i.getChildren())if(t.is("element","caption"))return t;return null}function doe(i){const t=Sr(i);return t?Ev(t):null}function hoe(i){const t=i.parent;return i.name=="figcaption"&&t&&t.is("element","figure")&&t.hasClass("table")?{name:!0}:i.name=="caption"&&t&&t.is("element","table")?{name:!0}:null}class foe extends $e{refresh(){const t=this.editor,e=Sr(t.model.document.selection);this.isEnabled=!!e&&t.model.schema.checkChild(e,"caption"),this.isEnabled?this.value=!!Ev(e):this.value=!1}execute({focusCaptionOnShow:t=!1}={}){this.editor.model.change(e=>{this.value?this._hideTableCaption(e):this._showTableCaption(e,t)})}_showTableCaption(t,e){const n=this.editor.model,s=Sr(n.document.selection),a=this.editor.plugins.get("TableCaptionEditing")._getSavedCaption(s)||t.createElement("caption");n.insertContent(a,s,"end"),e&&t.setSelection(a,"in")}_hideTableCaption(t){const e=this.editor.model,n=Sr(e.document.selection),s=this.editor.plugins.get("TableCaptionEditing"),o=Ev(n);s._saveCaption(n,o),e.deleteContent(t.createSelection(o,"on"))}}class moe extends te{constructor(e){super(e);_(this,"_savedCaptionsMap");this._savedCaptionsMap=new WeakMap}static get pluginName(){return"TableCaptionEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,n=e.model.schema,s=e.editing.view,o=e.t;n.isRegistered("caption")?n.extend("caption",{allowIn:"table"}):n.register("caption",{allowIn:"table",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleTableCaption",new foe(this.editor)),e.conversion.for("upcast").elementToElement({view:hoe,model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(r,{writer:a})=>MR(r.parent)?a.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(r,{writer:a})=>{if(!MR(r.parent))return null;const l=a.createEditableElement("figcaption");return a.setCustomProperty("tableCaption",!0,l),l.placeholder=o("Enter table caption"),V0({view:s,element:l,keepOnFocus:!0}),l1(l,a)}}),coe(e.model)}_getSavedCaption(e){const n=this._savedCaptionsMap.get(e);return n?Rt.fromJSON(n):null}_saveCaption(e,n){this._savedCaptionsMap.set(e,n.toJSON())}}class goe extends te{static get pluginName(){return"TableCaptionUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,n=t.t;t.ui.componentFactory.add("toggleTableCaption",s=>{const o=t.commands.get("toggleTableCaption"),r=new ke(s);return r.set({icon:NV,tooltip:!0,isToggleable:!0}),r.bind("isOn","isEnabled").to(o,"value","isEnabled"),r.bind("label").to(o,"value",a=>n(a?"Toggle caption off":"Toggle caption on")),this.listenTo(r,"execute",()=>{if(t.execute("toggleTableCaption",{focusCaptionOnShow:!0}),o.value){const a=doe(t.model.document.selection),l=t.editing.mapper.toViewElement(a);if(!l)return;e.scrollToTheSelection(),e.change(u=>{u.addClass("table__caption_highlighted",l)})}t.editing.view.focus()}),r})}}class poe extends te{static get pluginName(){return"TableCaption"}static get isOfficialPlugin(){return!0}static get requires(){return[moe,goe]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const boe={ko:{dictionary:{"Words: %0":"단어 수: %0","Characters: %0":"문자 수: %0","Widget toolbar":"위젯 툴바","Insert paragraph before block":"블록 앞에 단락 삽입","Insert paragraph after block":"블록 뒤에 단락 삽입","Press Enter to type after or press Shift + Enter to type before the widget":"엔터를 눌러서 위젯 뒤에 입력하거나 시프트 + 엔터를 눌러서 위젯 앞에 입력하세요","Keystrokes that can be used when a widget is selected (for example: image, table, etc.)":"위젯이 선택되었을 때 사용할 수 있는 키 입력(예: 이미지, 표 등)","Insert a new paragraph directly after a widget":"위젯 바로 뒤에 새 단락 삽입","Insert a new paragraph directly before a widget":"위젯 바로 앞에 새 단락 삽입","Move the caret to allow typing directly before a widget":"위젯 바로 앞에 입력할 수 있도록 삽입 기호 이동","Move the caret to allow typing directly after a widget":"위젯 바로 뒤에 입력할 수 있도록 삽입 기호 이동","Move focus from an editable area back to the parent widget":"포커스를 편집 가능 영역에서 부모위젯으로 옮기기","Upload in progress":"업로드 진행 중",Undo:"실행 취소",Redo:"다시 실행","Rich Text Editor":"서식 있는 텍스트 편집기","Edit block":"편집 영역","Click to edit block":"클릭하여 블록 편집","Drag to move":"드래그하여 이동",Next:"다음",Previous:"이전","Editor toolbar":"편집기 툴바","Dropdown toolbar":"드롭다운 툴바","Dropdown menu":"드롭다운 메뉴",Black:"검은색","Dim grey":"진한 회색",Grey:"회색","Light grey":"밝은 회색",White:"흰색",Red:"빨간색",Orange:"주황색",Yellow:"노랑색","Light green":"연한 초록색",Green:"초록색",Aquamarine:"연한 청록색",Turquoise:"청록색","Light blue":"연한 파랑색",Blue:"파랑색",Purple:"보라색","Editor block content toolbar":"편집기 영역 내용 툴바","Editor contextual toolbar":"편집기 문맥 툴바",HEX:"HEX","No results found":"결과 찾을 수 없음","No searchable items":"검색 가능한 항목 없음","Editor dialog":"편집기 대화상자",Close:"닫기","Help Contents. To close this dialog press ESC.":"도움말 내용입니다. 이 대화 상자를 닫으려면 ESC 키를 누르세요.","Below, you can find a list of keyboard shortcuts that can be used in the editor.":"편집기에서 사용할 수 있는 키보드 단축키 목록을 아래에서 확인할 수 있습니다.","(may require <kbd>Fn</kbd>)":"(<kbd>Fn</kbd> 키가 필요할 수 있음)",Accessibility:"접근성","Accessibility help":"접근성 도움말","Press %0 for help.":"도움말을 보려면 %0 키를 누르세요.","Move focus in and out of an active dialog window":"활성화된 대화 창 안팎으로 포커스 이동",MENU_BAR_MENU_FILE:"파일",MENU_BAR_MENU_EDIT:"수정",MENU_BAR_MENU_VIEW:"보기",MENU_BAR_MENU_INSERT:"삽입",MENU_BAR_MENU_FORMAT:"서식",MENU_BAR_MENU_TOOLS:"도구",MENU_BAR_MENU_HELP:"도움말",MENU_BAR_MENU_TEXT:"텍스트",MENU_BAR_MENU_FONT:"글꼴","Editor menu bar":"편집기 메뉴 표시줄",'Please enter a valid color (e.g. "ff0000").':'유효한 색상을 입력해 주세요(예를 들어, "ff0000").',"Insert table":"테이블 삽입","Header column":"헤더 열","Insert column left":"왼쪽에 열 삽입","Insert column right":"오른쪽에 열 삽입","Delete column":"열 삭제","Select column":"열 선택",Column:"열","Header row":"헤더 행","Insert row below":"아래에 행 삽입","Insert row above":"위에 행 삽입","Delete row":"행 삭제","Select row":"행 선택",Row:"행","Merge cell up":"위 셀과 병합","Merge cell right":"오른쪽 셀과 병합","Merge cell down":"아래 셀과 병합","Merge cell left":"왼쪽 셀과 병합","Split cell vertically":"세로로 셀 분할","Split cell horizontally":"가로로 셀 분할","Merge cells":"셀 병합","Table toolbar":"표 도구 모음","Table properties":"표 속성","Cell properties":"셀 속성",Border:"테두리",Style:"스타일",Width:"가로",Height:"세로",Color:"색",Background:"배경색",Padding:"여백",Dimensions:"크기","Table cell text alignment":"표 셀 텍스트 정렬",Alignment:"정렬","Horizontal text alignment toolbar":"가로 텍스트 정렬 도구 모음","Vertical text alignment toolbar":"세로 텍스트 정렬 도구 모음","Table alignment toolbar":"표 정렬 도구 모음",None:"선 없음",Solid:"실선",Dotted:"점선",Dashed:"파선",Double:"이중선",Groove:"음각선",Ridge:"양각선",Inset:"측면 음각선",Outset:"측면 양각선","Align cell text to the left":"셀 텍스트를 왼쪽으로 정렬","Align cell text to the center":"셀 텍스트를 가로 가운데로 정렬","Align cell text to the right":"셀 텍스트를 오른쪽으로 정렬","Justify cell text":"셀 텍스트를 양쪽으로 정렬","Align cell text to the top":"셀 텍스트를 위로 정렬","Align cell text to the middle":"셀 텍스트를 세로 가운데로 정렬","Align cell text to the bottom":"셀 텍스트를 아래로 정렬","Align table to the left":"테이블을 왼쪽으로 정렬","Center table":"테이블을 가운데로 정렬","Align table to the right":"테이블을 오른쪽으로 정렬",'The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".':'유효하지 않은 색입니다. "#FF0000"이나 "rgb(255,0,0)", 또는 "red"를 입력해 보세요.','The value is invalid. Try "10px" or "2em" or simply "2".':'유효하지 않은 값입니다. "10px"나 "2em" 또는 그냥 "2"를 입력해 보세요.',"Enter table caption":"테이블 캡션 입력","Keystrokes that can be used in a table cell":"표 셀에서 사용할 수 있는 키 입력","Move the selection to the next cell":"선택 항목을 다음 셀로 이동","Move the selection to the previous cell":"선택 항목을 이전 셀로 이동","Insert a new table row (when in the last cell of a table)":"새 표 행 삽입(표의 마지막 셀에 있을 때)","Navigate through the table":"표 탐색",Table:"표","Insert table layout":"표 레이아웃 삽입","Table layout":"표 레이아웃","Layout table":"레이아웃 표","Content table":"콘텐츠 표","Choose table type":"표 유형 선택","Table type":"표 유형","Table type options":"표 유형 옵션",Styles:"스타일","Multiple styles":"다중 스타일","Block styles":"블록 스타일","Text styles":"텍스트 스타일","Special characters":"특수 문자",Category:"카테고리",All:"전체",Arrows:"화살표",Currency:"통화",Latin:"라틴",Mathematical:"수식",Text:"텍스트","leftwards simple arrow":"왼쪽 단순 화살표","rightwards simple arrow":"오른쪽 단순 화살표","upwards simple arrow":"위쪽 단순 화살표","downwards simple arrow":"아래쪽 단순 화살표","leftwards double arrow":"왼쪽 겹화살표","rightwards double arrow":"오른쪽 겹화살표","upwards double arrow":"위쪽 겹화살표","downwards double arrow":"아래쪽 겹화살표","leftwards dashed arrow":"왼쪽 대시 화살표","rightwards dashed arrow":"오른쪽 대시 화살표","upwards dashed arrow":"위쪽 대시 화살표","downwards dashed arrow":"아래쪽 대시 화살표","leftwards arrow to bar":"왼쪽 바를 향한 화살표","rightwards arrow to bar":"오른쪽 바를 향한 화살표","upwards arrow to bar":"위쪽 바를 향한 화살표","downwards arrow to bar":"아래쪽 바를 향한 화살표","up down arrow with base":"받침이 있는 위아래 화살표","back with leftwards arrow above":"BACK 위 왼쪽 화살표","end with leftwards arrow above":"END 위 왼쪽 화살표","on with exclamation mark with left right arrow above":"ON! 위 왼쪽 오른쪽 화살표","soon with rightwards arrow above":"SOON 위 오른쪽 화살표","top with upwards arrow above":"TOP 위 위쪽 화살표","Dollar sign":"달러 기호","Euro sign":"유로 기호","Yen sign":"엔 기호","Pound sign":"파운드 기호","Cent sign":"센트 기호","Euro-currency sign":"유로화 기호","Colon sign":"콜론 기호","Cruzeiro sign":"크루제이루 기호","French franc sign":"프랑스 프랑 기호","Lira sign":"리라 기호","Currency sign":"통화 기호","Bitcoin sign":"비트코인 기호","Mill sign":"밀 기호","Naira sign":"나이라 기호","Peseta sign":"페세타 기호","Rupee sign":"루피 기호","Won sign":"원 기호","New sheqel sign":"뉴 세켈 기호","Dong sign":"동 기호","Kip sign":"킵 기호","Tugrik sign":"투그리크 기호","Drachma sign":"드라크마 기호","German penny sign":"독일 페니 기호","Peso sign":"페소 기호","Guarani sign":"과라니 기호","Austral sign":"오스트랄 기호","Hryvnia sign":"흐리브냐 기호","Cedi sign":"세디 기호","Livre tournois sign":"리브르 트르누아 기호","Spesmilo sign":"스페스밀로 기호","Tenge sign":"텡게 기호","Indian rupee sign":"인도 루피 기호","Turkish lira sign":"터키 리라 기호","Nordic mark sign":"노르딕 마크 기호","Manat sign":"마나트 기호","Ruble sign":"루블 기호","Latin capital letter a with macron":"장음 부호가 있는 라틴어 대문자 A","Latin small letter a with macron":"장음 부호가 있는 라틴어 소문자 a","Latin capital letter a with breve":"반달점 부호가 있는 라틴어 대문자 A","Latin small letter a with breve":"반달점 부호가 있는 라틴어 소문자 a","Latin capital letter a with ogonek":"꼬리 부호가 있는 라틴어 대문자 A","Latin small letter a with ogonek":"꼬리 부호가 있는 라틴어 소문자 a","Latin capital letter c with acute":"양음 부호가 있는 라틴어 대문자 C","Latin small letter c with acute":"양음 부호가 있는 라틴어 소문자 c","Latin capital letter c with circumflex":"곡절 부호가 있는 라틴어 대문자 C","Latin small letter c with circumflex":"곡절 부호가 있는 라틴어 소문자 c","Latin capital letter c with dot above":"위에 점 부호가 있는 라틴어 대문자 C","Latin small letter c with dot above":"위에 점 부호가 있는 라틴어 소문자 c","Latin capital letter c with caron":"반대 곡절 부호가 있는 라틴어 대문자 C","Latin small letter c with caron":"반대 곡절 부호가 있는 라틴어 소문자 c","Latin capital letter d with caron":"반대 곡절 부호가 있는 라틴어 대문자 D","Latin small letter d with caron":"반대 곡절 부호가 있는 라틴어 소문자 d","Latin capital letter d with stroke":"획 부호가 있는 라틴어 대문자 D","Latin small letter d with stroke":"획 부호가 있는 라틴어 소문자 d","Latin capital letter e with macron":"장음 부호가 있는 라틴어 대문자 E","Latin small letter e with macron":"장음 부호가 있는 라틴어 소문자 e","Latin capital letter e with breve":"반달점 부호가 있는 라틴어 대문자 E","Latin small letter e with breve":"반달점 부호가 있는 라틴어 소문자 e","Latin capital letter e with dot above":"위에 점 부호가 있는 라틴어 대문자 E","Latin small letter e with dot above":"위에 점 부호가 있는 라틴어 소문자 e","Latin capital letter e with ogonek":"꼬리 부호가 있는 라틴어 대문자 E","Latin small letter e with ogonek":"꼬리 부호가 있는 라틴어 소문자 e","Latin capital letter e with caron":"반대 곡절 부호가 있는 라틴어 대문자 E","Latin small letter e with caron":"반대 곡절 부호가 있는 라틴어 소문자 e","Latin capital letter g with circumflex":"곡절 부호가 있는 라틴어 대문자 G","Latin small letter g with circumflex":"곡절 부호가 있는 라틴어 소문자 g","Latin capital letter g with breve":"반달점 부호가 있는 라틴어 대문자 G","Latin small letter g with breve":"반달점 부호가 있는 라틴어 소문자 g","Latin capital letter g with dot above":"위에 점 부호가 있는 라틴어 대문자 G","Latin small letter g with dot above":"위에 점 부호가 있는 라틴어 소문자 g","Latin capital letter g with cedilla":"갈고리 부호가 있는 라틴어 대문자 G","Latin small letter g with cedilla":"갈고리 부호가 있는 라틴어 소문자 g","Latin capital letter h with circumflex":"곡절 부호가 있는 라틴어 대문자 H","Latin small letter h with circumflex":"곡절 부호가 있는 라틴어 소문자 h","Latin capital letter h with stroke":"획 부호가 있는 라틴어 대문자 H","Latin small letter h with stroke":"획 부호가 있는 라틴어 소문자 h","Latin capital letter i with tilde":"물결 부호가 있는 라틴어 대문자 I","Latin small letter i with tilde":"물결 부호가 있는 라틴어 소문자 i","Latin capital letter i with macron":"장음 부호가 있는 라틴어 대문자 I","Latin small letter i with macron":"장음 부호가 있는 라틴어 소문자 i","Latin capital letter i with breve":"반달점 부호가 있는 라틴어 대문자 I","Latin small letter i with breve":"반달점 부호가 있는 라틴어 소문자 i","Latin capital letter i with ogonek":"꼬리 부호가 있는 라틴어 대문자 I","Latin small letter i with ogonek":"꼬리 부호가 있는 라틴어 소문자 i","Latin capital letter i with dot above":"위에 점 부호가 있는 라틴어 대문자 I","Latin small letter dotless i":"라틴어 소문자 점 없는 i","Latin capital ligature ij":"라틴어 대문자 합자 IJ","Latin small ligature ij":"라틴어 소문자 합자 ij","Latin capital letter j with circumflex":"곡절 부호가 있는 라틴어 대문자 J","Latin small letter j with circumflex":"곡절 부호가 있는 라틴어 소문자 j","Latin capital letter k with cedilla":"갈고리 부호가 있는 라틴어 대문자 K","Latin small letter k with cedilla":"갈고리 부호가 있는 라틴어 소문자 k","Latin small letter kra":"라틴어 소문자 크라","Latin capital letter l with acute":"양음 부호가 있는 라틴어 대문자 I","Latin small letter l with acute":"양음 부호가 있는 라틴어 소문자 i","Latin capital letter l with cedilla":"갈고리 부호가 있는 라틴어 대문자 I","Latin small letter l with cedilla":"갈고리 부호가 있는 라틴어 소문자 i","Latin capital letter l with caron":"반대 곡절 부호가 있는 라틴어 대문자 I","Latin small letter l with caron":"반대 곡절 부호가 있는 라틴어 소문자 i","Latin capital letter l with middle dot":"중간에 점 부호가 있는 라틴어 대문자 I","Latin small letter l with middle dot":"중간에 점 부호가 있는 라틴어 소문자 i","Latin capital letter l with stroke":"획 부호가 있는 라틴어 대문자 I","Latin small letter l with stroke":"획 부호가 있는 라틴어 소문자 i","Latin capital letter n with acute":"양음 부호가 있는 라틴어 대문자 N","Latin small letter n with acute":"양음 부호가 있는 라틴어 소문자 n","Latin capital letter n with cedilla":"갈고리 부호가 있는 라틴어 대문자 N","Latin small letter n with cedilla":"갈고리 부호가 있는 라틴어 소문자 n","Latin capital letter n with caron":"반대 곡절 부호가 있는 라틴어 대문자 N","Latin small letter n with caron":"반대 곡절 부호가 있는 라틴어 소문자 n","Latin small letter n preceded by apostrophe":"아포스트로피 다음에 있는 라틴어 소문자 n","Latin capital letter eng":"라틴어 대문자 엥","Latin small letter eng":"라틴어 소문자 엥","Latin capital letter o with macron":"장음 부호가 있는 라틴어 대문자 O","Latin small letter o with macron":"장음 부호가 있는 라틴어 소문자 o","Latin capital letter o with breve":"반달점 부호가 있는 라틴어 대문자 O","Latin small letter o with breve":"반달점 부호가 있는 라틴어 소문자 o","Latin capital letter o with double acute":"이중 양음 부호가 있는 라틴어 대문자 O","Latin small letter o with double acute":"이중 양음 부호가 있는 라틴어 소문자 o","Latin capital ligature oe":"라틴어 대문자 합자 OE","Latin small ligature oe":"라틴어 소문자 합자 oe","Latin capital letter r with acute":"양음 부호가 있는 라틴어 대문자 R","Latin small letter r with acute":"양음 부호가 있는 라틴어 소문자 r","Latin capital letter r with cedilla":"갈고리 부호가 있는 라틴어 대문자 R","Latin small letter r with cedilla":"갈고리 부호가 있는 라틴어 소문자 r","Latin capital letter r with caron":"반대 곡절 부호가 있는 라틴어 대문자 R","Latin small letter r with caron":"반대 곡절 부호가 있는 라틴어 소문자 r","Latin capital letter s with acute":"양음 부호가 있는 라틴어 대문자 S","Latin small letter s with acute":"양음 부호가 있는 라틴어 소문자 s","Latin capital letter s with circumflex":"곡절 부호가 있는 라틴어 대문자 S","Latin small letter s with circumflex":"곡절 부호가 있는 라틴어 소문자 s","Latin capital letter s with cedilla":"갈고리 부호가 있는 라틴어 대문자 S","Latin small letter s with cedilla":"갈고리 부호가 있는 라틴어 소문자 s","Latin capital letter s with caron":"반대 곡절 부호가 있는 라틴어 대문자 S","Latin small letter s with caron":"반대 곡절 부호가 있는 라틴어 소문자 s","Latin capital letter t with cedilla":"갈고리 부호가 있는 라틴어 대문자 T","Latin small letter t with cedilla":"갈고리 부호가 있는 라틴어 소문자 t","Latin capital letter t with caron":"반대 곡절 부호가 있는 라틴어 대문자 T","Latin small letter t with caron":"반대 곡절 부호가 있는 라틴어 소문자 t","Latin capital letter t with stroke":"획 부호가 있는 라틴어 대문자 T","Latin small letter t with stroke":"획 부호가 있는 라틴어 소문자 t","Latin capital letter u with tilde":"물결 부호가 있는 라틴어 대문자 U","Latin small letter u with tilde":"물결 부호가 있는 라틴어 소문자 u","Latin capital letter u with macron":"장음 부호가 있는 라틴어 대문자 U","Latin small letter u with macron":"장음 부호가 있는 라틴어 소문자 u","Latin capital letter u with breve":"반달점 부호가 있는 라틴어 대문자 U","Latin small letter u with breve":"반달점 부호가 있는 라틴어 소문자 u","Latin capital letter u with ring above":"위에 고리가 있는 라틴어 대문자 U","Latin small letter u with ring above":"위에 고리가 있는 라틴어 소문자 u","Latin capital letter u with double acute":"이중 양음 부호가 있는 라틴어 대문자 U","Latin small letter u with double acute":"이중 양음 부호가 있는 라틴어 소문자 u","Latin capital letter u with ogonek":"꼬리 부호가 있는 라틴어 대문자 U","Latin small letter u with ogonek":"꼬리 부호가 있는 라틴어 소문자 u","Latin capital letter w with circumflex":"곡절 부호가 있는 라틴어 대문자 W","Latin small letter w with circumflex":"곡절 부호가 있는 라틴어 소문자 w","Latin capital letter y with circumflex":"곡절 부호가 있는 라틴어 대문자 Y","Latin small letter y with circumflex":"곡절 부호가 있는 라틴어 소문자 y","Latin capital letter y with diaeresis":"분음 부호가 있는 라틴어 대문자 Y","Latin capital letter z with acute":"양음 부호가 있는 라틴어 대문자 Z","Latin small letter z with acute":"양음 부호가 있는 라틴어 소문자 z","Latin capital letter z with dot above":"위에 점 부호가 있는 라틴어 대문자 Z","Latin small letter z with dot above":"위에 점 부호가 있는 라틴어 소문자 z","Latin capital letter z with caron":"반대 곡절 부호가 있는 라틴어 대문자 Z","Latin small letter z with caron":"반대 곡절 부호가 있는 라틴어 소문자 z","Latin small letter long s":"라틴어 소문자 긴 s","Less-than sign":"더 작음 기호","Greater-than sign":"더 큼 기호","Less-than or equal to":"더 작거나 같음","Greater-than or equal to":"더 크거나 같음","En dash":"엔 대시","Em dash":"엠 대시",Macron:"장음 부호",Overline:"윗줄","Degree sign":"도 기호","Minus sign":"빼기 기호","Plus-minus sign":"더하기 빼기 기호","Division sign":"나누기 기호","Fraction slash":"분수 슬래시","Multiplication sign":"곱하기 기호","Latin small letter f with hook":"밑이 구부러진 라틴어 소문자 f",Integral:"적분","N-ary summation":"누계합",Infinity:"무한대","Square root":"제곱근","Tilde operator":"물결표 연산자","Approximately equal to":"대략 같음","Almost equal to":"거의 같음","Not equal to":"같지 않음","Identical to":"합동","Element of":"원소","Not an element of":"원소가 아님","Contains as member":"원소로 포함","N-ary product":"중복순열","Logical and":"논리곱","Logical or":"논리합","Not sign":"부정 기호",Intersection:"교집합",Union:"합집합","Partial differential":"편미분","For all":"전칭","There exists":"존재","Empty set":"공집합",Nabla:"나블라","Asterisk operator":"별표 연산자","Proportional to":"비례",Angle:"각","Vulgar fraction one quarter":"4분의 1","Vulgar fraction one half":"2분의 1","Vulgar fraction three quarters":"4분의 3","Single left-pointing angle quotation mark":"왼쪽 홑화살괄호","Single right-pointing angle quotation mark":"오른쪽 홑화살괄호","Left-pointing double angle quotation mark":"왼쪽 겹화살괄호","Right-pointing double angle quotation mark":"오른쪽 겹화살괄호","Left single quotation mark":"왼쪽 작은따옴표","Right single quotation mark":"오른쪽 작은따옴표","Left double quotation mark":"왼쪽 큰따옴표","Right double quotation mark":"오른쪽 큰따옴표","Single low-9 quotation mark":"낮은 홑따옴표","Double low-9 quotation mark":"낮은 겹따옴표","Inverted exclamation mark":"역느낌표","Inverted question mark":"역물음표","Two dot leader":"두 점 줄임표","Horizontal ellipsis":"세 점 줄임표","Double dagger":"겹칼표","Per mille sign":"퍼 마일 기호","Per ten thousand sign":"만분율 기호","Double exclamation mark":"겹느낌표","Question exclamation mark":"물음표 느낌표","Exclamation question mark":"느낌표 물음표","Double question mark":"겹물음표","Copyright sign":"저작권 기호","Registered sign":"등록 상표 기호","Trade mark sign":"상표 기호","Section sign":"구역 기호","Paragraph sign":"단락 기호","Reversed paragraph sign":"반전된 단락 기호","Show source":"소스 표시","Show blocks":"블록 표시","Select all":"전체 선택","Disable editing":"편집 비활성화","Enable editing":"편집 활성화","Previous editable region":"이전 편집 가능한 구역","Next editable region":"다음 편집 가능한 구역","Navigate editable regions":"편집 가능한 구역 탐색","Remove Format":"서식 지우기","Page break":"페이지 나누기","media widget":"미디어 위젯","Media URL":"미디어 URL","Paste the media URL in the input.":"미디어 URL을 입력해주세요.","Tip: Paste the URL into the content to embed faster.":"팁: URL을 붙여넣으면 더 빨리 삽입할 수 있습니다.","The URL must not be empty.":"URL이 비어있을 수 없습니다.","This media URL is not supported.":"이 미디어 URL은 지원되지 않습니다.","Insert media":"미디어 삽입",Media:"미디어","Media toolbar":"미디어 툴바","Open media in new tab":"새 탭에서 미디어 열기","Media embed":"미디어 ㅅ","Numbered List":"번호 목록","Bulleted List":"불릿 목록","To-do List":"확인 목록","Bulleted list styles toolbar":"글머리 기호 목록 스타일 도구 모음","Numbered list styles toolbar":"번호 목록 스타일 도구 모음","Toggle the disc list style":"흰 원형 목록 스타일 전환","Toggle the circle list style":"검은 원형 목록 스타일 전환","Toggle the square list style":"검은 사각형 목록 스타일 전환","Toggle the decimal list style":"십진수 목록 스타일 전환","Toggle the decimal with leading zero list style":"앞에 0이 붙는 십진수 목록 스타일 전환","Toggle the lower–roman list style":"소문자 로마자 목록 스타일 전환","Toggle the upper–roman list style":"대문자 로마자 목록 스타일 전환","Toggle the lower–latin list style":"소문자 알파벳 목록 스타일 전환","Toggle the upper–latin list style":"대문자 알파벳 목록 스타일 전환",Disc:"검은 원형",Circle:"흰 원형",Square:"검은 사각형",Decimal:"십진수","Decimal with leading zero":"앞에 0이 붙는 십진수","Lower–roman":"소문자 로마자","Upper-roman":"대문자 로마자","Lower-latin":"소문자 알파벳","Upper-latin":"대문자 알파벳","List properties":"목록 속성","Start at":"시작 번호","Invalid start index value.":"잘못된 시작 인덱스 값입니다.","Start index must be greater than 0.":"시작 번호는 0보다 커야 합니다.","Reversed order":"역순","Keystrokes that can be used in a list":"목록에서 사용할 수 있는 키 입력","Increase list item indent":"목록 항목 들여쓰기 늘리기","Decrease list item indent":"목록 항목 들여쓰기 줄이기","Entering a to-do list":"할 일 목록 입력하는 중","Leaving a to-do list":"할 일 목록 남기는 중",Unlink:"링크 삭제",Link:"링크","Link URL":"링크 주소","Link URL must not be empty.":"링크 URL은 비워둘 수 없습니다.","Link image":"사진 링크","Edit link":"링크 편집","Open link in new tab":"새 탭에서 링크 열기","Open in a new tab":"새 탭에서 열기",Downloadable:"다운로드 가능","Create link":"링크 생성","Move out of a link":"링크 밖으로 이동","Link properties":"링크 속성","Displayed text":"표시 텍스트","No links available":"사용 가능한 링크 없음",Language:"언어","Choose language":"언어 선택","Remove language":"언어 제거","Increase indent":"들여쓰기 늘리기","Decrease indent":"들여쓰기 줄이기","image widget":"사진 위젯","Wrap text":"텍스트 줄 바꿈","Break text":"텍스트 분리","In line":"줄 안에","Side image":"본문 옆에 배치","Full size image":"꽉 찬 크기","Left aligned image":"왼쪽 정렬","Centered image":"가운데 정렬","Right aligned image":"오른쪽 정렬","Change image text alternative":"대체 문구 변경","Text alternative":"대체 문구","Enter image caption":"사진 설명을 입력하세요","Insert image":"사진 삽입","Replace image":"이미지 교체","Upload from computer":"컴퓨터에서 업로드","Replace from computer":"컴퓨터에서 교체","Upload image from computer":"컴퓨터에서 이미지 업로드","Image from computer":"컴퓨터에서 이미지 가져오기","From computer":"컴퓨터에서","Replace image from computer":"컴퓨터에서 이미지 교체","Upload failed":"업로드 실패","You have no image upload permissions.":"이미지를 업로드할 수 있는 권한이 없습니다.","Image toolbar":"사진 툴바","Resize image":"사진 크기 조절","Resize image to %0":"사진의 크기를 %0으로 조절","Resize image to the original size":"사진을 원래 크기로 돌려놓기","Resize image (in %0)":"이미지 크기 조정하기(%0 이내)",Original:"원본","Custom image size":"사용자 지정 이미지 크기",Custom:"사용자 지정","Image resize list":"사진 크기 목록","Insert image via URL":"URL로 이미지 삽입","Insert via URL":"URL 버튼으로 이미지 삽입","Image via URL":"URL 메뉴를 통한 이미지 삽입","Via URL":"이미지 메뉴에서 URL을 통한 이미지 삽입","Update image URL":"이미지 URL 업데이트","Caption for the image":"이미지용 캡션","Caption for image: %0":"이미지용 캡션: %0","The value must not be empty.":"값은 비워둘 수 없습니다.","The value should be a plain number.":"일반 숫자로 된 값을 입력해야 합니다.","Uploading image":"이미지 업로드 중","Image upload complete":"이미지 업로드 완료","Error during image upload":"이미지 업로드 중에 오류 발생",Image:"이미지 삽입 기능으로 삽입된 위젯","Image Resize":"이미지 크기 조절","Text Alternative":"대체 텍스트","HTML object":"HTML 오브젝트","Insert HTML":"HTML 삽입","HTML snippet":"HTML 코드 조각","Paste raw HTML here...":"원시 HTML을 여기에 붙여넣으세요...","Edit source":"소스 편집","Save changes":"변경사항 저장","No preview available":"미리보기를 이용할 수 없습니다","Empty snippet content":"빈 코드 조각 내용","Horizontal line":"수평선","Yellow marker":"노란색 마커","Green marker":"초록색 마커","Pink marker":"분홍색 마커","Blue marker":"파란색 마커","Red pen":"빨간색 펜","Green pen":"초록색 펜","Remove highlight":"강조 제거",Highlight:"강조","Text highlight toolbar":"글자 강조 툴바",Heading:"제목","Choose heading":"제목 선택","Heading 1":"제목 1","Heading 2":"제목 2","Heading 3":"제목 3","Heading 4":"제목 4","Heading 5":"제목 5","Heading 6":"제목 6","Type your title":"제목을 입력해주세요","Type or paste your content here.":"여기에 내용을 입력하거나 붙여넣으세요.","Enter fullscreen mode":"전체 화면으로 보기","Leave fullscreen mode":"전체 화면 나가기","Fullscreen mode":"전체 화면 모드","Toggle fullscreen mode":"전체 화면 모드 전환","Document outline":"문서 외곽선","Connected users":"참여 사용자","Font Size":"글자 크기",Tiny:"매우 작은",Small:"작은",Big:"큰",Huge:"매우 큰","Font Family":"글꼴 집합",Default:"기본","Font Color":"글자 색깔","Font Background Color":"글자 배경 색깔","Document colors":"문서 색깔들","Find and replace":"찾기 및 바꾸기","Find in text…":"텍스트에서 찾기...",Find:"찾기","Previous result":"이전 결과","Next result":"다음 결과",Replace:"바꾸기","Replace all":"모두 바꾸기","Match case":"대/소문자 구분","Whole words only":"전체 단어만","Replace with…":"바꿀 내용...","Text to find must not be empty.":"찾을 텍스트를 입력해야 합니다.","Tip: Find some text first in order to replace it.":"팁: 바꾸려는 텍스트를 먼저 찾으세요.","Advanced options":"고급 옵션","Find in the document":"문서에서 찾기","Insert a soft break (a <code>&lt;br&gt;</code> element)":"줄 바꿈 삽입(<code>&lt;br&gt;</code> 요소)","Insert a hard break (a new paragraph)":"단락 바꿈 삽입(새 단락)",Emoji:"이모지","Show all emoji...":"모든 이모지 표시...","Find an emoji (min. 2 characters)":"이모지 찾기(최소 2자)",'No emojis were found matching "%0".':'"%0"에 대한 이모지를 찾을 수 없습니다.',"Keep on typing to see the emoji.":"이모지를 보려면 계속 입력하세요.","The query must contain at least two characters.":"쿼리에는 2자 이상이 포함되어야 합니다.","Smileys & Expressions":"스마일 및 표정","Gestures & People":"제스처 및 사람","Animals & Nature":"동물 및 자연","Food & Drinks":"음식 및 음료","Travel & Places":"여행 및 장소",Activities:"활동",Objects:"사물",Symbols:"기호",Flags:"깃발","Select skin tone":"피부색 선택","Default skin tone":"기본 피부색","Light skin tone":"밝은 피부색","Medium Light skin tone":"약간 밝은 피부색","Medium skin tone":"중간 피부색","Medium Dark skin tone":"약간 어두운 피부색","Dark skin tone":"어두운 피부색","Emoji picker":"이모지 선택",Cancel:"취소",Clear:"지우기","Remove color":"색깔 제거","Restore default":"기본값 복원",Save:"저장","Show more items":"더보기","%0 of %1":"%0 / %1","Cannot upload file:":"파일 업로드할 수 없음: ","Rich Text Editor. Editing area: %0":"리치 텍스트 편집기. 편집 영역: %0","Insert with file manager":"파일 관리자를 사용하여 삽입","Replace with file manager":"파일 관리자를 사용하여 교체","Insert image with file manager":"파일 관리자를 사용하여 이미지 삽입","Replace image with file manager":"파일 관리자를 사용하여 이미지 교체",File:"파일","With file manager":"파일 관리 버튼으로 이미지 삽입","Toggle caption off":"캡션 지우기","Toggle caption on":"캡션 넣기","Content editing keystrokes":"콘텐츠 편집 키 입력","These keyboard shortcuts allow for quick access to content editing features.":"이러한 키보드 단축키를 사용하면 콘텐츠 편집 기능을 빠르게 사용할 수 있습니다.","User interface and content navigation keystrokes":"사용자 인터페이스 및 콘텐츠 탐색 키 입력","Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface.":"다음 키 입력을 사용하여 CKEditor 5 사용자 인터페이스를 더 효율적으로 탐색하세요.","Close contextual balloons, dropdowns, and dialogs":"상황별 풍선, 드롭다운, 대화 상자 닫기","Open the accessibility help dialog":"접근성 도움말 대화 상자 열기","Move focus between form fields (inputs, buttons, etc.)":"양식 필드(입력, 버튼 등) 간에 포커스 이동","Move focus to the menu bar, navigate between menu bars":"메뉴 표시줄로 포커스 이동, 메뉴 표시줄 탐색","Move focus to the toolbar, navigate between toolbars":"도구 모음으로 포커스 이동, 도구 모음 간 탐색","Navigate through the toolbar or menu bar":"도구 모음 또는 메뉴 표시줄 탐색","Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content.":"현재 포커스가 맞춰진 버튼을 실행합니다. 편집기 콘텐츠와 상호 작용하는 버튼을 실행하면 포커스가 다시 콘텐츠로 이동합니다.",Accept:"수락",Paragraph:"문단","Color picker":"색상 선택기","Please try a different phrase or check the spelling.":"다른 문구를 사용해 보시거나 철자를 확인해 주세요.",Source:"소스",Insert:"삽입",Update:"업데이트",Back:"뒤로","Insert code block":"코드 블럭 삽입","Plain text":"평문","Leaving %0 code snippet":"%0 코드 스니펫 남기는 중","Entering %0 code snippet":"%0 코드 스니펫 입력하는 중","Entering code snippet":"코드 스니펫 입력하는 중","Leaving code snippet":"코드 스니펫 남기는 중","Code block":"코드 블록","Copy selected content":"선택된 콘텐츠 복사","Paste content":"콘텐츠 붙여넣기","Paste content as plain text":"콘텐츠를 일반 텍스트로 붙여넣기","Insert image or file":"사진이나 파일을 삽입","Could not obtain resized image URL.":"크기가 조절된 사진의 URL을 가져오지 못했습니다.","Selecting resized image failed":"크기가 조절된 이미지 선택 실패","Could not insert image at the current position.":"현재 위치에 사진을 삽입할 수 없습니다.","Inserting image failed":"사진 삽입 실패","Open file manager":"파일 관리자 열기","Cannot determine a category for the uploaded file.":"업로드된 파일의 카테고리를 확인할 수 없습니다.","Cannot access default workspace.":"기본 작업 공간에 액세스할 수 없습니다.","You have no image editing permissions.":"이미지를 편집할 수 있는 권한이 없습니다.","Edit image":"이미지 편집","Processing the edited image.":"편집한 이미지를 처리 중입니다.","Server failed to process the image.":"서버가 이미지를 처리하지 못했습니다.","Failed to determine category of edited image.":"편집한 이미지의 카테고리를 결정하지 못했습니다.",Bookmark:"책갈피","Edit bookmark":"책갈피 편집","Remove bookmark":"책갈피 제거","Bookmark name":"책갈피 이름","Enter the bookmark name without spaces.":"공백 없이 책갈피 이름을 입력하세요.","Bookmark must not be empty.":"책갈피 이름은 비워 둘 수 없습니다.","Bookmark name cannot contain space characters.":"책갈피 이름에는 공백이 포함될 수 없습니다.","Bookmark name already exists.":"책갈피 이름이 이미 존재합니다.","bookmark widget":"책갈피 위젯","Bookmark toolbar":"북마크 도구 모음",Bookmarks:"북마크","No bookmarks available.":"사용 가능한 북마크가 없습니다.","Scroll to bookmark":"북마크로 이동","Block quote":"인용 단락",Bold:"굵게",Italic:"기울임꼴",Underline:"밑줄",Code:"코드",Strikethrough:"취소선",Subscript:"아래 첨자",Superscript:"위 첨자","Italic text":"기울인 텍스트","Move out of an inline code style":"인라인 코드 스타일 밖으로 이동","Bold text":"굵은 텍스트","Underline text":"텍스트 밑줄","Strikethrough text":"텍스트 취소선","Saving changes":"변경된 내용을 저장하고 있습니다","Revert autoformatting action":"자동 서식 작업 되돌리기","Align left":"왼쪽 정렬","Align right":"오른쪽 정렬","Align center":"가운데 정렬",Justify:"양쪽 정렬","Text alignment":"텍스트 정렬","Text alignment toolbar":"텍스트 정렬 툴바"},getPluralForm(i){return 0}}},_oe="GPL";function woe(i){const t=i.setContent,e=H.useRef(null),n=H.useRef(null),[s,o]=H.useState(!1);H.useEffect(()=>(o(!0),()=>o(!1)),[]);const{editorConfig:r}=H.useMemo(()=>s?{editorConfig:{toolbar:{items:["undo","redo","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","bold","italic","underline","|","emoji","link","insertImage","mediaEmbed","insertTable","|","alignment","|","outdent","indent"],shouldNotGroupWhenFull:!1},plugins:[LY,sJ,VQ,oJ,Mj,lJ,BX,YX,xQ,yQ,rQ,pQ,WQ,ZQ,$Q,gee,oD,Eee,Lee,g1,Bee,sD,Hee,qee,dJ,kte,Mte,$te,fne,uv,iie,wse,poe,Use,$se,loe,yse,YY,mJ],fontFamily:{options:["Noto Sans KR","Nanum Pen Script","Dongle"]},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0},image:{toolbar:["toggleImageCaption","imageTextAlternative","|","imageStyle:inline","imageStyle:wrapText","imageStyle:breakText","|","resizeImage"]},initialData:"",language:"ko",licenseKey:_oe,link:{addTargetToExternalLinks:!0,defaultProtocol:"https://",decorators:{toggleDownloadable:{mode:"manual",label:"Downloadable",attributes:{download:"file"}}}},mention:{feeds:[{marker:"@",feed:[]}]},placeholder:"",table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableProperties","tableCellProperties"]},translations:[boe]}}:{},[s]);return A.jsx("div",{className:"main-container",children:A.jsx("div",{className:"editor-container editor-container_classic-editor",ref:e,children:A.jsx("div",{className:"editor-container__editor",children:A.jsx("div",{ref:n,children:r&&A.jsx(OM,{editor:bX,config:r,onChange:(a,l)=>{t(l.getData())}})})})})})}function yoe(){const[i,t]=H.useState(""),[e,n]=H.useState(""),s=async()=>{console.log(i),console.log(e);const o=await Nt.post("http://localhost:8080/writeDo",{title:i,content:e});console.log(o)};return A.jsxs("div",{className:"flex",children:[A.jsx(Fr,{from:"/infoPet"}),A.jsxs("div",{className:"w-4/5 px-6 max-sm:w-full max-sm:px-2",children:[A.jsx("h1",{className:"p-4 text-3xl font-bold border-b border-b-gray-300",children:"반려생활 길잡이"}),A.jsxs("div",{className:"w-4/5 py-6 m-auto",children:[A.jsx("div",{children:A.jsx("input",{onChange:o=>t(o.target.value),className:"w-full p-2 border-2 border-primary-500 rounded-sm outline-0",type:"text"})}),A.jsx("div",{className:"mt-4 border-2 border-primary-500 rounded-sm",children:A.jsx(woe,{setContent:n})}),A.jsx("div",{className:"mt-4 text-end",children:A.jsx("button",{onClick:s,className:"px-4 py-2 bg-gray-700 text-white rounded-sm cursor-pointer",children:"등록"})}),A.jsx("div",{children:e}),A.jsx("div",{dangerouslySetInnerHTML:{__html:e}})]})]})]})}var rt;(function(i){i.assertEqual=s=>s;function t(s){}i.assertIs=t;function e(s){throw new Error}i.assertNever=e,i.arrayToEnum=s=>{const o={};for(const r of s)o[r]=r;return o},i.getValidEnumValues=s=>{const o=i.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),r={};for(const a of o)r[a]=s[a];return i.objectValues(r)},i.objectValues=s=>i.objectKeys(s).map(function(o){return s[o]}),i.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const o=[];for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&o.push(r);return o},i.find=(s,o)=>{for(const r of s)if(o(r))return r},i.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,o=" | "){return s.map(r=>typeof r=="string"?`'${r}'`:r).join(o)}i.joinValues=n,i.jsonStringifyReplacer=(s,o)=>typeof o=="bigint"?o.toString():o})(rt||(rt={}));var Sv;(function(i){i.mergeShapes=(t,e)=>({...t,...e})})(Sv||(Sv={}));const Te=rt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),xo=i=>{switch(typeof i){case"undefined":return Te.undefined;case"string":return Te.string;case"number":return isNaN(i)?Te.nan:Te.number;case"boolean":return Te.boolean;case"function":return Te.function;case"bigint":return Te.bigint;case"symbol":return Te.symbol;case"object":return Array.isArray(i)?Te.array:i===null?Te.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?Te.promise:typeof Map<"u"&&i instanceof Map?Te.map:typeof Set<"u"&&i instanceof Set?Te.set:typeof Date<"u"&&i instanceof Date?Te.date:Te.object;default:return Te.unknown}},ce=rt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),voe=i=>JSON.stringify(i,null,2).replace(/"([^"]+)":/g,"$1:");class Di extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const e=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,e):this.__proto__=e,this.name="ZodError",this.issues=t}format(t){const e=t||function(o){return o.message},n={_errors:[]},s=o=>{for(const r of o.issues)if(r.code==="invalid_union")r.unionErrors.map(s);else if(r.code==="invalid_return_type")s(r.returnTypeError);else if(r.code==="invalid_arguments")s(r.argumentsError);else if(r.path.length===0)n._errors.push(e(r));else{let a=n,l=0;for(;l<r.path.length;){const u=r.path[l];l===r.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(e(r))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return s(this),n}static assert(t){if(!(t instanceof Di))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,rt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=e=>e.message){const e={},n=[];for(const s of this.issues)s.path.length>0?(e[s.path[0]]=e[s.path[0]]||[],e[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:e}}get formErrors(){return this.flatten()}}Di.create=i=>new Di(i);const Sc=(i,t)=>{let e;switch(i.code){case ce.invalid_type:i.received===Te.undefined?e="Required":e=`Expected ${i.expected}, received ${i.received}`;break;case ce.invalid_literal:e=`Invalid literal value, expected ${JSON.stringify(i.expected,rt.jsonStringifyReplacer)}`;break;case ce.unrecognized_keys:e=`Unrecognized key(s) in object: ${rt.joinValues(i.keys,", ")}`;break;case ce.invalid_union:e="Invalid input";break;case ce.invalid_union_discriminator:e=`Invalid discriminator value. Expected ${rt.joinValues(i.options)}`;break;case ce.invalid_enum_value:e=`Invalid enum value. Expected ${rt.joinValues(i.options)}, received '${i.received}'`;break;case ce.invalid_arguments:e="Invalid function arguments";break;case ce.invalid_return_type:e="Invalid function return type";break;case ce.invalid_date:e="Invalid date";break;case ce.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(e=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(e=`${e} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?e=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?e=`Invalid input: must end with "${i.validation.endsWith}"`:rt.assertNever(i.validation):i.validation!=="regex"?e=`Invalid ${i.validation}`:e="Invalid";break;case ce.too_small:i.type==="array"?e=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?e=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?e=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?e=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:e="Invalid input";break;case ce.too_big:i.type==="array"?e=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?e=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?e=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?e=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?e=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:e="Invalid input";break;case ce.custom:e="Invalid input";break;case ce.invalid_intersection_types:e="Intersection results could not be merged";break;case ce.not_multiple_of:e=`Number must be a multiple of ${i.multipleOf}`;break;case ce.not_finite:e="Number must be finite";break;default:e=t.defaultError,rt.assertNever(i)}return{message:e}};let JD=Sc;function Coe(i){JD=i}function qg(){return JD}const $g=i=>{const{data:t,path:e,errorMaps:n,issueData:s}=i,o=[...e,...s.path||[]],r={...s,path:o};if(s.message!==void 0)return{...s,path:o,message:s.message};let a="";const l=n.filter(u=>!!u).slice().reverse();for(const u of l)a=u(r,{data:t,defaultError:a}).message;return{...s,path:o,message:a}},Toe=[];function ye(i,t){const e=qg(),n=$g({issueData:t,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,e,e===Sc?void 0:Sc].filter(s=>!!s)});i.common.issues.push(n)}class Zn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,e){const n=[];for(const s of e){if(s.status==="aborted")return Be;s.status==="dirty"&&t.dirty(),n.push(s.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,e){const n=[];for(const s of e){const o=await s.key,r=await s.value;n.push({key:o,value:r})}return Zn.mergeObjectSync(t,n)}static mergeObjectSync(t,e){const n={};for(const s of e){const{key:o,value:r}=s;if(o.status==="aborted"||r.status==="aborted")return Be;o.status==="dirty"&&t.dirty(),r.status==="dirty"&&t.dirty(),o.value!=="__proto__"&&(typeof r.value<"u"||s.alwaysSet)&&(n[o.value]=r.value)}return{status:t.value,value:n}}}const Be=Object.freeze({status:"aborted"}),uc=i=>({status:"dirty",value:i}),oi=i=>({status:"valid",value:i}),Av=i=>i.status==="aborted",Rv=i=>i.status==="dirty",La=i=>i.status==="valid",lh=i=>typeof Promise<"u"&&i instanceof Promise;function Gg(i,t,e,n){if(typeof t=="function"?i!==t||!0:!t.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(i)}function XD(i,t,e,n,s){if(typeof t=="function"?i!==t||!0:!t.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(i,e),e}var Ee;(function(i){i.errToObj=t=>typeof t=="string"?{message:t}:t||{},i.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Ee||(Ee={}));var gd,pd;class $s{constructor(t,e,n,s){this._cachedPath=[],this.parent=t,this.data=e,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const VR=(i,t)=>{if(La(t))return{success:!0,data:t.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const e=new Di(i.common.issues);return this._error=e,this._error}}};function qe(i){if(!i)return{};const{errorMap:t,invalid_type_error:e,required_error:n,description:s}=i;if(t&&(e||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(r,a)=>{var l,u;const{message:h}=i;return r.code==="invalid_enum_value"?{message:h??a.defaultError}:typeof a.data>"u"?{message:(l=h??n)!==null&&l!==void 0?l:a.defaultError}:r.code!=="invalid_type"?{message:a.defaultError}:{message:(u=h??e)!==null&&u!==void 0?u:a.defaultError}},description:s}}class Ye{get description(){return this._def.description}_getType(t){return xo(t.data)}_getOrReturnCtx(t,e){return e||{common:t.parent.common,data:t.data,parsedType:xo(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Zn,ctx:{common:t.parent.common,data:t.data,parsedType:xo(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const e=this._parse(t);if(lh(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(t){const e=this._parse(t);return Promise.resolve(e)}parse(t,e){const n=this.safeParse(t,e);if(n.success)return n.data;throw n.error}safeParse(t,e){var n;const s={common:{issues:[],async:(n=e==null?void 0:e.async)!==null&&n!==void 0?n:!1,contextualErrorMap:e==null?void 0:e.errorMap},path:(e==null?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:xo(t)},o=this._parseSync({data:t,path:s.path,parent:s});return VR(s,o)}"~validate"(t){var e,n;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:xo(t)};if(!this["~standard"].async)try{const o=this._parseSync({data:t,path:[],parent:s});return La(o)?{value:o.value}:{issues:s.common.issues}}catch(o){!((n=(e=o==null?void 0:o.message)===null||e===void 0?void 0:e.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:s}).then(o=>La(o)?{value:o.value}:{issues:s.common.issues})}async parseAsync(t,e){const n=await this.safeParseAsync(t,e);if(n.success)return n.data;throw n.error}async safeParseAsync(t,e){const n={common:{issues:[],contextualErrorMap:e==null?void 0:e.errorMap,async:!0},path:(e==null?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:xo(t)},s=this._parse({data:t,path:n.path,parent:n}),o=await(lh(s)?s:Promise.resolve(s));return VR(n,o)}refine(t,e){const n=s=>typeof e=="string"||typeof e>"u"?{message:e}:typeof e=="function"?e(s):e;return this._refinement((s,o)=>{const r=t(s),a=()=>o.addIssue({code:ce.custom,...n(s)});return typeof Promise<"u"&&r instanceof Promise?r.then(l=>l?!0:(a(),!1)):r?!0:(a(),!1)})}refinement(t,e){return this._refinement((n,s)=>t(n)?!0:(s.addIssue(typeof e=="function"?e(n,s):e),!1))}_refinement(t){return new ks({schema:this,typeName:Oe.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return qs.create(this,this._def)}nullable(){return Lr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ys.create(this)}promise(){return Rc.create(this,this._def)}or(t){return hh.create([this,t],this._def)}and(t){return fh.create(this,t,this._def)}transform(t){return new ks({...qe(this._def),schema:this,typeName:Oe.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const e=typeof t=="function"?t:()=>t;return new _h({...qe(this._def),innerType:this,defaultValue:e,typeName:Oe.ZodDefault})}brand(){return new x1({typeName:Oe.ZodBranded,type:this,...qe(this._def)})}catch(t){const e=typeof t=="function"?t:()=>t;return new wh({...qe(this._def),innerType:this,catchValue:e,typeName:Oe.ZodCatch})}describe(t){const e=this.constructor;return new e({...this._def,description:t})}pipe(t){return Nh.create(this,t)}readonly(){return yh.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const xoe=/^c[^\s-]{8,}$/i,koe=/^[0-9a-z]+$/,Eoe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Soe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Aoe=/^[a-z0-9_-]{21}$/i,Roe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Ioe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Poe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Moe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let my;const Voe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Noe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Doe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Ooe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Loe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Boe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,QD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Foe=new RegExp(`^${QD}$`);function eO(i){let t="[0-5]\\d";i.precision?t=`${t}\\.\\d{${i.precision}}`:i.precision==null&&(t=`${t}(\\.\\d+)?`);const e=i.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e}`}function Uoe(i){return new RegExp(`^${eO(i)}$`)}function tO(i){let t=`${QD}T${eO(i)}`;const e=[];return e.push(i.local?"Z?":"Z"),i.offset&&e.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${e.join("|")})`,new RegExp(`^${t}$`)}function zoe(i,t){return!!((t==="v4"||!t)&&Voe.test(i)||(t==="v6"||!t)&&Doe.test(i))}function Hoe(i,t){if(!Roe.test(i))return!1;try{const[e]=i.split("."),n=e.replace(/-/g,"+").replace(/_/g,"/").padEnd(e.length+(4-e.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||!s.typ||!s.alg||t&&s.alg!==t)}catch{return!1}}function Woe(i,t){return!!((t==="v4"||!t)&&Noe.test(i)||(t==="v6"||!t)&&Ooe.test(i))}class _s extends Ye{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Te.string){const o=this._getOrReturnCtx(t);return ye(o,{code:ce.invalid_type,expected:Te.string,received:o.parsedType}),Be}const n=new Zn;let s;for(const o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(s=this._getOrReturnCtx(t,s),ye(s,{code:ce.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")t.data.length>o.value&&(s=this._getOrReturnCtx(t,s),ye(s,{code:ce.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){const r=t.data.length>o.value,a=t.data.length<o.value;(r||a)&&(s=this._getOrReturnCtx(t,s),r?ye(s,{code:ce.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):a&&ye(s,{code:ce.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")Poe.test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"email",code:ce.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")my||(my=new RegExp(Moe,"u")),my.test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"emoji",code:ce.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")Soe.test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"uuid",code:ce.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")Aoe.test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"nanoid",code:ce.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")xoe.test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"cuid",code:ce.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")koe.test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"cuid2",code:ce.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")Eoe.test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"ulid",code:ce.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(t.data)}catch{s=this._getOrReturnCtx(t,s),ye(s,{validation:"url",code:ce.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"regex",code:ce.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="includes"?t.data.includes(o.value,o.position)||(s=this._getOrReturnCtx(t,s),ye(s,{code:ce.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?t.data=t.data.toLowerCase():o.kind==="toUpperCase"?t.data=t.data.toUpperCase():o.kind==="startsWith"?t.data.startsWith(o.value)||(s=this._getOrReturnCtx(t,s),ye(s,{code:ce.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(s=this._getOrReturnCtx(t,s),ye(s,{code:ce.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?tO(o).test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{code:ce.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?Foe.test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{code:ce.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?Uoe(o).test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{code:ce.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?Ioe.test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"duration",code:ce.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?zoe(t.data,o.version)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"ip",code:ce.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?Hoe(t.data,o.alg)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"jwt",code:ce.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?Woe(t.data,o.version)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"cidr",code:ce.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?Loe.test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"base64",code:ce.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?Boe.test(t.data)||(s=this._getOrReturnCtx(t,s),ye(s,{validation:"base64url",code:ce.invalid_string,message:o.message}),n.dirty()):rt.assertNever(o);return{status:n.value,value:t.data}}_regex(t,e,n){return this.refinement(s=>t.test(s),{validation:e,code:ce.invalid_string,...Ee.errToObj(n)})}_addCheck(t){return new _s({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Ee.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Ee.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Ee.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Ee.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Ee.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Ee.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Ee.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Ee.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Ee.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Ee.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Ee.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Ee.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Ee.errToObj(t)})}datetime(t){var e,n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(e=t==null?void 0:t.offset)!==null&&e!==void 0?e:!1,local:(n=t==null?void 0:t.local)!==null&&n!==void 0?n:!1,...Ee.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Ee.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Ee.errToObj(t)})}regex(t,e){return this._addCheck({kind:"regex",regex:t,...Ee.errToObj(e)})}includes(t,e){return this._addCheck({kind:"includes",value:t,position:e==null?void 0:e.position,...Ee.errToObj(e==null?void 0:e.message)})}startsWith(t,e){return this._addCheck({kind:"startsWith",value:t,...Ee.errToObj(e)})}endsWith(t,e){return this._addCheck({kind:"endsWith",value:t,...Ee.errToObj(e)})}min(t,e){return this._addCheck({kind:"min",value:t,...Ee.errToObj(e)})}max(t,e){return this._addCheck({kind:"max",value:t,...Ee.errToObj(e)})}length(t,e){return this._addCheck({kind:"length",value:t,...Ee.errToObj(e)})}nonempty(t){return this.min(1,Ee.errToObj(t))}trim(){return new _s({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new _s({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new _s({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxLength(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}}_s.create=i=>{var t;return new _s({checks:[],typeName:Oe.ZodString,coerce:(t=i==null?void 0:i.coerce)!==null&&t!==void 0?t:!1,...qe(i)})};function qoe(i,t){const e=(i.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,s=e>n?e:n,o=parseInt(i.toFixed(s).replace(".","")),r=parseInt(t.toFixed(s).replace(".",""));return o%r/Math.pow(10,s)}class Nr extends Ye{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Te.number){const o=this._getOrReturnCtx(t);return ye(o,{code:ce.invalid_type,expected:Te.number,received:o.parsedType}),Be}let n;const s=new Zn;for(const o of this._def.checks)o.kind==="int"?rt.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),ye(n,{code:ce.invalid_type,expected:"integer",received:"float",message:o.message}),s.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(n=this._getOrReturnCtx(t,n),ye(n,{code:ce.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(n=this._getOrReturnCtx(t,n),ye(n,{code:ce.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="multipleOf"?qoe(t.data,o.value)!==0&&(n=this._getOrReturnCtx(t,n),ye(n,{code:ce.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):o.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),ye(n,{code:ce.not_finite,message:o.message}),s.dirty()):rt.assertNever(o);return{status:s.value,value:t.data}}gte(t,e){return this.setLimit("min",t,!0,Ee.toString(e))}gt(t,e){return this.setLimit("min",t,!1,Ee.toString(e))}lte(t,e){return this.setLimit("max",t,!0,Ee.toString(e))}lt(t,e){return this.setLimit("max",t,!1,Ee.toString(e))}setLimit(t,e,n,s){return new Nr({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:n,message:Ee.toString(s)}]})}_addCheck(t){return new Nr({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Ee.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ee.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ee.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ee.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ee.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:Ee.toString(e)})}finite(t){return this._addCheck({kind:"finite",message:Ee.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ee.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ee.toString(t)})}get minValue(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&rt.isInteger(t.value))}get isFinite(){let t=null,e=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(e===null||n.value>e)&&(e=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(e)&&Number.isFinite(t)}}Nr.create=i=>new Nr({checks:[],typeName:Oe.ZodNumber,coerce:(i==null?void 0:i.coerce)||!1,...qe(i)});class Dr extends Ye{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Te.bigint)return this._getInvalidInput(t);let n;const s=new Zn;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(n=this._getOrReturnCtx(t,n),ye(n,{code:ce.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(n=this._getOrReturnCtx(t,n),ye(n,{code:ce.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="multipleOf"?t.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),ye(n,{code:ce.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):rt.assertNever(o);return{status:s.value,value:t.data}}_getInvalidInput(t){const e=this._getOrReturnCtx(t);return ye(e,{code:ce.invalid_type,expected:Te.bigint,received:e.parsedType}),Be}gte(t,e){return this.setLimit("min",t,!0,Ee.toString(e))}gt(t,e){return this.setLimit("min",t,!1,Ee.toString(e))}lte(t,e){return this.setLimit("max",t,!0,Ee.toString(e))}lt(t,e){return this.setLimit("max",t,!1,Ee.toString(e))}setLimit(t,e,n,s){return new Dr({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:n,message:Ee.toString(s)}]})}_addCheck(t){return new Dr({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ee.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ee.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ee.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ee.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:Ee.toString(e)})}get minValue(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}}Dr.create=i=>{var t;return new Dr({checks:[],typeName:Oe.ZodBigInt,coerce:(t=i==null?void 0:i.coerce)!==null&&t!==void 0?t:!1,...qe(i)})};class ch extends Ye{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Te.boolean){const n=this._getOrReturnCtx(t);return ye(n,{code:ce.invalid_type,expected:Te.boolean,received:n.parsedType}),Be}return oi(t.data)}}ch.create=i=>new ch({typeName:Oe.ZodBoolean,coerce:(i==null?void 0:i.coerce)||!1,...qe(i)});class Ba extends Ye{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Te.date){const o=this._getOrReturnCtx(t);return ye(o,{code:ce.invalid_type,expected:Te.date,received:o.parsedType}),Be}if(isNaN(t.data.getTime())){const o=this._getOrReturnCtx(t);return ye(o,{code:ce.invalid_date}),Be}const n=new Zn;let s;for(const o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(s=this._getOrReturnCtx(t,s),ye(s,{code:ce.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(s=this._getOrReturnCtx(t,s),ye(s,{code:ce.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):rt.assertNever(o);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Ba({...this._def,checks:[...this._def.checks,t]})}min(t,e){return this._addCheck({kind:"min",value:t.getTime(),message:Ee.toString(e)})}max(t,e){return this._addCheck({kind:"max",value:t.getTime(),message:Ee.toString(e)})}get minDate(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t!=null?new Date(t):null}}Ba.create=i=>new Ba({checks:[],coerce:(i==null?void 0:i.coerce)||!1,typeName:Oe.ZodDate,...qe(i)});class jg extends Ye{_parse(t){if(this._getType(t)!==Te.symbol){const n=this._getOrReturnCtx(t);return ye(n,{code:ce.invalid_type,expected:Te.symbol,received:n.parsedType}),Be}return oi(t.data)}}jg.create=i=>new jg({typeName:Oe.ZodSymbol,...qe(i)});class uh extends Ye{_parse(t){if(this._getType(t)!==Te.undefined){const n=this._getOrReturnCtx(t);return ye(n,{code:ce.invalid_type,expected:Te.undefined,received:n.parsedType}),Be}return oi(t.data)}}uh.create=i=>new uh({typeName:Oe.ZodUndefined,...qe(i)});class dh extends Ye{_parse(t){if(this._getType(t)!==Te.null){const n=this._getOrReturnCtx(t);return ye(n,{code:ce.invalid_type,expected:Te.null,received:n.parsedType}),Be}return oi(t.data)}}dh.create=i=>new dh({typeName:Oe.ZodNull,...qe(i)});class Ac extends Ye{constructor(){super(...arguments),this._any=!0}_parse(t){return oi(t.data)}}Ac.create=i=>new Ac({typeName:Oe.ZodAny,...qe(i)});class Ia extends Ye{constructor(){super(...arguments),this._unknown=!0}_parse(t){return oi(t.data)}}Ia.create=i=>new Ia({typeName:Oe.ZodUnknown,...qe(i)});class Do extends Ye{_parse(t){const e=this._getOrReturnCtx(t);return ye(e,{code:ce.invalid_type,expected:Te.never,received:e.parsedType}),Be}}Do.create=i=>new Do({typeName:Oe.ZodNever,...qe(i)});class Kg extends Ye{_parse(t){if(this._getType(t)!==Te.undefined){const n=this._getOrReturnCtx(t);return ye(n,{code:ce.invalid_type,expected:Te.void,received:n.parsedType}),Be}return oi(t.data)}}Kg.create=i=>new Kg({typeName:Oe.ZodVoid,...qe(i)});class ys extends Ye{_parse(t){const{ctx:e,status:n}=this._processInputParams(t),s=this._def;if(e.parsedType!==Te.array)return ye(e,{code:ce.invalid_type,expected:Te.array,received:e.parsedType}),Be;if(s.exactLength!==null){const r=e.data.length>s.exactLength.value,a=e.data.length<s.exactLength.value;(r||a)&&(ye(e,{code:r?ce.too_big:ce.too_small,minimum:a?s.exactLength.value:void 0,maximum:r?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&e.data.length<s.minLength.value&&(ye(e,{code:ce.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&e.data.length>s.maxLength.value&&(ye(e,{code:ce.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),e.common.async)return Promise.all([...e.data].map((r,a)=>s.type._parseAsync(new $s(e,r,e.path,a)))).then(r=>Zn.mergeArray(n,r));const o=[...e.data].map((r,a)=>s.type._parseSync(new $s(e,r,e.path,a)));return Zn.mergeArray(n,o)}get element(){return this._def.type}min(t,e){return new ys({...this._def,minLength:{value:t,message:Ee.toString(e)}})}max(t,e){return new ys({...this._def,maxLength:{value:t,message:Ee.toString(e)}})}length(t,e){return new ys({...this._def,exactLength:{value:t,message:Ee.toString(e)}})}nonempty(t){return this.min(1,t)}}ys.create=(i,t)=>new ys({type:i,minLength:null,maxLength:null,exactLength:null,typeName:Oe.ZodArray,...qe(t)});function oc(i){if(i instanceof qt){const t={};for(const e in i.shape){const n=i.shape[e];t[e]=qs.create(oc(n))}return new qt({...i._def,shape:()=>t})}else return i instanceof ys?new ys({...i._def,type:oc(i.element)}):i instanceof qs?qs.create(oc(i.unwrap())):i instanceof Lr?Lr.create(oc(i.unwrap())):i instanceof Gs?Gs.create(i.items.map(t=>oc(t))):i}class qt extends Ye{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),e=rt.objectKeys(t);return this._cached={shape:t,keys:e}}_parse(t){if(this._getType(t)!==Te.object){const u=this._getOrReturnCtx(t);return ye(u,{code:ce.invalid_type,expected:Te.object,received:u.parsedType}),Be}const{status:n,ctx:s}=this._processInputParams(t),{shape:o,keys:r}=this._getCached(),a=[];if(!(this._def.catchall instanceof Do&&this._def.unknownKeys==="strip"))for(const u in s.data)r.includes(u)||a.push(u);const l=[];for(const u of r){const h=o[u],m=s.data[u];l.push({key:{status:"valid",value:u},value:h._parse(new $s(s,m,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof Do){const u=this._def.unknownKeys;if(u==="passthrough")for(const h of a)l.push({key:{status:"valid",value:h},value:{status:"valid",value:s.data[h]}});else if(u==="strict")a.length>0&&(ye(s,{code:ce.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const h of a){const m=s.data[h];l.push({key:{status:"valid",value:h},value:u._parse(new $s(s,m,s.path,h)),alwaysSet:h in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const h of l){const m=await h.key,p=await h.value;u.push({key:m,value:p,alwaysSet:h.alwaysSet})}return u}).then(u=>Zn.mergeObjectSync(n,u)):Zn.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(t){return Ee.errToObj,new qt({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(e,n)=>{var s,o,r,a;const l=(r=(o=(s=this._def).errorMap)===null||o===void 0?void 0:o.call(s,e,n).message)!==null&&r!==void 0?r:n.defaultError;return e.code==="unrecognized_keys"?{message:(a=Ee.errToObj(t).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new qt({...this._def,unknownKeys:"strip"})}passthrough(){return new qt({...this._def,unknownKeys:"passthrough"})}extend(t){return new qt({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new qt({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Oe.ZodObject})}setKey(t,e){return this.augment({[t]:e})}catchall(t){return new qt({...this._def,catchall:t})}pick(t){const e={};return rt.objectKeys(t).forEach(n=>{t[n]&&this.shape[n]&&(e[n]=this.shape[n])}),new qt({...this._def,shape:()=>e})}omit(t){const e={};return rt.objectKeys(this.shape).forEach(n=>{t[n]||(e[n]=this.shape[n])}),new qt({...this._def,shape:()=>e})}deepPartial(){return oc(this)}partial(t){const e={};return rt.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];t&&!t[n]?e[n]=s:e[n]=s.optional()}),new qt({...this._def,shape:()=>e})}required(t){const e={};return rt.objectKeys(this.shape).forEach(n=>{if(t&&!t[n])e[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof qs;)o=o._def.innerType;e[n]=o}}),new qt({...this._def,shape:()=>e})}keyof(){return nO(rt.objectKeys(this.shape))}}qt.create=(i,t)=>new qt({shape:()=>i,unknownKeys:"strip",catchall:Do.create(),typeName:Oe.ZodObject,...qe(t)});qt.strictCreate=(i,t)=>new qt({shape:()=>i,unknownKeys:"strict",catchall:Do.create(),typeName:Oe.ZodObject,...qe(t)});qt.lazycreate=(i,t)=>new qt({shape:i,unknownKeys:"strip",catchall:Do.create(),typeName:Oe.ZodObject,...qe(t)});class hh extends Ye{_parse(t){const{ctx:e}=this._processInputParams(t),n=this._def.options;function s(o){for(const a of o)if(a.result.status==="valid")return a.result;for(const a of o)if(a.result.status==="dirty")return e.common.issues.push(...a.ctx.common.issues),a.result;const r=o.map(a=>new Di(a.ctx.common.issues));return ye(e,{code:ce.invalid_union,unionErrors:r}),Be}if(e.common.async)return Promise.all(n.map(async o=>{const r={...e,common:{...e.common,issues:[]},parent:null};return{result:await o._parseAsync({data:e.data,path:e.path,parent:r}),ctx:r}})).then(s);{let o;const r=[];for(const l of n){const u={...e,common:{...e.common,issues:[]},parent:null},h=l._parseSync({data:e.data,path:e.path,parent:u});if(h.status==="valid")return h;h.status==="dirty"&&!o&&(o={result:h,ctx:u}),u.common.issues.length&&r.push(u.common.issues)}if(o)return e.common.issues.push(...o.ctx.common.issues),o.result;const a=r.map(l=>new Di(l));return ye(e,{code:ce.invalid_union,unionErrors:a}),Be}}get options(){return this._def.options}}hh.create=(i,t)=>new hh({options:i,typeName:Oe.ZodUnion,...qe(t)});const yo=i=>i instanceof gh?yo(i.schema):i instanceof ks?yo(i.innerType()):i instanceof ph?[i.value]:i instanceof Or?i.options:i instanceof bh?rt.objectValues(i.enum):i instanceof _h?yo(i._def.innerType):i instanceof uh?[void 0]:i instanceof dh?[null]:i instanceof qs?[void 0,...yo(i.unwrap())]:i instanceof Lr?[null,...yo(i.unwrap())]:i instanceof x1||i instanceof yh?yo(i.unwrap()):i instanceof wh?yo(i._def.innerType):[];class Up extends Ye{_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==Te.object)return ye(e,{code:ce.invalid_type,expected:Te.object,received:e.parsedType}),Be;const n=this.discriminator,s=e.data[n],o=this.optionsMap.get(s);return o?e.common.async?o._parseAsync({data:e.data,path:e.path,parent:e}):o._parseSync({data:e.data,path:e.path,parent:e}):(ye(e,{code:ce.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Be)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,e,n){const s=new Map;for(const o of e){const r=yo(o.shape[t]);if(!r.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const a of r){if(s.has(a))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(a)}`);s.set(a,o)}}return new Up({typeName:Oe.ZodDiscriminatedUnion,discriminator:t,options:e,optionsMap:s,...qe(n)})}}function Iv(i,t){const e=xo(i),n=xo(t);if(i===t)return{valid:!0,data:i};if(e===Te.object&&n===Te.object){const s=rt.objectKeys(t),o=rt.objectKeys(i).filter(a=>s.indexOf(a)!==-1),r={...i,...t};for(const a of o){const l=Iv(i[a],t[a]);if(!l.valid)return{valid:!1};r[a]=l.data}return{valid:!0,data:r}}else if(e===Te.array&&n===Te.array){if(i.length!==t.length)return{valid:!1};const s=[];for(let o=0;o<i.length;o++){const r=i[o],a=t[o],l=Iv(r,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return e===Te.date&&n===Te.date&&+i==+t?{valid:!0,data:i}:{valid:!1}}class fh extends Ye{_parse(t){const{status:e,ctx:n}=this._processInputParams(t),s=(o,r)=>{if(Av(o)||Av(r))return Be;const a=Iv(o.value,r.value);return a.valid?((Rv(o)||Rv(r))&&e.dirty(),{status:e.value,value:a.data}):(ye(n,{code:ce.invalid_intersection_types}),Be)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,r])=>s(o,r)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}fh.create=(i,t,e)=>new fh({left:i,right:t,typeName:Oe.ZodIntersection,...qe(e)});class Gs extends Ye{_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==Te.array)return ye(n,{code:ce.invalid_type,expected:Te.array,received:n.parsedType}),Be;if(n.data.length<this._def.items.length)return ye(n,{code:ce.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Be;!this._def.rest&&n.data.length>this._def.items.length&&(ye(n,{code:ce.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),e.dirty());const o=[...n.data].map((r,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new $s(n,r,n.path,a)):null}).filter(r=>!!r);return n.common.async?Promise.all(o).then(r=>Zn.mergeArray(e,r)):Zn.mergeArray(e,o)}get items(){return this._def.items}rest(t){return new Gs({...this._def,rest:t})}}Gs.create=(i,t)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Gs({items:i,typeName:Oe.ZodTuple,rest:null,...qe(t)})};class mh extends Ye{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==Te.object)return ye(n,{code:ce.invalid_type,expected:Te.object,received:n.parsedType}),Be;const s=[],o=this._def.keyType,r=this._def.valueType;for(const a in n.data)s.push({key:o._parse(new $s(n,a,n.path,a)),value:r._parse(new $s(n,n.data[a],n.path,a)),alwaysSet:a in n.data});return n.common.async?Zn.mergeObjectAsync(e,s):Zn.mergeObjectSync(e,s)}get element(){return this._def.valueType}static create(t,e,n){return e instanceof Ye?new mh({keyType:t,valueType:e,typeName:Oe.ZodRecord,...qe(n)}):new mh({keyType:_s.create(),valueType:t,typeName:Oe.ZodRecord,...qe(e)})}}class Zg extends Ye{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==Te.map)return ye(n,{code:ce.invalid_type,expected:Te.map,received:n.parsedType}),Be;const s=this._def.keyType,o=this._def.valueType,r=[...n.data.entries()].map(([a,l],u)=>({key:s._parse(new $s(n,a,n.path,[u,"key"])),value:o._parse(new $s(n,l,n.path,[u,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of r){const u=await l.key,h=await l.value;if(u.status==="aborted"||h.status==="aborted")return Be;(u.status==="dirty"||h.status==="dirty")&&e.dirty(),a.set(u.value,h.value)}return{status:e.value,value:a}})}else{const a=new Map;for(const l of r){const u=l.key,h=l.value;if(u.status==="aborted"||h.status==="aborted")return Be;(u.status==="dirty"||h.status==="dirty")&&e.dirty(),a.set(u.value,h.value)}return{status:e.value,value:a}}}}Zg.create=(i,t,e)=>new Zg({valueType:t,keyType:i,typeName:Oe.ZodMap,...qe(e)});class Fa extends Ye{_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==Te.set)return ye(n,{code:ce.invalid_type,expected:Te.set,received:n.parsedType}),Be;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(ye(n,{code:ce.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),e.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(ye(n,{code:ce.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),e.dirty());const o=this._def.valueType;function r(l){const u=new Set;for(const h of l){if(h.status==="aborted")return Be;h.status==="dirty"&&e.dirty(),u.add(h.value)}return{status:e.value,value:u}}const a=[...n.data.values()].map((l,u)=>o._parse(new $s(n,l,n.path,u)));return n.common.async?Promise.all(a).then(l=>r(l)):r(a)}min(t,e){return new Fa({...this._def,minSize:{value:t,message:Ee.toString(e)}})}max(t,e){return new Fa({...this._def,maxSize:{value:t,message:Ee.toString(e)}})}size(t,e){return this.min(t,e).max(t,e)}nonempty(t){return this.min(1,t)}}Fa.create=(i,t)=>new Fa({valueType:i,minSize:null,maxSize:null,typeName:Oe.ZodSet,...qe(t)});class _c extends Ye{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==Te.function)return ye(e,{code:ce.invalid_type,expected:Te.function,received:e.parsedType}),Be;function n(a,l){return $g({data:a,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,qg(),Sc].filter(u=>!!u),issueData:{code:ce.invalid_arguments,argumentsError:l}})}function s(a,l){return $g({data:a,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,qg(),Sc].filter(u=>!!u),issueData:{code:ce.invalid_return_type,returnTypeError:l}})}const o={errorMap:e.common.contextualErrorMap},r=e.data;if(this._def.returns instanceof Rc){const a=this;return oi(async function(...l){const u=new Di([]),h=await a._def.args.parseAsync(l,o).catch(v=>{throw u.addIssue(n(l,v)),u}),m=await Reflect.apply(r,this,h);return await a._def.returns._def.type.parseAsync(m,o).catch(v=>{throw u.addIssue(s(m,v)),u})})}else{const a=this;return oi(function(...l){const u=a._def.args.safeParse(l,o);if(!u.success)throw new Di([n(l,u.error)]);const h=Reflect.apply(r,this,u.data),m=a._def.returns.safeParse(h,o);if(!m.success)throw new Di([s(h,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new _c({...this._def,args:Gs.create(t).rest(Ia.create())})}returns(t){return new _c({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,e,n){return new _c({args:t||Gs.create([]).rest(Ia.create()),returns:e||Ia.create(),typeName:Oe.ZodFunction,...qe(n)})}}class gh extends Ye{get schema(){return this._def.getter()}_parse(t){const{ctx:e}=this._processInputParams(t);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}}gh.create=(i,t)=>new gh({getter:i,typeName:Oe.ZodLazy,...qe(t)});class ph extends Ye{_parse(t){if(t.data!==this._def.value){const e=this._getOrReturnCtx(t);return ye(e,{received:e.data,code:ce.invalid_literal,expected:this._def.value}),Be}return{status:"valid",value:t.data}}get value(){return this._def.value}}ph.create=(i,t)=>new ph({value:i,typeName:Oe.ZodLiteral,...qe(t)});function nO(i,t){return new Or({values:i,typeName:Oe.ZodEnum,...qe(t)})}class Or extends Ye{constructor(){super(...arguments),gd.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const e=this._getOrReturnCtx(t),n=this._def.values;return ye(e,{expected:rt.joinValues(n),received:e.parsedType,code:ce.invalid_type}),Be}if(Gg(this,gd)||XD(this,gd,new Set(this._def.values)),!Gg(this,gd).has(t.data)){const e=this._getOrReturnCtx(t),n=this._def.values;return ye(e,{received:e.data,code:ce.invalid_enum_value,options:n}),Be}return oi(t.data)}get options(){return this._def.values}get enum(){const t={};for(const e of this._def.values)t[e]=e;return t}get Values(){const t={};for(const e of this._def.values)t[e]=e;return t}get Enum(){const t={};for(const e of this._def.values)t[e]=e;return t}extract(t,e=this._def){return Or.create(t,{...this._def,...e})}exclude(t,e=this._def){return Or.create(this.options.filter(n=>!t.includes(n)),{...this._def,...e})}}gd=new WeakMap;Or.create=nO;class bh extends Ye{constructor(){super(...arguments),pd.set(this,void 0)}_parse(t){const e=rt.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==Te.string&&n.parsedType!==Te.number){const s=rt.objectValues(e);return ye(n,{expected:rt.joinValues(s),received:n.parsedType,code:ce.invalid_type}),Be}if(Gg(this,pd)||XD(this,pd,new Set(rt.getValidEnumValues(this._def.values))),!Gg(this,pd).has(t.data)){const s=rt.objectValues(e);return ye(n,{received:n.data,code:ce.invalid_enum_value,options:s}),Be}return oi(t.data)}get enum(){return this._def.values}}pd=new WeakMap;bh.create=(i,t)=>new bh({values:i,typeName:Oe.ZodNativeEnum,...qe(t)});class Rc extends Ye{unwrap(){return this._def.type}_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==Te.promise&&e.common.async===!1)return ye(e,{code:ce.invalid_type,expected:Te.promise,received:e.parsedType}),Be;const n=e.parsedType===Te.promise?e.data:Promise.resolve(e.data);return oi(n.then(s=>this._def.type.parseAsync(s,{path:e.path,errorMap:e.common.contextualErrorMap})))}}Rc.create=(i,t)=>new Rc({type:i,typeName:Oe.ZodPromise,...qe(t)});class ks extends Ye{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Oe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:e,ctx:n}=this._processInputParams(t),s=this._def.effect||null,o={addIssue:r=>{ye(n,r),r.fatal?e.abort():e.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),s.type==="preprocess"){const r=s.transform(n.data,o);if(n.common.async)return Promise.resolve(r).then(async a=>{if(e.value==="aborted")return Be;const l=await this._def.schema._parseAsync({data:a,path:n.path,parent:n});return l.status==="aborted"?Be:l.status==="dirty"||e.value==="dirty"?uc(l.value):l});{if(e.value==="aborted")return Be;const a=this._def.schema._parseSync({data:r,path:n.path,parent:n});return a.status==="aborted"?Be:a.status==="dirty"||e.value==="dirty"?uc(a.value):a}}if(s.type==="refinement"){const r=a=>{const l=s.refinement(a,o);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Be:(a.status==="dirty"&&e.dirty(),r(a.value),{status:e.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?Be:(a.status==="dirty"&&e.dirty(),r(a.value).then(()=>({status:e.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!La(r))return r;const a=s.transform(r.value,o);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(r=>La(r)?Promise.resolve(s.transform(r.value,o)).then(a=>({status:e.value,value:a})):r);rt.assertNever(s)}}ks.create=(i,t,e)=>new ks({schema:i,typeName:Oe.ZodEffects,effect:t,...qe(e)});ks.createWithPreprocess=(i,t,e)=>new ks({schema:t,effect:{type:"preprocess",transform:i},typeName:Oe.ZodEffects,...qe(e)});class qs extends Ye{_parse(t){return this._getType(t)===Te.undefined?oi(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}qs.create=(i,t)=>new qs({innerType:i,typeName:Oe.ZodOptional,...qe(t)});class Lr extends Ye{_parse(t){return this._getType(t)===Te.null?oi(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Lr.create=(i,t)=>new Lr({innerType:i,typeName:Oe.ZodNullable,...qe(t)});class _h extends Ye{_parse(t){const{ctx:e}=this._processInputParams(t);let n=e.data;return e.parsedType===Te.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:e.path,parent:e})}removeDefault(){return this._def.innerType}}_h.create=(i,t)=>new _h({innerType:i,typeName:Oe.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...qe(t)});class wh extends Ye{_parse(t){const{ctx:e}=this._processInputParams(t),n={...e,common:{...e.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return lh(s)?s.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Di(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Di(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}wh.create=(i,t)=>new wh({innerType:i,typeName:Oe.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...qe(t)});class Yg extends Ye{_parse(t){if(this._getType(t)!==Te.nan){const n=this._getOrReturnCtx(t);return ye(n,{code:ce.invalid_type,expected:Te.nan,received:n.parsedType}),Be}return{status:"valid",value:t.data}}}Yg.create=i=>new Yg({typeName:Oe.ZodNaN,...qe(i)});const $oe=Symbol("zod_brand");class x1 extends Ye{_parse(t){const{ctx:e}=this._processInputParams(t),n=e.data;return this._def.type._parse({data:n,path:e.path,parent:e})}unwrap(){return this._def.type}}class Nh extends Ye{_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Be:o.status==="dirty"?(e.dirty(),uc(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Be:s.status==="dirty"?(e.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(t,e){return new Nh({in:t,out:e,typeName:Oe.ZodPipeline})}}class yh extends Ye{_parse(t){const e=this._def.innerType._parse(t),n=s=>(La(s)&&(s.value=Object.freeze(s.value)),s);return lh(e)?e.then(s=>n(s)):n(e)}unwrap(){return this._def.innerType}}yh.create=(i,t)=>new yh({innerType:i,typeName:Oe.ZodReadonly,...qe(t)});function NR(i,t){const e=typeof i=="function"?i(t):typeof i=="string"?{message:i}:i;return typeof e=="string"?{message:e}:e}function iO(i,t={},e){return i?Ac.create().superRefine((n,s)=>{var o,r;const a=i(n);if(a instanceof Promise)return a.then(l=>{var u,h;if(!l){const m=NR(t,n),p=(h=(u=m.fatal)!==null&&u!==void 0?u:e)!==null&&h!==void 0?h:!0;s.addIssue({code:"custom",...m,fatal:p})}});if(!a){const l=NR(t,n),u=(r=(o=l.fatal)!==null&&o!==void 0?o:e)!==null&&r!==void 0?r:!0;s.addIssue({code:"custom",...l,fatal:u})}}):Ac.create()}const Goe={object:qt.lazycreate};var Oe;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(Oe||(Oe={}));const joe=(i,t={message:`Input not instance of ${i.name}`})=>iO(e=>e instanceof i,t),sO=_s.create,oO=Nr.create,Koe=Yg.create,Zoe=Dr.create,rO=ch.create,Yoe=Ba.create,Joe=jg.create,Xoe=uh.create,Qoe=dh.create,ere=Ac.create,tre=Ia.create,nre=Do.create,ire=Kg.create,sre=ys.create,ore=qt.create,rre=qt.strictCreate,are=hh.create,lre=Up.create,cre=fh.create,ure=Gs.create,dre=mh.create,hre=Zg.create,fre=Fa.create,mre=_c.create,gre=gh.create,pre=ph.create,bre=Or.create,_re=bh.create,wre=Rc.create,DR=ks.create,yre=qs.create,vre=Lr.create,Cre=ks.createWithPreprocess,Tre=Nh.create,xre=()=>sO().optional(),kre=()=>oO().optional(),Ere=()=>rO().optional(),Sre={string:i=>_s.create({...i,coerce:!0}),number:i=>Nr.create({...i,coerce:!0}),boolean:i=>ch.create({...i,coerce:!0}),bigint:i=>Dr.create({...i,coerce:!0}),date:i=>Ba.create({...i,coerce:!0})},Are=Be;var At=Object.freeze({__proto__:null,defaultErrorMap:Sc,setErrorMap:Coe,getErrorMap:qg,makeIssue:$g,EMPTY_PATH:Toe,addIssueToContext:ye,ParseStatus:Zn,INVALID:Be,DIRTY:uc,OK:oi,isAborted:Av,isDirty:Rv,isValid:La,isAsync:lh,get util(){return rt},get objectUtil(){return Sv},ZodParsedType:Te,getParsedType:xo,ZodType:Ye,datetimeRegex:tO,ZodString:_s,ZodNumber:Nr,ZodBigInt:Dr,ZodBoolean:ch,ZodDate:Ba,ZodSymbol:jg,ZodUndefined:uh,ZodNull:dh,ZodAny:Ac,ZodUnknown:Ia,ZodNever:Do,ZodVoid:Kg,ZodArray:ys,ZodObject:qt,ZodUnion:hh,ZodDiscriminatedUnion:Up,ZodIntersection:fh,ZodTuple:Gs,ZodRecord:mh,ZodMap:Zg,ZodSet:Fa,ZodFunction:_c,ZodLazy:gh,ZodLiteral:ph,ZodEnum:Or,ZodNativeEnum:bh,ZodPromise:Rc,ZodEffects:ks,ZodTransformer:ks,ZodOptional:qs,ZodNullable:Lr,ZodDefault:_h,ZodCatch:wh,ZodNaN:Yg,BRAND:$oe,ZodBranded:x1,ZodPipeline:Nh,ZodReadonly:yh,custom:iO,Schema:Ye,ZodSchema:Ye,late:Goe,get ZodFirstPartyTypeKind(){return Oe},coerce:Sre,any:ere,array:sre,bigint:Zoe,boolean:rO,date:Yoe,discriminatedUnion:lre,effect:DR,enum:bre,function:mre,instanceof:joe,intersection:cre,lazy:gre,literal:pre,map:hre,nan:Koe,nativeEnum:_re,never:nre,null:Qoe,nullable:vre,number:oO,object:ore,oboolean:Ere,onumber:kre,optional:yre,ostring:xre,pipeline:Tre,preprocess:Cre,promise:wre,record:dre,set:fre,strictObject:rre,string:sO,symbol:Joe,transformer:DR,tuple:ure,undefined:Xoe,union:are,unknown:tre,void:ire,NEVER:Are,ZodIssueCode:ce,quotelessJson:voe,ZodError:Di});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Rre,Ire;function Pre(){return{geminiUrl:Rre,vertexUrl:Ire}}function Mre(i,t,e){var n,s,o;if(!(!((n=i.httpOptions)===null||n===void 0)&&n.baseUrl)){const r=Pre();return i.vertexai?(s=r.vertexUrl)!==null&&s!==void 0?s:t:(o=r.geminiUrl)!==null&&o!==void 0?o:e}return i.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dh{}function Fe(i,t){const e=/\{([^}]+)\}/g;return i.replace(e,(n,s)=>{if(Object.prototype.hasOwnProperty.call(t,s)){const o=t[s];return o!=null?String(o):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function w(i,t,e){for(let o=0;o<t.length-1;o++){const r=t[o];if(r.endsWith("[]")){const a=r.slice(0,-2);if(!(a in i))if(Array.isArray(e))i[a]=Array.from({length:e.length},()=>({}));else throw new Error(`Value must be a list given an array path ${r}`);if(Array.isArray(i[a])){const l=i[a];if(Array.isArray(e))for(let u=0;u<l.length;u++){const h=l[u];w(h,t.slice(o+1),e[u])}else for(const u of l)w(u,t.slice(o+1),e)}return}else if(r.endsWith("[0]")){const a=r.slice(0,-3);a in i||(i[a]=[{}]);const l=i[a];w(l[0],t.slice(o+1),e);return}(!i[r]||typeof i[r]!="object")&&(i[r]={}),i=i[r]}const n=t[t.length-1],s=i[n];if(s!==void 0){if(!e||typeof e=="object"&&Object.keys(e).length===0||e===s)return;if(typeof s=="object"&&typeof e=="object"&&s!==null&&e!==null)Object.assign(s,e);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else i[n]=e}function b(i,t){try{if(t.length===1&&t[0]==="_self")return i;for(let e=0;e<t.length;e++){if(typeof i!="object"||i===null)return;const n=t[e];if(n.endsWith("[]")){const s=n.slice(0,-2);if(s in i){const o=i[s];return Array.isArray(o)?o.map(r=>b(r,t.slice(e+1))):void 0}else return}else i=i[n]}return i}catch(e){if(e instanceof TypeError)return;throw e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var OR;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(OR||(OR={}));var LR;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(LR||(LR={}));var BR;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(BR||(BR={}));var FR;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(FR||(FR={}));var UR;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(UR||(UR={}));var Us;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT"})(Us||(Us={}));var zR;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(zR||(zR={}));var HR;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(HR||(HR={}));var WR;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY"})(WR||(WR={}));var qR;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(qR||(qR={}));var $R;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})($R||($R={}));var GR;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(GR||(GR={}));var jR;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(jR||(jR={}));var Jg;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(Jg||(Jg={}));var KR;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(KR||(KR={}));var Pv;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Pv||(Pv={}));var ZR;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ZR||(ZR={}));var YR;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(YR||(YR={}));var JR;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(JR||(JR={}));var XR;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(XR||(XR={}));var QR;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(QR||(QR={}));var eI;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(eI||(eI={}));var tI;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(tI||(tI={}));var nI;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(nI||(nI={}));var iI;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi"})(iI||(iI={}));var sI;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(sI||(sI={}));var oI;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(oI||(oI={}));var rI;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(rI||(rI={}));var aI;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(aI||(aI={}));var lI;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(lI||(lI={}));var cI;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(cI||(cI={}));var uI;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(uI||(uI={}));var dI;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(dI||(dI={}));var hI;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(hI||(hI={}));var fI;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(fI||(fI={}));var mI;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(mI||(mI={}));var gI;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(gI||(gI={}));var pI;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(pI||(pI={}));var bI;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY"})(bI||(bI={}));var dc;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(dc||(dc={}));class nd{get text(){var t,e,n,s,o,r,a,l;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",h=!1;const m=[];for(const p of(l=(a=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[v,C]of Object.entries(p))v!=="text"&&v!=="thought"&&(C!==null||C!==void 0)&&m.push(v);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;h=!0,u+=p.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?u:void 0}get data(){var t,e,n,s,o,r,a,l;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const h=[];for(const m of(l=(a=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[p,v]of Object.entries(m))p!=="inlineData"&&(v!==null||v!==void 0)&&h.push(p);m.inlineData&&typeof m.inlineData.data=="string"&&(u+=atob(m.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var t,e,n,s,o,r,a,l;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(a=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var t,e,n,s,o,r,a,l,u;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(l=(a=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return(u=h==null?void 0:h[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var t,e,n,s,o,r,a,l,u;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(l=(a=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return(u=h==null?void 0:h[0])===null||u===void 0?void 0:u.output}}class _I{}class wI{}class Vre{}class Nre{}class yI{}class vI{}class CI{}class Dre{}class TI{}class xI{}class kI{}class Ore{}class Mv{constructor(t){const e={};for(const n of t.headers.entries())e[n[0]]=n[1];this.headers=e,this.responseInternal=t}json(){return this.responseInternal.json()}}class Lre{}class Bre{}class Fre{get text(){var t,e,n;let s="",o=!1;const r=[];for(const a of(n=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&n!==void 0?n:[]){for(const[l,u]of Object.entries(a))l!=="text"&&l!=="thought"&&u!==null&&r.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,s+=a.text}}return r.length>0&&console.warn(`there are non-text parts ${r} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?s:void 0}get data(){var t,e,n;let s="";const o=[];for(const r of(n=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&n!==void 0?n:[]){for(const[a,l]of Object.entries(r))a!=="inlineData"&&l!==null&&o.push(a);r.inlineData&&typeof r.inlineData.data=="string"&&(s+=atob(r.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class Ure{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ft(i,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(i.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function aO(i,t){const e=Ft(i,t);return e?e.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:e.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${e}`:e:""}function lO(i,t){return Array.isArray(t)?t.map(e=>Xg(i,e)):[Xg(i,t)]}function Xg(i,t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function zre(i,t){const e=Xg(i,t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Hre(i,t){const e=Xg(i,t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function EI(i,t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function cO(i,t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>EI(i,e)):[EI(i,t)]}function Vv(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function SI(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function AI(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function wi(i,t){if(t==null)throw new Error("ContentUnion is required");return Vv(t)?t:{role:"user",parts:cO(i,t)}}function uO(i,t){if(!t)return[];if(i.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{const n=wi(i,e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(i.isVertexAI()){const e=wi(i,t);return e.parts&&e.parts.length>0&&e.parts[0].text!==void 0?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>wi(i,e)):[wi(i,t)]}function vs(i,t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(SI(t)||AI(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[wi(i,t)]}const e=[],n=[],s=Vv(t[0]);for(const o of t){const r=Vv(o);if(r!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)e.push(o);else{if(SI(o)||AI(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return s||e.push({role:"user",parts:cO(i,n)}),e}const RI=At.enum(["string","number","integer","object","array","boolean","null"]),Wre=At.union([RI,At.array(RI)]);function qre(i=!0){const t=At.lazy(()=>{const e=At.object({type:Wre.optional(),format:At.string().optional(),title:At.string().optional(),description:At.string().optional(),default:At.unknown().optional(),items:t.optional(),minItems:At.coerce.string().optional(),maxItems:At.coerce.string().optional(),enum:At.array(At.unknown()).optional(),properties:At.record(At.string(),t).optional(),required:At.array(At.string()).optional(),minProperties:At.coerce.string().optional(),maxProperties:At.coerce.string().optional(),propertyOrdering:At.array(At.string()).optional(),minimum:At.number().optional(),maximum:At.number().optional(),minLength:At.coerce.string().optional(),maxLength:At.coerce.string().optional(),pattern:At.string().optional(),anyOf:At.array(t).optional(),additionalProperties:At.boolean().optional()});return i?e.strict():e});return t}function $re(i,t){i.includes("null")&&(t.nullable=!0);const e=i.filter(n=>n!=="null");if(e.length===1)t.type=Object.keys(Us).includes(e[0].toUpperCase())?Us[e[0].toUpperCase()]:Us.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const n of e)t.anyOf.push({type:Object.keys(Us).includes(n.toUpperCase())?Us[n.toUpperCase()]:Us.TYPE_UNSPECIFIED})}}function Nd(i){const t={},e=["items"],n=["anyOf"],s=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=i.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(t.nullable=!0,i=o[1]):o[1].type==="null"&&(t.nullable=!0,i=o[0])),i.type instanceof Array&&$re(i.type,t);for(const[r,a]of Object.entries(i))if(a!=null)if(r=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;t.type=Object.keys(Us).includes(a.toUpperCase())?a.toUpperCase():Us.TYPE_UNSPECIFIED}else if(e.includes(r))t[r]=Nd(a);else if(n.includes(r)){const l=[];for(const u of a){if(u.type=="null"){t.nullable=!0;continue}l.push(Nd(u))}t[r]=l}else if(s.includes(r)){const l={};for(const[u,h]of Object.entries(a))l[u]=Nd(h);t[r]=l}else{if(r==="additionalProperties")continue;t[r]=a}return t}function Qg(i,t){if(Object.keys(t).includes("$schema")){delete t.$schema;const e=qre().parse(t);return Nd(e)}else return Nd(t)}function dO(i,t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function hO(i,t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function zp(i,t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(e.parameters=Qg(i,e.parameters)),e.response&&(e.response=Qg(i,e.response));return t}function Hp(i,t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Gre(i,t,e,n=1){const s=!t.startsWith(`${e}/`)&&t.split("/").length===n;return i.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${i.getProject()}/${t}`:t.startsWith(`${e}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}`:s?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}/${t}`:t:s?`${e}/${t}`:t}function Hr(i,t){if(typeof t!="string")throw new Error("name must be a string");return Gre(i,t,"cachedContents")}function fO(i,t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Wr(i,t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function jre(i){return i!=null&&typeof i=="object"&&"name"in i}function Kre(i){return i!=null&&typeof i=="object"&&"video"in i}function Zre(i){return i!=null&&typeof i=="object"&&"uri"in i}function mO(i,t){var e;let n;if(jre(t)&&(n=t.name),!(Zre(t)&&(n=t.uri,n===void 0))&&!(Kre(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function gO(i,t){let e;return i.isVertexAI()?e=t?"publishers/google/models":"models":e=t?"models":"tunedModels",e}function pO(i,t){for(const e of["models","tunedModels","publisherModels"])if(Yre(t,e))return t[e];return[]}function Yre(i,t){return i!==null&&typeof i=="object"&&t in i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jre(i,t){const e={},n=b(t,["fps"]);n!=null&&w(e,["fps"],n);const s=b(t,["endOffset"]);s!=null&&w(e,["endOffset"],s);const o=b(t,["startOffset"]);return o!=null&&w(e,["startOffset"],o),e}function Xre(i,t){const e={};if(b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(t,["data"]);n!=null&&w(e,["data"],n);const s=b(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function Qre(i,t){const e={},n=b(t,["videoMetadata"]);n!=null&&w(e,["videoMetadata"],Jre(i,n));const s=b(t,["thought"]);s!=null&&w(e,["thought"],s);const o=b(t,["inlineData"]);o!=null&&w(e,["inlineData"],Xre(i,o));const r=b(t,["codeExecutionResult"]);r!=null&&w(e,["codeExecutionResult"],r);const a=b(t,["executableCode"]);a!=null&&w(e,["executableCode"],a);const l=b(t,["fileData"]);l!=null&&w(e,["fileData"],l);const u=b(t,["functionCall"]);u!=null&&w(e,["functionCall"],u);const h=b(t,["functionResponse"]);h!=null&&w(e,["functionResponse"],h);const m=b(t,["text"]);return m!=null&&w(e,["text"],m),e}function II(i,t){const e={},n=b(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Qre(i,r))),w(e,["parts"],o)}const s=b(t,["role"]);return s!=null&&w(e,["role"],s),e}function eae(i,t){const e={},n=b(t,["behavior"]);n!=null&&w(e,["behavior"],n);const s=b(t,["description"]);s!=null&&w(e,["description"],s);const o=b(t,["name"]);o!=null&&w(e,["name"],o);const r=b(t,["parameters"]);r!=null&&w(e,["parameters"],r);const a=b(t,["response"]);return a!=null&&w(e,["response"],a),e}function tae(i,t){const e={},n=b(t,["startTime"]);n!=null&&w(e,["startTime"],n);const s=b(t,["endTime"]);return s!=null&&w(e,["endTime"],s),e}function nae(i,t){const e={},n=b(t,["timeRangeFilter"]);return n!=null&&w(e,["timeRangeFilter"],tae(i,n)),e}function iae(i,t){const e={},n=b(t,["mode"]);n!=null&&w(e,["mode"],n);const s=b(t,["dynamicThreshold"]);return s!=null&&w(e,["dynamicThreshold"],s),e}function sae(i,t){const e={},n=b(t,["dynamicRetrievalConfig"]);return n!=null&&w(e,["dynamicRetrievalConfig"],iae(i,n)),e}function oae(){return{}}function rae(i,t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>eae(i,u))),w(e,["functionDeclarations"],l)}if(b(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=b(t,["googleSearch"]);s!=null&&w(e,["googleSearch"],nae(i,s));const o=b(t,["googleSearchRetrieval"]);if(o!=null&&w(e,["googleSearchRetrieval"],sae(i,o)),b(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(b(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");b(t,["urlContext"])!=null&&w(e,["urlContext"],oae());const a=b(t,["codeExecution"]);return a!=null&&w(e,["codeExecution"],a),e}function aae(i,t){const e={},n=b(t,["mode"]);n!=null&&w(e,["mode"],n);const s=b(t,["allowedFunctionNames"]);return s!=null&&w(e,["allowedFunctionNames"],s),e}function lae(i,t){const e={},n=b(t,["latitude"]);n!=null&&w(e,["latitude"],n);const s=b(t,["longitude"]);return s!=null&&w(e,["longitude"],s),e}function cae(i,t){const e={},n=b(t,["latLng"]);return n!=null&&w(e,["latLng"],lae(i,n)),e}function uae(i,t){const e={},n=b(t,["functionCallingConfig"]);n!=null&&w(e,["functionCallingConfig"],aae(i,n));const s=b(t,["retrievalConfig"]);return s!=null&&w(e,["retrievalConfig"],cae(i,s)),e}function dae(i,t,e){const n={},s=b(t,["ttl"]);e!==void 0&&s!=null&&w(e,["ttl"],s);const o=b(t,["expireTime"]);e!==void 0&&o!=null&&w(e,["expireTime"],o);const r=b(t,["displayName"]);e!==void 0&&r!=null&&w(e,["displayName"],r);const a=b(t,["contents"]);if(e!==void 0&&a!=null){let m=vs(i,a);Array.isArray(m)&&(m=m.map(p=>II(i,p))),w(e,["contents"],m)}const l=b(t,["systemInstruction"]);e!==void 0&&l!=null&&w(e,["systemInstruction"],II(i,wi(i,l)));const u=b(t,["tools"]);if(e!==void 0&&u!=null){let m=u;Array.isArray(m)&&(m=m.map(p=>rae(i,p))),w(e,["tools"],m)}const h=b(t,["toolConfig"]);if(e!==void 0&&h!=null&&w(e,["toolConfig"],uae(i,h)),b(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function hae(i,t){const e={},n=b(t,["model"]);n!=null&&w(e,["model"],aO(i,n));const s=b(t,["config"]);return s!=null&&w(e,["config"],dae(i,s,e)),e}function fae(i,t){const e={},n=b(t,["name"]);n!=null&&w(e,["_url","name"],Hr(i,n));const s=b(t,["config"]);return s!=null&&w(e,["config"],s),e}function mae(i,t){const e={},n=b(t,["name"]);n!=null&&w(e,["_url","name"],Hr(i,n));const s=b(t,["config"]);return s!=null&&w(e,["config"],s),e}function gae(i,t,e){const n={},s=b(t,["ttl"]);e!==void 0&&s!=null&&w(e,["ttl"],s);const o=b(t,["expireTime"]);return e!==void 0&&o!=null&&w(e,["expireTime"],o),n}function pae(i,t){const e={},n=b(t,["name"]);n!=null&&w(e,["_url","name"],Hr(i,n));const s=b(t,["config"]);return s!=null&&w(e,["config"],gae(i,s,e)),e}function bae(i,t,e){const n={},s=b(t,["pageSize"]);e!==void 0&&s!=null&&w(e,["_query","pageSize"],s);const o=b(t,["pageToken"]);return e!==void 0&&o!=null&&w(e,["_query","pageToken"],o),n}function _ae(i,t){const e={},n=b(t,["config"]);return n!=null&&w(e,["config"],bae(i,n,e)),e}function wae(i,t){const e={},n=b(t,["fps"]);n!=null&&w(e,["fps"],n);const s=b(t,["endOffset"]);s!=null&&w(e,["endOffset"],s);const o=b(t,["startOffset"]);return o!=null&&w(e,["startOffset"],o),e}function yae(i,t){const e={},n=b(t,["displayName"]);n!=null&&w(e,["displayName"],n);const s=b(t,["data"]);s!=null&&w(e,["data"],s);const o=b(t,["mimeType"]);return o!=null&&w(e,["mimeType"],o),e}function vae(i,t){const e={},n=b(t,["videoMetadata"]);n!=null&&w(e,["videoMetadata"],wae(i,n));const s=b(t,["thought"]);s!=null&&w(e,["thought"],s);const o=b(t,["inlineData"]);o!=null&&w(e,["inlineData"],yae(i,o));const r=b(t,["codeExecutionResult"]);r!=null&&w(e,["codeExecutionResult"],r);const a=b(t,["executableCode"]);a!=null&&w(e,["executableCode"],a);const l=b(t,["fileData"]);l!=null&&w(e,["fileData"],l);const u=b(t,["functionCall"]);u!=null&&w(e,["functionCall"],u);const h=b(t,["functionResponse"]);h!=null&&w(e,["functionResponse"],h);const m=b(t,["text"]);return m!=null&&w(e,["text"],m),e}function PI(i,t){const e={},n=b(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>vae(i,r))),w(e,["parts"],o)}const s=b(t,["role"]);return s!=null&&w(e,["role"],s),e}function Cae(i,t){const e={};if(b(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=b(t,["description"]);n!=null&&w(e,["description"],n);const s=b(t,["name"]);s!=null&&w(e,["name"],s);const o=b(t,["parameters"]);o!=null&&w(e,["parameters"],o);const r=b(t,["response"]);return r!=null&&w(e,["response"],r),e}function Tae(i,t){const e={},n=b(t,["startTime"]);n!=null&&w(e,["startTime"],n);const s=b(t,["endTime"]);return s!=null&&w(e,["endTime"],s),e}function xae(i,t){const e={},n=b(t,["timeRangeFilter"]);return n!=null&&w(e,["timeRangeFilter"],Tae(i,n)),e}function kae(i,t){const e={},n=b(t,["mode"]);n!=null&&w(e,["mode"],n);const s=b(t,["dynamicThreshold"]);return s!=null&&w(e,["dynamicThreshold"],s),e}function Eae(i,t){const e={},n=b(t,["dynamicRetrievalConfig"]);return n!=null&&w(e,["dynamicRetrievalConfig"],kae(i,n)),e}function Sae(){return{}}function Aae(i,t){const e={},n=b(t,["apiKeyString"]);return n!=null&&w(e,["apiKeyString"],n),e}function Rae(i,t){const e={},n=b(t,["apiKeyConfig"]);n!=null&&w(e,["apiKeyConfig"],Aae(i,n));const s=b(t,["authType"]);s!=null&&w(e,["authType"],s);const o=b(t,["googleServiceAccountConfig"]);o!=null&&w(e,["googleServiceAccountConfig"],o);const r=b(t,["httpBasicAuthConfig"]);r!=null&&w(e,["httpBasicAuthConfig"],r);const a=b(t,["oauthConfig"]);a!=null&&w(e,["oauthConfig"],a);const l=b(t,["oidcConfig"]);return l!=null&&w(e,["oidcConfig"],l),e}function Iae(i,t){const e={},n=b(t,["authConfig"]);return n!=null&&w(e,["authConfig"],Rae(i,n)),e}function Pae(i,t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>Cae(i,m))),w(e,["functionDeclarations"],h)}const s=b(t,["retrieval"]);s!=null&&w(e,["retrieval"],s);const o=b(t,["googleSearch"]);o!=null&&w(e,["googleSearch"],xae(i,o));const r=b(t,["googleSearchRetrieval"]);r!=null&&w(e,["googleSearchRetrieval"],Eae(i,r)),b(t,["enterpriseWebSearch"])!=null&&w(e,["enterpriseWebSearch"],Sae());const l=b(t,["googleMaps"]);if(l!=null&&w(e,["googleMaps"],Iae(i,l)),b(t,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const u=b(t,["codeExecution"]);return u!=null&&w(e,["codeExecution"],u),e}function Mae(i,t){const e={},n=b(t,["mode"]);n!=null&&w(e,["mode"],n);const s=b(t,["allowedFunctionNames"]);return s!=null&&w(e,["allowedFunctionNames"],s),e}function Vae(i,t){const e={},n=b(t,["latitude"]);n!=null&&w(e,["latitude"],n);const s=b(t,["longitude"]);return s!=null&&w(e,["longitude"],s),e}function Nae(i,t){const e={},n=b(t,["latLng"]);return n!=null&&w(e,["latLng"],Vae(i,n)),e}function Dae(i,t){const e={},n=b(t,["functionCallingConfig"]);n!=null&&w(e,["functionCallingConfig"],Mae(i,n));const s=b(t,["retrievalConfig"]);return s!=null&&w(e,["retrievalConfig"],Nae(i,s)),e}function Oae(i,t,e){const n={},s=b(t,["ttl"]);e!==void 0&&s!=null&&w(e,["ttl"],s);const o=b(t,["expireTime"]);e!==void 0&&o!=null&&w(e,["expireTime"],o);const r=b(t,["displayName"]);e!==void 0&&r!=null&&w(e,["displayName"],r);const a=b(t,["contents"]);if(e!==void 0&&a!=null){let p=vs(i,a);Array.isArray(p)&&(p=p.map(v=>PI(i,v))),w(e,["contents"],p)}const l=b(t,["systemInstruction"]);e!==void 0&&l!=null&&w(e,["systemInstruction"],PI(i,wi(i,l)));const u=b(t,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(v=>Pae(i,v))),w(e,["tools"],p)}const h=b(t,["toolConfig"]);e!==void 0&&h!=null&&w(e,["toolConfig"],Dae(i,h));const m=b(t,["kmsKeyName"]);return e!==void 0&&m!=null&&w(e,["encryption_spec","kmsKeyName"],m),n}function Lae(i,t){const e={},n=b(t,["model"]);n!=null&&w(e,["model"],aO(i,n));const s=b(t,["config"]);return s!=null&&w(e,["config"],Oae(i,s,e)),e}function Bae(i,t){const e={},n=b(t,["name"]);n!=null&&w(e,["_url","name"],Hr(i,n));const s=b(t,["config"]);return s!=null&&w(e,["config"],s),e}function Fae(i,t){const e={},n=b(t,["name"]);n!=null&&w(e,["_url","name"],Hr(i,n));const s=b(t,["config"]);return s!=null&&w(e,["config"],s),e}function Uae(i,t,e){const n={},s=b(t,["ttl"]);e!==void 0&&s!=null&&w(e,["ttl"],s);const o=b(t,["expireTime"]);return e!==void 0&&o!=null&&w(e,["expireTime"],o),n}function zae(i,t){const e={},n=b(t,["name"]);n!=null&&w(e,["_url","name"],Hr(i,n));const s=b(t,["config"]);return s!=null&&w(e,["config"],Uae(i,s,e)),e}function Hae(i,t,e){const n={},s=b(t,["pageSize"]);e!==void 0&&s!=null&&w(e,["_query","pageSize"],s);const o=b(t,["pageToken"]);return e!==void 0&&o!=null&&w(e,["_query","pageToken"],o),n}function Wae(i,t){const e={},n=b(t,["config"]);return n!=null&&w(e,["config"],Hae(i,n,e)),e}function eg(i,t){const e={},n=b(t,["name"]);n!=null&&w(e,["name"],n);const s=b(t,["displayName"]);s!=null&&w(e,["displayName"],s);const o=b(t,["model"]);o!=null&&w(e,["model"],o);const r=b(t,["createTime"]);r!=null&&w(e,["createTime"],r);const a=b(t,["updateTime"]);a!=null&&w(e,["updateTime"],a);const l=b(t,["expireTime"]);l!=null&&w(e,["expireTime"],l);const u=b(t,["usageMetadata"]);return u!=null&&w(e,["usageMetadata"],u),e}function qae(){return{}}function $ae(i,t){const e={},n=b(t,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=b(t,["cachedContents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>eg(i,r))),w(e,["cachedContents"],o)}return e}function tg(i,t){const e={},n=b(t,["name"]);n!=null&&w(e,["name"],n);const s=b(t,["displayName"]);s!=null&&w(e,["displayName"],s);const o=b(t,["model"]);o!=null&&w(e,["model"],o);const r=b(t,["createTime"]);r!=null&&w(e,["createTime"],r);const a=b(t,["updateTime"]);a!=null&&w(e,["updateTime"],a);const l=b(t,["expireTime"]);l!=null&&w(e,["expireTime"],l);const u=b(t,["usageMetadata"]);return u!=null&&w(e,["usageMetadata"],u),e}function Gae(){return{}}function jae(i,t){const e={},n=b(t,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=b(t,["cachedContents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>tg(i,r))),w(e,["cachedContents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ic;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Ic||(Ic={}));class Wp{constructor(t,e,n,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(t,n,s)}init(t,e,n){var s,o;this.nameInternal=t,this.pageInternal=e[this.nameInternal]||[],this.idxInternal=0;let r={config:{}};n?typeof n=="object"?r=Object.assign({},n):r=n:r={config:{}},r.config&&(r.config.pageToken=e.nextPageToken),this.paramsInternal=r,this.pageInternalSize=(o=(s=r.config)===null||s===void 0?void 0:s.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kae extends Dh{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new Wp(Ic.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(e),e)}async create(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=Lae(this.apiClient,t);return a=Fe("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>tg(this.apiClient,h))}else{const u=hae(this.apiClient,t);return a=Fe("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>eg(this.apiClient,h))}}async get(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=Bae(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>tg(this.apiClient,h))}else{const u=fae(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>eg(this.apiClient,h))}}async delete(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=Fae(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(()=>{const h=Gae(),m=new xI;return Object.assign(m,h),m})}else{const u=mae(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(()=>{const h=qae(),m=new xI;return Object.assign(m,h),m})}}async update(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=zae(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>tg(this.apiClient,h))}else{const u=pae(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>eg(this.apiClient,h))}}async listInternal(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=Wae(this.apiClient,t);return a=Fe("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>{const m=jae(this.apiClient,h),p=new kI;return Object.assign(p,m),p})}else{const u=_ae(this.apiClient,t);return a=Fe("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const m=$ae(this.apiClient,h),p=new kI;return Object.assign(p,m),p})}}}function MI(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wt(i){return this instanceof Wt?(this.v=i,this):new Wt(i)}function Dd(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(i,t||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",r),s[Symbol.asyncIterator]=function(){return this},s;function r(v){return function(C){return Promise.resolve(C).then(v,m)}}function a(v,C){n[v]&&(s[v]=function(x){return new Promise(function(k,S){o.push([v,x,k,S])>1||l(v,x)})},C&&(s[v]=C(s[v])))}function l(v,C){try{u(n[v](C))}catch(x){p(o[0][3],x)}}function u(v){v.value instanceof Wt?Promise.resolve(v.value.v).then(h,m):p(o[0][2],v)}function h(v){l("next",v)}function m(v){l("throw",v)}function p(v,C){v(C),o.shift(),o.length&&l(o[0][0],o[0][1])}}function ng(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=i[Symbol.asyncIterator],e;return t?t.call(i):(i=typeof MI=="function"?MI(i):i[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(o){e[o]=i[o]&&function(r){return new Promise(function(a,l){r=i[o](r),s(a,l,r.done,r.value)})}}function s(o,r,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zae(i){var t;if(i.candidates==null||i.candidates.length===0)return!1;const e=(t=i.candidates[0])===null||t===void 0?void 0:t.content;return e===void 0?!1:bO(e)}function bO(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const t of i.parts)if(t===void 0||Object.keys(t).length===0||!t.thought&&t.text!==void 0&&t.text==="")return!1;return!0}function Yae(i){if(i.length!==0){for(const t of i)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function VI(i){if(i===void 0||i.length===0)return[];const t=[],e=i.length;let n=0;for(;n<e;)if(i[n].role==="user")t.push(i[n]),n++;else{const s=[];let o=!0;for(;n<e&&i[n].role==="model";)s.push(i[n]),o&&!bO(i[n])&&(o=!1),n++;o?t.push(...s):t.pop()}return t}class Jae{constructor(t,e){this.modelsModule=t,this.apiClient=e}create(t){return new Xae(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class Xae{constructor(t,e,n,s={},o=[]){this.apiClient=t,this.modelsModule=e,this.model=n,this.config=s,this.history=o,this.sendPromise=Promise.resolve(),Yae(o)}async sendMessage(t){var e;await this.sendPromise;const n=wi(this.apiClient,t.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(e=t.config)!==null&&e!==void 0?e:this.config});return this.sendPromise=(async()=>{var o,r,a;const l=await s,u=(r=(o=l.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content,h=l.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let p=[];h!=null&&(p=(a=h.slice(m))!==null&&a!==void 0?a:[]);const v=u?[u]:[];this.recordHistory(n,v,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(t){var e;await this.sendPromise;const n=wi(this.apiClient,t.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(e=t.config)!==null&&e!==void 0?e:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const o=await s;return this.processStreamResponse(o,n)}getHistory(t=!1){const e=t?VI(this.history):this.history;return structuredClone(e)}processStreamResponse(t,e){var n,s;return Dd(this,arguments,function*(){var r,a,l,u;const h=[];try{for(var m=!0,p=ng(t),v;v=yield Wt(p.next()),r=v.done,!r;m=!0){u=v.value,m=!1;const C=u;if(Zae(C)){const x=(s=(n=C.candidates)===null||n===void 0?void 0:n[0])===null||s===void 0?void 0:s.content;x!==void 0&&h.push(x)}yield yield Wt(C)}}catch(C){a={error:C}}finally{try{!m&&!r&&(l=p.return)&&(yield Wt(l.call(p)))}finally{if(a)throw a.error}}this.recordHistory(e,h)})}recordHistory(t,e,n){let s=[];e.length>0&&e.every(o=>o.role!==void 0)?s=e:s.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...VI(n)):this.history.push(t),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qae(i,t,e){const n={},s=b(t,["pageSize"]);e!==void 0&&s!=null&&w(e,["_query","pageSize"],s);const o=b(t,["pageToken"]);return e!==void 0&&o!=null&&w(e,["_query","pageToken"],o),n}function ele(i,t){const e={},n=b(t,["config"]);return n!=null&&w(e,["config"],Qae(i,n,e)),e}function tle(i,t){const e={},n=b(t,["details"]);n!=null&&w(e,["details"],n);const s=b(t,["message"]);s!=null&&w(e,["message"],s);const o=b(t,["code"]);return o!=null&&w(e,["code"],o),e}function nle(i,t){const e={},n=b(t,["name"]);n!=null&&w(e,["name"],n);const s=b(t,["displayName"]);s!=null&&w(e,["displayName"],s);const o=b(t,["mimeType"]);o!=null&&w(e,["mimeType"],o);const r=b(t,["sizeBytes"]);r!=null&&w(e,["sizeBytes"],r);const a=b(t,["createTime"]);a!=null&&w(e,["createTime"],a);const l=b(t,["expirationTime"]);l!=null&&w(e,["expirationTime"],l);const u=b(t,["updateTime"]);u!=null&&w(e,["updateTime"],u);const h=b(t,["sha256Hash"]);h!=null&&w(e,["sha256Hash"],h);const m=b(t,["uri"]);m!=null&&w(e,["uri"],m);const p=b(t,["downloadUri"]);p!=null&&w(e,["downloadUri"],p);const v=b(t,["state"]);v!=null&&w(e,["state"],v);const C=b(t,["source"]);C!=null&&w(e,["source"],C);const x=b(t,["videoMetadata"]);x!=null&&w(e,["videoMetadata"],x);const k=b(t,["error"]);return k!=null&&w(e,["error"],tle(i,k)),e}function ile(i,t){const e={},n=b(t,["file"]);n!=null&&w(e,["file"],nle(i,n));const s=b(t,["config"]);return s!=null&&w(e,["config"],s),e}function sle(i,t){const e={},n=b(t,["name"]);n!=null&&w(e,["_url","file"],mO(i,n));const s=b(t,["config"]);return s!=null&&w(e,["config"],s),e}function ole(i,t){const e={},n=b(t,["name"]);n!=null&&w(e,["_url","file"],mO(i,n));const s=b(t,["config"]);return s!=null&&w(e,["config"],s),e}function rle(i,t){const e={},n=b(t,["details"]);n!=null&&w(e,["details"],n);const s=b(t,["message"]);s!=null&&w(e,["message"],s);const o=b(t,["code"]);return o!=null&&w(e,["code"],o),e}function Nv(i,t){const e={},n=b(t,["name"]);n!=null&&w(e,["name"],n);const s=b(t,["displayName"]);s!=null&&w(e,["displayName"],s);const o=b(t,["mimeType"]);o!=null&&w(e,["mimeType"],o);const r=b(t,["sizeBytes"]);r!=null&&w(e,["sizeBytes"],r);const a=b(t,["createTime"]);a!=null&&w(e,["createTime"],a);const l=b(t,["expirationTime"]);l!=null&&w(e,["expirationTime"],l);const u=b(t,["updateTime"]);u!=null&&w(e,["updateTime"],u);const h=b(t,["sha256Hash"]);h!=null&&w(e,["sha256Hash"],h);const m=b(t,["uri"]);m!=null&&w(e,["uri"],m);const p=b(t,["downloadUri"]);p!=null&&w(e,["downloadUri"],p);const v=b(t,["state"]);v!=null&&w(e,["state"],v);const C=b(t,["source"]);C!=null&&w(e,["source"],C);const x=b(t,["videoMetadata"]);x!=null&&w(e,["videoMetadata"],x);const k=b(t,["error"]);return k!=null&&w(e,["error"],rle(i,k)),e}function ale(i,t){const e={},n=b(t,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=b(t,["files"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>Nv(i,r))),w(e,["files"],o)}return e}function lle(){return{}}function cle(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ule extends Dh{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new Wp(Ic.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(e),e)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(e=>Nv(this.apiClient,e))}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var e,n;let s,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ele(this.apiClient,t);return o=Fe("files",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(l=>{const u=ale(this.apiClient,l),h=new Ore;return Object.assign(h,u),h})}}async createInternal(t){var e,n;let s,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ile(this.apiClient,t);return o=Fe("upload/v1beta/files",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(()=>{const l=lle(),u=new Lre;return Object.assign(u,l),u})}}async get(t){var e,n;let s,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=sle(this.apiClient,t);return o=Fe("files/{file}",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(l=>Nv(this.apiClient,l))}}async delete(t){var e,n;let s,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ole(this.apiClient,t);return o=Fe("files/{file}",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(()=>{const l=cle(),u=new Bre;return Object.assign(u,l),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dle(i,t){const e={},n=b(t,["voiceName"]);return n!=null&&w(e,["voiceName"],n),e}function hle(i,t){const e={},n=b(t,["voiceName"]);return n!=null&&w(e,["voiceName"],n),e}function _O(i,t){const e={},n=b(t,["prebuiltVoiceConfig"]);return n!=null&&w(e,["prebuiltVoiceConfig"],dle(i,n)),e}function fle(i,t){const e={},n=b(t,["prebuiltVoiceConfig"]);return n!=null&&w(e,["prebuiltVoiceConfig"],hle(i,n)),e}function mle(i,t){const e={},n=b(t,["speaker"]);n!=null&&w(e,["speaker"],n);const s=b(t,["voiceConfig"]);return s!=null&&w(e,["voiceConfig"],_O(i,s)),e}function gle(i,t){const e={},n=b(t,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>mle(i,o))),w(e,["speakerVoiceConfigs"],s)}return e}function ple(i,t){const e={},n=b(t,["voiceConfig"]);n!=null&&w(e,["voiceConfig"],_O(i,n));const s=b(t,["multiSpeakerVoiceConfig"]);s!=null&&w(e,["multiSpeakerVoiceConfig"],gle(i,s));const o=b(t,["languageCode"]);return o!=null&&w(e,["languageCode"],o),e}function ble(i,t){const e={},n=b(t,["voiceConfig"]);if(n!=null&&w(e,["voiceConfig"],fle(i,n)),b(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=b(t,["languageCode"]);return s!=null&&w(e,["languageCode"],s),e}function _le(i,t){const e={},n=b(t,["fps"]);n!=null&&w(e,["fps"],n);const s=b(t,["endOffset"]);s!=null&&w(e,["endOffset"],s);const o=b(t,["startOffset"]);return o!=null&&w(e,["startOffset"],o),e}function wle(i,t){const e={},n=b(t,["fps"]);n!=null&&w(e,["fps"],n);const s=b(t,["endOffset"]);s!=null&&w(e,["endOffset"],s);const o=b(t,["startOffset"]);return o!=null&&w(e,["startOffset"],o),e}function yle(i,t){const e={};if(b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(t,["data"]);n!=null&&w(e,["data"],n);const s=b(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function vle(i,t){const e={},n=b(t,["displayName"]);n!=null&&w(e,["displayName"],n);const s=b(t,["data"]);s!=null&&w(e,["data"],s);const o=b(t,["mimeType"]);return o!=null&&w(e,["mimeType"],o),e}function Cle(i,t){const e={},n=b(t,["videoMetadata"]);n!=null&&w(e,["videoMetadata"],_le(i,n));const s=b(t,["thought"]);s!=null&&w(e,["thought"],s);const o=b(t,["inlineData"]);o!=null&&w(e,["inlineData"],yle(i,o));const r=b(t,["codeExecutionResult"]);r!=null&&w(e,["codeExecutionResult"],r);const a=b(t,["executableCode"]);a!=null&&w(e,["executableCode"],a);const l=b(t,["fileData"]);l!=null&&w(e,["fileData"],l);const u=b(t,["functionCall"]);u!=null&&w(e,["functionCall"],u);const h=b(t,["functionResponse"]);h!=null&&w(e,["functionResponse"],h);const m=b(t,["text"]);return m!=null&&w(e,["text"],m),e}function Tle(i,t){const e={},n=b(t,["videoMetadata"]);n!=null&&w(e,["videoMetadata"],wle(i,n));const s=b(t,["thought"]);s!=null&&w(e,["thought"],s);const o=b(t,["inlineData"]);o!=null&&w(e,["inlineData"],vle(i,o));const r=b(t,["codeExecutionResult"]);r!=null&&w(e,["codeExecutionResult"],r);const a=b(t,["executableCode"]);a!=null&&w(e,["executableCode"],a);const l=b(t,["fileData"]);l!=null&&w(e,["fileData"],l);const u=b(t,["functionCall"]);u!=null&&w(e,["functionCall"],u);const h=b(t,["functionResponse"]);h!=null&&w(e,["functionResponse"],h);const m=b(t,["text"]);return m!=null&&w(e,["text"],m),e}function xle(i,t){const e={},n=b(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Cle(i,r))),w(e,["parts"],o)}const s=b(t,["role"]);return s!=null&&w(e,["role"],s),e}function kle(i,t){const e={},n=b(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Tle(i,r))),w(e,["parts"],o)}const s=b(t,["role"]);return s!=null&&w(e,["role"],s),e}function Ele(i,t){const e={},n=b(t,["behavior"]);n!=null&&w(e,["behavior"],n);const s=b(t,["description"]);s!=null&&w(e,["description"],s);const o=b(t,["name"]);o!=null&&w(e,["name"],o);const r=b(t,["parameters"]);r!=null&&w(e,["parameters"],r);const a=b(t,["response"]);return a!=null&&w(e,["response"],a),e}function Sle(i,t){const e={};if(b(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=b(t,["description"]);n!=null&&w(e,["description"],n);const s=b(t,["name"]);s!=null&&w(e,["name"],s);const o=b(t,["parameters"]);o!=null&&w(e,["parameters"],o);const r=b(t,["response"]);return r!=null&&w(e,["response"],r),e}function Ale(i,t){const e={},n=b(t,["startTime"]);n!=null&&w(e,["startTime"],n);const s=b(t,["endTime"]);return s!=null&&w(e,["endTime"],s),e}function Rle(i,t){const e={},n=b(t,["startTime"]);n!=null&&w(e,["startTime"],n);const s=b(t,["endTime"]);return s!=null&&w(e,["endTime"],s),e}function Ile(i,t){const e={},n=b(t,["timeRangeFilter"]);return n!=null&&w(e,["timeRangeFilter"],Ale(i,n)),e}function Ple(i,t){const e={},n=b(t,["timeRangeFilter"]);return n!=null&&w(e,["timeRangeFilter"],Rle(i,n)),e}function Mle(i,t){const e={},n=b(t,["mode"]);n!=null&&w(e,["mode"],n);const s=b(t,["dynamicThreshold"]);return s!=null&&w(e,["dynamicThreshold"],s),e}function Vle(i,t){const e={},n=b(t,["mode"]);n!=null&&w(e,["mode"],n);const s=b(t,["dynamicThreshold"]);return s!=null&&w(e,["dynamicThreshold"],s),e}function Nle(i,t){const e={},n=b(t,["dynamicRetrievalConfig"]);return n!=null&&w(e,["dynamicRetrievalConfig"],Mle(i,n)),e}function Dle(i,t){const e={},n=b(t,["dynamicRetrievalConfig"]);return n!=null&&w(e,["dynamicRetrievalConfig"],Vle(i,n)),e}function Ole(){return{}}function Lle(i,t){const e={},n=b(t,["apiKeyString"]);return n!=null&&w(e,["apiKeyString"],n),e}function Ble(i,t){const e={},n=b(t,["apiKeyConfig"]);n!=null&&w(e,["apiKeyConfig"],Lle(i,n));const s=b(t,["authType"]);s!=null&&w(e,["authType"],s);const o=b(t,["googleServiceAccountConfig"]);o!=null&&w(e,["googleServiceAccountConfig"],o);const r=b(t,["httpBasicAuthConfig"]);r!=null&&w(e,["httpBasicAuthConfig"],r);const a=b(t,["oauthConfig"]);a!=null&&w(e,["oauthConfig"],a);const l=b(t,["oidcConfig"]);return l!=null&&w(e,["oidcConfig"],l),e}function Fle(i,t){const e={},n=b(t,["authConfig"]);return n!=null&&w(e,["authConfig"],Ble(i,n)),e}function Ule(){return{}}function zle(i,t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Ele(i,u))),w(e,["functionDeclarations"],l)}if(b(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=b(t,["googleSearch"]);s!=null&&w(e,["googleSearch"],Ile(i,s));const o=b(t,["googleSearchRetrieval"]);if(o!=null&&w(e,["googleSearchRetrieval"],Nle(i,o)),b(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(b(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");b(t,["urlContext"])!=null&&w(e,["urlContext"],Ule());const a=b(t,["codeExecution"]);return a!=null&&w(e,["codeExecution"],a),e}function Hle(i,t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>Sle(i,m))),w(e,["functionDeclarations"],h)}const s=b(t,["retrieval"]);s!=null&&w(e,["retrieval"],s);const o=b(t,["googleSearch"]);o!=null&&w(e,["googleSearch"],Ple(i,o));const r=b(t,["googleSearchRetrieval"]);r!=null&&w(e,["googleSearchRetrieval"],Dle(i,r)),b(t,["enterpriseWebSearch"])!=null&&w(e,["enterpriseWebSearch"],Ole());const l=b(t,["googleMaps"]);if(l!=null&&w(e,["googleMaps"],Fle(i,l)),b(t,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const u=b(t,["codeExecution"]);return u!=null&&w(e,["codeExecution"],u),e}function Wle(i,t){const e={},n=b(t,["handle"]);if(n!=null&&w(e,["handle"],n),b(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function qle(i,t){const e={},n=b(t,["handle"]);n!=null&&w(e,["handle"],n);const s=b(t,["transparent"]);return s!=null&&w(e,["transparent"],s),e}function NI(){return{}}function DI(){return{}}function $le(i,t){const e={},n=b(t,["disabled"]);n!=null&&w(e,["disabled"],n);const s=b(t,["startOfSpeechSensitivity"]);s!=null&&w(e,["startOfSpeechSensitivity"],s);const o=b(t,["endOfSpeechSensitivity"]);o!=null&&w(e,["endOfSpeechSensitivity"],o);const r=b(t,["prefixPaddingMs"]);r!=null&&w(e,["prefixPaddingMs"],r);const a=b(t,["silenceDurationMs"]);return a!=null&&w(e,["silenceDurationMs"],a),e}function Gle(i,t){const e={},n=b(t,["disabled"]);n!=null&&w(e,["disabled"],n);const s=b(t,["startOfSpeechSensitivity"]);s!=null&&w(e,["startOfSpeechSensitivity"],s);const o=b(t,["endOfSpeechSensitivity"]);o!=null&&w(e,["endOfSpeechSensitivity"],o);const r=b(t,["prefixPaddingMs"]);r!=null&&w(e,["prefixPaddingMs"],r);const a=b(t,["silenceDurationMs"]);return a!=null&&w(e,["silenceDurationMs"],a),e}function jle(i,t){const e={},n=b(t,["automaticActivityDetection"]);n!=null&&w(e,["automaticActivityDetection"],$le(i,n));const s=b(t,["activityHandling"]);s!=null&&w(e,["activityHandling"],s);const o=b(t,["turnCoverage"]);return o!=null&&w(e,["turnCoverage"],o),e}function Kle(i,t){const e={},n=b(t,["automaticActivityDetection"]);n!=null&&w(e,["automaticActivityDetection"],Gle(i,n));const s=b(t,["activityHandling"]);s!=null&&w(e,["activityHandling"],s);const o=b(t,["turnCoverage"]);return o!=null&&w(e,["turnCoverage"],o),e}function Zle(i,t){const e={},n=b(t,["targetTokens"]);return n!=null&&w(e,["targetTokens"],n),e}function Yle(i,t){const e={},n=b(t,["targetTokens"]);return n!=null&&w(e,["targetTokens"],n),e}function Jle(i,t){const e={},n=b(t,["triggerTokens"]);n!=null&&w(e,["triggerTokens"],n);const s=b(t,["slidingWindow"]);return s!=null&&w(e,["slidingWindow"],Zle(i,s)),e}function Xle(i,t){const e={},n=b(t,["triggerTokens"]);n!=null&&w(e,["triggerTokens"],n);const s=b(t,["slidingWindow"]);return s!=null&&w(e,["slidingWindow"],Yle(i,s)),e}function Qle(i,t){const e={},n=b(t,["proactiveAudio"]);return n!=null&&w(e,["proactiveAudio"],n),e}function ece(i,t){const e={},n=b(t,["proactiveAudio"]);return n!=null&&w(e,["proactiveAudio"],n),e}function tce(i,t,e){const n={},s=b(t,["generationConfig"]);e!==void 0&&s!=null&&w(e,["setup","generationConfig"],s);const o=b(t,["responseModalities"]);e!==void 0&&o!=null&&w(e,["setup","generationConfig","responseModalities"],o);const r=b(t,["temperature"]);e!==void 0&&r!=null&&w(e,["setup","generationConfig","temperature"],r);const a=b(t,["topP"]);e!==void 0&&a!=null&&w(e,["setup","generationConfig","topP"],a);const l=b(t,["topK"]);e!==void 0&&l!=null&&w(e,["setup","generationConfig","topK"],l);const u=b(t,["maxOutputTokens"]);e!==void 0&&u!=null&&w(e,["setup","generationConfig","maxOutputTokens"],u);const h=b(t,["mediaResolution"]);e!==void 0&&h!=null&&w(e,["setup","generationConfig","mediaResolution"],h);const m=b(t,["seed"]);e!==void 0&&m!=null&&w(e,["setup","generationConfig","seed"],m);const p=b(t,["speechConfig"]);e!==void 0&&p!=null&&w(e,["setup","generationConfig","speechConfig"],ple(i,hO(i,p)));const v=b(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&w(e,["setup","generationConfig","enableAffectiveDialog"],v);const C=b(t,["systemInstruction"]);e!==void 0&&C!=null&&w(e,["setup","systemInstruction"],xle(i,wi(i,C)));const x=b(t,["tools"]);if(e!==void 0&&x!=null){let Y=Hp(i,x);Array.isArray(Y)&&(Y=Y.map(F=>zle(i,zp(i,F)))),w(e,["setup","tools"],Y)}const k=b(t,["sessionResumption"]);e!==void 0&&k!=null&&w(e,["setup","sessionResumption"],Wle(i,k));const S=b(t,["inputAudioTranscription"]);e!==void 0&&S!=null&&w(e,["setup","inputAudioTranscription"],NI());const I=b(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&w(e,["setup","outputAudioTranscription"],NI());const P=b(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&w(e,["setup","realtimeInputConfig"],jle(i,P));const O=b(t,["contextWindowCompression"]);e!==void 0&&O!=null&&w(e,["setup","contextWindowCompression"],Jle(i,O));const D=b(t,["proactivity"]);return e!==void 0&&D!=null&&w(e,["setup","proactivity"],Qle(i,D)),n}function nce(i,t,e){const n={},s=b(t,["generationConfig"]);e!==void 0&&s!=null&&w(e,["setup","generationConfig"],s);const o=b(t,["responseModalities"]);e!==void 0&&o!=null&&w(e,["setup","generationConfig","responseModalities"],o);const r=b(t,["temperature"]);e!==void 0&&r!=null&&w(e,["setup","generationConfig","temperature"],r);const a=b(t,["topP"]);e!==void 0&&a!=null&&w(e,["setup","generationConfig","topP"],a);const l=b(t,["topK"]);e!==void 0&&l!=null&&w(e,["setup","generationConfig","topK"],l);const u=b(t,["maxOutputTokens"]);e!==void 0&&u!=null&&w(e,["setup","generationConfig","maxOutputTokens"],u);const h=b(t,["mediaResolution"]);e!==void 0&&h!=null&&w(e,["setup","generationConfig","mediaResolution"],h);const m=b(t,["seed"]);e!==void 0&&m!=null&&w(e,["setup","generationConfig","seed"],m);const p=b(t,["speechConfig"]);e!==void 0&&p!=null&&w(e,["setup","generationConfig","speechConfig"],ble(i,hO(i,p)));const v=b(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&w(e,["setup","generationConfig","enableAffectiveDialog"],v);const C=b(t,["systemInstruction"]);e!==void 0&&C!=null&&w(e,["setup","systemInstruction"],kle(i,wi(i,C)));const x=b(t,["tools"]);if(e!==void 0&&x!=null){let Y=Hp(i,x);Array.isArray(Y)&&(Y=Y.map(F=>Hle(i,zp(i,F)))),w(e,["setup","tools"],Y)}const k=b(t,["sessionResumption"]);e!==void 0&&k!=null&&w(e,["setup","sessionResumption"],qle(i,k));const S=b(t,["inputAudioTranscription"]);e!==void 0&&S!=null&&w(e,["setup","inputAudioTranscription"],DI());const I=b(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&w(e,["setup","outputAudioTranscription"],DI());const P=b(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&w(e,["setup","realtimeInputConfig"],Kle(i,P));const O=b(t,["contextWindowCompression"]);e!==void 0&&O!=null&&w(e,["setup","contextWindowCompression"],Xle(i,O));const D=b(t,["proactivity"]);return e!==void 0&&D!=null&&w(e,["setup","proactivity"],ece(i,D)),n}function ice(i,t){const e={},n=b(t,["model"]);n!=null&&w(e,["setup","model"],Ft(i,n));const s=b(t,["config"]);return s!=null&&w(e,["config"],tce(i,s,e)),e}function sce(i,t){const e={},n=b(t,["model"]);n!=null&&w(e,["setup","model"],Ft(i,n));const s=b(t,["config"]);return s!=null&&w(e,["config"],nce(i,s,e)),e}function oce(){return{}}function rce(){return{}}function ace(){return{}}function lce(){return{}}function cce(i,t){const e={},n=b(t,["media"]);n!=null&&w(e,["mediaChunks"],lO(i,n));const s=b(t,["audio"]);s!=null&&w(e,["audio"],Hre(i,s));const o=b(t,["audioStreamEnd"]);o!=null&&w(e,["audioStreamEnd"],o);const r=b(t,["video"]);r!=null&&w(e,["video"],zre(i,r));const a=b(t,["text"]);return a!=null&&w(e,["text"],a),b(t,["activityStart"])!=null&&w(e,["activityStart"],oce()),b(t,["activityEnd"])!=null&&w(e,["activityEnd"],ace()),e}function uce(i,t){const e={},n=b(t,["media"]);if(n!=null&&w(e,["mediaChunks"],lO(i,n)),b(t,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const s=b(t,["audioStreamEnd"]);if(s!=null&&w(e,["audioStreamEnd"],s),b(t,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(b(t,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return b(t,["activityStart"])!=null&&w(e,["activityStart"],rce()),b(t,["activityEnd"])!=null&&w(e,["activityEnd"],lce()),e}function wO(i,t){const e={},n=b(t,["text"]);n!=null&&w(e,["text"],n);const s=b(t,["weight"]);return s!=null&&w(e,["weight"],s),e}function dce(i,t){const e={},n=b(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>wO(i,o))),w(e,["weightedPrompts"],s)}return e}function yO(i,t){const e={},n=b(t,["temperature"]);n!=null&&w(e,["temperature"],n);const s=b(t,["topK"]);s!=null&&w(e,["topK"],s);const o=b(t,["seed"]);o!=null&&w(e,["seed"],o);const r=b(t,["guidance"]);r!=null&&w(e,["guidance"],r);const a=b(t,["bpm"]);a!=null&&w(e,["bpm"],a);const l=b(t,["density"]);l!=null&&w(e,["density"],l);const u=b(t,["brightness"]);u!=null&&w(e,["brightness"],u);const h=b(t,["scale"]);h!=null&&w(e,["scale"],h);const m=b(t,["muteBass"]);m!=null&&w(e,["muteBass"],m);const p=b(t,["muteDrums"]);p!=null&&w(e,["muteDrums"],p);const v=b(t,["onlyBassAndDrums"]);v!=null&&w(e,["onlyBassAndDrums"],v);const C=b(t,["musicGenerationMode"]);return C!=null&&w(e,["musicGenerationMode"],C),e}function hce(i,t){const e={},n=b(t,["musicGenerationConfig"]);return n!=null&&w(e,["musicGenerationConfig"],yO(i,n)),e}function vO(i,t){const e={},n=b(t,["model"]);return n!=null&&w(e,["model"],n),e}function CO(i,t){const e={},n=b(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>wO(i,o))),w(e,["weightedPrompts"],s)}return e}function Dv(i,t){const e={},n=b(t,["setup"]);n!=null&&w(e,["setup"],vO(i,n));const s=b(t,["clientContent"]);s!=null&&w(e,["clientContent"],CO(i,s));const o=b(t,["musicGenerationConfig"]);o!=null&&w(e,["musicGenerationConfig"],yO(i,o));const r=b(t,["playbackControl"]);return r!=null&&w(e,["playbackControl"],r),e}function fce(){return{}}function mce(){return{}}function gce(i,t){const e={},n=b(t,["fps"]);n!=null&&w(e,["fps"],n);const s=b(t,["endOffset"]);s!=null&&w(e,["endOffset"],s);const o=b(t,["startOffset"]);return o!=null&&w(e,["startOffset"],o),e}function pce(i,t){const e={},n=b(t,["fps"]);n!=null&&w(e,["fps"],n);const s=b(t,["endOffset"]);s!=null&&w(e,["endOffset"],s);const o=b(t,["startOffset"]);return o!=null&&w(e,["startOffset"],o),e}function bce(i,t){const e={},n=b(t,["data"]);n!=null&&w(e,["data"],n);const s=b(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function _ce(i,t){const e={},n=b(t,["displayName"]);n!=null&&w(e,["displayName"],n);const s=b(t,["data"]);s!=null&&w(e,["data"],s);const o=b(t,["mimeType"]);return o!=null&&w(e,["mimeType"],o),e}function wce(i,t){const e={},n=b(t,["videoMetadata"]);n!=null&&w(e,["videoMetadata"],gce(i,n));const s=b(t,["thought"]);s!=null&&w(e,["thought"],s);const o=b(t,["inlineData"]);o!=null&&w(e,["inlineData"],bce(i,o));const r=b(t,["codeExecutionResult"]);r!=null&&w(e,["codeExecutionResult"],r);const a=b(t,["executableCode"]);a!=null&&w(e,["executableCode"],a);const l=b(t,["fileData"]);l!=null&&w(e,["fileData"],l);const u=b(t,["functionCall"]);u!=null&&w(e,["functionCall"],u);const h=b(t,["functionResponse"]);h!=null&&w(e,["functionResponse"],h);const m=b(t,["text"]);return m!=null&&w(e,["text"],m),e}function yce(i,t){const e={},n=b(t,["videoMetadata"]);n!=null&&w(e,["videoMetadata"],pce(i,n));const s=b(t,["thought"]);s!=null&&w(e,["thought"],s);const o=b(t,["inlineData"]);o!=null&&w(e,["inlineData"],_ce(i,o));const r=b(t,["codeExecutionResult"]);r!=null&&w(e,["codeExecutionResult"],r);const a=b(t,["executableCode"]);a!=null&&w(e,["executableCode"],a);const l=b(t,["fileData"]);l!=null&&w(e,["fileData"],l);const u=b(t,["functionCall"]);u!=null&&w(e,["functionCall"],u);const h=b(t,["functionResponse"]);h!=null&&w(e,["functionResponse"],h);const m=b(t,["text"]);return m!=null&&w(e,["text"],m),e}function vce(i,t){const e={},n=b(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>wce(i,r))),w(e,["parts"],o)}const s=b(t,["role"]);return s!=null&&w(e,["role"],s),e}function Cce(i,t){const e={},n=b(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>yce(i,r))),w(e,["parts"],o)}const s=b(t,["role"]);return s!=null&&w(e,["role"],s),e}function OI(i,t){const e={},n=b(t,["text"]);n!=null&&w(e,["text"],n);const s=b(t,["finished"]);return s!=null&&w(e,["finished"],s),e}function LI(i,t){const e={},n=b(t,["text"]);n!=null&&w(e,["text"],n);const s=b(t,["finished"]);return s!=null&&w(e,["finished"],s),e}function Tce(i,t){const e={},n=b(t,["retrievedUrl"]);n!=null&&w(e,["retrievedUrl"],n);const s=b(t,["urlRetrievalStatus"]);return s!=null&&w(e,["urlRetrievalStatus"],s),e}function xce(i,t){const e={},n=b(t,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Tce(i,o))),w(e,["urlMetadata"],s)}return e}function kce(i,t){const e={},n=b(t,["modelTurn"]);n!=null&&w(e,["modelTurn"],vce(i,n));const s=b(t,["turnComplete"]);s!=null&&w(e,["turnComplete"],s);const o=b(t,["interrupted"]);o!=null&&w(e,["interrupted"],o);const r=b(t,["groundingMetadata"]);r!=null&&w(e,["groundingMetadata"],r);const a=b(t,["generationComplete"]);a!=null&&w(e,["generationComplete"],a);const l=b(t,["inputTranscription"]);l!=null&&w(e,["inputTranscription"],OI(i,l));const u=b(t,["outputTranscription"]);u!=null&&w(e,["outputTranscription"],OI(i,u));const h=b(t,["urlContextMetadata"]);return h!=null&&w(e,["urlContextMetadata"],xce(i,h)),e}function Ece(i,t){const e={},n=b(t,["modelTurn"]);n!=null&&w(e,["modelTurn"],Cce(i,n));const s=b(t,["turnComplete"]);s!=null&&w(e,["turnComplete"],s);const o=b(t,["interrupted"]);o!=null&&w(e,["interrupted"],o);const r=b(t,["groundingMetadata"]);r!=null&&w(e,["groundingMetadata"],r);const a=b(t,["generationComplete"]);a!=null&&w(e,["generationComplete"],a);const l=b(t,["inputTranscription"]);l!=null&&w(e,["inputTranscription"],LI(i,l));const u=b(t,["outputTranscription"]);return u!=null&&w(e,["outputTranscription"],LI(i,u)),e}function Sce(i,t){const e={},n=b(t,["id"]);n!=null&&w(e,["id"],n);const s=b(t,["args"]);s!=null&&w(e,["args"],s);const o=b(t,["name"]);return o!=null&&w(e,["name"],o),e}function Ace(i,t){const e={},n=b(t,["args"]);n!=null&&w(e,["args"],n);const s=b(t,["name"]);return s!=null&&w(e,["name"],s),e}function Rce(i,t){const e={},n=b(t,["functionCalls"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Sce(i,o))),w(e,["functionCalls"],s)}return e}function Ice(i,t){const e={},n=b(t,["functionCalls"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Ace(i,o))),w(e,["functionCalls"],s)}return e}function Pce(i,t){const e={},n=b(t,["ids"]);return n!=null&&w(e,["ids"],n),e}function Mce(i,t){const e={},n=b(t,["ids"]);return n!=null&&w(e,["ids"],n),e}function Am(i,t){const e={},n=b(t,["modality"]);n!=null&&w(e,["modality"],n);const s=b(t,["tokenCount"]);return s!=null&&w(e,["tokenCount"],s),e}function Rm(i,t){const e={},n=b(t,["modality"]);n!=null&&w(e,["modality"],n);const s=b(t,["tokenCount"]);return s!=null&&w(e,["tokenCount"],s),e}function Vce(i,t){const e={},n=b(t,["promptTokenCount"]);n!=null&&w(e,["promptTokenCount"],n);const s=b(t,["cachedContentTokenCount"]);s!=null&&w(e,["cachedContentTokenCount"],s);const o=b(t,["responseTokenCount"]);o!=null&&w(e,["responseTokenCount"],o);const r=b(t,["toolUsePromptTokenCount"]);r!=null&&w(e,["toolUsePromptTokenCount"],r);const a=b(t,["thoughtsTokenCount"]);a!=null&&w(e,["thoughtsTokenCount"],a);const l=b(t,["totalTokenCount"]);l!=null&&w(e,["totalTokenCount"],l);const u=b(t,["promptTokensDetails"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(C=>Am(i,C))),w(e,["promptTokensDetails"],v)}const h=b(t,["cacheTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(C=>Am(i,C))),w(e,["cacheTokensDetails"],v)}const m=b(t,["responseTokensDetails"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(C=>Am(i,C))),w(e,["responseTokensDetails"],v)}const p=b(t,["toolUsePromptTokensDetails"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(C=>Am(i,C))),w(e,["toolUsePromptTokensDetails"],v)}return e}function Nce(i,t){const e={},n=b(t,["promptTokenCount"]);n!=null&&w(e,["promptTokenCount"],n);const s=b(t,["cachedContentTokenCount"]);s!=null&&w(e,["cachedContentTokenCount"],s);const o=b(t,["candidatesTokenCount"]);o!=null&&w(e,["responseTokenCount"],o);const r=b(t,["toolUsePromptTokenCount"]);r!=null&&w(e,["toolUsePromptTokenCount"],r);const a=b(t,["thoughtsTokenCount"]);a!=null&&w(e,["thoughtsTokenCount"],a);const l=b(t,["totalTokenCount"]);l!=null&&w(e,["totalTokenCount"],l);const u=b(t,["promptTokensDetails"]);if(u!=null){let C=u;Array.isArray(C)&&(C=C.map(x=>Rm(i,x))),w(e,["promptTokensDetails"],C)}const h=b(t,["cacheTokensDetails"]);if(h!=null){let C=h;Array.isArray(C)&&(C=C.map(x=>Rm(i,x))),w(e,["cacheTokensDetails"],C)}const m=b(t,["candidatesTokensDetails"]);if(m!=null){let C=m;Array.isArray(C)&&(C=C.map(x=>Rm(i,x))),w(e,["responseTokensDetails"],C)}const p=b(t,["toolUsePromptTokensDetails"]);if(p!=null){let C=p;Array.isArray(C)&&(C=C.map(x=>Rm(i,x))),w(e,["toolUsePromptTokensDetails"],C)}const v=b(t,["trafficType"]);return v!=null&&w(e,["trafficType"],v),e}function Dce(i,t){const e={},n=b(t,["timeLeft"]);return n!=null&&w(e,["timeLeft"],n),e}function Oce(i,t){const e={},n=b(t,["timeLeft"]);return n!=null&&w(e,["timeLeft"],n),e}function Lce(i,t){const e={},n=b(t,["newHandle"]);n!=null&&w(e,["newHandle"],n);const s=b(t,["resumable"]);s!=null&&w(e,["resumable"],s);const o=b(t,["lastConsumedClientMessageIndex"]);return o!=null&&w(e,["lastConsumedClientMessageIndex"],o),e}function Bce(i,t){const e={},n=b(t,["newHandle"]);n!=null&&w(e,["newHandle"],n);const s=b(t,["resumable"]);s!=null&&w(e,["resumable"],s);const o=b(t,["lastConsumedClientMessageIndex"]);return o!=null&&w(e,["lastConsumedClientMessageIndex"],o),e}function Fce(i,t){const e={};b(t,["setupComplete"])!=null&&w(e,["setupComplete"],fce());const s=b(t,["serverContent"]);s!=null&&w(e,["serverContent"],kce(i,s));const o=b(t,["toolCall"]);o!=null&&w(e,["toolCall"],Rce(i,o));const r=b(t,["toolCallCancellation"]);r!=null&&w(e,["toolCallCancellation"],Pce(i,r));const a=b(t,["usageMetadata"]);a!=null&&w(e,["usageMetadata"],Vce(i,a));const l=b(t,["goAway"]);l!=null&&w(e,["goAway"],Dce(i,l));const u=b(t,["sessionResumptionUpdate"]);return u!=null&&w(e,["sessionResumptionUpdate"],Lce(i,u)),e}function Uce(i,t){const e={};b(t,["setupComplete"])!=null&&w(e,["setupComplete"],mce());const s=b(t,["serverContent"]);s!=null&&w(e,["serverContent"],Ece(i,s));const o=b(t,["toolCall"]);o!=null&&w(e,["toolCall"],Ice(i,o));const r=b(t,["toolCallCancellation"]);r!=null&&w(e,["toolCallCancellation"],Mce(i,r));const a=b(t,["usageMetadata"]);a!=null&&w(e,["usageMetadata"],Nce(i,a));const l=b(t,["goAway"]);l!=null&&w(e,["goAway"],Oce(i,l));const u=b(t,["sessionResumptionUpdate"]);return u!=null&&w(e,["sessionResumptionUpdate"],Bce(i,u)),e}function zce(){return{}}function Hce(i,t){const e={},n=b(t,["text"]);n!=null&&w(e,["text"],n);const s=b(t,["weight"]);return s!=null&&w(e,["weight"],s),e}function Wce(i,t){const e={},n=b(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Hce(i,o))),w(e,["weightedPrompts"],s)}return e}function qce(i,t){const e={},n=b(t,["temperature"]);n!=null&&w(e,["temperature"],n);const s=b(t,["topK"]);s!=null&&w(e,["topK"],s);const o=b(t,["seed"]);o!=null&&w(e,["seed"],o);const r=b(t,["guidance"]);r!=null&&w(e,["guidance"],r);const a=b(t,["bpm"]);a!=null&&w(e,["bpm"],a);const l=b(t,["density"]);l!=null&&w(e,["density"],l);const u=b(t,["brightness"]);u!=null&&w(e,["brightness"],u);const h=b(t,["scale"]);h!=null&&w(e,["scale"],h);const m=b(t,["muteBass"]);m!=null&&w(e,["muteBass"],m);const p=b(t,["muteDrums"]);p!=null&&w(e,["muteDrums"],p);const v=b(t,["onlyBassAndDrums"]);v!=null&&w(e,["onlyBassAndDrums"],v);const C=b(t,["musicGenerationMode"]);return C!=null&&w(e,["musicGenerationMode"],C),e}function $ce(i,t){const e={},n=b(t,["clientContent"]);n!=null&&w(e,["clientContent"],Wce(i,n));const s=b(t,["musicGenerationConfig"]);return s!=null&&w(e,["musicGenerationConfig"],qce(i,s)),e}function Gce(i,t){const e={},n=b(t,["data"]);n!=null&&w(e,["data"],n);const s=b(t,["mimeType"]);s!=null&&w(e,["mimeType"],s);const o=b(t,["sourceMetadata"]);return o!=null&&w(e,["sourceMetadata"],$ce(i,o)),e}function jce(i,t){const e={},n=b(t,["audioChunks"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Gce(i,o))),w(e,["audioChunks"],s)}return e}function Kce(i,t){const e={},n=b(t,["text"]);n!=null&&w(e,["text"],n);const s=b(t,["filteredReason"]);return s!=null&&w(e,["filteredReason"],s),e}function Zce(i,t){const e={};b(t,["setupComplete"])!=null&&w(e,["setupComplete"],zce());const s=b(t,["serverContent"]);s!=null&&w(e,["serverContent"],jce(i,s));const o=b(t,["filteredPrompt"]);return o!=null&&w(e,["filteredPrompt"],Kce(i,o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yce(i,t){const e={},n=b(t,["fps"]);n!=null&&w(e,["fps"],n);const s=b(t,["endOffset"]);s!=null&&w(e,["endOffset"],s);const o=b(t,["startOffset"]);return o!=null&&w(e,["startOffset"],o),e}function Jce(i,t){const e={};if(b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(t,["data"]);n!=null&&w(e,["data"],n);const s=b(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function Xce(i,t){const e={},n=b(t,["videoMetadata"]);n!=null&&w(e,["videoMetadata"],Yce(i,n));const s=b(t,["thought"]);s!=null&&w(e,["thought"],s);const o=b(t,["inlineData"]);o!=null&&w(e,["inlineData"],Jce(i,o));const r=b(t,["codeExecutionResult"]);r!=null&&w(e,["codeExecutionResult"],r);const a=b(t,["executableCode"]);a!=null&&w(e,["executableCode"],a);const l=b(t,["fileData"]);l!=null&&w(e,["fileData"],l);const u=b(t,["functionCall"]);u!=null&&w(e,["functionCall"],u);const h=b(t,["functionResponse"]);h!=null&&w(e,["functionResponse"],h);const m=b(t,["text"]);return m!=null&&w(e,["text"],m),e}function qp(i,t){const e={},n=b(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Xce(i,r))),w(e,["parts"],o)}const s=b(t,["role"]);return s!=null&&w(e,["role"],s),e}function Qce(i,t){const e={};if(b(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=b(t,["category"]);n!=null&&w(e,["category"],n);const s=b(t,["threshold"]);return s!=null&&w(e,["threshold"],s),e}function eue(i,t){const e={},n=b(t,["behavior"]);n!=null&&w(e,["behavior"],n);const s=b(t,["description"]);s!=null&&w(e,["description"],s);const o=b(t,["name"]);o!=null&&w(e,["name"],o);const r=b(t,["parameters"]);r!=null&&w(e,["parameters"],r);const a=b(t,["response"]);return a!=null&&w(e,["response"],a),e}function tue(i,t){const e={},n=b(t,["startTime"]);n!=null&&w(e,["startTime"],n);const s=b(t,["endTime"]);return s!=null&&w(e,["endTime"],s),e}function nue(i,t){const e={},n=b(t,["timeRangeFilter"]);return n!=null&&w(e,["timeRangeFilter"],tue(i,n)),e}function iue(i,t){const e={},n=b(t,["mode"]);n!=null&&w(e,["mode"],n);const s=b(t,["dynamicThreshold"]);return s!=null&&w(e,["dynamicThreshold"],s),e}function sue(i,t){const e={},n=b(t,["dynamicRetrievalConfig"]);return n!=null&&w(e,["dynamicRetrievalConfig"],iue(i,n)),e}function oue(){return{}}function rue(i,t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>eue(i,u))),w(e,["functionDeclarations"],l)}if(b(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=b(t,["googleSearch"]);s!=null&&w(e,["googleSearch"],nue(i,s));const o=b(t,["googleSearchRetrieval"]);if(o!=null&&w(e,["googleSearchRetrieval"],sue(i,o)),b(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(b(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");b(t,["urlContext"])!=null&&w(e,["urlContext"],oue());const a=b(t,["codeExecution"]);return a!=null&&w(e,["codeExecution"],a),e}function aue(i,t){const e={},n=b(t,["mode"]);n!=null&&w(e,["mode"],n);const s=b(t,["allowedFunctionNames"]);return s!=null&&w(e,["allowedFunctionNames"],s),e}function lue(i,t){const e={},n=b(t,["latitude"]);n!=null&&w(e,["latitude"],n);const s=b(t,["longitude"]);return s!=null&&w(e,["longitude"],s),e}function cue(i,t){const e={},n=b(t,["latLng"]);return n!=null&&w(e,["latLng"],lue(i,n)),e}function uue(i,t){const e={},n=b(t,["functionCallingConfig"]);n!=null&&w(e,["functionCallingConfig"],aue(i,n));const s=b(t,["retrievalConfig"]);return s!=null&&w(e,["retrievalConfig"],cue(i,s)),e}function due(i,t){const e={},n=b(t,["voiceName"]);return n!=null&&w(e,["voiceName"],n),e}function TO(i,t){const e={},n=b(t,["prebuiltVoiceConfig"]);return n!=null&&w(e,["prebuiltVoiceConfig"],due(i,n)),e}function hue(i,t){const e={},n=b(t,["speaker"]);n!=null&&w(e,["speaker"],n);const s=b(t,["voiceConfig"]);return s!=null&&w(e,["voiceConfig"],TO(i,s)),e}function fue(i,t){const e={},n=b(t,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>hue(i,o))),w(e,["speakerVoiceConfigs"],s)}return e}function mue(i,t){const e={},n=b(t,["voiceConfig"]);n!=null&&w(e,["voiceConfig"],TO(i,n));const s=b(t,["multiSpeakerVoiceConfig"]);s!=null&&w(e,["multiSpeakerVoiceConfig"],fue(i,s));const o=b(t,["languageCode"]);return o!=null&&w(e,["languageCode"],o),e}function gue(i,t){const e={},n=b(t,["includeThoughts"]);n!=null&&w(e,["includeThoughts"],n);const s=b(t,["thinkingBudget"]);return s!=null&&w(e,["thinkingBudget"],s),e}function pue(i,t,e){const n={},s=b(t,["systemInstruction"]);e!==void 0&&s!=null&&w(e,["systemInstruction"],qp(i,wi(i,s)));const o=b(t,["temperature"]);o!=null&&w(n,["temperature"],o);const r=b(t,["topP"]);r!=null&&w(n,["topP"],r);const a=b(t,["topK"]);a!=null&&w(n,["topK"],a);const l=b(t,["candidateCount"]);l!=null&&w(n,["candidateCount"],l);const u=b(t,["maxOutputTokens"]);u!=null&&w(n,["maxOutputTokens"],u);const h=b(t,["stopSequences"]);h!=null&&w(n,["stopSequences"],h);const m=b(t,["responseLogprobs"]);m!=null&&w(n,["responseLogprobs"],m);const p=b(t,["logprobs"]);p!=null&&w(n,["logprobs"],p);const v=b(t,["presencePenalty"]);v!=null&&w(n,["presencePenalty"],v);const C=b(t,["frequencyPenalty"]);C!=null&&w(n,["frequencyPenalty"],C);const x=b(t,["seed"]);x!=null&&w(n,["seed"],x);const k=b(t,["responseMimeType"]);k!=null&&w(n,["responseMimeType"],k);const S=b(t,["responseSchema"]);if(S!=null&&w(n,["responseSchema"],Qg(i,S)),b(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(b(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=b(t,["safetySettings"]);if(e!==void 0&&I!=null){let X=I;Array.isArray(X)&&(X=X.map(ae=>Qce(i,ae))),w(e,["safetySettings"],X)}const P=b(t,["tools"]);if(e!==void 0&&P!=null){let X=Hp(i,P);Array.isArray(X)&&(X=X.map(ae=>rue(i,zp(i,ae)))),w(e,["tools"],X)}const O=b(t,["toolConfig"]);if(e!==void 0&&O!=null&&w(e,["toolConfig"],uue(i,O)),b(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=b(t,["cachedContent"]);e!==void 0&&D!=null&&w(e,["cachedContent"],Hr(i,D));const Y=b(t,["responseModalities"]);Y!=null&&w(n,["responseModalities"],Y);const F=b(t,["mediaResolution"]);F!=null&&w(n,["mediaResolution"],F);const j=b(t,["speechConfig"]);if(j!=null&&w(n,["speechConfig"],mue(i,dO(i,j))),b(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=b(t,["thinkingConfig"]);return U!=null&&w(n,["thinkingConfig"],gue(i,U)),n}function BI(i,t){const e={},n=b(t,["model"]);n!=null&&w(e,["_url","model"],Ft(i,n));const s=b(t,["contents"]);if(s!=null){let r=vs(i,s);Array.isArray(r)&&(r=r.map(a=>qp(i,a))),w(e,["contents"],r)}const o=b(t,["config"]);return o!=null&&w(e,["generationConfig"],pue(i,o,e)),e}function bue(i,t,e){const n={},s=b(t,["taskType"]);e!==void 0&&s!=null&&w(e,["requests[]","taskType"],s);const o=b(t,["title"]);e!==void 0&&o!=null&&w(e,["requests[]","title"],o);const r=b(t,["outputDimensionality"]);if(e!==void 0&&r!=null&&w(e,["requests[]","outputDimensionality"],r),b(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(b(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function _ue(i,t){const e={},n=b(t,["model"]);n!=null&&w(e,["_url","model"],Ft(i,n));const s=b(t,["contents"]);s!=null&&w(e,["requests[]","content"],uO(i,s));const o=b(t,["config"]);o!=null&&w(e,["config"],bue(i,o,e));const r=b(t,["model"]);return r!==void 0&&w(e,["requests[]","model"],Ft(i,r)),e}function wue(i,t,e){const n={};if(b(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(b(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=b(t,["numberOfImages"]);e!==void 0&&s!=null&&w(e,["parameters","sampleCount"],s);const o=b(t,["aspectRatio"]);e!==void 0&&o!=null&&w(e,["parameters","aspectRatio"],o);const r=b(t,["guidanceScale"]);if(e!==void 0&&r!=null&&w(e,["parameters","guidanceScale"],r),b(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=b(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&w(e,["parameters","safetySetting"],a);const l=b(t,["personGeneration"]);e!==void 0&&l!=null&&w(e,["parameters","personGeneration"],l);const u=b(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&w(e,["parameters","includeSafetyAttributes"],u);const h=b(t,["includeRaiReason"]);e!==void 0&&h!=null&&w(e,["parameters","includeRaiReason"],h);const m=b(t,["language"]);e!==void 0&&m!=null&&w(e,["parameters","language"],m);const p=b(t,["outputMimeType"]);e!==void 0&&p!=null&&w(e,["parameters","outputOptions","mimeType"],p);const v=b(t,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&w(e,["parameters","outputOptions","compressionQuality"],v),b(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(b(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function yue(i,t){const e={},n=b(t,["model"]);n!=null&&w(e,["_url","model"],Ft(i,n));const s=b(t,["prompt"]);s!=null&&w(e,["instances[0]","prompt"],s);const o=b(t,["config"]);return o!=null&&w(e,["config"],wue(i,o,e)),e}function vue(i,t){const e={},n=b(t,["model"]);n!=null&&w(e,["_url","name"],Ft(i,n));const s=b(t,["config"]);return s!=null&&w(e,["config"],s),e}function Cue(i,t,e){const n={},s=b(t,["pageSize"]);e!==void 0&&s!=null&&w(e,["_query","pageSize"],s);const o=b(t,["pageToken"]);e!==void 0&&o!=null&&w(e,["_query","pageToken"],o);const r=b(t,["filter"]);e!==void 0&&r!=null&&w(e,["_query","filter"],r);const a=b(t,["queryBase"]);return e!==void 0&&a!=null&&w(e,["_url","models_url"],gO(i,a)),n}function Tue(i,t){const e={},n=b(t,["config"]);return n!=null&&w(e,["config"],Cue(i,n,e)),e}function xue(i,t,e){const n={},s=b(t,["displayName"]);e!==void 0&&s!=null&&w(e,["displayName"],s);const o=b(t,["description"]);e!==void 0&&o!=null&&w(e,["description"],o);const r=b(t,["defaultCheckpointId"]);return e!==void 0&&r!=null&&w(e,["defaultCheckpointId"],r),n}function kue(i,t){const e={},n=b(t,["model"]);n!=null&&w(e,["_url","name"],Ft(i,n));const s=b(t,["config"]);return s!=null&&w(e,["config"],xue(i,s,e)),e}function Eue(i,t){const e={},n=b(t,["model"]);n!=null&&w(e,["_url","name"],Ft(i,n));const s=b(t,["config"]);return s!=null&&w(e,["config"],s),e}function Sue(i,t){const e={};if(b(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(b(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(b(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Aue(i,t){const e={},n=b(t,["model"]);n!=null&&w(e,["_url","model"],Ft(i,n));const s=b(t,["contents"]);if(s!=null){let r=vs(i,s);Array.isArray(r)&&(r=r.map(a=>qp(i,a))),w(e,["contents"],r)}const o=b(t,["config"]);return o!=null&&w(e,["config"],Sue(i,o)),e}function Rue(i,t){const e={};if(b(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=b(t,["imageBytes"]);n!=null&&w(e,["bytesBase64Encoded"],Wr(i,n));const s=b(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function Iue(i,t,e){const n={},s=b(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&w(e,["parameters","sampleCount"],s),b(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(b(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=b(t,["durationSeconds"]);if(e!==void 0&&o!=null&&w(e,["parameters","durationSeconds"],o),b(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=b(t,["aspectRatio"]);if(e!==void 0&&r!=null&&w(e,["parameters","aspectRatio"],r),b(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const a=b(t,["personGeneration"]);if(e!==void 0&&a!=null&&w(e,["parameters","personGeneration"],a),b(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=b(t,["negativePrompt"]);if(e!==void 0&&l!=null&&w(e,["parameters","negativePrompt"],l),b(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Pue(i,t){const e={},n=b(t,["model"]);n!=null&&w(e,["_url","model"],Ft(i,n));const s=b(t,["prompt"]);s!=null&&w(e,["instances[0]","prompt"],s);const o=b(t,["image"]);o!=null&&w(e,["instances[0]","image"],Rue(i,o));const r=b(t,["config"]);return r!=null&&w(e,["config"],Iue(i,r,e)),e}function Mue(i,t){const e={},n=b(t,["fps"]);n!=null&&w(e,["fps"],n);const s=b(t,["endOffset"]);s!=null&&w(e,["endOffset"],s);const o=b(t,["startOffset"]);return o!=null&&w(e,["startOffset"],o),e}function Vue(i,t){const e={},n=b(t,["displayName"]);n!=null&&w(e,["displayName"],n);const s=b(t,["data"]);s!=null&&w(e,["data"],s);const o=b(t,["mimeType"]);return o!=null&&w(e,["mimeType"],o),e}function Nue(i,t){const e={},n=b(t,["videoMetadata"]);n!=null&&w(e,["videoMetadata"],Mue(i,n));const s=b(t,["thought"]);s!=null&&w(e,["thought"],s);const o=b(t,["inlineData"]);o!=null&&w(e,["inlineData"],Vue(i,o));const r=b(t,["codeExecutionResult"]);r!=null&&w(e,["codeExecutionResult"],r);const a=b(t,["executableCode"]);a!=null&&w(e,["executableCode"],a);const l=b(t,["fileData"]);l!=null&&w(e,["fileData"],l);const u=b(t,["functionCall"]);u!=null&&w(e,["functionCall"],u);const h=b(t,["functionResponse"]);h!=null&&w(e,["functionResponse"],h);const m=b(t,["text"]);return m!=null&&w(e,["text"],m),e}function Fc(i,t){const e={},n=b(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Nue(i,r))),w(e,["parts"],o)}const s=b(t,["role"]);return s!=null&&w(e,["role"],s),e}function Due(i,t){const e={},n=b(t,["featureSelectionPreference"]);return n!=null&&w(e,["featureSelectionPreference"],n),e}function Oue(i,t){const e={},n=b(t,["method"]);n!=null&&w(e,["method"],n);const s=b(t,["category"]);s!=null&&w(e,["category"],s);const o=b(t,["threshold"]);return o!=null&&w(e,["threshold"],o),e}function Lue(i,t){const e={};if(b(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=b(t,["description"]);n!=null&&w(e,["description"],n);const s=b(t,["name"]);s!=null&&w(e,["name"],s);const o=b(t,["parameters"]);o!=null&&w(e,["parameters"],o);const r=b(t,["response"]);return r!=null&&w(e,["response"],r),e}function Bue(i,t){const e={},n=b(t,["startTime"]);n!=null&&w(e,["startTime"],n);const s=b(t,["endTime"]);return s!=null&&w(e,["endTime"],s),e}function Fue(i,t){const e={},n=b(t,["timeRangeFilter"]);return n!=null&&w(e,["timeRangeFilter"],Bue(i,n)),e}function Uue(i,t){const e={},n=b(t,["mode"]);n!=null&&w(e,["mode"],n);const s=b(t,["dynamicThreshold"]);return s!=null&&w(e,["dynamicThreshold"],s),e}function zue(i,t){const e={},n=b(t,["dynamicRetrievalConfig"]);return n!=null&&w(e,["dynamicRetrievalConfig"],Uue(i,n)),e}function Hue(){return{}}function Wue(i,t){const e={},n=b(t,["apiKeyString"]);return n!=null&&w(e,["apiKeyString"],n),e}function que(i,t){const e={},n=b(t,["apiKeyConfig"]);n!=null&&w(e,["apiKeyConfig"],Wue(i,n));const s=b(t,["authType"]);s!=null&&w(e,["authType"],s);const o=b(t,["googleServiceAccountConfig"]);o!=null&&w(e,["googleServiceAccountConfig"],o);const r=b(t,["httpBasicAuthConfig"]);r!=null&&w(e,["httpBasicAuthConfig"],r);const a=b(t,["oauthConfig"]);a!=null&&w(e,["oauthConfig"],a);const l=b(t,["oidcConfig"]);return l!=null&&w(e,["oidcConfig"],l),e}function $ue(i,t){const e={},n=b(t,["authConfig"]);return n!=null&&w(e,["authConfig"],que(i,n)),e}function xO(i,t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>Lue(i,m))),w(e,["functionDeclarations"],h)}const s=b(t,["retrieval"]);s!=null&&w(e,["retrieval"],s);const o=b(t,["googleSearch"]);o!=null&&w(e,["googleSearch"],Fue(i,o));const r=b(t,["googleSearchRetrieval"]);r!=null&&w(e,["googleSearchRetrieval"],zue(i,r)),b(t,["enterpriseWebSearch"])!=null&&w(e,["enterpriseWebSearch"],Hue());const l=b(t,["googleMaps"]);if(l!=null&&w(e,["googleMaps"],$ue(i,l)),b(t,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const u=b(t,["codeExecution"]);return u!=null&&w(e,["codeExecution"],u),e}function Gue(i,t){const e={},n=b(t,["mode"]);n!=null&&w(e,["mode"],n);const s=b(t,["allowedFunctionNames"]);return s!=null&&w(e,["allowedFunctionNames"],s),e}function jue(i,t){const e={},n=b(t,["latitude"]);n!=null&&w(e,["latitude"],n);const s=b(t,["longitude"]);return s!=null&&w(e,["longitude"],s),e}function Kue(i,t){const e={},n=b(t,["latLng"]);return n!=null&&w(e,["latLng"],jue(i,n)),e}function Zue(i,t){const e={},n=b(t,["functionCallingConfig"]);n!=null&&w(e,["functionCallingConfig"],Gue(i,n));const s=b(t,["retrievalConfig"]);return s!=null&&w(e,["retrievalConfig"],Kue(i,s)),e}function Yue(i,t){const e={},n=b(t,["voiceName"]);return n!=null&&w(e,["voiceName"],n),e}function Jue(i,t){const e={},n=b(t,["prebuiltVoiceConfig"]);return n!=null&&w(e,["prebuiltVoiceConfig"],Yue(i,n)),e}function Xue(i,t){const e={},n=b(t,["voiceConfig"]);if(n!=null&&w(e,["voiceConfig"],Jue(i,n)),b(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=b(t,["languageCode"]);return s!=null&&w(e,["languageCode"],s),e}function Que(i,t){const e={},n=b(t,["includeThoughts"]);n!=null&&w(e,["includeThoughts"],n);const s=b(t,["thinkingBudget"]);return s!=null&&w(e,["thinkingBudget"],s),e}function ede(i,t,e){const n={},s=b(t,["systemInstruction"]);e!==void 0&&s!=null&&w(e,["systemInstruction"],Fc(i,wi(i,s)));const o=b(t,["temperature"]);o!=null&&w(n,["temperature"],o);const r=b(t,["topP"]);r!=null&&w(n,["topP"],r);const a=b(t,["topK"]);a!=null&&w(n,["topK"],a);const l=b(t,["candidateCount"]);l!=null&&w(n,["candidateCount"],l);const u=b(t,["maxOutputTokens"]);u!=null&&w(n,["maxOutputTokens"],u);const h=b(t,["stopSequences"]);h!=null&&w(n,["stopSequences"],h);const m=b(t,["responseLogprobs"]);m!=null&&w(n,["responseLogprobs"],m);const p=b(t,["logprobs"]);p!=null&&w(n,["logprobs"],p);const v=b(t,["presencePenalty"]);v!=null&&w(n,["presencePenalty"],v);const C=b(t,["frequencyPenalty"]);C!=null&&w(n,["frequencyPenalty"],C);const x=b(t,["seed"]);x!=null&&w(n,["seed"],x);const k=b(t,["responseMimeType"]);k!=null&&w(n,["responseMimeType"],k);const S=b(t,["responseSchema"]);S!=null&&w(n,["responseSchema"],Qg(i,S));const I=b(t,["routingConfig"]);I!=null&&w(n,["routingConfig"],I);const P=b(t,["modelSelectionConfig"]);P!=null&&w(n,["modelConfig"],Due(i,P));const O=b(t,["safetySettings"]);if(e!==void 0&&O!=null){let ze=O;Array.isArray(ze)&&(ze=ze.map(we=>Oue(i,we))),w(e,["safetySettings"],ze)}const D=b(t,["tools"]);if(e!==void 0&&D!=null){let ze=Hp(i,D);Array.isArray(ze)&&(ze=ze.map(we=>xO(i,zp(i,we)))),w(e,["tools"],ze)}const Y=b(t,["toolConfig"]);e!==void 0&&Y!=null&&w(e,["toolConfig"],Zue(i,Y));const F=b(t,["labels"]);e!==void 0&&F!=null&&w(e,["labels"],F);const j=b(t,["cachedContent"]);e!==void 0&&j!=null&&w(e,["cachedContent"],Hr(i,j));const U=b(t,["responseModalities"]);U!=null&&w(n,["responseModalities"],U);const X=b(t,["mediaResolution"]);X!=null&&w(n,["mediaResolution"],X);const ae=b(t,["speechConfig"]);ae!=null&&w(n,["speechConfig"],Xue(i,dO(i,ae)));const me=b(t,["audioTimestamp"]);me!=null&&w(n,["audioTimestamp"],me);const Ae=b(t,["thinkingConfig"]);return Ae!=null&&w(n,["thinkingConfig"],Que(i,Ae)),n}function FI(i,t){const e={},n=b(t,["model"]);n!=null&&w(e,["_url","model"],Ft(i,n));const s=b(t,["contents"]);if(s!=null){let r=vs(i,s);Array.isArray(r)&&(r=r.map(a=>Fc(i,a))),w(e,["contents"],r)}const o=b(t,["config"]);return o!=null&&w(e,["generationConfig"],ede(i,o,e)),e}function tde(i,t,e){const n={},s=b(t,["taskType"]);e!==void 0&&s!=null&&w(e,["instances[]","task_type"],s);const o=b(t,["title"]);e!==void 0&&o!=null&&w(e,["instances[]","title"],o);const r=b(t,["outputDimensionality"]);e!==void 0&&r!=null&&w(e,["parameters","outputDimensionality"],r);const a=b(t,["mimeType"]);e!==void 0&&a!=null&&w(e,["instances[]","mimeType"],a);const l=b(t,["autoTruncate"]);return e!==void 0&&l!=null&&w(e,["parameters","autoTruncate"],l),n}function nde(i,t){const e={},n=b(t,["model"]);n!=null&&w(e,["_url","model"],Ft(i,n));const s=b(t,["contents"]);s!=null&&w(e,["instances[]","content"],uO(i,s));const o=b(t,["config"]);return o!=null&&w(e,["config"],tde(i,o,e)),e}function ide(i,t,e){const n={},s=b(t,["outputGcsUri"]);e!==void 0&&s!=null&&w(e,["parameters","storageUri"],s);const o=b(t,["negativePrompt"]);e!==void 0&&o!=null&&w(e,["parameters","negativePrompt"],o);const r=b(t,["numberOfImages"]);e!==void 0&&r!=null&&w(e,["parameters","sampleCount"],r);const a=b(t,["aspectRatio"]);e!==void 0&&a!=null&&w(e,["parameters","aspectRatio"],a);const l=b(t,["guidanceScale"]);e!==void 0&&l!=null&&w(e,["parameters","guidanceScale"],l);const u=b(t,["seed"]);e!==void 0&&u!=null&&w(e,["parameters","seed"],u);const h=b(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&w(e,["parameters","safetySetting"],h);const m=b(t,["personGeneration"]);e!==void 0&&m!=null&&w(e,["parameters","personGeneration"],m);const p=b(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&w(e,["parameters","includeSafetyAttributes"],p);const v=b(t,["includeRaiReason"]);e!==void 0&&v!=null&&w(e,["parameters","includeRaiReason"],v);const C=b(t,["language"]);e!==void 0&&C!=null&&w(e,["parameters","language"],C);const x=b(t,["outputMimeType"]);e!==void 0&&x!=null&&w(e,["parameters","outputOptions","mimeType"],x);const k=b(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&w(e,["parameters","outputOptions","compressionQuality"],k);const S=b(t,["addWatermark"]);e!==void 0&&S!=null&&w(e,["parameters","addWatermark"],S);const I=b(t,["enhancePrompt"]);return e!==void 0&&I!=null&&w(e,["parameters","enhancePrompt"],I),n}function sde(i,t){const e={},n=b(t,["model"]);n!=null&&w(e,["_url","model"],Ft(i,n));const s=b(t,["prompt"]);s!=null&&w(e,["instances[0]","prompt"],s);const o=b(t,["config"]);return o!=null&&w(e,["config"],ide(i,o,e)),e}function k1(i,t){const e={},n=b(t,["gcsUri"]);n!=null&&w(e,["gcsUri"],n);const s=b(t,["imageBytes"]);s!=null&&w(e,["bytesBase64Encoded"],Wr(i,s));const o=b(t,["mimeType"]);return o!=null&&w(e,["mimeType"],o),e}function ode(i,t){const e={},n=b(t,["maskMode"]);n!=null&&w(e,["maskMode"],n);const s=b(t,["segmentationClasses"]);s!=null&&w(e,["maskClasses"],s);const o=b(t,["maskDilation"]);return o!=null&&w(e,["dilation"],o),e}function rde(i,t){const e={},n=b(t,["controlType"]);n!=null&&w(e,["controlType"],n);const s=b(t,["enableControlImageComputation"]);return s!=null&&w(e,["computeControl"],s),e}function ade(i,t){const e={},n=b(t,["styleDescription"]);return n!=null&&w(e,["styleDescription"],n),e}function lde(i,t){const e={},n=b(t,["subjectType"]);n!=null&&w(e,["subjectType"],n);const s=b(t,["subjectDescription"]);return s!=null&&w(e,["subjectDescription"],s),e}function cde(i,t){const e={},n=b(t,["referenceImage"]);n!=null&&w(e,["referenceImage"],k1(i,n));const s=b(t,["referenceId"]);s!=null&&w(e,["referenceId"],s);const o=b(t,["referenceType"]);o!=null&&w(e,["referenceType"],o);const r=b(t,["maskImageConfig"]);r!=null&&w(e,["maskImageConfig"],ode(i,r));const a=b(t,["controlImageConfig"]);a!=null&&w(e,["controlImageConfig"],rde(i,a));const l=b(t,["styleImageConfig"]);l!=null&&w(e,["styleImageConfig"],ade(i,l));const u=b(t,["subjectImageConfig"]);return u!=null&&w(e,["subjectImageConfig"],lde(i,u)),e}function ude(i,t,e){const n={},s=b(t,["outputGcsUri"]);e!==void 0&&s!=null&&w(e,["parameters","storageUri"],s);const o=b(t,["negativePrompt"]);e!==void 0&&o!=null&&w(e,["parameters","negativePrompt"],o);const r=b(t,["numberOfImages"]);e!==void 0&&r!=null&&w(e,["parameters","sampleCount"],r);const a=b(t,["aspectRatio"]);e!==void 0&&a!=null&&w(e,["parameters","aspectRatio"],a);const l=b(t,["guidanceScale"]);e!==void 0&&l!=null&&w(e,["parameters","guidanceScale"],l);const u=b(t,["seed"]);e!==void 0&&u!=null&&w(e,["parameters","seed"],u);const h=b(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&w(e,["parameters","safetySetting"],h);const m=b(t,["personGeneration"]);e!==void 0&&m!=null&&w(e,["parameters","personGeneration"],m);const p=b(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&w(e,["parameters","includeSafetyAttributes"],p);const v=b(t,["includeRaiReason"]);e!==void 0&&v!=null&&w(e,["parameters","includeRaiReason"],v);const C=b(t,["language"]);e!==void 0&&C!=null&&w(e,["parameters","language"],C);const x=b(t,["outputMimeType"]);e!==void 0&&x!=null&&w(e,["parameters","outputOptions","mimeType"],x);const k=b(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&w(e,["parameters","outputOptions","compressionQuality"],k);const S=b(t,["editMode"]);e!==void 0&&S!=null&&w(e,["parameters","editMode"],S);const I=b(t,["baseSteps"]);return e!==void 0&&I!=null&&w(e,["parameters","editConfig","baseSteps"],I),n}function dde(i,t){const e={},n=b(t,["model"]);n!=null&&w(e,["_url","model"],Ft(i,n));const s=b(t,["prompt"]);s!=null&&w(e,["instances[0]","prompt"],s);const o=b(t,["referenceImages"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>cde(i,l))),w(e,["instances[0]","referenceImages"],a)}const r=b(t,["config"]);return r!=null&&w(e,["config"],ude(i,r,e)),e}function hde(i,t,e){const n={},s=b(t,["includeRaiReason"]);e!==void 0&&s!=null&&w(e,["parameters","includeRaiReason"],s);const o=b(t,["outputMimeType"]);e!==void 0&&o!=null&&w(e,["parameters","outputOptions","mimeType"],o);const r=b(t,["outputCompressionQuality"]);e!==void 0&&r!=null&&w(e,["parameters","outputOptions","compressionQuality"],r);const a=b(t,["numberOfImages"]);e!==void 0&&a!=null&&w(e,["parameters","sampleCount"],a);const l=b(t,["mode"]);return e!==void 0&&l!=null&&w(e,["parameters","mode"],l),n}function fde(i,t){const e={},n=b(t,["model"]);n!=null&&w(e,["_url","model"],Ft(i,n));const s=b(t,["image"]);s!=null&&w(e,["instances[0]","image"],k1(i,s));const o=b(t,["upscaleFactor"]);o!=null&&w(e,["parameters","upscaleConfig","upscaleFactor"],o);const r=b(t,["config"]);return r!=null&&w(e,["config"],hde(i,r,e)),e}function mde(i,t){const e={},n=b(t,["model"]);n!=null&&w(e,["_url","name"],Ft(i,n));const s=b(t,["config"]);return s!=null&&w(e,["config"],s),e}function gde(i,t,e){const n={},s=b(t,["pageSize"]);e!==void 0&&s!=null&&w(e,["_query","pageSize"],s);const o=b(t,["pageToken"]);e!==void 0&&o!=null&&w(e,["_query","pageToken"],o);const r=b(t,["filter"]);e!==void 0&&r!=null&&w(e,["_query","filter"],r);const a=b(t,["queryBase"]);return e!==void 0&&a!=null&&w(e,["_url","models_url"],gO(i,a)),n}function pde(i,t){const e={},n=b(t,["config"]);return n!=null&&w(e,["config"],gde(i,n,e)),e}function bde(i,t,e){const n={},s=b(t,["displayName"]);e!==void 0&&s!=null&&w(e,["displayName"],s);const o=b(t,["description"]);e!==void 0&&o!=null&&w(e,["description"],o);const r=b(t,["defaultCheckpointId"]);return e!==void 0&&r!=null&&w(e,["defaultCheckpointId"],r),n}function _de(i,t){const e={},n=b(t,["model"]);n!=null&&w(e,["_url","model"],Ft(i,n));const s=b(t,["config"]);return s!=null&&w(e,["config"],bde(i,s,e)),e}function wde(i,t){const e={},n=b(t,["model"]);n!=null&&w(e,["_url","name"],Ft(i,n));const s=b(t,["config"]);return s!=null&&w(e,["config"],s),e}function yde(i,t,e){const n={},s=b(t,["systemInstruction"]);e!==void 0&&s!=null&&w(e,["systemInstruction"],Fc(i,wi(i,s)));const o=b(t,["tools"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>xO(i,l))),w(e,["tools"],a)}const r=b(t,["generationConfig"]);return e!==void 0&&r!=null&&w(e,["generationConfig"],r),n}function vde(i,t){const e={},n=b(t,["model"]);n!=null&&w(e,["_url","model"],Ft(i,n));const s=b(t,["contents"]);if(s!=null){let r=vs(i,s);Array.isArray(r)&&(r=r.map(a=>Fc(i,a))),w(e,["contents"],r)}const o=b(t,["config"]);return o!=null&&w(e,["config"],yde(i,o,e)),e}function Cde(i,t){const e={},n=b(t,["model"]);n!=null&&w(e,["_url","model"],Ft(i,n));const s=b(t,["contents"]);if(s!=null){let r=vs(i,s);Array.isArray(r)&&(r=r.map(a=>Fc(i,a))),w(e,["contents"],r)}const o=b(t,["config"]);return o!=null&&w(e,["config"],o),e}function Tde(i,t,e){const n={},s=b(t,["numberOfVideos"]);e!==void 0&&s!=null&&w(e,["parameters","sampleCount"],s);const o=b(t,["outputGcsUri"]);e!==void 0&&o!=null&&w(e,["parameters","storageUri"],o);const r=b(t,["fps"]);e!==void 0&&r!=null&&w(e,["parameters","fps"],r);const a=b(t,["durationSeconds"]);e!==void 0&&a!=null&&w(e,["parameters","durationSeconds"],a);const l=b(t,["seed"]);e!==void 0&&l!=null&&w(e,["parameters","seed"],l);const u=b(t,["aspectRatio"]);e!==void 0&&u!=null&&w(e,["parameters","aspectRatio"],u);const h=b(t,["resolution"]);e!==void 0&&h!=null&&w(e,["parameters","resolution"],h);const m=b(t,["personGeneration"]);e!==void 0&&m!=null&&w(e,["parameters","personGeneration"],m);const p=b(t,["pubsubTopic"]);e!==void 0&&p!=null&&w(e,["parameters","pubsubTopic"],p);const v=b(t,["negativePrompt"]);e!==void 0&&v!=null&&w(e,["parameters","negativePrompt"],v);const C=b(t,["enhancePrompt"]);return e!==void 0&&C!=null&&w(e,["parameters","enhancePrompt"],C),n}function xde(i,t){const e={},n=b(t,["model"]);n!=null&&w(e,["_url","model"],Ft(i,n));const s=b(t,["prompt"]);s!=null&&w(e,["instances[0]","prompt"],s);const o=b(t,["image"]);o!=null&&w(e,["instances[0]","image"],k1(i,o));const r=b(t,["config"]);return r!=null&&w(e,["config"],Tde(i,r,e)),e}function kde(i,t){const e={},n=b(t,["fps"]);n!=null&&w(e,["fps"],n);const s=b(t,["endOffset"]);s!=null&&w(e,["endOffset"],s);const o=b(t,["startOffset"]);return o!=null&&w(e,["startOffset"],o),e}function Ede(i,t){const e={},n=b(t,["data"]);n!=null&&w(e,["data"],n);const s=b(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function Sde(i,t){const e={},n=b(t,["videoMetadata"]);n!=null&&w(e,["videoMetadata"],kde(i,n));const s=b(t,["thought"]);s!=null&&w(e,["thought"],s);const o=b(t,["inlineData"]);o!=null&&w(e,["inlineData"],Ede(i,o));const r=b(t,["codeExecutionResult"]);r!=null&&w(e,["codeExecutionResult"],r);const a=b(t,["executableCode"]);a!=null&&w(e,["executableCode"],a);const l=b(t,["fileData"]);l!=null&&w(e,["fileData"],l);const u=b(t,["functionCall"]);u!=null&&w(e,["functionCall"],u);const h=b(t,["functionResponse"]);h!=null&&w(e,["functionResponse"],h);const m=b(t,["text"]);return m!=null&&w(e,["text"],m),e}function Ade(i,t){const e={},n=b(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Sde(i,r))),w(e,["parts"],o)}const s=b(t,["role"]);return s!=null&&w(e,["role"],s),e}function Rde(i,t){const e={},n=b(t,["citationSources"]);return n!=null&&w(e,["citations"],n),e}function Ide(i,t){const e={},n=b(t,["retrievedUrl"]);n!=null&&w(e,["retrievedUrl"],n);const s=b(t,["urlRetrievalStatus"]);return s!=null&&w(e,["urlRetrievalStatus"],s),e}function Pde(i,t){const e={},n=b(t,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Ide(i,o))),w(e,["urlMetadata"],s)}return e}function Mde(i,t){const e={},n=b(t,["content"]);n!=null&&w(e,["content"],Ade(i,n));const s=b(t,["citationMetadata"]);s!=null&&w(e,["citationMetadata"],Rde(i,s));const o=b(t,["tokenCount"]);o!=null&&w(e,["tokenCount"],o);const r=b(t,["finishReason"]);r!=null&&w(e,["finishReason"],r);const a=b(t,["urlContextMetadata"]);a!=null&&w(e,["urlContextMetadata"],Pde(i,a));const l=b(t,["avgLogprobs"]);l!=null&&w(e,["avgLogprobs"],l);const u=b(t,["groundingMetadata"]);u!=null&&w(e,["groundingMetadata"],u);const h=b(t,["index"]);h!=null&&w(e,["index"],h);const m=b(t,["logprobsResult"]);m!=null&&w(e,["logprobsResult"],m);const p=b(t,["safetyRatings"]);return p!=null&&w(e,["safetyRatings"],p),e}function UI(i,t){const e={},n=b(t,["candidates"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Mde(i,l))),w(e,["candidates"],a)}const s=b(t,["modelVersion"]);s!=null&&w(e,["modelVersion"],s);const o=b(t,["promptFeedback"]);o!=null&&w(e,["promptFeedback"],o);const r=b(t,["usageMetadata"]);return r!=null&&w(e,["usageMetadata"],r),e}function Vde(i,t){const e={},n=b(t,["values"]);return n!=null&&w(e,["values"],n),e}function Nde(){return{}}function Dde(i,t){const e={},n=b(t,["embeddings"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Vde(i,r))),w(e,["embeddings"],o)}return b(t,["metadata"])!=null&&w(e,["metadata"],Nde()),e}function Ode(i,t){const e={},n=b(t,["bytesBase64Encoded"]);n!=null&&w(e,["imageBytes"],Wr(i,n));const s=b(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function kO(i,t){const e={},n=b(t,["safetyAttributes","categories"]);n!=null&&w(e,["categories"],n);const s=b(t,["safetyAttributes","scores"]);s!=null&&w(e,["scores"],s);const o=b(t,["contentType"]);return o!=null&&w(e,["contentType"],o),e}function Lde(i,t){const e={},n=b(t,["_self"]);n!=null&&w(e,["image"],Ode(i,n));const s=b(t,["raiFilteredReason"]);s!=null&&w(e,["raiFilteredReason"],s);const o=b(t,["_self"]);return o!=null&&w(e,["safetyAttributes"],kO(i,o)),e}function Bde(i,t){const e={},n=b(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Lde(i,r))),w(e,["generatedImages"],o)}const s=b(t,["positivePromptSafetyAttributes"]);return s!=null&&w(e,["positivePromptSafetyAttributes"],kO(i,s)),e}function Fde(i,t){const e={},n=b(t,["baseModel"]);n!=null&&w(e,["baseModel"],n);const s=b(t,["createTime"]);s!=null&&w(e,["createTime"],s);const o=b(t,["updateTime"]);return o!=null&&w(e,["updateTime"],o),e}function Ov(i,t){const e={},n=b(t,["name"]);n!=null&&w(e,["name"],n);const s=b(t,["displayName"]);s!=null&&w(e,["displayName"],s);const o=b(t,["description"]);o!=null&&w(e,["description"],o);const r=b(t,["version"]);r!=null&&w(e,["version"],r);const a=b(t,["_self"]);a!=null&&w(e,["tunedModelInfo"],Fde(i,a));const l=b(t,["inputTokenLimit"]);l!=null&&w(e,["inputTokenLimit"],l);const u=b(t,["outputTokenLimit"]);u!=null&&w(e,["outputTokenLimit"],u);const h=b(t,["supportedGenerationMethods"]);return h!=null&&w(e,["supportedActions"],h),e}function Ude(i,t){const e={},n=b(t,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=b(t,["_self"]);if(s!=null){let o=pO(i,s);Array.isArray(o)&&(o=o.map(r=>Ov(i,r))),w(e,["models"],o)}return e}function zde(){return{}}function Hde(i,t){const e={},n=b(t,["totalTokens"]);n!=null&&w(e,["totalTokens"],n);const s=b(t,["cachedContentTokenCount"]);return s!=null&&w(e,["cachedContentTokenCount"],s),e}function Wde(i,t){const e={},n=b(t,["video","uri"]);n!=null&&w(e,["uri"],n);const s=b(t,["video","encodedVideo"]);s!=null&&w(e,["videoBytes"],Wr(i,s));const o=b(t,["encoding"]);return o!=null&&w(e,["mimeType"],o),e}function qde(i,t){const e={},n=b(t,["_self"]);return n!=null&&w(e,["video"],Wde(i,n)),e}function $de(i,t){const e={},n=b(t,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>qde(i,a))),w(e,["generatedVideos"],r)}const s=b(t,["raiMediaFilteredCount"]);s!=null&&w(e,["raiMediaFilteredCount"],s);const o=b(t,["raiMediaFilteredReasons"]);return o!=null&&w(e,["raiMediaFilteredReasons"],o),e}function Gde(i,t){const e={},n=b(t,["name"]);n!=null&&w(e,["name"],n);const s=b(t,["metadata"]);s!=null&&w(e,["metadata"],s);const o=b(t,["done"]);o!=null&&w(e,["done"],o);const r=b(t,["error"]);r!=null&&w(e,["error"],r);const a=b(t,["response","generateVideoResponse"]);return a!=null&&w(e,["response"],$de(i,a)),e}function jde(i,t){const e={},n=b(t,["fps"]);n!=null&&w(e,["fps"],n);const s=b(t,["endOffset"]);s!=null&&w(e,["endOffset"],s);const o=b(t,["startOffset"]);return o!=null&&w(e,["startOffset"],o),e}function Kde(i,t){const e={},n=b(t,["displayName"]);n!=null&&w(e,["displayName"],n);const s=b(t,["data"]);s!=null&&w(e,["data"],s);const o=b(t,["mimeType"]);return o!=null&&w(e,["mimeType"],o),e}function Zde(i,t){const e={},n=b(t,["videoMetadata"]);n!=null&&w(e,["videoMetadata"],jde(i,n));const s=b(t,["thought"]);s!=null&&w(e,["thought"],s);const o=b(t,["inlineData"]);o!=null&&w(e,["inlineData"],Kde(i,o));const r=b(t,["codeExecutionResult"]);r!=null&&w(e,["codeExecutionResult"],r);const a=b(t,["executableCode"]);a!=null&&w(e,["executableCode"],a);const l=b(t,["fileData"]);l!=null&&w(e,["fileData"],l);const u=b(t,["functionCall"]);u!=null&&w(e,["functionCall"],u);const h=b(t,["functionResponse"]);h!=null&&w(e,["functionResponse"],h);const m=b(t,["text"]);return m!=null&&w(e,["text"],m),e}function Yde(i,t){const e={},n=b(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Zde(i,r))),w(e,["parts"],o)}const s=b(t,["role"]);return s!=null&&w(e,["role"],s),e}function Jde(i,t){const e={},n=b(t,["citations"]);return n!=null&&w(e,["citations"],n),e}function Xde(i,t){const e={},n=b(t,["content"]);n!=null&&w(e,["content"],Yde(i,n));const s=b(t,["citationMetadata"]);s!=null&&w(e,["citationMetadata"],Jde(i,s));const o=b(t,["finishMessage"]);o!=null&&w(e,["finishMessage"],o);const r=b(t,["finishReason"]);r!=null&&w(e,["finishReason"],r);const a=b(t,["avgLogprobs"]);a!=null&&w(e,["avgLogprobs"],a);const l=b(t,["groundingMetadata"]);l!=null&&w(e,["groundingMetadata"],l);const u=b(t,["index"]);u!=null&&w(e,["index"],u);const h=b(t,["logprobsResult"]);h!=null&&w(e,["logprobsResult"],h);const m=b(t,["safetyRatings"]);return m!=null&&w(e,["safetyRatings"],m),e}function zI(i,t){const e={},n=b(t,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>Xde(i,h))),w(e,["candidates"],u)}const s=b(t,["createTime"]);s!=null&&w(e,["createTime"],s);const o=b(t,["responseId"]);o!=null&&w(e,["responseId"],o);const r=b(t,["modelVersion"]);r!=null&&w(e,["modelVersion"],r);const a=b(t,["promptFeedback"]);a!=null&&w(e,["promptFeedback"],a);const l=b(t,["usageMetadata"]);return l!=null&&w(e,["usageMetadata"],l),e}function Qde(i,t){const e={},n=b(t,["truncated"]);n!=null&&w(e,["truncated"],n);const s=b(t,["token_count"]);return s!=null&&w(e,["tokenCount"],s),e}function ehe(i,t){const e={},n=b(t,["values"]);n!=null&&w(e,["values"],n);const s=b(t,["statistics"]);return s!=null&&w(e,["statistics"],Qde(i,s)),e}function the(i,t){const e={},n=b(t,["billableCharacterCount"]);return n!=null&&w(e,["billableCharacterCount"],n),e}function nhe(i,t){const e={},n=b(t,["predictions[]","embeddings"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>ehe(i,r))),w(e,["embeddings"],o)}const s=b(t,["metadata"]);return s!=null&&w(e,["metadata"],the(i,s)),e}function ihe(i,t){const e={},n=b(t,["gcsUri"]);n!=null&&w(e,["gcsUri"],n);const s=b(t,["bytesBase64Encoded"]);s!=null&&w(e,["imageBytes"],Wr(i,s));const o=b(t,["mimeType"]);return o!=null&&w(e,["mimeType"],o),e}function EO(i,t){const e={},n=b(t,["safetyAttributes","categories"]);n!=null&&w(e,["categories"],n);const s=b(t,["safetyAttributes","scores"]);s!=null&&w(e,["scores"],s);const o=b(t,["contentType"]);return o!=null&&w(e,["contentType"],o),e}function E1(i,t){const e={},n=b(t,["_self"]);n!=null&&w(e,["image"],ihe(i,n));const s=b(t,["raiFilteredReason"]);s!=null&&w(e,["raiFilteredReason"],s);const o=b(t,["_self"]);o!=null&&w(e,["safetyAttributes"],EO(i,o));const r=b(t,["prompt"]);return r!=null&&w(e,["enhancedPrompt"],r),e}function she(i,t){const e={},n=b(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>E1(i,r))),w(e,["generatedImages"],o)}const s=b(t,["positivePromptSafetyAttributes"]);return s!=null&&w(e,["positivePromptSafetyAttributes"],EO(i,s)),e}function ohe(i,t){const e={},n=b(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>E1(i,o))),w(e,["generatedImages"],s)}return e}function rhe(i,t){const e={},n=b(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>E1(i,o))),w(e,["generatedImages"],s)}return e}function ahe(i,t){const e={},n=b(t,["endpoint"]);n!=null&&w(e,["name"],n);const s=b(t,["deployedModelId"]);return s!=null&&w(e,["deployedModelId"],s),e}function lhe(i,t){const e={},n=b(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&w(e,["baseModel"],n);const s=b(t,["createTime"]);s!=null&&w(e,["createTime"],s);const o=b(t,["updateTime"]);return o!=null&&w(e,["updateTime"],o),e}function che(i,t){const e={},n=b(t,["checkpointId"]);n!=null&&w(e,["checkpointId"],n);const s=b(t,["epoch"]);s!=null&&w(e,["epoch"],s);const o=b(t,["step"]);return o!=null&&w(e,["step"],o),e}function Lv(i,t){const e={},n=b(t,["name"]);n!=null&&w(e,["name"],n);const s=b(t,["displayName"]);s!=null&&w(e,["displayName"],s);const o=b(t,["description"]);o!=null&&w(e,["description"],o);const r=b(t,["versionId"]);r!=null&&w(e,["version"],r);const a=b(t,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(v=>ahe(i,v))),w(e,["endpoints"],p)}const l=b(t,["labels"]);l!=null&&w(e,["labels"],l);const u=b(t,["_self"]);u!=null&&w(e,["tunedModelInfo"],lhe(i,u));const h=b(t,["defaultCheckpointId"]);h!=null&&w(e,["defaultCheckpointId"],h);const m=b(t,["checkpoints"]);if(m!=null){let p=m;Array.isArray(p)&&(p=p.map(v=>che(i,v))),w(e,["checkpoints"],p)}return e}function uhe(i,t){const e={},n=b(t,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=b(t,["_self"]);if(s!=null){let o=pO(i,s);Array.isArray(o)&&(o=o.map(r=>Lv(i,r))),w(e,["models"],o)}return e}function dhe(){return{}}function hhe(i,t){const e={},n=b(t,["totalTokens"]);return n!=null&&w(e,["totalTokens"],n),e}function fhe(i,t){const e={},n=b(t,["tokensInfo"]);return n!=null&&w(e,["tokensInfo"],n),e}function mhe(i,t){const e={},n=b(t,["gcsUri"]);n!=null&&w(e,["uri"],n);const s=b(t,["bytesBase64Encoded"]);s!=null&&w(e,["videoBytes"],Wr(i,s));const o=b(t,["mimeType"]);return o!=null&&w(e,["mimeType"],o),e}function ghe(i,t){const e={},n=b(t,["_self"]);return n!=null&&w(e,["video"],mhe(i,n)),e}function phe(i,t){const e={},n=b(t,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>ghe(i,a))),w(e,["generatedVideos"],r)}const s=b(t,["raiMediaFilteredCount"]);s!=null&&w(e,["raiMediaFilteredCount"],s);const o=b(t,["raiMediaFilteredReasons"]);return o!=null&&w(e,["raiMediaFilteredReasons"],o),e}function bhe(i,t){const e={},n=b(t,["name"]);n!=null&&w(e,["name"],n);const s=b(t,["metadata"]);s!=null&&w(e,["metadata"],s);const o=b(t,["done"]);o!=null&&w(e,["done"],o);const r=b(t,["error"]);r!=null&&w(e,["error"],r);const a=b(t,["response"]);return a!=null&&w(e,["response"],phe(i,a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _he="Content-Type",whe="X-Server-Timeout",yhe="User-Agent",Bv="x-goog-api-client",vhe="1.0.1",Che=`google-genai-sdk/${vhe}`,The="v1beta1",xhe="v1beta",HI=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class SO extends Error{constructor(t,e){e?super(t,{cause:e}):super(t,{cause:new Error().stack}),this.message=t,this.name="ClientError"}}class Fv extends Error{constructor(t,e){e?super(t,{cause:e}):super(t,{cause:new Error().stack}),this.message=t,this.name="ServerError"}}class khe{constructor(t){var e,n;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(e=this.clientOptions.apiVersion)!==null&&e!==void 0?e:The,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:xhe,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&n.push(t.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),e=new URL(t);return e.protocol=e.protocol=="http:"?"ws":"wss",e.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,e,n){const s=[this.getRequestUrlInternal(e)];return n&&s.push(this.getBaseResourcePath()),t!==""&&s.push(t),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const n=this.shouldPrependVertexProjectPath(t),s=this.constructUrl(t.path,e,n);if(t.queryParams)for(const[r,a]of Object.entries(t.queryParams))s.searchParams.append(r,String(a));let o={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=t.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,e,t.abortSignal),this.unaryApiCall(s,o,t.httpMethod)}patchHttpOptions(t,e){const n=JSON.parse(JSON.stringify(t));for(const[s,o]of Object.entries(e))typeof o=="object"?n[s]=Object.assign(Object.assign({},n[s]),o):o!==void 0&&(n[s]=o);return n}async requestStream(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const n=this.shouldPrependVertexProjectPath(t),s=this.constructUrl(t.path,e,n);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let o={};return o.body=t.body,o=await this.includeExtraHttpOptionsToRequestInit(o,e,t.abortSignal),this.streamApiCall(s,o,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,e,n){if(e&&e.timeout||n){const s=new AbortController,o=s.signal;e.timeout&&(e==null?void 0:e.timeout)>0&&setTimeout(()=>s.abort(),e.timeout),n&&n.addEventListener("abort",()=>{s.abort()}),t.signal=o}return t.headers=await this.getHeadersInternal(e),t}async unaryApiCall(t,e,n){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:n})).then(async s=>(await WI(s),new Mv(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(t,e,n){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:n})).then(async s=>(await WI(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(t){var e;return Dd(this,arguments,function*(){const s=(e=t==null?void 0:t.body)===null||e===void 0?void 0:e.getReader(),o=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let r="";for(;;){const{done:a,value:l}=yield Wt(s.read());if(a){if(r.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=o.decode(l);try{const m=JSON.parse(u);if("error"in m){const p=JSON.parse(JSON.stringify(m.error)),v=p.status,C=p.code,x=`got status: ${v}. ${JSON.stringify(m)}`;if(C>=400&&C<500)throw new SO(x);if(C>=500&&C<600)throw new Fv(x)}}catch(m){const p=m;if(p.name==="ClientError"||p.name==="ServerError")throw m}r+=u;let h=r.match(HI);for(;h;){const m=h[1];try{const p=new Response(m,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield Wt(new Mv(p)),r=r.slice(h[0].length),h=r.match(HI)}catch(p){throw new Error(`exception parsing stream chunk ${m}. ${p}`)}}}}finally{s.releaseLock()}})}async apiCall(t,e){return fetch(t,e).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const t={},e=Che+" "+this.clientOptions.userAgentExtra;return t[yhe]=e,t[Bv]=e,t[_he]="application/json",t}async getHeadersInternal(t){const e=new Headers;if(t&&t.headers){for(const[n,s]of Object.entries(t.headers))e.append(n,s);t.timeout&&t.timeout>0&&e.append(whe,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(e),e}async uploadFile(t,e){var n;const s={};e!=null&&(s.mimeType=e.mimeType,s.name=e.name,s.displayName=e.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const o=this.clientOptions.uploader,r=await o.stat(t);s.sizeBytes=String(r.size);const a=(n=e==null?void 0:e.mimeType)!==null&&n!==void 0?n:r.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=a;const l=await this.fetchUploadUrl(s,e);return o.upload(t,l,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,e){var n;let s={};e!=null&&e.httpOptions?s=e.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const o={file:t},r=await this.request({path:Fe("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:s});if(!r||!(r!=null&&r.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(n=r==null?void 0:r.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function WI(i){var t;if(i===void 0)throw new Fv("response is undefined");if(!i.ok){const e=i.status,n=i.statusText;let s;!((t=i.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?s=await i.json():s={error:{message:await i.text(),code:i.status,status:i.statusText}};const o=`got status: ${e} ${n}. ${JSON.stringify(s)}`;throw e>=400&&e<500?new SO(o):e>=500&&e<600?new Fv(o):new Error(o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qI="mcp_used/unknown";function AO(i){for(const t of i)if(S1(t)||typeof t=="object"&&"inputSchema"in t)return!0;return!1}function RO(i){var t;const e=(t=i[Bv])!==null&&t!==void 0?t:"";e.includes(qI)||(i[Bv]=(e+` ${qI}`).trimStart())}function Ehe(i){var t,e,n;return(n=(e=(t=i.config)===null||t===void 0?void 0:t.tools)===null||e===void 0?void 0:e.some(s=>S1(s)))!==null&&n!==void 0?n:!1}function She(i){var t,e,n;return(n=(e=(t=i.config)===null||t===void 0?void 0:t.tools)===null||e===void 0?void 0:e.some(s=>!S1(s)))!==null&&n!==void 0?n:!1}function S1(i){return i!==null&&typeof i=="object"&&"tool"in i&&"callTool"in i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Ahe(i,t,e){const n=new Ure;let s;e.data instanceof Blob?s=JSON.parse(await e.data.text()):s=JSON.parse(e.data);const o=Zce(i,s);Object.assign(n,o),t(n)}class Rhe{constructor(t,e,n){this.apiClient=t,this.auth=e,this.webSocketFactory=n}async connect(t){var e,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),r=Mhe(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${s}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`;let u=()=>{};const h=new Promise(P=>{u=P}),m=t.callbacks,p=function(){u({})},v=this.apiClient,C={onopen:p,onmessage:P=>{Ahe(v,m.onmessage,P)},onerror:(e=m==null?void 0:m.onerror)!==null&&e!==void 0?e:function(P){},onclose:(n=m==null?void 0:m.onclose)!==null&&n!==void 0?n:function(P){}},x=this.webSocketFactory.create(l,Phe(r),C);x.connect(),await h;const k=Ft(this.apiClient,t.model),S=vO(this.apiClient,{model:k}),I=Dv(this.apiClient,{setup:S});return x.send(JSON.stringify(I)),new Ihe(x,this.apiClient)}}class Ihe{constructor(t,e){this.conn=t,this.apiClient=e}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const e=dce(this.apiClient,t),n=CO(this.apiClient,e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const e=hce(this.apiClient,t),n=Dv(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const e=Dv(this.apiClient,{playbackControl:t});this.conn.send(JSON.stringify(e))}play(){this.sendPlaybackControl(dc.PLAY)}pause(){this.sendPlaybackControl(dc.PAUSE)}stop(){this.sendPlaybackControl(dc.STOP)}resetContext(){this.sendPlaybackControl(dc.RESET_CONTEXT)}close(){this.conn.close()}}function Phe(i){const t={};return i.forEach((e,n)=>{t[n]=e}),t}function Mhe(i){const t=new Headers;for(const[e,n]of Object.entries(i))t.append(e,n);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vhe="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Nhe(i,t,e){const n=new Fre;let s;if(e.data instanceof Blob?s=JSON.parse(await e.data.text()):s=JSON.parse(e.data),i.isVertexAI()){const o=Uce(i,s);Object.assign(n,o)}else{const o=Fce(i,s);Object.assign(n,o)}t(n)}class Dhe{constructor(t,e,n){this.apiClient=t,this.auth=e,this.webSocketFactory=n,this.music=new Rhe(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var e,n,s,o,r,a;const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let h;const m=this.apiClient.getDefaultHeaders();t.config&&t.config.tools&&AO(t.config.tools)&&RO(m);const p=Fhe(m);if(this.apiClient.isVertexAI())h=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p);else{const U=this.apiClient.getApiKey();h=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateContent?key=${U}`}let v=()=>{};const C=new Promise(U=>{v=U}),x=t.callbacks,k=function(){var U;(U=x==null?void 0:x.onopen)===null||U===void 0||U.call(x),v({})},S=this.apiClient,I={onopen:k,onmessage:U=>{Nhe(S,x.onmessage,U)},onerror:(e=x==null?void 0:x.onerror)!==null&&e!==void 0?e:function(U){},onclose:(n=x==null?void 0:x.onclose)!==null&&n!==void 0?n:function(U){}},P=this.webSocketFactory.create(h,Bhe(p),I);P.connect(),await C;let O=Ft(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&O.startsWith("publishers/")){const U=this.apiClient.getProject(),X=this.apiClient.getLocation();O=`projects/${U}/locations/${X}/`+O}let D={};this.apiClient.isVertexAI()&&((s=t.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Jg.AUDIO]}:t.config.responseModalities=[Jg.AUDIO]),!((o=t.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Y=(a=(r=t.config)===null||r===void 0?void 0:r.tools)!==null&&a!==void 0?a:[],F=[];for(const U of Y)if(this.isCallableTool(U)){const X=U;F.push(await X.tool())}else F.push(U);F.length>0&&(t.config.tools=F);const j={model:O,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?D=sce(this.apiClient,j):D=ice(this.apiClient,j),delete D.config,P.send(JSON.stringify(D)),new Lhe(P,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const Ohe={turnComplete:!0};class Lhe{constructor(t,e){this.conn=t,this.apiClient=e}tLiveClientContent(t,e){if(e.turns!==null&&e.turns!==void 0){let n=[];try{n=vs(t,e.turns),t.isVertexAI()?n=n.map(s=>Fc(t,s)):n=n.map(s=>qp(t,s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:n,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClienttToolResponse(t,e){let n=[];if(e.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(e.functionResponses)?n=e.functionResponses:n=[e.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const o of n){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!t.isVertexAI()&&!("id"in o))throw new Error(Vhe)}return{toolResponse:{functionResponses:n}}}sendClientContent(t){t=Object.assign(Object.assign({},Ohe),t);const e=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(e))}sendRealtimeInput(t){let e={};this.apiClient.isVertexAI()?e={realtimeInput:uce(this.apiClient,t)}:e={realtimeInput:cce(this.apiClient,t)},this.conn.send(JSON.stringify(e))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const e=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}}function Bhe(i){const t={};return i.forEach((e,n)=>{t[n]=e}),t}function Fhe(i){const t=new Headers;for(const[e,n]of Object.entries(i))t.append(e,n);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $I=10;function GI(i){var t,e,n;if(!((t=i==null?void 0:i.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let s=!1;for(const r of(e=i==null?void 0:i.tools)!==null&&e!==void 0?e:[])if(ig(r)){s=!0;break}if(!s)return!0;const o=(n=i==null?void 0:i.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function ig(i){return"callTool"in i&&typeof i.callTool=="function"}function jI(i){var t;return!(!((t=i==null?void 0:i.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Uhe extends Dh{constructor(t){super(),this.apiClient=t,this.generateContent=async e=>{var n,s,o,r,a;const l=await this.processParamsForMcpUsage(e);if(!Ehe(e)||GI(e.config))return await this.generateContentInternal(l);if(She(e))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let u,h;const m=vs(this.apiClient,l.contents),p=(o=(s=(n=l.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:$I;let v=0;for(;v<p&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){const C=u.candidates[0].content,x=[];for(const k of(a=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&a!==void 0?a:[])if(ig(k)){const I=await k.callTool(u.functionCalls);x.push(...I)}v++,h={role:"user",parts:x},l.contents=vs(this.apiClient,l.contents),l.contents.push(C),l.contents.push(h),jI(l.config)&&(m.push(C),m.push(h))}return jI(l.config)&&(u.automaticFunctionCallingHistory=m),u},this.generateContentStream=async e=>{if(GI(e.config)){const n=await this.processParamsForMcpUsage(e);return await this.generateContentStreamInternal(n)}else return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(n=>{var s;let o;const r=[];if(n!=null&&n.generatedImages)for(const l of n.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((s=l==null?void 0:l.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?o=l==null?void 0:l.safetyAttributes:r.push(l);let a;return o?a={generatedImages:r,positivePromptSafetyAttributes:o}:a={generatedImages:r},a}),this.list=async e=>{var n;const r={config:Object.assign(Object.assign({},{queryBase:!0}),e==null?void 0:e.config)};if(this.apiClient.isVertexAI()&&!r.config.queryBase){if(!((n=r.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");r.config.filter="labels.tune-type:*"}return new Wp(Ic.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(r),r)},this.editImage=async e=>{const n={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(n.referenceImages=e.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async e=>{let n={numberOfImages:1,mode:"upscale"};e.config&&(n=Object.assign(Object.assign({},n),e.config));const s={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:n};return await this.upscaleImageInternal(s)}}async processParamsForMcpUsage(t){var e,n,s;const o=(e=t.config)===null||e===void 0?void 0:e.tools;if(!o)return t;const r=await Promise.all(o.map(async l=>ig(l)?await l.tool():l)),a={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:r})};if(a.config.tools=r,t.config&&t.config.tools&&AO(t.config.tools)){const l=(s=(n=t.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&s!==void 0?s:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),RO(u),a.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:u})}return a}async initAfcToolsMap(t){var e,n,s;const o=new Map;for(const r of(n=(e=t.config)===null||e===void 0?void 0:e.tools)!==null&&n!==void 0?n:[])if(ig(r)){const a=r,l=await a.tool();for(const u of(s=l.functionDeclarations)!==null&&s!==void 0?s:[]){if(!u.name)throw new Error("Function declaration name is required.");if(o.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);o.set(u.name,a)}}return o}async processAfcStream(t){var e,n,s;const o=(s=(n=(e=t.config)===null||e===void 0?void 0:e.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&s!==void 0?s:$I;let r=!1,a=0;const l=await this.initAfcToolsMap(t);return function(u,h,m){var p,v;return Dd(this,arguments,function*(){for(var C,x,k,S;a<o;){r&&(a++,r=!1);const D=yield Wt(u.processParamsForMcpUsage(m)),Y=yield Wt(u.generateContentStreamInternal(D)),F=[],j=[];try{for(var I=!0,P=(x=void 0,ng(Y)),O;O=yield Wt(P.next()),C=O.done,!C;I=!0){S=O.value,I=!1;const U=S;if(yield yield Wt(U),U.candidates&&(!((p=U.candidates[0])===null||p===void 0)&&p.content)){j.push(U.candidates[0].content);for(const X of(v=U.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(a<o&&X.functionCall){if(!X.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(X.functionCall.name)){const ae=yield Wt(h.get(X.functionCall.name).callTool([X.functionCall]));F.push(...ae)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${X.functionCall.name}`)}}}}catch(U){x={error:U}}finally{try{!I&&!C&&(k=P.return)&&(yield Wt(k.call(P)))}finally{if(x)throw x.error}}if(F.length>0){r=!0;const U=new nd;U.candidates=[{content:{role:"user",parts:F}}],yield yield Wt(U);const X=[];X.push(...j),X.push({role:"user",parts:F});const ae=vs(u.apiClient,m.contents).concat(X);m.contents=ae}else break}})}(this,l,t)}async generateContentInternal(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=FI(this.apiClient,t);return a=Fe("{model}:generateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>{const m=zI(this.apiClient,h),p=new nd;return Object.assign(p,m),p})}else{const u=BI(this.apiClient,t);return a=Fe("{model}:generateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const m=UI(this.apiClient,h),p=new nd;return Object.assign(p,m),p})}}async generateContentStreamInternal(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=FI(this.apiClient,t);a=Fe("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u.config,delete u._url,delete u._query;const h=this.apiClient;return r=h.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}),r.then(function(m){return Dd(this,arguments,function*(){var p,v,C,x;try{for(var k=!0,S=ng(m),I;I=yield Wt(S.next()),p=I.done,!p;k=!0){x=I.value,k=!1;const O=zI(h,yield Wt(x.json())),D=new nd;Object.assign(D,O),yield yield Wt(D)}}catch(P){v={error:P}}finally{try{!k&&!p&&(C=S.return)&&(yield Wt(C.call(S)))}finally{if(v)throw v.error}}})})}else{const u=BI(this.apiClient,t);a=Fe("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u.config,delete u._url,delete u._query;const h=this.apiClient;return r=h.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}),r.then(function(m){return Dd(this,arguments,function*(){var p,v,C,x;try{for(var k=!0,S=ng(m),I;I=yield Wt(S.next()),p=I.done,!p;k=!0){x=I.value,k=!1;const O=UI(h,yield Wt(x.json())),D=new nd;Object.assign(D,O),yield yield Wt(D)}}catch(P){v={error:P}}finally{try{!k&&!p&&(C=S.return)&&(yield Wt(C.call(S)))}finally{if(v)throw v.error}}})})}}async embedContent(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=nde(this.apiClient,t);return a=Fe("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>{const m=nhe(this.apiClient,h),p=new _I;return Object.assign(p,m),p})}else{const u=_ue(this.apiClient,t);return a=Fe("{model}:batchEmbedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const m=Dde(this.apiClient,h),p=new _I;return Object.assign(p,m),p})}}async generateImagesInternal(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=sde(this.apiClient,t);return a=Fe("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>{const m=she(this.apiClient,h),p=new wI;return Object.assign(p,m),p})}else{const u=yue(this.apiClient,t);return a=Fe("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const m=Bde(this.apiClient,h),p=new wI;return Object.assign(p,m),p})}}async editImageInternal(t){var e,n;let s,o="",r={};if(this.apiClient.isVertexAI()){const a=dde(this.apiClient,t);return o=Fe("{model}:predict",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(l=>{const u=ohe(this.apiClient,l),h=new Vre;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var e,n;let s,o="",r={};if(this.apiClient.isVertexAI()){const a=fde(this.apiClient,t);return o=Fe("{model}:predict",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(l=>{const u=rhe(this.apiClient,l),h=new Nre;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=mde(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>Lv(this.apiClient,h))}else{const u=vue(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>Ov(this.apiClient,h))}}async listInternal(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=pde(this.apiClient,t);return a=Fe("{models_url}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>{const m=uhe(this.apiClient,h),p=new yI;return Object.assign(p,m),p})}else{const u=Tue(this.apiClient,t);return a=Fe("{models_url}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const m=Ude(this.apiClient,h),p=new yI;return Object.assign(p,m),p})}}async update(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=_de(this.apiClient,t);return a=Fe("{model}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>Lv(this.apiClient,h))}else{const u=kue(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>Ov(this.apiClient,h))}}async delete(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=wde(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(()=>{const h=dhe(),m=new vI;return Object.assign(m,h),m})}else{const u=Eue(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(()=>{const h=zde(),m=new vI;return Object.assign(m,h),m})}}async countTokens(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=vde(this.apiClient,t);return a=Fe("{model}:countTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>{const m=hhe(this.apiClient,h),p=new CI;return Object.assign(p,m),p})}else{const u=Aue(this.apiClient,t);return a=Fe("{model}:countTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const m=Hde(this.apiClient,h),p=new CI;return Object.assign(p,m),p})}}async computeTokens(t){var e,n;let s,o="",r={};if(this.apiClient.isVertexAI()){const a=Cde(this.apiClient,t);return o=Fe("{model}:computeTokens",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(l=>{const u=fhe(this.apiClient,l),h=new Dre;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=xde(this.apiClient,t);return a=Fe("{model}:predictLongRunning",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>bhe(this.apiClient,h))}else{const u=Pue(this.apiClient,t);return a=Fe("{model}:predictLongRunning",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>Gde(this.apiClient,h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zhe(i,t){const e={},n=b(t,["operationName"]);n!=null&&w(e,["_url","operationName"],n);const s=b(t,["config"]);return s!=null&&w(e,["config"],s),e}function Hhe(i,t){const e={},n=b(t,["operationName"]);n!=null&&w(e,["_url","operationName"],n);const s=b(t,["config"]);return s!=null&&w(e,["config"],s),e}function Whe(i,t){const e={},n=b(t,["operationName"]);n!=null&&w(e,["operationName"],n);const s=b(t,["resourceName"]);s!=null&&w(e,["_url","resourceName"],s);const o=b(t,["config"]);return o!=null&&w(e,["config"],o),e}function qhe(i,t){const e={},n=b(t,["video","uri"]);n!=null&&w(e,["uri"],n);const s=b(t,["video","encodedVideo"]);s!=null&&w(e,["videoBytes"],Wr(i,s));const o=b(t,["encoding"]);return o!=null&&w(e,["mimeType"],o),e}function $he(i,t){const e={},n=b(t,["_self"]);return n!=null&&w(e,["video"],qhe(i,n)),e}function Ghe(i,t){const e={},n=b(t,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>$he(i,a))),w(e,["generatedVideos"],r)}const s=b(t,["raiMediaFilteredCount"]);s!=null&&w(e,["raiMediaFilteredCount"],s);const o=b(t,["raiMediaFilteredReasons"]);return o!=null&&w(e,["raiMediaFilteredReasons"],o),e}function jhe(i,t){const e={},n=b(t,["name"]);n!=null&&w(e,["name"],n);const s=b(t,["metadata"]);s!=null&&w(e,["metadata"],s);const o=b(t,["done"]);o!=null&&w(e,["done"],o);const r=b(t,["error"]);r!=null&&w(e,["error"],r);const a=b(t,["response","generateVideoResponse"]);return a!=null&&w(e,["response"],Ghe(i,a)),e}function Khe(i,t){const e={},n=b(t,["gcsUri"]);n!=null&&w(e,["uri"],n);const s=b(t,["bytesBase64Encoded"]);s!=null&&w(e,["videoBytes"],Wr(i,s));const o=b(t,["mimeType"]);return o!=null&&w(e,["mimeType"],o),e}function Zhe(i,t){const e={},n=b(t,["_self"]);return n!=null&&w(e,["video"],Khe(i,n)),e}function Yhe(i,t){const e={},n=b(t,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Zhe(i,a))),w(e,["generatedVideos"],r)}const s=b(t,["raiMediaFilteredCount"]);s!=null&&w(e,["raiMediaFilteredCount"],s);const o=b(t,["raiMediaFilteredReasons"]);return o!=null&&w(e,["raiMediaFilteredReasons"],o),e}function KI(i,t){const e={},n=b(t,["name"]);n!=null&&w(e,["name"],n);const s=b(t,["metadata"]);s!=null&&w(e,["metadata"],s);const o=b(t,["done"]);o!=null&&w(e,["done"],o);const r=b(t,["error"]);r!=null&&w(e,["error"],r);const a=b(t,["response"]);return a!=null&&w(e,["response"],Yhe(i,a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jhe extends Dh{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const e=t.operation,n=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=e.name.split("/operations/")[0];let o;return n&&"httpOptions"in n&&(o=n.httpOptions),this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:s,config:{httpOptions:o}})}else return this.getVideosOperationInternal({operationName:e.name,config:n})}async getVideosOperationInternal(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=Hhe(this.apiClient,t);return a=Fe("{operationName}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>KI(this.apiClient,h))}else{const u=zhe(this.apiClient,t);return a=Fe("{operationName}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>jhe(this.apiClient,h))}}async fetchPredictVideosOperationInternal(t){var e,n;let s,o="",r={};if(this.apiClient.isVertexAI()){const a=Whe(this.apiClient,t);return o=Fe("{resourceName}:fetchPredictOperation",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(l=>KI(this.apiClient,l))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xhe(i,t){const e={},n=b(t,["name"]);n!=null&&w(e,["_url","name"],n);const s=b(t,["config"]);return s!=null&&w(e,["config"],s),e}function Qhe(i,t,e){const n={},s=b(t,["pageSize"]);e!==void 0&&s!=null&&w(e,["_query","pageSize"],s);const o=b(t,["pageToken"]);e!==void 0&&o!=null&&w(e,["_query","pageToken"],o);const r=b(t,["filter"]);return e!==void 0&&r!=null&&w(e,["_query","filter"],r),n}function efe(i,t){const e={},n=b(t,["config"]);return n!=null&&w(e,["config"],Qhe(i,n,e)),e}function tfe(i,t){const e={},n=b(t,["textInput"]);n!=null&&w(e,["textInput"],n);const s=b(t,["output"]);return s!=null&&w(e,["output"],s),e}function nfe(i,t){const e={};if(b(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=b(t,["examples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>tfe(i,o))),w(e,["examples","examples"],s)}return e}function ife(i,t,e){const n={};if(b(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=b(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&w(e,["displayName"],s),b(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=b(t,["epochCount"]);e!==void 0&&o!=null&&w(e,["tuningTask","hyperparameters","epochCount"],o);const r=b(t,["learningRateMultiplier"]);if(r!=null&&w(n,["tuningTask","hyperparameters","learningRateMultiplier"],r),b(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(b(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=b(t,["batchSize"]);e!==void 0&&a!=null&&w(e,["tuningTask","hyperparameters","batchSize"],a);const l=b(t,["learningRate"]);return e!==void 0&&l!=null&&w(e,["tuningTask","hyperparameters","learningRate"],l),n}function sfe(i,t){const e={},n=b(t,["baseModel"]);n!=null&&w(e,["baseModel"],n);const s=b(t,["trainingDataset"]);s!=null&&w(e,["tuningTask","trainingData"],nfe(i,s));const o=b(t,["config"]);return o!=null&&w(e,["config"],ife(i,o,e)),e}function ofe(i,t){const e={},n=b(t,["name"]);n!=null&&w(e,["_url","name"],n);const s=b(t,["config"]);return s!=null&&w(e,["config"],s),e}function rfe(i,t,e){const n={},s=b(t,["pageSize"]);e!==void 0&&s!=null&&w(e,["_query","pageSize"],s);const o=b(t,["pageToken"]);e!==void 0&&o!=null&&w(e,["_query","pageToken"],o);const r=b(t,["filter"]);return e!==void 0&&r!=null&&w(e,["_query","filter"],r),n}function afe(i,t){const e={},n=b(t,["config"]);return n!=null&&w(e,["config"],rfe(i,n,e)),e}function lfe(i,t,e){const n={},s=b(t,["gcsUri"]);if(e!==void 0&&s!=null&&w(e,["supervisedTuningSpec","trainingDatasetUri"],s),b(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function cfe(i,t){const e={},n=b(t,["gcsUri"]);return n!=null&&w(e,["validationDatasetUri"],n),e}function ufe(i,t,e){const n={},s=b(t,["validationDataset"]);e!==void 0&&s!=null&&w(e,["supervisedTuningSpec"],cfe(i,s));const o=b(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&w(e,["tunedModelDisplayName"],o);const r=b(t,["description"]);e!==void 0&&r!=null&&w(e,["description"],r);const a=b(t,["epochCount"]);e!==void 0&&a!=null&&w(e,["supervisedTuningSpec","hyperParameters","epochCount"],a);const l=b(t,["learningRateMultiplier"]);e!==void 0&&l!=null&&w(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],l);const u=b(t,["exportLastCheckpointOnly"]);e!==void 0&&u!=null&&w(e,["supervisedTuningSpec","exportLastCheckpointOnly"],u);const h=b(t,["adapterSize"]);if(e!==void 0&&h!=null&&w(e,["supervisedTuningSpec","hyperParameters","adapterSize"],h),b(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(b(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function dfe(i,t){const e={},n=b(t,["baseModel"]);n!=null&&w(e,["baseModel"],n);const s=b(t,["trainingDataset"]);s!=null&&w(e,["supervisedTuningSpec","trainingDatasetUri"],lfe(i,s,e));const o=b(t,["config"]);return o!=null&&w(e,["config"],ufe(i,o,e)),e}function hfe(i,t){const e={},n=b(t,["name"]);n!=null&&w(e,["model"],n);const s=b(t,["name"]);return s!=null&&w(e,["endpoint"],s),e}function IO(i,t){const e={},n=b(t,["name"]);n!=null&&w(e,["name"],n);const s=b(t,["state"]);s!=null&&w(e,["state"],fO(i,s));const o=b(t,["createTime"]);o!=null&&w(e,["createTime"],o);const r=b(t,["tuningTask","startTime"]);r!=null&&w(e,["startTime"],r);const a=b(t,["tuningTask","completeTime"]);a!=null&&w(e,["endTime"],a);const l=b(t,["updateTime"]);l!=null&&w(e,["updateTime"],l);const u=b(t,["description"]);u!=null&&w(e,["description"],u);const h=b(t,["baseModel"]);h!=null&&w(e,["baseModel"],h);const m=b(t,["_self"]);m!=null&&w(e,["tunedModel"],hfe(i,m));const p=b(t,["distillationSpec"]);p!=null&&w(e,["distillationSpec"],p);const v=b(t,["experiment"]);v!=null&&w(e,["experiment"],v);const C=b(t,["labels"]);C!=null&&w(e,["labels"],C);const x=b(t,["pipelineJob"]);x!=null&&w(e,["pipelineJob"],x);const k=b(t,["tunedModelDisplayName"]);return k!=null&&w(e,["tunedModelDisplayName"],k),e}function ffe(i,t){const e={},n=b(t,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=b(t,["tunedModels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>IO(i,r))),w(e,["tuningJobs"],o)}return e}function mfe(i,t){const e={},n=b(t,["name"]);n!=null&&w(e,["name"],n);const s=b(t,["metadata"]);s!=null&&w(e,["metadata"],s);const o=b(t,["done"]);o!=null&&w(e,["done"],o);const r=b(t,["error"]);return r!=null&&w(e,["error"],r),e}function gfe(i,t){const e={},n=b(t,["checkpointId"]);n!=null&&w(e,["checkpointId"],n);const s=b(t,["epoch"]);s!=null&&w(e,["epoch"],s);const o=b(t,["step"]);o!=null&&w(e,["step"],o);const r=b(t,["endpoint"]);return r!=null&&w(e,["endpoint"],r),e}function pfe(i,t){const e={},n=b(t,["model"]);n!=null&&w(e,["model"],n);const s=b(t,["endpoint"]);s!=null&&w(e,["endpoint"],s);const o=b(t,["checkpoints"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>gfe(i,a))),w(e,["checkpoints"],r)}return e}function Uv(i,t){const e={},n=b(t,["name"]);n!=null&&w(e,["name"],n);const s=b(t,["state"]);s!=null&&w(e,["state"],fO(i,s));const o=b(t,["createTime"]);o!=null&&w(e,["createTime"],o);const r=b(t,["startTime"]);r!=null&&w(e,["startTime"],r);const a=b(t,["endTime"]);a!=null&&w(e,["endTime"],a);const l=b(t,["updateTime"]);l!=null&&w(e,["updateTime"],l);const u=b(t,["error"]);u!=null&&w(e,["error"],u);const h=b(t,["description"]);h!=null&&w(e,["description"],h);const m=b(t,["baseModel"]);m!=null&&w(e,["baseModel"],m);const p=b(t,["tunedModel"]);p!=null&&w(e,["tunedModel"],pfe(i,p));const v=b(t,["supervisedTuningSpec"]);v!=null&&w(e,["supervisedTuningSpec"],v);const C=b(t,["tuningDataStats"]);C!=null&&w(e,["tuningDataStats"],C);const x=b(t,["encryptionSpec"]);x!=null&&w(e,["encryptionSpec"],x);const k=b(t,["partnerModelTuningSpec"]);k!=null&&w(e,["partnerModelTuningSpec"],k);const S=b(t,["distillationSpec"]);S!=null&&w(e,["distillationSpec"],S);const I=b(t,["experiment"]);I!=null&&w(e,["experiment"],I);const P=b(t,["labels"]);P!=null&&w(e,["labels"],P);const O=b(t,["pipelineJob"]);O!=null&&w(e,["pipelineJob"],O);const D=b(t,["tunedModelDisplayName"]);return D!=null&&w(e,["tunedModelDisplayName"],D),e}function bfe(i,t){const e={},n=b(t,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=b(t,["tuningJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>Uv(i,r))),w(e,["tuningJobs"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _fe extends Dh{constructor(t){super(),this.apiClient=t,this.get=async e=>await this.getInternal(e),this.list=async(e={})=>new Wp(Ic.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(e),e),this.tune=async e=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(e);{const n=await this.tuneMldevInternal(e);let s="";return n.metadata!==void 0&&n.metadata.tunedModel!==void 0?s=n.metadata.tunedModel:n.name!==void 0&&n.name.includes("/operations/")&&(s=n.name.split("/operations/")[0]),{name:s,state:Pv.JOB_STATE_QUEUED}}}}async getInternal(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=ofe(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>Uv(this.apiClient,h))}else{const u=Xhe(this.apiClient,t);return a=Fe("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>IO(this.apiClient,h))}}async listInternal(t){var e,n,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=afe(this.apiClient,t);return a=Fe("tuningJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>{const m=bfe(this.apiClient,h),p=new TI;return Object.assign(p,m),p})}else{const u=efe(this.apiClient,t);return a=Fe("tunedModels",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const m=ffe(this.apiClient,h),p=new TI;return Object.assign(p,m),p})}}async tuneInternal(t){var e,n;let s,o="",r={};if(this.apiClient.isVertexAI()){const a=dfe(this.apiClient,t);return o=Fe("tuningJobs",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(l=>Uv(this.apiClient,l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var e,n;let s,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=sfe(this.apiClient,t);return o=Fe("tunedModels",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(l=>mfe(this.apiClient,l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wfe{async download(t,e){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const yfe=1024*1024*8,vfe=3,Cfe=1e3,Tfe=2,gy="x-goog-upload-status";async function xfe(i,t,e){var n,s,o;let r=0,a=0,l=new Mv(new Response),u="upload";for(r=i.size;a<r;){const m=Math.min(yfe,r-a),p=i.slice(a,a+m);a+m>=r&&(u+=", finalize");let v=0,C=Cfe;for(;v<vfe&&(l=await e.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(a),"Content-Length":String(m)}}}),!(!((n=l==null?void 0:l.headers)===null||n===void 0)&&n[gy]));)v++,await Efe(C),C=C*Tfe;if(a+=m,((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[gy])!=="active")break;if(r<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(l==null?void 0:l.json());if(((o=l==null?void 0:l.headers)===null||o===void 0?void 0:o[gy])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function kfe(i){return{size:i.size,type:i.type}}function Efe(i){return new Promise(t=>setTimeout(t,i))}class Sfe{async upload(t,e,n){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await xfe(t,e,n)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await kfe(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Afe{create(t,e,n){return new Rfe(t,e,n)}}class Rfe{constructor(t,e,n){this.url=t,this.headers=e,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZI="x-goog-api-key";class Ife{constructor(t){this.apiKey=t}async addAuthHeaders(t){t.get(ZI)===null&&t.append(ZI,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pfe="gl-node/";class Mfe{constructor(t){var e;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(e=t.vertexai)!==null&&e!==void 0?e:!1,this.apiKey=t.apiKey;const n=Mre(t,void 0,void 0);n&&(t.httpOptions?t.httpOptions.baseUrl=n:t.httpOptions={baseUrl:n}),this.apiVersion=t.apiVersion;const s=new Ife(this.apiKey);this.apiClient=new khe({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:Pfe+"web",uploader:new Sfe,downloader:new wfe}),this.models=new Uhe(this.apiClient),this.live=new Dhe(this.apiClient,s,new Afe),this.chats=new Jae(this.models,this.apiClient),this.caches=new Kae(this.apiClient),this.files=new ule(this.apiClient),this.operations=new Jhe(this.apiClient),this.tunings=new _fe(this.apiClient)}}const Vfe=new Mfe({apiKey:p7});function Nfe(){const i=async()=>{const o=await Vfe.models.generateContent({model:"gemini-2.0-flash",contents:t+"<- 가독성이 좋게 html 태그 형식으로 대답해줘. html 문서 전체가 아니라 <body> 태그 내부에 들어가는 코드로만 대답해줘. 태그의 스타일은 inline style로 적용해줘. input 태그에 들어간 문장을 20px의 빨간색 굵은 글씨로 다시 말해주고 대답해줘."});console.log(o.text);let r=o.text;r=r.replaceAll("`","").replaceAll("html",""),s(r)},[t,e]=H.useState(""),[n,s]=H.useState("");return A.jsxs("div",{className:"flex",children:[A.jsx(Fr,{from:"/petQuestion"}),A.jsxs("div",{className:"w-4/5 px-6 max-sm:w-full max-sm:px-2 mb-8",children:[A.jsx("h1",{className:"p-4 text-3xl font-bold border-b border-b-gray-300",children:"무엇이든 물어보살"}),A.jsxs("div",{className:"w-3/5 border border-primary-500 my-6 m-auto rounded-sm",children:[A.jsx("input",{className:"w-4/5 px-4",onChange:o=>e(o.target.value),type:"text"}),A.jsx("button",{className:"bg-primary-500 text-white p-2 rounded-sm w-1/5",onClick:i,children:"질문하기"})]}),A.jsxs("div",{className:"",children:[A.jsx("p",{className:"mb-4",children:"AI 동물전문가의 답변"}),A.jsx("div",{className:"border border-gray-400 p-8 rounded-sm",dangerouslySetInnerHTML:{__html:n}})]})]})]})}const Dfe="/animal-center/assets/upload-TecGzrc1.jpg";function Ofe(){const i="https://teachablemachine.withgoogle.com/models/LxqrQ-aHu/",t=H.useRef(),e=H.useRef();async function n(){const u=i+"model.json",h=i+"metadata.json";t.current=await tmImage.load(u,h),e.current=t.current.getTotalClasses()}H.useEffect(()=>{n()},[]);async function s(){const u=await t.current.predict(document.getElementById("photo"));let h=0,m="";for(let p=0;p<e.current;p++){const v=u[p].className+": "+u[p].probability.toFixed(2);console.log(v),h<u[p].probability&&(h=u[p].probability,m=u[p].className)}console.log(h),console.log(m),a(m)}const o=H.useRef(),[r,a]=H.useState(""),l=u=>{console.log(u.target),console.log(u.target.files),console.log(u.target.files[0]);const h=new FileReader;h.onload=m=>{document.getElementById("photo").src=m.target.result,setTimeout(s,100)},h.readAsDataURL(u.target.files[0])};return A.jsxs("div",{className:"flex",children:[A.jsx(Fr,{from:"/animalReport"}),A.jsxs("div",{className:"w-4/5 px-6 max-sm:w-full max-sm:px-2",children:[A.jsx("h1",{className:"p-4 text-3xl font-bold border-b border-b-gray-300",children:"유기동물 신고"}),A.jsxs("div",{className:"w-4/5 m-auto",children:[A.jsx("input",{ref:o,type:"file",accept:"image/*",onChange:u=>l(u),hidden:!0}),A.jsx("div",{className:"h-80 mt-10 flex justify-center",children:A.jsx("img",{className:"h-full cursor-pointer",id:"photo",src:Dfe,alt:"",onClick:()=>o.current.click()})}),A.jsxs("div",{className:"flex my-4 justify-center",children:[A.jsxs("select",{className:"bg-white p-2 border border-gray-300",children:[A.jsx("option",{children:"--전체--"}),A.jsx("option",{children:"개"}),A.jsx("option",{children:"고양이"}),A.jsx("option",{children:"기타동물"})]}),A.jsx("input",{value:r,className:"bg-white p-2 border border-gray-300 mx-1",type:"text"}),A.jsx("button",{className:"bg-gray-700 text-white px-4",children:"신고"})]})]})]})]})}function Lfe(){return A.jsxs("div",{className:"container m-auto",children:[A.jsx(VF,{}),A.jsx("div",{className:"h-40",children:A.jsx("a",{href:"https://www.daejeon.go.kr/ani/AniContentsHtmlView.do?menuSeq=5861",target:"_blank",rel:"noopener noreferrer",children:A.jsx("img",{className:"h-full object-cover",src:i3,alt:""})})}),A.jsxs(J3,{children:[A.jsx(fs,{path:"/",element:A.jsx(b7,{})}),A.jsx(fs,{path:"/animalDetail",element:A.jsx(_7,{})}),A.jsx(fs,{path:"/contactUs",element:A.jsx(w7,{})}),A.jsx(fs,{path:"/animalChart",element:A.jsx(q8,{})}),A.jsx(fs,{path:"/animalList",element:A.jsx($8,{})}),A.jsx(fs,{path:"/petRestaurant",element:A.jsx(K8,{})}),A.jsx(fs,{path:"/infoPet",element:A.jsx(yoe,{})}),A.jsx(fs,{path:"/petQuestion",element:A.jsx(Nfe,{})}),A.jsx(fs,{path:"/animalReport",element:A.jsx(Ofe,{})}),A.jsx(fs,{path:"*",element:A.jsx(j8,{})})]}),A.jsx(NF,{})]})}n3.createRoot(document.getElementById("root")).render(A.jsx(H.StrictMode,{children:A.jsx(CF,{children:A.jsx(Lfe,{})})}));
